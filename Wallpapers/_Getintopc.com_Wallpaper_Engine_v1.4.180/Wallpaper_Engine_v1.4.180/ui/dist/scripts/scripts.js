"use strict";angular.isUndefinedOrNull=function(e){return angular.isUndefined(e)||null===e},angular.offsetToAncestor=function(e,t){return{left:e.pageX-t.offset().left+t.scrollLeft(),top:e.pageY-t.offset().top+t.scrollTop()}},angular.frameTimeout=function(t,e,a){for(var i=function(e){return function(){t(e)}},n=i(a),o=1;o<e;++o)n=i(n);n()},angular.clearHashKeys=function(e){angular.isObject(e)&&delete e.$$hashKey,(angular.isObject(e)||angular.isArray(e))&&angular.forEach(e,function(e){angular.clearHashKeys(e)})},angular.hasNestedMember=function(e,t){if(angular.isObject(e)&&e.hasOwnProperty(t)&&angular.isDefined(e[t]))return!0;if(angular.isObject(e)||angular.isArray(e)){var a=!1;return angular.forEach(e,function(e){(angular.isObject(e)||angular.isArray(e))&&(a=a||angular.hasNestedMember(e,t))}),a}return!1},angular.sanitizeObject=function(e){return angular.fromJson(angular.toJson(e))},String.prototype.beginsWith=function(e){return 0===this.indexOf(e)},Math.clamp=function(e,t,a){return Math.max(t,Math.min(e,a))},Math.easeInOutQuad=function(e){return e<.5?2*e*e:(4-2*e)*e-1},Math.easeInOutCubic=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},Array.prototype.findAndRemove=function(e){if(angular.isFunction(e))for(var t=0;t<this.length;++t)e(this[t])&&(this.splice(t,1),--t);else{var a=this.indexOf(e);0<=a&&this.splice(a,1)}},Array.prototype.findAndReplace=function(e,t){for(var a=0;a<this.length;++a)if(e(this[a]))return this.splice(a,1,t);return[]},Array.prototype.pushIfNew=function(e,t){angular.isFunction(t)?e&&this.findIndex(t)<0&&this.push(e):e&&!this.includes(e)&&this.push(e)},Array.prototype.unshiftIfNew=function(e){e&&!this.includes(e)&&this.unshift(e)},Array.prototype.sliceLimit=function(e,t){return e>this.length||t<0?[]:this.slice(Math.max(0,e),Math.min(this.length,t))},Array.prototype.shuffle=function(){var e,t,a,i=this;for(a=i.length-1;0<a;a--)e=Math.floor(Math.random()*(a+1)),t=i[a],i[a]=i[e],i[e]=t;return i},Array.prototype.last=function(){return 0<this.length?this[this.length-1]:void 0},Array.prototype.move=function(e,t){this.splice(t,0,this.splice(e,1)[0])},Array.prototype.uniquify=function(){return Array.from(new Set(this))},Array.prototype.empty=function(){return 0===this.length},String.prototype.hashCode=function(){for(var e=0,t=this.length,a=0;a<t;a++)e=31*e+this.charCodeAt(a),e&=e;return e},JSON.validate=function(e,t){try{JSON.parse(e)}catch(e){return angular.isObject(t)&&(t.exception=e&&e.message),!1}return!0},JSON.clean=function(e){return angular.isObject(e)||angular.isArray(e)?angular.fromJson(angular.toJson(e)):angular.isString()?angular.toJson(angular.fromJson(e)):void 0},window.safeApply=function(e){var t=e.$root.$$phase;"$apply"!==t&&"$digest"!==t&&e.$apply()},window.cancelEventBubble=function(e){e.stopPropagation(),e.preventDefault()},window.cancelEventImmediately=function(e){e.stopImmediatePropagation(),e.preventDefault()},angular.module("wallpaperbrowserApp",["ngRoute","ui.bootstrap","ngAnimate","rzModule","angularSpectrumColorpicker","toastr","ngSanitize","ngTagsInput","pascalprecht.translate"]).config(["$routeProvider","$compileProvider","$locationProvider","$sceDelegateProvider","toastrConfig",function(e,t,a,i,n){e.when("/browsewallpapers",{templateUrl:"views/views/browsewallpapers.html",controller:"BrowseWallpapersCtrl",options:{caption:"ui_caption_browse",expectProviderConnection:!0}}).when("/settings",{templateUrl:"views/views/settings.html",controller:"SettingsCtrl",options:{caption:"ui_caption_settings"}}).when("/editor",{templateUrl:"views/views/editor.html",controller:"EditorCtrl",options:{caption:"ui_caption_editor",expectProviderConnection:!0}}).when("/welcome",{templateUrl:"views/views/welcome.html",controller:"WelcomeCtrl",options:{caption:" ",isDialog:!0,hideTitle:!1}}).when("/",{templateUrl:"views/views/empty.html",controller:"EmptyCtrl"}).otherwise({redirectTo:"/"}),a.hashPrefix(""),t.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|mailto|chrome-extension|file|data):/),t.debugInfoEnabled(!1),t.commentDirectivesEnabled(!1),t.cssClassDirectivesEnabled(!1),i.resourceUrlWhitelist(["self","https://www.youtube.com/**"]),angular.extend(n,{positionClass:"toast-bottom-right"}),console.error("CEF ANGULARJS PAGELOAD - config 1")}]).config(["$translateProvider",function(e){e.preferredLanguage("en-us"),e.fallbackLanguage("en-us"),e.useLoader("localeLoader"),e.useSanitizeValueStrategy("sce"),console.error("CEF ANGULARJS PAGELOAD - config 2")}]).factory("localeLoader",["$q","$http","localeLoaderSupport",function(e,o,r){console.error("CEF ANGULARJS PAGELOAD - declare localeLoader");var s={};return function(a){function i(e){var t=r.getTranslations(a.key);angular.isObject(t)&&(angular.extend(t,e),e=t),n.resolve(e)}var n=e.defer();if(angular.isObject(s[a.key]))console.error("CEF ANGULARJS PAGELOAD - resolve locale from cache",a.key),i(s[a.key]);else{console.error("CEF ANGULARJS PAGELOAD - resolve locale via request","applocale://"+a.key);var t=e.defer();window.global._wpxLocale?t.resolve(window.global._wpxLocale(a.key)):o.get("applocale://"+a.key).then(function(e){t.resolve({success:!0,translations:angular.toJson(e.data)})}).catch(function(){t.resolve({success:!1})}),t.promise.then(function(e){if(e.success){var t=angular.fromJson(e.translations);"en-us"===a.key&&angular.extend(t,{"system_language_ar-sa":"اللغة العربية الفصحى","system_language_bg-bg":"български","system_language_cs-cz":"čeština","system_language_da-dk":"Dansk","system_language_de-de":"Deutsch","system_language_el-gr":"Eλληνικά","system_language_en-us":"English","system_language_es-es":"Español","system_language_eu-es":"Euskara","system_language_fi-fi":"Suomi","system_language_fr-fr":"Français","system_language_he-il":"עברית","system_language_hu-hu":"Magyar","system_language_id-id":"Bahasa Indonesia","system_language_it-it":"Italiano","system_language_ja-jp":"日本語","system_language_ko-kr":"한국어","system_language_lt-lt":"Lietuvių kalba","system_language_nl-nl":"Nederlands","system_language_nb-no":"Norsk","system_language_pl-pl":"Polski","system_language_pt-br":"Português-Brasil","system_language_pt-pt":"Português","system_language_ro-ro":"Română","system_language_ru-ru":"Русский язык","system_language_sk-sk":"Slovenčina","system_language_sl-si":"Slovenščina","system_language_sv-se":"Svenska","system_language_th-th":"ภาษาไทย","system_language_tr-tr":"Türkçe","system_language_uk-ua":"Українська","system_language_vi-vn":"tiếng việt","system_language_zh-chs":"简体中文","system_language_zh-cht":"繁體中文"}),s[a.key]=t,console.error("CEF ANGULARJS PAGELOAD - success localeLoader"),i(t)}else console.error("CEF ANGULARJS PAGELOAD - error localeLoader"),i({})})}return console.error("CEF ANGULARJS PAGELOAD - request localeLoader"),n.promise}}]).run(["$rootScope","$location","$route","$timeout","skin","utils",function(e,t,a,i,n,o){window.rootScope=e,window.utilsService=o,window.skinService=n;var r=new URL(window.location.href),s=r.searchParams.get("provider"),l=r.searchParams.get("lang");o.setProvider(s),"wegame"===s?o.setLanguage("zh-chs"):l&&o.setLanguage(l),console.error("CEF ANGULARJS PAGELOAD - run");function c(){return!!(p.needsInit&&window&&window.global&&angular.isFunction(window.global.jsInit))&&(p.needsInit=!1,console.error("CEF ANGULARJS PAGELOAD - notify cpp"),null!==l&&a.current&&a.current.options&&a.current.options.expectProviderConnection&&n.onOSProviderConnectionChanged(!0),window.global.jsInit(),!0)}var d,p={needsInit:!0};d=e.$on("$routeChangeSuccess",function(){console.error("CEF ANGULARJS PAGELOAD - route changed"),angular.isFunction(d)&&(d(),d=void 0,i(c,100))});var u=function(){i(function(){c()?console.error("CEF ANGULARJS PAGELOAD - notified cpp from backup timer"):p.needsInit&&u()})};angular.element(function(){i(function(){u()},3e3)})}]).filter("filename",function(){return function(e){return e?e.replace(/^.*[\\\/]/,""):e}}),angular.module("wallpaperbrowserApp").controller("MainCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("wallpaperbrowserApp").directive("titlebar",["$rootScope","$route","skin",function(e,t,n){return{templateUrl:"views/templates/titlebar.html",restrict:"E",link:function(a){function i(e){angular.isObject(e)&&angular.isObject(e.options)&&(a.caption=e.options.caption,a.isDialog=e.options.isDialog,a.hideTitle=e.options.hideTitle)}a.isMaximized=n.isMaximized(),a.isDialog=!1,a.maximizeEnabled=!0,a.caption="404",a.captionValues={},a.closeWindow=function(){n.runCloseCallbacks().then(function(){window.ui.close()})},a.$on("onMaximizedChanged",function(e,t){a.isMaximized=t,window.safeApply(a)}),a.$on("onMaximizeEnabledChanged",function(e,t){a.maximizeEnabled=t,window.safeApply(a)}),a.$on("$routeChangeSuccess",function(e,t){i(t)}),e.$on("onVersionSubmitted",function(e,t){a.captionValues.version=t}),i(t.current)}}}]),angular.module("wallpaperbrowserApp").service("skin",["$rootScope","$q","$document","$timeout","utils","modals",function(t,a,e,i,n,o){var r,s=!1,l=0,c=0,d=[],p=!1;this.setWindowsVersion=function(e,t){l=e,c=t},this.getWindowsVersion=function(){return l},this.getWindowsBuild=function(){return c},this.isMaximized=function(){return s},this.setAvailableSkins=function(e){0},this.refreshSkin=function(){window.ui.refreshSkin()},this.setMaximized=function(e){s=e,t.$broadcast("onMaximizedChanged",e)},this.setMaximizeEnabled=function(e){t.$broadcast("onMaximizeEnabledChanged",e)},this.flashWindow=function(){e[0].body.className=e[0].body.className.replace(" captionFlashAnim",""),i(function(){e[0].body.className+=" captionFlashAnim"}),i(function(){e[0].body.className=e[0].body.className.replace(" captionFlashAnim","")},1e3)},this.onOSModalChanged=function(e){t.osModalActive=e,t.$apply()},this.onOSProviderConnectionChanged=function(e){e&&n.showOSProviderConnectionOverlay()?r=r||i(function(){t.osProviderIsConnecting=!0,t.$apply()},2e3):(i.cancel(r),r=void 0,t.osProviderIsConnecting=!1,t.$apply())},this.addCloseCallback=function(e){d.push(e)},this.removeCloseCallback=function(e){d.findAndRemove(e)},this.runCloseCallbacks=function(){var t=a.when();return angular.forEach(d,function(e){t=t.then(e)}),t},this.applyDWMColorSettings=function(e){var t=a.defer();if(!0===e.adjustdwmcolorwarning)t.resolve();else{if(!1!==e.adjustdwmcolor&&l<10||"disabled"!==e.adjustdwmcolormode&&10<=l)return o.open("genericConfirm",{data:{title:"ui_settings_adjust_windows_color_warning_header",message:"ui_settings_adjust_windows_color_warning_body",cancelVisible:!0,okVisible:!0}},{backdropClass:"modal-backdrop-danger"}).then(function(){e.adjustdwmcolorwarning=!0}).catch(function(){e.adjustdwmcolor=!1,e.adjustdwmcolormode="disabled"});t.resolve()}return t.promise},this.isDarkTheme=function(){return["dark","halloween","moss","rust","obsidian","space","winter"].includes(angular.element("#mainStyle").attr("skin-key"))},this.isDebugMode=function(){return p},t.$on("onCppInit",function(e,t){p=t})}]),angular.module("wallpaperbrowserApp").controller("BrowseWallpapersCtrl",["$document","$http","$filter","$translate","$parse","$timeout","$q","$rootScope","$scope","$location","contextMenu","utils","modals","host","skin","dragdrop","localeLoaderSupport",function(e,n,o,k,t,S,x,a,E,i,C,A,P,T,R,r,s){var I,O,d,p,l,c,u=["76561197975619619","76561198008830389","76561198447701318"],g=angular.element("#PlaylistContainer"),f=angular.element("#PlaylistContainerRow"),m=angular.element("#BrowseWallpaperGrid"),v={},h=!1,b={},_=!1,y=[],w=1,M=!0,D=!1,j=0,W={},L={},F=[],B=[],H=[],N={current:1,count:1,pages:[],visible:!0},V={current:1,count:1,pages:[],visible:!1},U=angular.copy(N),z={name:function(e,t){return angular.isString(e.title)&&angular.isString(t.title)?e.title.localeCompare(t.title):0},rating:function(e,t){return e.rating===t.rating?z.name(e,t):t.rating-e.rating},subscriptiondate:function(e,t){return e.subscriptiondate===t.subscriptiondate&&0===e.subscriptiondate?z.name(e,t):e.subscriptiondate>t.subscriptiondate?-1:1},updatedate:function(e,t){return e.updatedate===t.updatedate&&0===e.updatedate?z.name(e,t):e.updatedate>t.updatedate?-1:1},favorite:function(e,t){return e.favorite!==t.favorite?e.favorite?-1:1:z.name(e,t)},filesize:function(e,t){return e.filesize===t.filesize&&0===e.filesize?z.name(e,t):e.filesize>t.filesize?-1:1}},$={name:function(e,t){return angular.isString(e.title)&&angular.isString(t.title)?t.title.localeCompare(e.title):0},rating:function(e,t){return e.rating===t.rating?$.name(e,t):e.rating-t.rating},subscriptiondate:function(e,t){return e.subscriptiondate===t.subscriptiondate&&0===e.subscriptiondate?$.name(e,t):t.subscriptiondate>e.subscriptiondate?-1:1},updatedate:function(e,t){return e.updatedate===t.updatedate&&0===e.updatedate?$.name(e,t):t.updatedate>e.updatedate?-1:1},favorite:function(e,t){return e.favorite!==t.favorite?t.favorite?-1:1:$.name(e,t)},filesize:function(e,t){return e.filesize===t.filesize&&0===e.filesize?$.name(e,t):t.filesize>e.filesize?-1:1}};function q(){return{delay:60,order:"random",mode:"timer",clock:"clock24",transition:!1,videosequence:!1,updateonpause:!1}}function G(){var e=A.getResolutionTags(),t={};return angular.forEach(e,function(e){t[e]=!0}),t}function K(e){var t=A.getAvailableTags(),a={};return angular.forEach(t,function(e){a[e]=!0}),e||(a.Unspecified=!1),a}function Y(e){return!1===e.Anime?["Anime","MMD","Girls","Guys","Music"]:[]}function Q(e){return"workshop"===e?{type:"",categorytags:{Wallpaper:!0,Preset:!0},typetags:{Scene:!0,Web:!0,Application:!1,Video:!0},sourcetags:{Official:!0,Workshop:!0,Local:!0},ratingtags:{Mature:!1,Questionable:!1,Everyone:!0},resolutiontags:G(),tags:K(),utilitytags:{},sort:"top_rated",descending:!1,text:"",filterTitle:!0}:{type:"",categorytags:{Wallpaper:!0,Preset:!0},typetags:{Scene:!0,Web:!0,Application:!0,Video:!0},sourcetags:{Official:!0,Workshop:!0,Local:!0},ratingtags:{Mature:!0,Questionable:!0,Everyone:!0},resolutiontags:G(),tags:K(!0),utilitytags:{},sort:F[0].value,descending:!1,text:""}}function J(){h=!0,S(function(){h=!1})}function X(){return!angular.isObject(E.steamWorkshopStatus)||!E.steamWorkshopStatus.error}function Z(e){return 3.5<e.w/e.h||3.5<e.h/e.w}function ee(){E.sourceIsExplore?(angular.forEach(E.sortedExploreQueries,function(e){angular.isArray(e.wallpapers)&&(e.wallpapers=e.wallpapers.slice())}),E.sortedFolders=[]):E.sourceIsWorkshop&&(E.sortedFolders=[]),E.sortedWallpapers=E.sortedWallpapers.slice()}function te(e){if("Scene"===e.type||"Video"===e.type){var a=A.getSharedDefaultProperties();angular.forEach(e.defaultproperties,function(e,t){angular.isDefined(a[t])&&(e.value=a[t])})}}function ae(){if(E.sourceIsInstalled)return E.sortedFoldersPrePagination.concat(E.sortedWallpapersPrePagination);if(E.sourceIsWorkshop)return E.queryWallpapers;if(E.sourceIsExplore){if(E.exploreNavigation[0].key){var t=[];return angular.forEach(E.sortedExploreQueries,function(e){angular.isArray(e.wallpapers)&&(t=t.concat(e.wallpapers))}),t}return E.sortedWallpapers}}function ie(){if(!E.sourceIsInstalled)return E.sortedWallpapersPrePagination=[],E.sortedFoldersPrePagination=[],void ee();var t=E.currentFolder&&E.currentFolder.items,e=E.currentFolder&&E.currentFolder.subfolders||E.folders||[],i=[],a=E.wallpapers;i=(a=(angular.isObject(t)?angular.forEach(a,function(e){t[e.workshopid||e.file]&&i.push(e)}):angular.forEach(a,function(e){E.folderRootExclusion[e.workshopid||e.file]||i.push(e)}),i),[]),A.requiresFullAsyncWorkshop()&&(a=a.filter(function(e){return"downloadable"!==e.status}));var n=a.length,o=[],r=[];if(E.filterTemp.filterFavoritesOnly&&(a=a.filter(function(e){return e.favorite})),angular.forEach(E.filter.categorytags,function(e,t){e||r.push(t)}),angular.forEach(E.filter.typetags,function(e,t){e||r.push(t)}),angular.forEach(E.filter.sourcetags,function(e,t){e||r.push(t)}),angular.forEach(E.filter.resolutiontags,function(e,t){e||r.push(t)}),angular.forEach(E.filter.ratingtags,function(e,t){e||r.push(t)}),angular.forEach(E.filter.tags,function(e,t){e||r.push(t)}),angular.forEach(E.filter.utilitytags,function(e,t){1===e?o.push(t):2===e&&r.push(t)}),0<o.length&&(angular.forEach(a,function(t){angular.forEach(o,function(e){angular.isString(t.tags)&&0<=t.tags.indexOf(e)&&i.push(t)})}),a=i,i=[]),0<r.length&&(angular.forEach(a,function(t){var a=!1;angular.forEach(r,function(e){angular.isString(t.tags)&&0<=t.tags.indexOf(e)&&(a=!0)}),a||i.push(t)}),a=i,i=[]),angular.isString(E.filter.text)&&0<E.filter.text.length){var s=E.filter.text.toLowerCase().replace(/[\?\.\!]/g,"");angular.forEach(a,function(e){var t=e.title.toLowerCase().replace(/[\?\.\!]/g,"");(t.includes(s)||A.damerauLevenshteinDistance(t,s)<3)&&i.push(e)})}else i=a.slice();E.filter.descending?i.sort($[E.filter.sort]):i.sort(z[E.filter.sort]),angular.forEach(i,function(e){e.localAndExternal&&!e.requestedThumbnail&&(e.requestedThumbnail=!0,E.requestThumbnailPath(e))});var l=(E.sortedWallpapers=i).length;E.showFilter.counts=l!==n,E.filteredCount=l,E.unfilteredCount=n,e=e.slice(),E.filter.descending?e.sort($.name):e.sort(z.name),E.sortedFolders=e,E.sortedWallpapersPrePagination=E.sortedWallpapers.slice(),E.sortedFoldersPrePagination=E.sortedFolders.slice();var c=E.browserSettings&&E.browserSettings.resultsperpage||100,d=E.sortedFolders.length,p=l+d;if(N.visible=c<p,N.visible){var u=Math.floor(p/c)+1;A.updatePagination(N,N.current,u);var g=c*(N.current-1),f=c*N.current;E.sortedFolders=E.sortedFolders.sliceLimit(g,f),E.sortedWallpapers=E.sortedWallpapers.sliceLimit(g-d,f-d)}}function ne(e,t){for(var a=0;a<y.length;++a)if(y[a].file===e)return y[a];var i,n,o=e,r="ui_workshop_tags_local",s="images/preview_local.jpg",l=["Everyone","Local"];A.isURL(e)?(r="ui_workshop_tags_local_url",i="Web",s="images/preview_url.jpg",l.push("Web")):(n=e,d?p.wallpaperFiles.push(n):(p={wallpaperFiles:[n]},d=S(function(){d=void 0,T.callDeferred("browseWallpaperObject","updateLocalWallpaperProjectInfo",p.wallpaperFiles).then(function(e){angular.forEach(e,function(t){angular.forEach(y,function(e){e.file===t.file&&angular.merge(e,t)})}),ie()})})),A.isExtension(e,"video")?(r="ui_workshop_tags_local_video",l.push("Video"),i="Video"):A.isExtension(e,"application")?(r="ui_workshop_tags_local_application",l.push("Application"),i="Application"):A.isExtension(e,"web")?(r="ui_workshop_tags_local_web",l.push("Web"),i="Web"):A.isExtension(e,"scene")?(r="ui_workshop_tags_local_scene",l.push("Scene"),i="Scene"):A.isExtension(e,"static")&&(r="ui_workshop_tags_local_image",l.push("Scene"),i="Image"),o=A.getFilename(e));var c={file:e,title:o,preview:s,previewsmall:s,tags:l.join(","),local:!0,localAndExternal:!0,status:"installed",type:i,typelabel:r,filesize:0,subscriptiondate:0,favorite:!1,rating:0};return angular.isDefined(t)&&(c.overridetype=t),y.push(c),E.wallpapers.push(c),c}function oe(e){if(angular.isArray(e))return angular.forEach(e,oe);var t;for(t=0;t<y.length;++t)y[t].file===e&&y.splice(t,1);for(t=0;t<E.wallpapers.length;++t)E.wallpapers[t].file===e&&E.wallpapers.splice(t,1)}function re(t){var a;return angular.forEach(E.monitors,function(e){e.location===t&&(a=e)}),angular.forEach(E.monitorSplits,function(e){e.left&&e.left.location===t?a=e.left:e.right&&e.right.location===t&&(a=e.right)}),a||E.monitorGroups[t]}function se(){var t=E.monitors.slice();return angular.forEach(E.monitorSplits,function(e){e.left&&t.push(e.left),e.right&&t.push(e.right)}),angular.forEach(E.monitorGroups,function(e){t.push(e)}),t}function le(t){var a;return angular.forEach(E.wallpapers,function(e){e.file===t&&(a=e)}),a}function ce(t){var a;return t=""+t,angular.forEach(E.wallpapers,function(e){e.workshopid===t&&(a=e)}),a}function de(e){if(angular.isObject(e))return(e.localAndExternal?ne:le)(e.file)}function pe(){var e=angular.element("#PlaylistContainerTimeline");if(0===e.length?(l&&l.remove(),l=void 0):(l&&!e.has(l)&&(l.remove(),l=void 0),l||((l=angular.element(document.createElement("div"))).addClass("currentTimeIndicator"),e.append(l))),c=S(pe,1e4),l){var t=new Date,a=(60*t.getHours()+t.getMinutes())/1440*100;l.css({left:a+"%"})}}function ue(e){for(var t=0,a=0,i=0;i<e.length;++i){var n=e[i],o=void 0;if(angular.isNumber(n.daytimeend)?o=n.daytimeend:i===e.length-1&&(o=1),angular.isNumber(o)){var r=i-t+1;if(0<r){r=1/r*(o-a);for(var s=t;s<=i;++s)e[s].flex=r}t=i+1,a=o}}c&&S.cancel(c),c=S(pe)}function ge(e){return{settings:angular.copy(e.settings),name:e.name||"",items:e.items.map(function(e){if(angular.isNumber(e.daytimeend)||angular.isString(e.preset)){var t={file:e.wallpaper.file};return angular.isNumber(e.daytimeend)&&(t.daytimeend=e.daytimeend),angular.isString(e.preset)&&(t.preset=e.preset),t}return e.wallpaper.file})}}function fe(e){for(var t={settings:angular.copy(e.settings),name:e.name,items:[]},a=0;a<e.items.length;++a){var i,n=e.items[a];angular.isString(n)?(i=le(n),angular.isObject(i)&&(i={wallpaper:i})):angular.isObject(n)&&angular.isString(n.file)&&(i=le(n.file),angular.isObject(i)&&(i={wallpaper:i,daytimeend:n.daytimeend,preset:n.preset})),angular.isObject(i)&&t.items.push(i)}return ue(t.items),t}function me(t){if(angular.isObject(t)||(t=E.selectedMonitor),t.playlistFlags={},0<t.playlist.items.length){delete t.playlist.items[t.playlist.items.length-1].daytimeend;var a=0;angular.forEach(t.playlist.items,function(e){angular.isObject(e.wallpaper)&&angular.isString(e.wallpaper.file)&&(t.playlistFlags[e.wallpaper.file]=!0),angular.isNumber(e.daytimeend)&&(e.daytimeend<a||"daytime"!==t.playlist.settings.mode?delete e.daytimeend:a=e.daytimeend)})}T.callDeferred("browseWallpaperObject","selectPlaylist",ge(t.playlist),t.location),ue(t.playlist.items)}function ve(e){var t=re(e);angular.isDefined(t)&&(t.wallpaper=void 0,E.selectedMonitor===t&&(E.currentSelection=void 0),t.playlistFlags={},t.playlist.items=[]),E.wallpaperConfig.selectedwallpapers[e]={},T.callDeferred("browseWallpaperObject","removeWallpaper",{location:e,playlist:!0})}function he(a,e){e&&E.currentSelection===a&&(E.currentSelection=void 0);var t=se();angular.forEach(t,function(e){delete e.playlistFlags[a.file];var t=e.playlist.items.findIndex(function(e){return e.wallpaper===a});0<=t?(e.playlist.items.splice(t,1),me(e)):e.wallpaper===a&&(e.wallpaper=void 0,T.callDeferred("browseWallpaperObject","removeWallpaper",{location:e.location,playlist:!1}))})}function be(a,e){if(!angular.isArray(a)){if(!angular.isObject(a))return;a=[a]}var i=[],n=[],o=[],t={};if(angular.forEach(a,function(e){e.official?o.push(e):e.localAndExternal?n.push(e):angular.isString(e.workshopid)&&(i.push(e),t[e.workshopid]=!0)}),0<i.length&&0===n.length&&0===o.length&&!X())A.showSteamError();else{var r=i.concat(n).concat(o);if(0!==r.length){var s=[];if(angular.forEach(E.wallpapers,function(e){angular.isString(e.dependency)&&t[e.dependency]&&!i.includes(e)&&s.push(e)}),i=i.concat(s),e){var l=p(r),c=p(s);k(["ui_browse_modal_unsubscribe_body","ui_browse_modal_remove_local_body","ui_browse_modal_remove_preset_info"],{title:l,presets:c}).then(function(e){return P.open("genericConfirm",{data:{title:0<i.length?"ui_browse_modal_unsubscribe_header":"ui_browse_modal_remove_local_header",message:(0<i.length?e.ui_browse_modal_unsubscribe_body:e.ui_browse_modal_remove_local_body)+(0<s.length?e.ui_browse_modal_remove_preset_info:""),okVisible:!0,cancelVisible:!0}})}).then(d)}else d()}}function d(){if(0<i.length&&T.callDeferred("ui","unsubscribeWorkshopItem",i.map(function(e){return e.workshopid})),0<n.length){var e=n.map(function(e){return e.file});oe(e),T.callDeferred("browseWallpaperObject","removeLocalWallpaperFromHistory",e)}if(0<o.length){var t=o.map(function(e){return e.file});oe(t),T.callDeferred("browseWallpaperObject","removeOfficialWallpaper",t)}ie(),a.includes(E.currentSelection)&&he(E.currentSelection,E.sourceIsInstalled)}function p(e){for(var t="",a=Math.min(3,e.length),i=0;i<a;++i)t+=e[i].title,i+1<a&&(t+=", ");return a<e.length&&(t+=", ... ("+e.length+")"),t}}function _e(n,o){if(angular.isString(n)&&angular.isArray(E.browserSettings.applicationwhitelist)&&E.browserSettings.applicationwhitelist.includes(n))return x.when();var r=3;return k(["ui_browse_modal_application_warning_body","ui_browse_modal_application_warning_timer"],{filepath:n,time:r}).then(function(t){var a={title:"ui_browse_modal_application_warning_header",message:t.ui_browse_modal_application_warning_body+t.ui_browse_modal_application_warning_timer,leftIcon:"images/warning.png",okClass:"btn-danger",okText:"ui_browse_modal_proceed",okVisible:!0,okDisabled:!0,cancelVisible:!0,leftVisible:angular.isObject(o),leftClass:"btn-danger",leftText:"ui_browse_details_btn_unsubscribe",leftAction:"unsubscribe",checkboxCenterVisible:!0,checkboxChecked:!1,checkboxTitle:"ui_browse_modal_application_warning_disable_checkbox"},i=function(){k("ui_browse_modal_application_warning_timer",{time:--r}).then(function(e){a.message=t.ui_browse_modal_application_warning_body+e,0<r?S(i,1e3):a.okDisabled=!1})};return S(i,1e3),P.open("genericConfirm",{data:a},{backdropClass:"modal-backdrop-danger"}).then(function(e){return"unsubscribe"===e?(be(o),x.reject()):(a.checkboxChecked&&(angular.isArray(E.browserSettings.applicationwhitelist)?E.browserSettings.applicationwhitelist.push(n):E.browserSettings.applicationwhitelist=[n]),e)})})}function ye(){var t=[];return angular.forEach(E.monitors,function(e){!e.isInGroup&&angular.isObject(E.monitorSplits[e.location])||t.push(e)}),angular.forEach(E.monitorSplits,function(e){e.left&&!e.left.isInGroup&&angular.isUndefined(E.monitorSplits[e.left.location])&&t.push(e.left),e.right&&!e.right.isInGroup&&angular.isUndefined(E.monitorSplits[e.right.location])&&t.push(e.right)}),angular.forEach(E.monitorGroups,function(e){t.push(e)}),t}function we(e){var i=[];return angular.forEach(e,function(e){"folder"===e.type?(angular.forEach(e.items,function(e,t){var a=ce(t)||le(t);a&&i.push(a)}),i=i.concat(we(e.subfolders))):i.push(e)}),i}function ke(e,t){var a;if(0===E.multiSelection.length&&t)return a=[t],e&&(a=we(a)),a;a=E.multiSelection.slice(),E.currentSelection&&a.unshiftIfNew(E.currentSelection),t&&a.unshiftIfNew(t),e&&(a=we(a));var i=ae();i=we(i);var n=[];return angular.forEach(a,function(e){i.includes(e)&&"downloadable"!==e.status&&n.push(e)}),n}function Se(i){function n(e){if(!E.sourceIsExplore){var t=angular.element(e);t&&t[0].scrollIntoView&&t[0].scrollIntoView({behavior:"smooth",inline:"nearest",block:"nearest"})}}S(function(){if(angular.isObject(E.wallpaperConfig)&&angular.isObject(E.selectedMonitor)&&angular.isObject(E.wallpaperConfig.selectedwallpapers)){var t=i||E.currentSelection;if(!angular.isObject(t)&&E.wallpaperConfig.selectedwallpapers.hasOwnProperty(E.selectedMonitor.location)){var e=E.wallpaperConfig.selectedwallpapers[E.selectedMonitor.location];t=E.currentSelection=de(e)}if(angular.isObject(t)){window.safeApply(E);var a=0;angular.forEach(E.sortedWallpapers,function(e){t===e&&n("#wpimg"+a),++a}),a=0,angular.forEach(E.sortedFolders,function(e){t===e&&n("#wpfolder"+a),++a})}}})}function xe(e){if(angular.isObject(e)){E.browserSettings.lastselectedmonitor=e.location,E.selectedMonitor=e;var t=E.wallpaperConfig.selectedwallpapers[e.location];E.currentSelection=angular.isObject(t)?de(t):void 0,Se()}}function Ee(){if(angular.isArray(E.monitors)&&angular.isObject(E.wallpaperConfig)&&angular.isObject(E.wallpaperConfig.selectedwallpapers)&&(angular.forEach(E.wallpaperConfig.selectedwallpapers,function(e,t){var a=re(t);if(angular.isObject(a)){if(!angular.isArray(a.missingPlaylistItems)&&angular.isObject(e.playlist)&&(a.playlist=fe(e.playlist),a.playlist.items=[],a.missingPlaylistItems=angular.isArray(e.playlist&&e.playlist.items)?e.playlist.items:[],a.missingPlaylistItems=a.missingPlaylistItems.map(function(e){return{name:e.file||e,daytimeend:e.daytimeend,preset:e.preset}})),angular.isArray(a.missingPlaylistItems))for(var i=0;i<a.missingPlaylistItems.length;++i){var n=a.missingPlaylistItems[i],o=le(n.name);if(angular.isObject(o)){a.missingPlaylistItems.splice(i,1),--i;var r=a.playlist.items.indexOf(n.stub);angular.isObject(n.stub)&&0<=r?a.playlist.items.splice(r,1,{wallpaper:o,daytimeend:n.daytimeend,preset:n.preset}):a.playlist.items.push({wallpaper:o,daytimeend:n.daytimeend,preset:n.preset}),a.playlistFlags[n.name]=!0}else angular.isObject(n.stub)||(n.stub={wallpaper:{file:n.name,preview:"images/nopreview.jpg",status:"error"},daytimeend:n.daytimeend,preset:n.preset,isStub:!0},a.playlist.items.push(n.stub))}a.playlist&&a.playlist.items&&ue(a.playlist.items)}}),!_)){var n=!0;angular.forEach(E.wallpaperConfig.selectedwallpapers,function(e,t){var a=de(e),i=re(t);n=angular.isDefined(a),angular.isObject(a)&&angular.isObject(i)&&(i.wallpaper=a)}),_=n}}function Ce(e,t){if(t=t||E.selectedMonitor&&E.selectedMonitor.location,!angular.isUndefined(t)&&angular.isObject(e)){var a=E.wallpaperConfig.selectedwallpapers[t]||{};if(a.file=e.file,E.wallpaperConfig.selectedwallpapers[t]=a,E.selectedMonitor&&E.selectedMonitor.location===t)E.currentSelection=e,E.selectedMonitor.wallpaper=e;else{var i=re(t);angular.isObject(i)&&(i.wallpaper=e)}T.callDeferred("browseWallpaperObject","selectWallpaper",e.file,t,e.overridetype)}}function Ae(e){T.callDeferred("browseWallpaperObject","updateProfile",e)}function Pe(){if(angular.isArray(E.queryWallpapers)&&angular.isArray(E.wallpapers))for(var e=0;e<E.queryWallpapers.length;++e){var t=E.queryWallpapers[e];if(angular.isString(t.workshopid))for(var a=0;a<E.wallpapers.length;++a){var i=E.wallpapers[a];if(t.workshopid===i.workshopid&&t!==i){E.queryWallpapers.splice(e,1,i),E.currentSelection===t&&E.callbackWallpaperSelected(i);break}}}}function Te(e,t){var a=E.browserSettings.authorblacklist.includes(e.authorsteamid);return a===E.browserSettings.authorblacklist.includes(t.authorsteamid)?0:a?1:-1}function Re(e){angular.isObject(b)&&angular.forEach(e,function(e){var t=b[e.file];angular.isObject(t)&&(angular.isObject(e.properties)||(e.properties={}),angular.merge(e.properties,t.properties),e.defaultproperties=t.defaultproperties,e.propertyPresets=t.presets,te(e))})}function Ie(e){if(angular.isArray(e))return angular.forEach(e,Ie);E.multiSelection.includes(e)||E.multiSelection.push(e)}function Oe(e){if(angular.isArray(e))return angular.forEach(e,Oe);e===E.currentSelection&&(E.currentSelection=void 0),E.multiSelection.findAndRemove(e)}function Me(e){if(!E.sourceIsWorkshop)return angular.isArray(e)?angular.forEach(e,Me):void(E.multiSelection.includes(e)||E.currentSelection===e?Oe:Ie)(e)}function De(){E.multiSelection=[]}function je(e,t){return(e&&e.title||"").localeCompare(t&&t.title||"")}function We(e){angular.isArray(e)||(e=[e]),angular.forEach(e,function(e){"folder"===e.type&&E.folders.findAndRemove(e)}),function e(a,t){angular.forEach(t,function(t){angular.forEach(a,function(e){"folder"===e.type?t.subfolders.findAndRemove(e):delete t.items[e.workshopid||e.file]}),e(a,t.subfolders)})}(e,E.folders)}function Le(e,t){angular.isArray(e)||(e=[e]),e.findAndRemove(function(e){return e===t}),We(e),t?angular.forEach(e,function(e){"folder"===e.type?t.subfolders.push(e):t.items[e.workshopid||e.file]=!0}):angular.forEach(e,function(e){"folder"===e.type&&E.folders.pushIfNew(e)})}function Fe(e,t){Le(ke(!1,e),t),De()}function Be(e){be(ke(!0,e),!0)}E.filterStatus={},E.sortWallpapers=ie,E.updateWallpapers=function(e,t){var a=angular.isDefined(E.currentSelection),i=function(e,t){for(var a={newWallpapers:[],shouldSort:!1},i={},n=0;n<E.wallpapers.length;++n){var o=E.wallpapers[n];o.ispreset&&(angular.isArray(i[o.dependency])||(i[o.dependency]=[]),i[o.dependency].push(o))}var r=[];for(n=0;n<e.length;++n){var s,l,c=e[n],d=!1,p="unsubscribed"===c.status;if(angular.isDefined(c.workshopid))for(s=0;s<t.length;++s)if(l=t[s],angular.isDefined(l.workshopid)&&l.workshopid===c.workshopid)if(d=!0,p){var u=E.currentSelection===l;E.sourceIsInstalled?(u&&(E.currentSelection=void 0),a.shouldSort=!0):(angular.merge(l,c),l.status="downloadable"),he(l,E.sourceIsInstalled),t.splice(s,1),--s}else{var g=!1;l.status!==c.status&&"installed"===c.status?(angular.isArray(i[c.workshopid])&&(r=r.concat(i[c.workshopid])),E.currentSelection===l&&(g=!(E.currentSelection=void 0))):E.currentSelection===l&&"installed"===c.status&&c.ispreset&&(g=!(E.currentSelection=void 0)),angular.merge(l,c),g&&E.callbackWallpaperSelected(l)}if(c.local)for(s=0;s<t.length;++s)(l=t[s]).local&&l.file===c.file&&(angular.merge(l,c),d=!0,a.shouldSort=!0);c.approved=0<=c.tags.indexOf("Approved"),d||p||a.newWallpapers.push(c)}for(n=0;n<a.newWallpapers.length;++n){var f=a.newWallpapers[n];angular.isArray(i[f.workshopid])&&(r=r.concat(i[f.workshopid]))}return 0<r.length&&(r=r.map(function(e){return e.workshopid}),T.callDeferred("browseWallpaperObject","queryWorkshopIds",r)),a}(e,E.wallpapers);if(Re(i.newWallpapers),Array.prototype.push.apply(E.wallpapers,i.newWallpapers),0<i.newWallpapers.length||i.shouldSort){var n=function(a){return function(t){var e=a.findAndReplace(function(e){return e.workshopid&&e.workshopid===t.workshopid},t);0<e.length&&e[0]===E.currentSelection&&E.callbackWallpaperSelected(t)}};E.sourceIsExplore?(angular.forEach(E.sortedExploreQueries,function(e){angular.isArray(e.wallpapers)&&angular.forEach(i.newWallpapers,n(e.wallpapers))}),angular.forEach(i.newWallpapers,n(E.sortedWallpapers))):E.sourceIsWorkshop&&angular.forEach(i.newWallpapers,n(E.sortedWallpapers)),ie()}else ee();Ee(),!angular.isUndefined(t)&&!angular.isUndefined(E.currentSelection)||"installed"!==E.source||a||Se(),Pe()},E.updateLocalThumbnail=function(t){var e=E.wallpapers.find(function(e){return e.preview===t.preview});e&&(e.previewsmall=t.previewsmall,ee())},E.selectWallpaperByProjectOrId=function(e){var t=e.file&&le(e.file)||ce(e.workshopid);angular.isObject(t)||!e.workshopid||!X()||E.steamWorkshopStatus.complete?angular.isObject(t)&&(e.reload&&T.callDeferred("browseWallpaperObject","removeWallpaper",{location:E.selectedMonitor.location,playlist:!1}),Ce(t)):S(function(){E.selectWallpaperByProjectOrId(e)},500)},E.registerSteamUser=function(e){var t=E.steamUserInfos[e.id]||{};t.name=e.name,t.avatar=e.avatar,E.steamUserInfos[e.id]=t,angular.isFunction(O)&&O(e)};var He={},Ne={};E.onTotalCountReceived=function(e){Ne[e.preset]&&(Ne[e.preset].resolve(e.count),delete Ne[e.preset]),He[e.preset]=e.count},E.getNumberOfWorkshopPresets=function(e){var t=e.dependency||e.workshopid;return angular.isNumber(He[t])?He[t]:(angular.isUndefined(He[t])&&(He[t]="?",T.callDeferred("browseWallpaperObject","queryWorkshop",{preset:t,callback:"onTotalCountReceived",totalOnly:!0})),"?")};var Ve,Ue={},ze={};E.onTotalCountByAuthorReceived=function(e){ze[e.authorsteamid]&&(ze[e.authorsteamid].resolve(e.count),delete ze[e.authorsteamid]),Ue[e.authorsteamid]=e.count},E.callbackWallpaperAllMouse=function(e,a,t){switch(t.stopPropagation(),e){case"left":if(t.ctrlKey&&E.sourceIsInstalled)Me(a);else if(t.shiftKey&&E.sourceIsInstalled){De(),Ie(a);var i=!1;angular.forEach(ae(),function(e){e!==a&&E.currentSelection!==e||(i=!i),i&&Ie(e)})}else{E.callbackWallpaperSelected(a);var n=angular.element(t.target).closest(".browseWallpaperImage")[0];n&&n.scrollIntoView&&n.scrollIntoView({behavior:"smooth",inline:"nearest",block:"nearest"})}break;case"right":var o=C.builder();if(angular.isObject(a)){var r={author:a.authorsteamid&&E.steamUserInfos[a.authorsteamid]&&E.steamUserInfos[a.authorsteamid].name,count:"?"},s=[];if(!r.author&&a.authorsteamid&&(T.callDeferred("ui","pollSteamUserInfo",a.authorsteamid,"browseWallpapersCtrl"),O=function(e){e.id===a.authorsteamid&&(r.author=e.name,angular.forEach(s,function(e){e()}),O=void 0)},r.author="?"),"downloadable"!==a.status)o.button("ui_browse_context_menu_add_to_playlist","fas fa-plus",function(){E.callbackToggleAllWallpapersInCurrentMonitorPlaylist(a,!1,!0)}),E.selectedMonitor.playlistFlags[a.file]&&o.button("ui_browse_context_menu_remove_from_playlist","fas fa-minus",function(){E.callbackToggleAllWallpapersInCurrentMonitorPlaylist(a)});if("downloadable"!==a.status&&0<E.folders.length)if(1<E.folders.length||E.folders[0]!==a){var l=C.builder();angular.isObject(E.currentFolder)&&l.button("ui_browse_navigation_top",function(){Fe(a)}),function t(e,a,i,n,o){angular.forEach(e.sort(je),function(e){e!==a&&(e!==E.currentFolder&&n.button(i+e.title,"",function(){o(e)}),t(e.subfolders,a,i+e.title+" / ",n,o))})}(E.folders,a,"",l,function(e){Fe(a,e)}),o.subMenu("ui_browse_context_menu_move_to",l)}if(a.workshopid){if("downloadable"===a.status?o.button("ui_browse_context_menu_subscribe","fas fa-download",function(){E.subscribeWorkshopItem(a)}):o.button("ui_browse_context_menu_unsubscribe","fas fa-times",function(){0===E.multiSelection.length?be(a,!0):Be(a)}),A.useDynamicWorkshopAuthor()){var c=function(){return k.instant("ui_browse_context_menu_browse_by_author",r)};s.push(function(){o.updateLabel("authorbrowse",c())}),o.button(c(),"fas fa-user",function(){E.callbackBrowseAuthor(a.authorsteamid)}).id("authorbrowse"),function(e){if(angular.isNumber(Ue[e.authorsteamid]))return x.when(Ue[e.authorsteamid]);T.callDeferred("browseWallpaperObject","queryWorkshop",{itemid:e.authorsteamid,sort:"published_desc",callback:"onTotalCountByAuthorReceived",totalOnly:!0});var t=x.defer();return(ze[e.authorsteamid]=t).promise}(a).then(function(e){r.count=e,o.updateLabel("authorbrowse",c())})}if("Web"===a.type){var d=a.ispreset?ce(a.dependency)||{title:a.dependency,workshopid:a.dependency}:a;o.button(k.instant("ui_browse_details_properties_preset_browse_workshop",{count:"?"}),A.getProviderIcon(),function(){E.callbackBrowsePresets(d)}).id("presetbrowse"),function(e){if(angular.isNumber(He[e.workshopid]))return x.when(He[e.workshopid]);T.callDeferred("browseWallpaperObject","queryWorkshop",{preset:e.workshopid,callback:"onTotalCountReceived",totalOnly:!0});var t=x.defer();return(Ne[e.workshopid]=t).promise}(d).then(function(e){return k("ui_browse_details_properties_preset_browse_workshop",{count:e})}).then(function(e){o.updateLabel("presetbrowse",e)})}var p=E.sourceIsWorkshop&&"folder"!==a.type&&a.authorsteamid;if((E.canSendReports||p)&&o.divider(),E.canSendReports&&o.button("ui_browse_context_menu_report","fas fa-exclamation-triangle",function(){X()?E.openReportDialog(a):A.showSteamError()},void 0,"browserReportButton"),p){var u=function(){return k.instant("ui_browse_context_menu_block_author",r)},g=function(){return k.instant("ui_browse_context_menu_unblock_author",r)};s.push(function(){o.updateLabel("authoraddblacklist",u()),o.updateLabel("authorremoveblacklist",g())}),E.browserSettings.authorblacklist.includes(a.authorsteamid)?o.button(g(),"fas fa-user-check",function(){E.browserSettings.authorblacklist.findAndRemove(a.authorsteamid),E.sortedWallpapers=E.sortedWallpapers.slice(),E.sortedWallpapers.sort(Te)},void 0,"browserReportButton").id("authorremoveblacklist"):o.button(u(),"fas fa-user-slash",function(){E.browserSettings.authorblacklist.push(a.authorsteamid),E.sortedWallpapers=E.sortedWallpapers.slice(),E.sortedWallpapers.sort(Te)},void 0,"browserReportButton").id("authoraddblacklist")}}else(a.localAndExternal||a.official)&&o.button("ui_browse_context_menu_remove","fas fa-times",function(){0===E.multiSelection.length?be(a,!0):Be(a)});if("folder"!==a.type&&(E.sourceIsInstalled||a.workshopid||"installed"===a.status)&&(o.divider(),a.workshopid&&E.canOpenWallpaperDetailsOnPlatform&&o.button("ui_browse_context_menu_workshop",A.getProviderIcon(),function(){E.openSteamWorkshopPage(a)}),"installed"===a.status&&"URL"!==a.type&&(o.button("ui_editor_filemenu_open_in_explorer","fas fa-folder-open",function(){T.callDeferred("browseWallpaperObject","openInExplorer",a.project||a.file)}),o.button("ui_browse_context_menu_play_in_window","fas fa-window-maximize",function(){T.callDeferred("browseWallpaperObject","playInWindow",{file:a.file,location:"Wallpaper Pop-out",propertylocation:E.selectedMonitor.location})})),E.sourceIsInstalled||"installed"===a.status)){var f=(y=a,angular.forEach(E.sharedSettings.hotkeys,function(e){e.value===y.file&&e.location===E.selectedMonitor.location&&"wallpaper"===e.action&&(w=e)}),w);f?o.button("ui_browse_context_menu_remove_hotkey","fas fa-times",function(){E.sharedSettings.hotkeys.findAndRemove(f)}):o.button("ui_browse_context_menu_assign_hotkey","fas fa-key",function(){P.open("browseAssignHotkey",{data:{hotkeys:E.sharedSettings.hotkeys,name:a.title}}).then(function(e){E.sharedSettings.hotkeys.push({action:"wallpaper",keys:e,location:E.selectedMonitor.location,value:a.file,title:a.title})})})}}if(E.sourceIsInstalled&&(o.empty()||o.divider(),o.button("ui_browse_context_menu_create_folder","fas fa-plus",function(){var a={title:"ui_browse_modal_folder_create_title",cancelVisible:!0,okVisible:!0,textinputVisible:!0};k("ui_browse_context_menu_new_folder_name").then(function(e){return a.textinput=a.textinputDefault=e,P.open("genericConfirm",{data:a})}).then(function(){var e=E.currentFolder&&E.currentFolder.subfolders||E.folders,t={type:"folder",title:0===a.textinput.length?a.textinputDefault.toString():a.textinput.toString(),subfolders:[],items:{}};e.push(t),ie(),Se(t)})}),a&&"folder"===a.type)){o.button("ui_browse_context_menu_remove_folder","fas fa-times",function(){var t={message:"ui_browse_modal_folder_remove_body",checkboxTitle:"ui_browse_modal_folder_remove_unsubscribe_and_remove_items",checkboxVisible:!0,okVisible:!0,cancelVisible:!0};k("ui_browse_modal_folder_remove_title",{title:a.title}).then(function(e){return t.title=e,P.open("genericConfirm",{data:t})}).then(function(){t.checkboxChecked&&be(we([a])),We(a)})});var m=C.builder(),v=function(e){e?a.folderIcon=e:delete a.folderIcon};m.button("","fas fa-folder browseFolderIconEnlarge",v),m.button("","fas fa-star browseFolderIconEnlarge",v,"fas fa-star"),m.button("","fas fa-heart browseFolderIconEnlarge",v,"fas fa-heart"),m.button("","fas fa-gem browseFolderIconEnlarge",v,"fas fa-gem"),m.button("","fas fa-car browseFolderIconEnlarge",v,"fas fa-car"),m.button("","fas fa-rocket browseFolderIconEnlarge",v,"fas fa-rocket"),m.button("","far fa-snowflake browseFolderIconEnlarge",v,"fas fa-snowflake"),m.button("","fas fa-thumbs-up browseFolderIconEnlarge",v,"fas fa-thumbs-up"),m.button("","fas fa-gamepad browseFolderIconEnlarge",v,"fas fa-gamepad"),m.button("","fas fa-gift browseFolderIconEnlarge",v,"fas fa-gift"),m.button("","fas fa-music browseFolderIconEnlarge",v,"fas fa-music"),m.button("","fas fa-trash browseFolderIconEnlarge",v,"fas fa-trash"),m.button("","fas fa-bug browseFolderIconEnlarge",v,"fas fa-bug"),m.button("","fas fa-magic browseFolderIconEnlarge",v,"fas fa-magic"),o.subMenu("ui_browse_context_menu_change_icon",m);var h=C.builder(),b=function(e){e?a.folderColor=e:delete a.folderColor};h.button("ui_browse_context_menu_default",b),h.button("","fas fa-square browseFolderColorBlue",b,"browseFolderColorBlue"),h.button("","fas fa-square browseFolderColorMagenta",b,"browseFolderColorMagenta"),h.button("","fas fa-square browseFolderColorRed",b,"browseFolderColorRed"),h.button("","fas fa-square browseFolderColorBrightYellow",b,"browseFolderColorBrightYellow"),h.button("","fas fa-square browseFolderColorYellow",b,"browseFolderColorYellow"),h.button("","fas fa-square browseFolderColorGreen",b,"browseFolderColorGreen"),o.subMenu("ui_browse_context_menu_change_color",h)}o.divider();var _=C.builder().button("ui_browse_context_menu_icon_small","small"===E.browserSettings.viewiconsize?"fas fa-check":"",function(){E.browserSettings.viewiconsize="small"}).button("ui_browse_context_menu_icon_medium","medium"===E.browserSettings.viewiconsize?"fas fa-check":"",function(){E.browserSettings.viewiconsize="medium"}).button("ui_browse_context_menu_icon_large","large"===E.browserSettings.viewiconsize?"fas fa-check":"",function(){E.browserSettings.viewiconsize="large"});E.sourceIsInstalled&&_.divider().button("ui_browse_context_menu_results_per_page_50",50===E.browserSettings.resultsperpage?"fas fa-check":"",function(){E.browserSettings.resultsperpage=50,ie()}).button("ui_browse_context_menu_results_per_page_100",100===E.browserSettings.resultsperpage?"fas fa-check":"",function(){E.browserSettings.resultsperpage=100,ie()}).button("ui_browse_context_menu_results_per_page_200",200===E.browserSettings.resultsperpage?"fas fa-check":"",function(){E.browserSettings.resultsperpage=200,ie()}),o.subMenu("ui_browse_context_menu_view",_).open(E,t);break;case"dbl":if(a&&"folder"===a.type)return;E.callbackOk(!0)}var y,w},E.$watch("viewOpacity.value",function(e){angular.isNumber(e)&&!isNaN(e)&&angular.isObject(E.browserSettings)&&e!==E.browserSettings.viewopacity&&(T.callDeferred("browseWallpaperObject","setBrowserOpacity",e),E.browserSettings.viewopacity!==e&&(Ve&&S.cancel(Ve),Ve=S(function(){E.browserSettings.viewopacity=e},50)))}),E.callbackWallpaperSelectionRectangle=function(e,t){t.ctrlKey?Me(e):(t.shiftKey||(De(),E.currentSelection=void 0),Ie(e))};var $e=0;function qe(t){return t&&t.isGroup?t:(t&&t.isInGroup&&E.monitorGroups&&angular.forEach(E.monitorGroups,function(e){0<=e.monitors.indexOf(t.location)&&(a=e)}),a);var a}function Ge(){var e,t=E.monitorProfile.splits||{},a=E.monitorProfile.groups||{},i=angular.copy(t),g={};if(E.monitorGroups={},E.monitorSplits={},angular.forEach(E.monitors,function(e){e.isInGroup=!1,e.isClone=!1,e.group=void 0}),0===E.wallpaperConfig.layout){angular.forEach(t,function(e,t){if(angular.isObject(e)){var a=re(t);!angular.isObject(a)||a.isInGroup||a.isGroup||!function e(t,a,i,n,o){o=o||{splitIndex:1,rootLocation:i,deviceName:n.name+" Split "},a.left=a.left||{},a.right=a.right||{},a.left.index=n.index,a.right.index=n.index,a.location=i,a.left.location=i+"/L",a.right.location=i+"/R",a.left.rootLocation=o.rootLocation,a.right.rootLocation=o.rootLocation,a.left.isSplit=!0,a.right.isSplit=!0,a.w=n.w,a.h=n.h,a.left.playlistFlags={},a.left.playlist={items:[],settings:q()},a.right.playlistFlags={},a.right.playlist={items:[],settings:q()},0===a.direction?(a.left.h=n.h,a.right.h=n.h,a.left.w=a.position*n.w,a.right.w=n.w-a.position*n.w,a.left.x=n.x,a.right.x=n.x+a.position*n.w,a.left.y=n.y,a.right.y=n.y):(a.left.w=n.w,a.right.w=n.w,a.left.h=a.position*n.h,a.right.h=n.h-a.position*n.h,a.left.x=n.x,a.right.x=n.x,a.left.y=n.y,a.right.y=n.y+a.position*n.h),angular.isObject(t[a.left.location])?e(t,t[a.left.location],a.left.location,a.left,o):(a.left.splitIndex=o.splitIndex++,a.left.name=o.deviceName+a.left.splitIndex),angular.isObject(t[a.right.location])?e(t,t[a.right.location],a.right.location,a.right,o):(a.right.splitIndex=o.splitIndex++,a.right.name=o.deviceName+a.right.splitIndex)}(i,i[t],t,a)}}),E.monitorSplits=i;var f=0;angular.forEach(a,function(a,e){if(angular.isObject(a)){var t,i,n,o,r,s,l,c,d,p,u={};t=a.monitors,i=e,n=u,c=!(l=s=-(r=o=99999)),d=[],p=[],angular.forEach(t,function(e){var t=re(e);angular.isObject(t)?(o=Math.min(t.x,o),r=Math.min(t.y,r),s=Math.max(t.x+t.w,s),l=Math.max(t.y+t.h,l),d.push(t.name),p.push(t.location)):c=!0}),!c&&(n.x=o,n.y=r,n.w=s-o,n.h=l-r,n.location=i,n.monitors=p,n.name="Group ("+d.join(", ")+")",n.isGroup=!0,n.playlistFlags={},n.playlist={items:[],settings:q()})&&(u.index=f++,u.layout=a.layout,g[e]=u,angular.forEach(a.monitors,function(e){var t=re(e);t.isInGroup=!0,t.isClone=2===a.layout,t.group=u}))}})}else if(2===E.wallpaperConfig.layout){var n=E.monitors.find(function(e){return 0===e.index});angular.forEach(E.monitors,function(e){e.isClone=0!==e.index,e.isClone?e.group=n:e.group=void 0})}E.monitorGroups=g,e=ye(),E.showMonitorRow=1<e.length||0<e.length&&e[0].isGroup||1===E.monitors.length&&Z(E.monitors[0])}function Ke(a){angular.forEach(angular.copy(E.monitorProfile.splits),function(e,t){t.startsWith(a)&&t.substr(a.length).match(/^[\/LR]*$/)&&(ve(t+"/L"),ve(t+"/R"),delete E.monitorProfile.splits[t])})}function Ye(e,t){var a=E.monitorProfile.splits[e],i=E.monitorProfile.splits[e+"/R"];if(angular.isObject(i)&&i.direction===a.direction){var n=a.position+(1-a.position)*i.position;n-=t,i.position=n/(1-t)}return angular.isObject(a)&&(a.position=t,1)}function Qe(e,n,o){o=o||[],angular.forEach(e,function(e,t){var a={};a[t]=e.properties,e.properties=a,angular.isObject(b[e.file])||(b[e.file]={}),angular.merge(b[e.file],e);var i=le(e.file);i&&o.push(i),n[t]={file:e.file,playlist:angular.copy(e.playlist)}})}function Je(){if(I&&E.syncStatus.subscriptionLoadAttempted&&(E.syncStatus.fileLoaded||E.syncStatus.fileError)&&!E.syncStatus.fileError){console.log("performSyncInit"),E.$watch("syncFile",function(e,t){angular.isObject(e)&&!angular.equals(e,t)&&T.callDeferred("browseWallpaperObject","writeSyncFile",angular.toJson(e))},!0);var c,e=function(e){angular.isNumber(e.syncid)&&(E.syncFile.nextId=Math.max(E.syncFile.nextId,e.syncid+1))};angular.forEach(E.syncFile.playlists,e),angular.forEach(E.syncFile.folders,e),angular.forEach(E.playlists,e),angular.forEach(E.folders,e);var i=[];angular.forEach(E.playlists,function(e){var t;if(!e.syncDisabled&&angular.isNumber(e.syncid)){var s=E.syncFile.playlists.find((t=e.syncid,function(e){return e.syncid===t}));if(angular.isObject(s)&&angular.isArray(s.items)){var l=[];for(c=-1,angular.forEach(e.items,function(e){var t=angular.isObject(e)?e.file:e,a=le(t);if(angular.isObject(a)&&angular.isString(a.workshopid)){if(++c<s.items.length){var i=s.items[c],n=angular.isObject(i),o=n?i.file:i;if(o===a.workshopid)n?((i=angular.copy(i)).file=t,l.push(i)):l.push(t);else{var r=ce(o);angular.isObject(r)&&l.push(r.file)}}}else l.push(e)}),++c;c<s.items.length;++c){var a=ce(s.items[c]);angular.isObject(a)&&l.push(a.file)}e.name=s.name||e.name,angular.equals(e.settings,s.settings)||(e.settings=s.settings||e.settings),angular.equals(e.items,l)||(e.items=l)}else i.push(e)}}),angular.forEach(i,function(e){E.playlists.findAndRemove(e)}),E.$watch("playlists",function(e,t){if(angular.isDefined(t)&&angular.isArray(e)){console.log("sync playlists with cloud save");var a=[];angular.forEach(E.playlists,function(e){if(!e.syncDisabled){angular.isNumber(e.syncid)||(e.syncid=E.syncFile.nextId++);var n={syncid:e.syncid,name:e.name,settings:e.settings,items:[]};angular.forEach(e.items,function(e){var t=angular.isObject(e),a=le(t?e.file:e);if(angular.isObject(a)&&angular.isString(a.workshopid))if(t){var i=angular.copy(e);i.file=a.workshopid,n.items.push(i)}else n.items.push(a.workshopid)}),a.push(n)}}),angular.equals(E.syncFile.playlists,a)||(E.syncFile.playlists=a)}},!0)}}E.callbackWallpaperSelected=function(e){if("folder"!==e.type){if(E.currentSelection!==e&&0===$e){angular.isObject(E.currentSelection)&&angular.isObject(e)&&(E.currentSelection.title!==e.title||E.currentSelection.workshopid!==e.workshopid)&&(E.preview.play=!1);var t,a=x.when();"application"!==e.type.toLowerCase()||"installed"!==e.status||!angular.isDefined(e.workshopid)||(t=e,0<=u.indexOf(t.authorsteamid)||0<=t.tags.indexOf("Approved"))||e.local||($e=e.workshopid,a=_e(e.file,e)),"installed"===e.status&&(a=a.then(function(){return E.promptWallpaperDependencySubscription(e)})),a.then(function(){"installed"===(E.currentSelection=e).status&&Ce(e)}).finally(function(){$e=0})}}else E.navigateFolder(e)},E.callbackRemoveWallpaperAndPlaylistFromMonitor=function(e){ve(e)},E.navigateFolder=function(e){E.currentFolder=e,ie(),E.folderNavigation=function a(e,i){var n;return angular.forEach(e,function(e){if(e===i)n=[e];else{var t=a(e.subfolders,i);t&&(n=[e].concat(t))}}),n}(E.folders,e),De()},E.navigateFolderUp=function(){!angular.isArray(E.folderNavigation)||E.folderNavigation.length<2?E.navigateFolder():E.navigateFolder(E.folderNavigation[E.folderNavigation.length-2])},E.callbackSplitSelectedMonitor=function(t){P.open("browseSplitMonitor",{data:{config:{direction:0,position:.5},name:t.name,bounds:[{max:t.w},{max:t.h}]}}).then(function(e){E.monitorProfile.splits=E.monitorProfile.splits||{},E.monitorProfile.splits[t.location]=e.config,Ge(),Ae(E.monitorProfile),E.callbackSelectMonitor(E.monitorSplits[t.location].left),t.wallpaper&&Ce(t.wallpaper)})},E.callbackRemoveSplit=function(e){var t=e.location.slice(0,-2);Ke(t),Ge(),Ae(E.monitorProfile),angular.forEach(E.monitors,function(e){e.location===t&&E.callbackSelectMonitor(e)});var a="L"===t[t.length-1],i=t.slice(0,-2);angular.forEach(E.monitorSplits,function(e,t){t===i&&E.callbackSelectMonitor(a?e.left:e.right)})},E.callbackSplitMoved=function(e,t){if(Ye(e,t)){var a=E.selectedMonitor&&E.selectedMonitor.location;Ge(),Ae(E.monitorProfile);var i=a&&re(a);i&&E.callbackSelectMonitor(i)}},E.callbackSplitDblClick=function(t){var e=re(t),a=E.monitorProfile.splits[t];angular.isObject(a)&&angular.isObject(e)&&P.open("browseSplitMonitor",{data:{config:angular.copy(a),name:e.name,bounds:[{max:e.w},{max:e.h}]}}).then(function(e){a.direction===e.config.direction?Ye(t,e.config.position):a=angular.merge(a,e.config),Ge(),Ae(E.monitorProfile)})},E.callbackCreateGroup=function(e){var t=E.monitorSelectionState.createGroup;if(E.monitorSelectionState.createGroup=0,!(e.length<2)){var a,i;2!==t&&angular.forEach(e,function(e){e.isGroup||Ke(e.location)});var n=e.find(function(e){return e.isGroup?e:e.isInGroup?qe(e):void 0});if(angular.isObject(n)){a=n.location;var o=E.monitorProfile.groups[n.location];angular.isObject(o)&&(o.layout=t,angular.forEach(e,function(e){if(e.isGroup){var t=E.monitorProfile.groups[e.location];angular.forEach(t&&t.monitors,function(e){-1===o.monitors.indexOf(e)&&o.monitors.push(e)})}else{-1===o.monitors.indexOf(e.location)&&o.monitors.push(e.location)}})),angular.forEach(e,function(e){e!==n&&e.isGroup&&delete E.monitorProfile.groups[e.location]})}else{E.monitorProfile.groups=E.monitorProfile.groups||{};var r="";for(angular.forEach(e,function(e){r+=e.location}),a="group_"+r.hashCode();angular.isDefined(E.monitorProfile.groups[a]);)a="group_"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,6);var s={monitors:e.map(function(e){return e.location}),layout:t};E.monitorProfile.groups[a]=s,n=re(a),E.selectedMonitor&&(i=E.selectedMonitor.wallpaper)}Ge(),Ae(E.monitorProfile),n=re(a),angular.isObject(n)&&(E.callbackSelectMonitor(n),angular.isDefined(i)&&Ce(i))}},E.callbackRemoveGroup=function(a){var i;if(E.monitorProfile.groups&&(a.isGroup?i={location:a.location,monitors:E.monitorProfile.groups&&E.monitorProfile.groups[a.location]&&E.monitorProfile.groups[a.location].monitors}:angular.forEach(E.monitorProfile.groups,function(e,t){e.monitors.includes(a.location)&&(i={location:t,monitors:e.monitors})}),angular.isObject(i))){var t;for(ve(i.location),delete E.monitorProfile.groups[i.location],Ge(),Ae(E.monitorProfile),angular.forEach(i.monitors,function(e){t=t||re(e)});t&&angular.isDefined(E.monitorSplits&&E.monitorSplits[t.location]);)t=E.monitorSplits[t.location].left;t?E.callbackSelectMonitor(t):E.selectedMonitor=void 0}},E.callbackCancelMonitorGrouping=function(e){0!==E.monitorSelectionState.createGroup&&(E.monitorSelectionState.createGroup=0,e.stopPropagation(),e.preventDefault())},E.callbackMonitorRightClick=function(e,a){if(0===E.wallpaperConfig.layout){var t=C.builder(),i=ye(),n=1<i.length;if(1<i.length&&angular.isObject(a.wallpaper)){var o=C.builder(),r=C.builder();angular.forEach(i,function(t){a.location===t.location||t.isInGroup||(o.button(t.name,function(){Ce(a.wallpaper,t.location)}),r.button(t.name,function(){var e=t.wallpaper;Ce(a.wallpaper,t.location),angular.isObject(e)&&Ce(e,a.location)}))}),t.subMenu("ui_browse_monitors_copy_to",o),t.subMenu("ui_browse_monitors_swap_with",r)}!n&&!a.isGroup||t.empty()||t.divider(),n&&(a.isSplit||a.isGroup&&2===a.layout||t.button("ui_browse_monitors_add_stretch_group","fas fa-object-group",function(){E.callbackSelectMonitor(a),E.monitorSelectionState.createGroup=1}),t.button("ui_browse_monitors_add_clone_group","fas fa-clone",function(){E.callbackSelectMonitor(a),E.monitorSelectionState.createGroup=2})),a.isGroup&&t.button("ui_browse_monitors_remove_group","fas fa-object-ungroup",function(){E.callbackRemoveGroup(a)}),a.isGroup||a.isInGroup||(t.button("ui_browse_monitors_add_split","fas fa-cut",function(){E.callbackSplitSelectedMonitor(a)}),Z(a)&&!a.isSplit?t.button("ui_browse_monitors_auto_split","fas fa-magic",function(){T.callDeferred("browseWallpaperObject","readSurroundDisplayInfo").then(function(e){angular.isString(e.error)?P.open("genericConfirm",{data:{title:"ui_browse_monitors_auto_split_error_header",message:e.error,okVisible:!0}}):angular.isObject(e.splits)&&(Ke(a.location),angular.merge(E.monitorProfile.splits,e.splits),Ge(),Ae(E.monitorProfile),E.callbackSelectMonitor(E.monitorSplits[a.location].left))})}):a.isSplit&&t.button("ui_browse_monitors_remove_all_splits","fas fa-times",function(){Ke(a.rootLocation),Ge(),Ae(E.monitorProfile),E.callbackSelectMonitor(re(a.rootLocation))})),t.empty()||t.open(E,e)}},E.callbackSplitRightClick=function(e,t){var a=C.builder();a.button("ui_browse_monitors_edit_split","fas fa-edit",function(){E.callbackSplitDblClick(t)}).button("ui_browse_monitors_remove_split","fas fa-times",function(){E.callbackRemoveSplit(re(t+"/L"))}),a.open(E,e)},E.syncFile={nextId:1},E.syncStatus={fileError:!1,fileLoaded:!1,subscriptionLoadAttempted:!1},E.setSyncInfo=function(e){console.log("setSyncInfo",e),angular.merge(E.syncFile,e),angular.isArray(E.syncFile.playlists)||(E.syncFile.playlists=[]),angular.isArray(E.syncFile.folders)||(E.syncFile.folders=[]),E.syncStatus.fileLoaded=!0,Je()},E.setSyncPaused=function(){console.log("setSyncPaused"),E.syncStatus.fileError=!0,Je()},E.$on("onSteamStatusFinished",function(){E.syncStatus.subscriptionLoadAttempted=!0,Je()}),E.applyMonitorConfigurationAndWallpaperConfig=function(e,t){var a={x0:0,y0:0,x1:0,y1:0},i=458,n=200;angular.forEach(e,function(e){a.x0=Math.min(a.x0,e.x0),a.y0=Math.min(a.y0,e.y0),a.x1=Math.max(a.x1,e.x1),a.y1=Math.max(a.y1,e.y1)});var o=a.x1-a.x0,r=a.y1-a.y0,s=i/o,l=n/r,c=Math.min(s,l);E.monitorScale=c,E.monitorSelectionBoxStyle="width:"+o*c+"px;height:"+r*c+"px;position:absolute;";var d=[];angular.forEach(e,function(e){var t={};t.x=e.x0,t.y=e.y0,t.w=e.x1-e.x0,t.h=e.y1-e.y0,t.index=e.index,t.location=e.location,t.name=e.name,0===e.index&&(t.selected=!0),t.playlistFlags={},t.playlist={items:[],settings:q()},d.push(t)}),d.sort(function(e,t){return e.index<t.index?-1:e.index>t.index?1:0}),E.monitors=d;var p=t.wallpaperconfig||{};if(p.selectedwallpapers=p.selectedwallpapers||{},E.wallpaperConfig=p,E.monitorProfile=t.wallpaperconfig&&t.wallpaperconfig.profile||{},Ge(),0<d.length){var u=d[0];if(angular.isDefined(u&&E.monitorSplits[u.location]))for(;angular.isDefined(E.monitorSplits[u.location]);)u=E.monitorSplits[u.location].left;u.isInGroup&&(u=qe(u)||u),xe(u)}if(angular.merge(E.browserSettings,{advertiseexplore:!0,advertiseworkshop:!0,advertiseworkshoppopup:A.canUseFilterSettings()}),angular.isObject(t.browser)&&(angular.merge(E.browserSettings,t.browser),angular.merge(W,t.browser.filterinfo&&t.browser.filterinfo.installed||{}),angular.merge(L,t.browser.filterinfo&&t.browser.filterinfo.workshop||{}),E.filterProxy.ratingtags=angular.copy(W.ratingtags),!E.browserSettings.advertiseworkshoppopup&&angular.isUndefined(E.browserSettings.defaultfilterconfig.Anime))){var g=L.tags&&!0===L.tags.Anime;E.browserSettings.defaultfilterconfig={Anime:g}}E.folders=E.browserSettings.folders,E.viewOpacity={value:E.browserSettings.viewopacity||100},S(function(){E.$broadcast("rzSliderForceRender")});var f={};if(Qe(t.wallpaperproperties,f),Re(E.wallpapers),p.selectedwallpapers=f,angular.isArray(t.localfiles)&&(t.localfiles.map(function(e){ne(e)}),ie()),Ee(),Se(),E.showMonitorRow){if(E.changeMonitorActive=E.browserSettings.showmonitorselectiononstart,!E.changeMonitorActive&&angular.isString(E.browserSettings.lastselectedmonitor)){var m=re(E.browserSettings.lastselectedmonitor);angular.isObject(m)&&xe(m)}}else E.canAdvertiseWorkshop=M;var v=[];if(angular.forEach(E.monitors,function(e){angular.isObject(e.wallpaper)&&v.push(e.wallpaper)}),Re(v),E.playlists=t.playlists||[],E.profiles=t.profiles||[],E.sharedSettings=t.shared||{},E.generalUserSettings=t.general||{},E.userMonitorSettings=E.generalUserSettings.usermonitors||{},A.validateSharedSettings(E.sharedSettings),S(function(){I=!0,E.requestTrialWarning&&E.showTrialWarning(),Je()}),t.browseroptions){if(t.browseroptions.seasonaldialogoptions){var h=t.browseroptions.seasonaldialogoptions,b={title:h.header,message:"ui_browse_modal_seasonal_info_body",okVisible:!0,cancelVisible:!1,checkboxVisible:!0,checkboxChecked:!1,checkboxTitle:"ui_browse_modal_seasonal_info_never_show_again",leftVisible:!0,leftClass:"btn-default",leftAction:"browseCollection",leftText:"ui_browse_modal_seasonal_info_browse_collection",left2Visible:!0,left2Class:"btn-default",left2Action:"revertTheme",left2Text:"ui_browse_modal_seasonal_info_disable_theming"};P.open("genericConfirm",{data:b}).then(function(e){E.browserSettings.seasonaldialogtimestamp=h.timestamp,b.checkboxChecked&&(E.browserSettings.seasonaldialogdisabled=!0),"browseCollection"===e?E.setListSource("explore"):"revertTheme"===e&&T.callDeferred("browseWallpaperObject","disableUiSeasonalTheming")})}if(t.browseroptions.safemodewarning){var _={title:"ui_browse_modal_safe_mode_header",message:"ui_browse_modal_safe_mode_body",okVisible:!0,cancelVisible:!0,checkboxLowVisible:!0,checkboxChecked:!0,checkboxTitle:"ui_browse_use_safe_mode"},y=function(){_.checkboxChecked||T.callDeferred("browseWallpaperObject","disableSafeMode")};P.open("genericConfirm",{data:_}).then(function(){T.callDeferred("browseWallpaperObject","reloadWallpaperConfig"),y()}).catch(function(){y()})}t.browseroptions.showworkshop&&E.setListSource(A.getDefaultWorkshopTab()),E.browserOptions=t.browseroptions}if(19536<=R.getWindowsBuild()&&R.getWindowsBuild()<19564&&!E.browserSettings.buildversionerror19536newdisabled){var w={title:"Broken Windows Insider Build (19536 - 19564)",message:"Your current Windows Insider build "+R.getWindowsBuild()+" does not allow for Wallpaper Engine to work.<br/><br/>Please update to Insider build <b>19564</b> or later to make Wallpaper Engine work again.",leftIcon:"images/warning.png",okText:"ui_ok",okVisible:!0,checkboxLowVisible:!0,checkboxChecked:!1,checkboxTitle:"ui_browse_modal_steam_redownload_never_show_again"};P.open("genericConfirm",{data:w},{backdropClass:"modal-backdrop-danger"}).then(function(){w.checkboxChecked&&(E.browserSettings.buildversionerror19536newdisabled=!0)})}},E.updateGeneralSettings=function(e){angular.merge(E.generalUserSettings,e)},E.updateConfigWallpaperProperties=function(e){if(E.wallpaperConfig&&E.wallpaperConfig.selectedwallpapers){var t=[];Qe(e,E.wallpaperConfig.selectedwallpapers,t),Re(t),_=!1,Ee(),Ce(E.selectedMonitor&&E.selectedMonitor.wallpaper)}},E.applyUserVote=function(t,a){angular.forEach(E.wallpapers.concat(ae()),function(e){e.workshopid===t&&(e.uservote=a)}),window.safeApply(E)};var Xe=!(E.setWallpaperProperties=function(t){function e(e){angular.isObject(e)&&e.file===t.file&&(e.properties=e.properties||{},e.properties[t.location]=t.properties,e.defaultproperties=t.defaultproperties,e.propertyPresets=t.presets,te(e))}angular.forEach(E.wallpapers,e),e(E.currentSelection),J()});function Ze(){return angular.isString(E.selectedMonitor&&E.selectedMonitor.location)&&angular.isObject(E.currentSelection)}function et(e){var a={};return angular.forEach(e,function(e,t){a[t]=e.value}),a}function tt(a){var e,t,i,n={file:E.currentSelection.file,location:E.selectedMonitor.location,properties:(e=E.currentSelection.defaultproperties,t=a,i=angular.copy(e||{}),angular.forEach(t,function(e,t){i[t]=i[t]||{},i[t].value=e}),i)};T.callDeferred("browseWallpaperObject","applySingleProperty",angular.toJson(n));var o=E.currentSelection.properties[E.selectedMonitor.location];angular.forEach(o,function(e,t){angular.isDefined(a[t])&&(e.value=a[t])})}function at(t){function e(){T.callDeferred("browseWallpaperObject","saveWallpaperPresets",{file:t.file,presets:JSON.clean(t.propertyPresets)})}var a=x.when();return angular.isArray(t.propertyPresets)||(a=T.callDeferred("browseWallpaperObject","getWallpaperPresets",{file:t.file}).then(function(e){t.propertyPresets=e.presets})),a.then(function(){return P.open("browseCollections",{data:{type:"presets",isSaving:!1,collections:t.propertyPresets,onDeleted:e}})})}function it(e){for(var t=0;t<e.length;++t){var a=e[t];angular.isString(a.title)&&0!==a.title.length?a.approved=0<=a.tags.indexOf("Approved"):(e.splice(t,1),--t)}}E.updateWorkshopStatus=function(e){if((E.steamWorkshopStatus=e).complete&&S(function(){E.steamWorkshopStatus.hidden=!0},5e3),(e.complete||e.error)&&a.$broadcast("onSteamStatusFinished",e),X()){if(e.redownload&&!Xe&&!E.browserSettings.steamredownloaddialogdisabled){var t={title:"ui_browse_modal_steam_redownload_error_header",message:"ui_browse_modal_steam_redownload_error_body",okVisible:Xe=!0,checkboxVisible:!0,checkboxChecked:!1,checkboxTitle:"ui_browse_modal_steam_redownload_never_show_again"};P.open("genericConfirm",{data:t}).then(function(){t.checkboxChecked&&(E.browserSettings.steamredownloaddialogdisabled=!0)})}}else M=!1,E.canAdvertiseWorkshop=!1},E.showInstallationWarning=function(e,t){A.showInstallationWarning(e,t).then(function(e){"disable"===e?T.callDeferred("browseWallpaperObject","removeAutoStartCompletely"):"fix"===e&&T.callDeferred("browseWallpaperObject","fixAutoStart")})},E.callOpenStorePage=function(){T.callDeferred("browseWallpaperObject","openStorePage")},E.showTrialWarning=function(){D=!0,I?E.browserSettings.hasshowntrialwarning||(E.browserSettings.hasshowntrialwarning=!0,k("ui_modal_trial_version_start_body",{hrs:2}).then(function(e){return P.open("genericConfirm",{data:{title:"ui_modal_trial_version_start_title",message:e,okVisible:!0,leftVisible:!0,leftClass:"btn-info",leftAction:"openStore",leftText:"ui_modal_trial_version_start_open_store_page"}}).then(function(e){"openStore"===e&&E.callOpenStorePage()})})):E.requestTrialWarning=!0},E.showMonitorMismatch=function(){P.open("genericConfirm",{data:{title:"ui_browse_modal_monitor_mismatch_title",message:"ui_browse_modal_monitor_mismatch_body",okVisible:!0}})},E.openSteamUserPage=function(e){A.openUrl("var_url_userpage",{id:e})},E.openSteamWorkshopPage=function(e){A.openUrl(e.workshopurl,{},A.usePlatformBrowser())},E.openSteamConnectFaq=function(){A.openUrl("var_url_faqsteam")},E.openReportDialog=function(e){P.open("browseReport",{data:{wallpaper:e,backendUrl:E.backendUrl,steamAuth:E.steamAuth}})},E.canSendReports=A.canSendReports(),E.canUseFilterSettings=A.canUseFilterSettings,E.promptWallpaperDependencySubscription=function(t){var e=x.when();if(angular.isString(t.dependency)){var a=!0;angular.forEach(E.wallpapers,function(e){e.workshopid===t.dependency&&"unsubscribed"!==e.status&&(a=!1)}),a&&(e=k("ui_browse_modal_subscribe_preset_body",{title:t.title}).then(function(e){return P.open("genericConfirm",{data:{title:"ui_browse_modal_subscribe_preset_header",message:e,okVisible:!0,cancelVisible:!0}}).then(function(){T.callDeferred("ui","subscribeWorkshopItem",t.dependency)})}))}return e},E.subscribeWorkshopItem=function(e){E.promptWallpaperDependencySubscription(e).then(function(){if(A.canShowTrialWarning()&&D&&(++j,E.showTrialAdvertiseAlert=5<=j,2===j))return P.open("genericConfirm",{data:{title:"",message:"ui_browse_modal_trial_reminder_body",cancelVisible:!0,cancelText:"ui_browse_alert_trial_reminder_button_cancel",okVisible:!0,okText:"ui_browse_alert_trial_reminder_button"}}).then(function(){T.callDeferred("browseWallpaperObject","openStorePage")});T.callDeferred("ui","subscribeWorkshopItem",e.workshopid)})},E.openFromFile=function(e){T.callDeferred("browseWallpaperObject","openFromFile",e).then(E.dropFile)},E.openFromUrl=function(){P.open("openFromUrl",{data:{hotkeys:E.sharedSettings.hotkeys}}).then(function(e){if(angular.isString(e)&&0<e.length){var t=ne(e,"Web");Le(t,E.currentFolder),ie(),Ce(t),Se(),T.callDeferred("browseWallpaperObject","addLocalWallpaperToHistory",[t.file])}})},E.getUserVote=function(e){T.callDeferred("ui","getUserVote","browseWallpapersCtrl",e.workshopid)},E.setUserVote=function(e,t){X()?T.callDeferred("ui","setUserVote","browseWallpapersCtrl",e,t):A.showSteamError()},E.setFavorited=function(e,t){X()?T.callDeferred("ui","setFavorited",e,t):A.showSteamError()},E.sendCommand=function(e,t){angular.isDefined(t)?T.callDeferred("browseWallpaperObject",e,t):T.callDeferred("browseWallpaperObject",e)},E.makeLabelEditable=function(e,t){var a=angular.element(e.currentTarget.parentElement),i=angular.element(a.children(".inputElement")[0]);function n(e){i.off("blur.edit"),i.off("keydown.edit"),a.removeClass("editSliderLabel"),!0!==e&&(t.value=i.val(),angular.isNumber(t.min)&&(t.value=Math.max(t.min,t.value)),angular.isNumber(t.max)&&(t.value=Math.min(t.max,t.value)),window.safeApply(E))}a.addClass("editSliderLabel"),i.focus(),i.val(t.value),i.select(),i.off("blur.edit"),i.off("keydown.edit"),i.on("blur.edit",n),i.on("keydown.edit",function(e){13===e.which?n():27===e.which&&n(!0)})},E.toggleMonitorSelection=function(){E.changeMonitorActive=!E.changeMonitorActive,E.changeMonitorActive||(E.monitorSelectionState.createGroup=0),E.changeMonitorActive||!E.browserSettings.advertiseworkshop&&!E.browserSettings.advertiseexplore||(E.canAdvertiseWorkshop=M)},E.toggleMonitorSelectionBackground=function(e){e.currentTarget===e.target&&E.toggleMonitorSelection()},E.callbackOk=function(e){e?"downloadable"===E.currentSelection.status?E.subscribeWorkshopItem(E.currentSelection):"installed"===E.currentSelection.status&&T.callDeferred("browseWallpaperObject","acceptAndClose"):T.callDeferred("browseWallpaperObject","acceptAndClose")},E.callbackClose=function(){T.callDeferred("browseWallpaperObject","cancelAndClose")},E.callbackSelectMonitor=function(e,t){0===E.wallpaperConfig.layout&&xe(e),t&&E.toggleMonitorSelection()},E.callbackPropertyLabelClicked=function(e){"bool"===e.type&&(e.value=!e.value,E.callbackWallpaperPropertyChanged(e.key,e))},E.callbackWallpaperPropertyChangedSlider=function(e,t){v[e]!==t.value&&(v[e]=t.value,E.callbackWallpaperPropertyChanged(e,t))},E.callbackWallpaperPropertyChanged=function(e,t){if(!h&&angular.isString(E.selectedMonitor.location)){var a=angular.copy(t),i={file:E.currentSelection.file,location:E.selectedMonitor.location,properties:{}};i.properties[e]=a,T.callDeferred("browseWallpaperObject","applySingleProperty",angular.toJson(i))}},E.isPropertyLabelVisible=function(e){return e&&"volume"!==e.type||E.isVolumeEnabled(E.selectedMonitor.location)},E.isVolumeEnabled=function(e){return E.generalUserSettings&&E.userMonitorSettings&&E.generalUserSettings.videoaudiooutput&&(!angular.isObject(E.userMonitorSettings[e])||E.userMonitorSettings[e].videoaudiooutput)},E.getVolumeDisabledText=function(e){return E.userMonitorSettings&&angular.isObject(E.userMonitorSettings[e])&&!E.userMonitorSettings[e].videoaudiooutput?"ui_browse_properties_volume_disabled_monitor":"ui_browse_properties_volume_disabled"},E.openMuteHelper=function(e){E.userMonitorSettings&&angular.isObject(E.userMonitorSettings[e])&&!E.userMonitorSettings[e].videoaudiooutput?E.toggleMonitorSelection():E.callbackShowSettings()},E.callbackResetCurrentWallpaperProperties=function(){Ze()&&P.open("genericConfirm",{data:{title:"ui_browse_details_properties_reset_prompt_header",message:"ui_browse_details_properties_reset_prompt_body",okVisible:!0,cancelVisible:!0}}).then(function(){E.currentSelection.properties[E.selectedMonitor.location]=angular.copy(E.currentSelection.defaultproperties),angular.forEach(E.currentSelection.properties[E.selectedMonitor.location],function(e,t){E.callbackWallpaperPropertyChanged(t,e)})})},E.callbackSaveWallpaperProperties=function(){Ze()&&P.open("browseCollections",{data:{isSaving:!0,type:"presets",collections:E.currentSelection.propertyPresets||[]}}).then(function(t){E.currentSelection.propertyPresets=E.currentSelection.propertyPresets||[];var e=E.currentSelection.propertyPresets.find(function(e){return e.name===t.name});if(angular.isObject(e))angular.merge(e.properties,et(E.currentSelection.properties[E.selectedMonitor.location]));else{var a={name:t.name,properties:et(E.currentSelection.properties[E.selectedMonitor.location])};E.currentSelection.propertyPresets.push(a)}T.callDeferred("browseWallpaperObject","saveWallpaperPresets",{file:E.currentSelection.file,presets:JSON.clean(E.currentSelection.propertyPresets)})})},E.callbackLoadWallpaperProperties=function(){Ze()&&at(E.currentSelection).then(function(e){tt(e.properties)})},E.callbackShareWallpaperProperties=function(){if(Ze()){var t=et(E.currentSelection.properties[E.selectedMonitor.location]);P.open("browseWallpaperSharePreset",{data:{preset:t}}).then(function(e){angular.isObject(e)&&!angular.equals(t,e)&&tt(e)})}},E.callbackSavePropertiesAsDefaults=function(e){var a=ke(!0);P.open("browseSetDefaults",{data:{properties:e,selectionCount:a.length}}).then(function(e){var t={properties:{},mode:e.mode,wallpapers:a.map(function(e){return e.file}),monitors:E.monitors.map(function(e){return e.location})};angular.forEach(e.options,function(e){e.enabled&&(t.properties[e.key]=e.value)}),T.callDeferred("browseWallpaperObject","setPropertyDefaults",t)})},E.callbackShowSettings=function(){T.callDeferred("browseWallpaperObject","showSettingsDialog")},E.callbackShowEditor=function(){T.callDeferred("browseWallpaperObject","showEditorDialog")},E.callbackUnsubscribeOrRemove=function(e){be(e,!0)},E.callbackOpenInEditor=function(e){T.callDeferred("browseWallpaperObject","openInEditor",e.file)},E.callbackSelectFileForProperty=function(t,e){T.callDeferred("browseWallpaperObject","selectFileForProperty",e,t.fileType||"").then(function(e){t.value=e,E.callbackWallpaperPropertyChanged(t.key,t)})},E.callbackRemoveFileForProperty=function(e){e.value="",E.callbackWallpaperPropertyChanged(e.key,e)},E.callbackOpenDirectory=function(e){angular.isString(e)&&T.callDeferred("browseWallpaperObject","openDirectory",e)},E.evalCondition=function(e){return E.selectedMonitor&&E.selectedMonitor.location&&E.$eval(e,E.currentSelection.properties[E.selectedMonitor.location])},E.callbackClickSteamStatus=function(){angular.isObject(E.steamWorkshopStatus)&&E.steamWorkshopStatus.error&&A.showSteamError()},E.callbackResetFilter=function(){var t,e;E.sourceIsExplore||(E.filterTemp.filterFavoritesOnly=!1,E.filter=Q(E.source),E.filterProxy.ratingtags=angular.copy(E.filter.ratingtags),E.sourceIsWorkshop?(t=E.filter,e=E.browserSettings.defaultfilterconfig,angular.isObject(t.tags)&&A.canUseFilterSettings()&&angular.forEach(Y(e),function(e){t.tags[e]=!1}),L=E.filter):E.sourceIsInstalled&&(W=E.filter))},E.canUseAgeRatingTags=A.canUseAgeRatingTags,E.callbackToggleResolutionFilter=function(e,t,a){var i,n;switch(e.preventDefault(),e.stopPropagation(),t){case 0:i=0,n=6;break;case 1:i=6,n=9;break;case 2:i=9,n=13;break;case 3:i=13,n=18;break;case 4:i=18,n=23}for(var o=i;o<n;++o){var r=E.filterResolutionTags[o];E.filter.resolutiontags[r.value]=a}},E.callbackToggleGenreFilter=function(e,t){e.preventDefault(),e.stopPropagation(),angular.forEach(E.filterAllTags,function(e){"Unspecified"===e.value&&E.sourceIsWorkshop?E.filter.tags[e.value]=!1:E.filter.tags[e.value]=t})};var nt={},ot={},rt={},st={},lt=[],ct={},dt={},pt={},ut=x.when(),gt=!0,ft=!0,mt={};function vt(){return angular.isString(E.exploreNavigation[0].key)?ot[E.exploreNavigation[0].key]:[]}function ht(e){return E.browserSettings.explore&&E.browserSettings.explore.disliked.includes(e.name)}function bt(e){return E.browserSettings.explore&&E.browserSettings.explore.liked.includes(e.name)}function _t(){var t=0;angular.forEach(E.sortedExploreQueries,function(e){(e.loading||e.showError)&&++t});var e=E.exploreNavigation[0].key;e&&0===t&&(dt[e]<=0&&(dt[e]=5),E.refreshExplore())}function yt(t){k(["ui_browse_no_service_body","ui_browse_no_service_body_use_backup"]).then(function(e){P.open("genericConfirm",{data:{title:"ui_browse_no_service_header",message:t?e.ui_browse_no_service_body+e.ui_browse_no_service_body_use_backup:e.ui_browse_no_service_body,okVisible:!0}})})}var wt=0;function kt(e){var t=vt();t.findAndRemove(e);var a=E.exploreNavigation[0].key;if(a)if(0===t.length)ot[a]=st[a],st[a]=[];else for(;25<E.sortedExploreQueries.length;){var i=E.sortedExploreQueries.shift();st[a].push(i)}E.sortedExploreQueries.push(e),E.performExploreQuery(e)}function St(e){return angular.isArray(e)||(e=[e]),e.filter(function(e){return e}).map(function(e){switch(e.tags=e.tags||["None"],angular.isNumber(e.weight)?e.weight=Math.floor(e.weight):e.weight=1,ht(e)?e.currentPriority=0:e.currentPriority=e.priority||0,A.updateQueryName(e),e.category){case"genre":e.title="trend_year"===e.querytype?"ui_browse_explore_category_genre_popular":"trend_week"===e.querytype?"ui_browse_explore_category_genre_recent":"subscriptions"===e.querytype?"ui_browse_explore_category_genre_most_subscribed":"ui_browse_explore_category_genre_new";break;case"creator":angular.isArray(e.includetags)&&0<e.includetags.length?e.title="published_desc"===e.querytype?"ui_browse_explore_category_creator_genre_recent":"ui_browse_explore_category_creator_genre_popular":e.title="published_desc"===e.querytype?"ui_browse_explore_category_creator_recent":"ui_browse_explore_category_creator_popular";break;case"collection":e.title=e.title||"ui_browse_explore_category_collection";break;case"keyword":e.title="trend_year"===e.querytype?"ui_browse_explore_category_keyword_popular":"trend_week"===e.querytype?"ui_browse_explore_category_keyword_recent":"subscriptions"===e.querytype?"ui_browse_explore_category_keyword_most_subscribed":"ui_browse_explore_category_keyword_new"}return e}),e}function xt(){E.sortedWallpapers=[],V.visible=!1,V.current=1}E.performExploreQuery=function(t,a){if(E.sourceIsExplore){if("collection"===t.category&&!A.canUseCollectionsInDiscover())return t.wallpapers=[],t.loading=!1,t.showError=!1,E.sortedExploreQueries.findAndRemove(t),void E.refreshExplore();"creator"===t.category&&angular.isUndefined(E.steamUserInfos[t.itemid])&&T.callDeferred("ui","pollSteamUserInfo",t.itemid,"browseWallpapersCtrl");var i={sort:t.querytype,category:t.category,text:t.keyword,requiredTags:angular.isArray(t.includetags)&&t.includetags.concat(["Wallpaper","Everyone"]),excludedTags:t.excludetags,limit:a?0:20,page:V.current,nocache:E.queryNoCache,token:++w,fullQueryToken:++wt,isusingbackup:E.isUsingBackup};switch(t.category){case"creator":case"collection":i.itemid=t.itemid,i.randomize=!a;break;case"keyword":i.searchText=t.keyword;break;case"misc":delete i.requiredTags,delete i.excludedTags,delete i.text}a?(E.sortedWallpapers=[],E.queryActive=!0,E.showErrorInBackground=!1,V.query=t):(t.wallpapers=[],t.loading=!0,t.showError=!1,i.page=1);var e=function(e){t.loading=!1,E.sourceIsExplore&&e.token===i.token&&(a&&w!==i.token||(angular.isObject(e.collection)&&(t.collection=e.collection),E.queryWallpapers=e.wallpapers,Pe(),it(E.queryWallpapers),0!==e.wallpapers.length||t.custom||E.sortedExploreQueries.findAndRemove(t),E.isUsingBackup=e.isbackup,a?(E.queryActive=!1,E.sortedWallpapers=E.queryWallpapers,A.updatePagination(V,i.page,e.pagecount),V.visible=1<e.pagecount):(E.queryWallpapers.shuffle(),t.wallpapers=E.queryWallpapers,E.refreshExplore())))},n=ut.then(function(){return T.callDeferred("browseWallpaperObject","queryWorkshop",i).then(e).catch(function(){E.hasShownSteamServiceError||yt(E.hasShownSteamServiceError=!0),T.setCallErrorSuppressed("queryWorkshop",!0),E.queryBackup(i).then(e).catch(function(){t.loading=!1,t.showError=!0})})});a||(ut=n)}},E.exploreScrollSentinelChanged=function(e){(gt=e)&&_t()},E.refreshExplore=function(){if(E.sourceIsExplore&&ft){var t=E.exploreNavigation[0].key,e=t?dt[t]:0;if(t&&gt&&e<1&&(e=dt[t]=1),t&&0<e){var a=vt();if("home"===t){if(St(a),0===a.length)return;!function(){pt={tagCounts:{},categoryCounts:{},maxTagCount:{},categoryMaxCounts:{}},angular.forEach(rt.home,function(e){angular.forEach(e.tags,function(e){angular.isNumber(pt.tagCounts[e])?++pt.tagCounts[e]:pt.tagCounts[e]=1}),angular.isNumber(pt.categoryCounts[e.category])?++pt.categoryCounts[e.category]:pt.categoryCounts[e.category]=1}),angular.forEach(nt.home,function(e){angular.forEach(e.tags,function(e){angular.isNumber(pt.maxTagCount[e])?++pt.maxTagCount[e]:pt.maxTagCount[e]=1}),angular.isNumber(pt.categoryMaxCounts[e.category])?++pt.categoryMaxCounts[e.category]:pt.categoryMaxCounts[e.category]=1}),angular.forEach(nt.home,function(e){var t=bt(e),a=ht(e),i=t?1:a?-1:0;0!=i&&angular.forEach(e.tags,function(e){angular.isNumber(pt[e])?pt[e]+=i:pt[e]=i})});var t=0,a=0;angular.forEach(pt,function(e){e<0&&(t=Math.min(t,e)),0<e&&(a=Math.max(a,e))}),t=Math.min(-1,t),a=Math.max(1,a),pt.mins=t,pt.maxs=a}(),angular.forEach(lt.slice(),function(e){var i={weight:0,tag:"",failCount:0};angular.forEach(e.dependenttags,function(e){var t=Math.floor(2.01*(pt[e]||0)),a=ct[e]||0;a=Math.min(a,3),0<t&&a<t?t>i.weight&&(i.weight=t,i.tag=e):++i.failCount}),0<i.weight&&0===i.failCount&&(angular.isNumber(ct[i.tag])?++ct[i.tag]:ct[i.tag]=1,lt.findAndRemove(e),nt[t].push(e),a.push(e))}),a.shuffle(),angular.forEach(a,function(a){var e,t,i,n,o,r=(e=a,angular.isNumber(pt.categoryCounts[e.category])?.9*(1-pt.categoryCounts[e.category]/pt.categoryMaxCounts[e.category])+.1:1),s=(t=a,i=1,angular.forEach(t.tags,function(e){if(angular.isNumber(pt.tagCounts[e])){var t=1-pt.tagCounts[e]/pt.maxTagCount[e];i=Math.min(t,i)}}),.9*i+.1),l=(n=a,o=1,angular.forEach(n.tags,function(e){angular.isNumber(pt[e])&&(o+=pt[e])}),o=(o-pt.mins)/(pt.maxs-pt.mins),ht(n)&&(o=0),Math.easeInOutQuad(o)*(bt(n)?1.9:2));if(a.currentWeight=Math.log(1+l*(s+r)),!ht(a))if(angular.isNumber(a.priority))a.currentWeight+=a.priority;else{var c=!1;angular.forEach(a.tags,function(e){if(angular.isNumber(mt[e])){var t=Math.pow(Math.clamp(mt[e]-3,0,4)/4,2);Math.random()<t&&(a.currentWeight=999,mt[e]=0,c=!0)}}),c&&angular.forEach(angular.copy(mt),function(e,t){mt[t]=.21*e})}}),a.sort(function(e,t){return e.currentPriority!==t.currentPriority?t.currentPriority-e.currentPriority:t.currentWeight-e.currentWeight});var i=a[0],n=A.getAvailableTags();angular.forEach(n,function(e){i.tags.includes(e)?mt[e]=0:(!angular.isNumber(pt[e])||0<=pt[e])&&(angular.isNumber(mt[e])?++mt[e]:mt[e]=1)}),kt(i),--dt[t]}else if(E.browserSettings.explore){for(var o="favorites"===t?E.browserSettings.explore.favorites:E.browserSettings.explore.disliked,r=o.length-1;0<=r;--r){var s=o[r],l=function(e){return e.name===s};if(!nt[t].find(l)){var c=nt.home.find(l);angular.isObject(c)||(c=lt.find(l)),c&&(nt[t].push(c),a.push(c))}}if(St(a),0===a.length)return;a.sort(function(e,t){return e.currentPriority!==t.currentPriority?t.currentPriority-e.currentPriority:t.currentWeight-e.currentWeight}),kt(a[0]),--dt[t]}}}},E.pushExplorePage=function(e){var t=E.exploreNavigation[0].key;if(t&&(rt[t]=E.sortedExploreQueries),"wallpaperfavorites"===e.key&&(e.querytype="my_favorites",e.category="misc",e.noicons=!0),xt(),E.exploreNavigation.unshift(e),e.key){if("wallpaperfavorites"===e.key)return delete e.key,E.sortedExploreQueries=[],void E.performExploreQuery(e,!0);E.sortedExploreQueries=[],rt[e.key]=[],ot[e.key]=nt[e.key].slice(),ot[e.key].push({category:"misc",querytype:"followers_created",title:"ui_browse_explore_category_followed",tags:["Misc"],priority:99}),angular.frameTimeout(S,2,_t)}else E.sortedExploreQueries=[],E.performExploreQuery(e,!0)},E.popExplorePage=function(){if(xt(),1<E.exploreNavigation.length){E.exploreNavigation.shift();var e=E.exploreNavigation[0];e.key?(E.sortedExploreQueries=rt[e.key],E.sortedExploreQueries.length<5&&(dt[e.key]=5)):E.sortedExploreQueries=[],angular.frameTimeout(S,2,E.refreshExplore)}},E.addExploreCustomFavoriteQuery=function(){P.open("browseExploreCreateQuery",{data:{isEditing:!1,query:{category:"keyword"}}}).then(function(e){console.log("create query",e),E.browserSettings.explore.custom.push(angular.copy(e)),e.custom=!0,St(e),nt.favorites.push(e),E.sortedExploreQueries.unshift(e),E.performExploreQuery(e)})},E.exploreCustomRemoveCallback=function(t){E.browserSettings.explore.custom=E.browserSettings.explore.custom.filter(function(e){if(e.category!==t.category||e.querytype!==t.querytype||"keyword"===e.category&&e.keyword!==t.keyword||"creator"===e.category&&e.itemid!==t.itemid||"collection"===e.category&&e.itemid!==t.itemid)return!0}),E.sortedExploreQueries.findAndRemove(t),nt.favorites.findAndRemove(t),rt.favorites.findAndRemove(t),t===E.exploreNavigation[0]&&E.popExplorePage()},E.exploreLikedCallback=function(e,t,a){angular.isDefined(e)?(e?(E.browserSettings.explore.liked.includes(a.name)?E.browserSettings.explore.liked.findAndRemove(a.name):E.browserSettings.explore.liked.push(a.name),E.browserSettings.explore.disliked.findAndRemove(a.name)):(E.browserSettings.explore.liked.findAndRemove(a.name),E.browserSettings.explore.disliked.includes(a.name)?E.browserSettings.explore.disliked.findAndRemove(a.name):E.browserSettings.explore.disliked.push(a.name)),E.browserSettings.explore.hasLikedAny=!0):angular.isDefined(t)&&(t?E.browserSettings.explore.favorites.push(a.name):E.browserSettings.explore.favorites.findAndRemove(a.name))};var Et=x.when(),Ct={};function At(){if(E.sourceIsWorkshop){var e=angular.isString(E.filterPreset.workshopid),t=angular.isString(E.filterAuthor.authorSteamId),a=E.filter.text;E.filter.exactMatch&&angular.isString(a)&&0<a.length&&!a.trim().includes('"')&&(a='"'+a+'"');var i,n={requiredTags:[],excludedTags:[],sort:t?E.filterAuthor.sort:E.filter.sort,text:a,preset:E.filterPreset.workshopid,itemid:E.filterAuthor.authorSteamId,page:U.current,filterTitle:E.filter.filterTitle,nocache:E.queryNoCache,token:++w,isusingbackup:E.isUsingBackup},o=function(){i=n.excludedTags.length},r=function(e,t){var a=n.excludedTags.length-i;e<=a&&(n.excludedTags.splice(n.excludedTags.length-a,a),angular.isString(t)&&n.excludedTags.push(t))};o(),angular.forEach(E.filter.tags,function(e,t){e||n.excludedTags.push(t)}),r(E.filterAllTags.length,"Unspecified"),angular.forEach(E.filter.utilitytags,function(e,t){1===e?n.requiredTags.push(t):2===e&&n.excludedTags.push(t)}),e||(o(),angular.forEach(E.filter.categorytags,function(e,t){e||n.excludedTags.push(t)}),r(E.filterCategoryTags.length),o(),angular.forEach(E.filter.typetags,function(e,t){e||n.excludedTags.push(t)}),r(E.filterTypeTags.length),o(),angular.forEach(E.filter.resolutiontags,function(e,t){e||n.excludedTags.push(t)}),r(E.filterResolutionTags.length)),o(),angular.forEach(E.filter.ratingtags,function(e,t){e||n.excludedTags.push(t)}),r(E.filterRatingTags.length),E.queryActive=!0,E.showErrorInBackground=!1,E.sortedWallpapers=[],E.sortedFolders=[],E.sortedExploreQueries=[];var s=function(e){E.queryActive=!1,E.queryNoCache=!1,E.sourceIsWorkshop&&(e.token===n.token?(E.isUsingBackup=e.isbackup,e.isbackup||T.setCallErrorSuppressed("queryWorkshop",!1),E.queryWallpapers=e.wallpapers,Pe(),E.sortedWallpapers=E.queryWallpapers,E.sortedWallpapers.sort(Te),it(E.queryWallpapers),A.updatePagination(U,n.page,e.pagecount),"queryMostPopular"===e.action&&(E.filter.sort="top_rated"),1<U.current&&U.current>e.pagecount&&(U.current=e.pagecount,E.queryNoCache=!0,At())):At())};T.callDeferred("browseWallpaperObject","queryWorkshop",n).then(s).catch(function(e){(!angular.isNumber(e)||1===e)&&1<U.current&&!E.isUsingBackup?(U.current=1,E.queryNoCache=!0,At()):(E.hasShownSteamServiceError||yt(E.hasShownSteamServiceError=!0),T.setCallErrorSuppressed("queryWorkshop",!0),E.queryBackup(n).then(s).catch(function(){E.queryActive=!1,E.showErrorInBackground=!0}))})}}E.queryBackup=function(t){if("relevance"===(t=angular.copy(t)).sort&&(t.sort="top_rated"),!["most_recent","most_up_votes","subscriptions","top_rated","trend_year","trend_month","trend_week","trend_day","relevance"].includes(t.sort))return x.when({action:"queryMostPopular",wallpapers:[],token:t.token,pagecount:1,isbackup:!0});var a={};angular.forEach(t,function(e,t){(angular.isString(e)&&0<e.length||angular.isArray(e)&&0<e.length||angular.isNumber(e))&&(a[t]=e)}),delete a.token;var i="";angular.forEach(a,function(e,t){if(0!==i.length&&(!angular.isArray(e)||0<e.length)&&(i+="&"),angular.isArray(e))for(var a=0;a<e.length;++a){i+=t+"["+a+"]"+"="+e[a],a+1<e.length&&(i+="&")}else i+=t+"="+e});function e(e){if(angular.isArray(e&&e.data&&e.data.response&&e.data.response.items))return Ct[i]=e,E.backupDate=e.data.response.date,Et=Et.then(function(){return T.callDeferred("browseWallpaperObject","convertWorkshopBackup",t,e.data.response.items,e.data.response.totalpagecount||1)});E.isUsingBackup=!1,x.reject()}return Ct[i]?e(Ct[i]):n.get(E.backendUrl+"/api/backupquery/v1?"+i).then(e)},E.searchHasSpaces=function(){return angular.isString(E.filter.text)&&0<E.filter.text.length&&E.filter.text.trim().includes(" ")};var Pt,Tt,Rt,It={category:"preset",publishedItems:[],isSteamAvailable:X};function Ot(){Pt&&(Pt.cancel(),Pt=void 0)}function Mt(e){var t=angular.element(e.target).closest(".browseWallpaperPlaylistImage")[0];return{target:angular.element(t),scope:t&&t.attachedScope}}function Dt(e){if(50<E.selectedMonitor.playlist.items.length)return e;e=Math.clamp(e,0,1);return 5*Math.floor(1440*e/5)/1440}E.onReceivePresets=function(e){It.publishedItems=It.publishedItems.concat(e)},E.callbackPublishPreset=function(){if(!X())return A.showSteamError();var e=E.currentSelection.dependency&&ce(E.currentSelection.dependency)||E.currentSelection,t={dependency:e.workshopid};It.dependentProject={tags:E.currentSelection.tags.split(",")},It.publishedItems=[];var a={};angular.forEach(E.currentSelection.properties[E.selectedMonitor.location],function(e,t){a[t]={value:e.value,type:e.type}}),T.callDeferred("browseWallpaperObject","preparePublishPreset",e.file,{properties:a,dependency:e.workshopid}).then(function(){return P.open("editorSteamPublish",{projectData:t,editorSettings:It})})},E.callbackBrowsePresets=function(e){if(!X())return A.showSteamError();e.ispreset&&(e=ce(e.dependency)),E.setListSource("workshop"),E.filterPreset.title=e.title,E.filterPreset.workshopid=e.workshopid,E.pagination.current=1,At()},E.callbackClearPresetFilter=function(){delete E.filterPreset.workshopid,At()},E.callbackBrowseAuthor=function(e){if(!X())return A.showSteamError();E.setListSource("workshop"),E.filterAuthor.sortOptions=H,E.filterAuthor.sort=H[0].value,E.filterAuthor.authorSteamId=e,E.pagination.current=1,At()},E.callbackClearAuthorFilter=function(){delete E.filterAuthor.authorSteamId,At()},E.callbackShowPresetHint=function(){P.open("genericConfirm",{data:{title:"ui_browse_details_properties_preset_hint_header",message:"ui_browse_details_properties_preset_hint_body",okVisible:!0}})},E.showPresetPublishOptions=function(e){return e.workshopid&&!E.steamWorkshopStatus.error&&"Web"===e.type&&angular.isObject(E.selectedMonitor&&e.properties&&e.properties[E.selectedMonitor.location])&&1<Object.keys(e.properties[E.selectedMonitor.location]).length},E.onFileSubscriptionError=function(){E.hasShownSteamServiceSubscriptionError||(E.hasShownSteamServiceSubscriptionError=!0,yt())},E.showWorkshopAdvertiseModal=function(e,t){t&&t.stopPropagation(),P.open("browseWallpaperWorkshopInfo",{data:{filterConfig:E.browserSettings.defaultfilterconfig,canCancel:e}}).then(E.callbackResetFilter)},E.setListSource=function(e){if(E.source!==e){if(("workshop"===e||"explore"===e)&&!X())return A.showSteamError();"workshop"===e&&X()&&(E.browserSettings.advertiseworkshop=!1,E.browserSettings.advertiseworkshoppopup&&(E.browserSettings.advertiseworkshoppopup=!1,E.showFilter.visible=!0,E.showWorkshopAdvertiseModal())),"explore"===e&&X()&&(E.browserSettings.advertiseexplore=!1),E.canAdvertiseAny=!1,E.queryActive=!1,E.source=e,E.sourceIsWorkshop="workshop"===e,E.sourceIsExplore="explore"===e,E.sourceIsInstalled=!E.sourceIsWorkshop&&!E.sourceIsExplore,E.sourceIsWorkshop?(E.pagination=U,E.filter=L,E.sortOptions=B):E.sourceIsExplore?(E.pagination=V,E.filter={},E.sortOptions=[]):E.sourceIsInstalled&&(E.pagination=N,E.filter=W,E.sortOptions=F),E.filterProxy.ratingtags=angular.copy(E.filter.ratingtags),E.showFilter.counts=!1,E.sortedWallpapers=[],De(),E.sourceIsExplore&&function(){if(E.sourceIsExplore){if(ut=x.when(),nt={home:St(A.getStaticExploreQueries()),favorites:[],disliked:[]},ot={home:angular.copy(nt.home),favorites:[],disliked:[]},rt={home:[],favorites:[],disliked:[]},st={home:[],favorites:[],disliked:[]},lt=[],ct={},mt={},V.visible=!1,V.current=1,dt={home:5,favorites:5,disliked:5},E.exploreNavigation=[{title:"",key:"home"}],E.sortedWallpapers=[],E.sortedFolders=[],E.sortedExploreQueries=rt.home,E.browserSettings.explore){var e=angular.copy(E.browserSettings.explore.custom).map(function(e){return e.custom=!0,e});St(e),nt.favorites=ot.favorites.concat(e),ot.favorites=nt.favorites.slice()}A.canUseDiscover()&&n.get(E.backendUrl+"/api/explore/v1").then(function(e){var t=e&&e.data&&e.data.response&&e.data.response.items;if(angular.isArray(t)){var a=[],i=function(e){angular.isArray(e.dependenttags)&&0!==e.dependenttags.length?lt.push(e):a.push(e)};angular.forEach(t,function(a){angular.isObject(a)&&angular.isString(a.category)&&angular.isArray(a.querytypes)&&("collection"===a.category?i(angular.copy(a)):angular.forEach(a.querytypes,function(e){var t=angular.copy(a);delete t.querytypes,t.querytype=e,i(t)}))}),St(lt),lt.shuffle(),St(a),angular.forEach(a,function(e){angular.isObject(e)&&(nt.home.push(e),ot.home.push(e))}),_t()}}),E.refreshExplore()}}()}},E.getDisplayTags=function(e){e=e.split(",");var t=[],a=["Wallpaper","Preset","Web","Video","Scene","Application","Approved","Multi-monitor optimized","Workshop","Official","Local"];return angular.forEach(e,function(e){a.indexOf(e)<0&&t.push(e)}),A.createTranslatedTagList(t)},E.getDisplayType=function(e){return A.translateTagInstant(e)},E.callbackChangePage=function(e,t){if("…"!==e){var a=e;angular.isString(a)&&(a=E.pagination.current,"next"===e?++a:--a),(a=Math.clamp(a,1,E.pagination.count))===E.pagination.current&&!t||(A.updatePagination(E.pagination,a,E.pagination.count),E.sourceIsExplore?E.performExploreQuery(V.query,!0):E.sourceIsWorkshop?At():(ie(),m.scrollTop(0)))}else A.showPaginationPageNumberPrompt(e).then(E.callbackChangePage)},E.callbackCancelEvent=window.cancelEventBubble,E.callbackToggleAllWallpapersInCurrentMonitorPlaylist=function(t,e,a){var i=E.selectedMonitor.playlist.items.findIndex(function(e){return e.wallpaper===t})<0||a,n=e?[t]:ke(!0,t);angular.forEach(n,function(t){function e(e){return e.wallpaper===t&&!a}(E.selectedMonitor.playlistFlags[t.file]=i)?E.selectedMonitor.playlist.items.pushIfNew({wallpaper:t},e):E.selectedMonitor.playlist.items.findAndRemove(e)}),me()},E.callbackToggleEntryInCurrentMonitorPlaylist=function(a,e){var t=a.wallpaper,i=E.selectedMonitor.playlist.items.findIndex(function(e){return e===a}),n=E.selectedMonitor.playlist.items.filter(function(e){return e.wallpaper===t}).length,o=i<0,r=e?[t]:ke(!0,t);angular.forEach(r,function(e){E.selectedMonitor.playlistFlags[e.file]=o||1<n;function t(e){return e===a}o?E.selectedMonitor.playlist.items.pushIfNew({wallpaper:e},t):E.selectedMonitor.playlist.items.findAndRemove(t)}),me()},E.callbackShowProfiles=function(o){var t=angular.copy(E.wallpaperConfig);t.selectedwallpapers=t.selectedwallpapers||{},t.profile=angular.copy(E.monitorProfile),angular.forEach(se(),function(e){angular.isObject(e.playlist)&&1<e.playlist.items.length&&angular.isObject(t.selectedwallpapers[e.location])?t.selectedwallpapers[e.location].playlist=ge(e.playlist):angular.isObject(t.selectedwallpapers[e.location])&&delete t.selectedwallpapers[e.location].playlist});var e={isSaving:o,collectionItem:t,collections:E.profiles,hotkeys:E.sharedSettings.hotkeys,type:"profiles"};P.open("browseCollections",{data:e}).then(function(e){var t,a,i,n;o?(i=e,n=E.profiles.find(function(e){return e.name===i.name}),angular.isObject(n)?angular.merge(n,i):E.profiles.push(i),E.wallpaperConfig.name=i.name):(t=e,a=se(),angular.forEach(a,function(e){ve(e.location),delete e.missingPlaylistItems}),E.wallpaperConfig=angular.copy(t),E.monitorProfile=t.profile||{},Ge(),Ae(E.monitorProfile),_=!1,Ee(),angular.forEach(angular.copy(E.wallpaperConfig.selectedwallpapers),function(e,t){angular.isString(e.file)&&Ce(le(e.file),t)}),angular.forEach(a,me),xe(a[0]))})},E.callbackShowPlaylists=function(a){var e={isSaving:a,collectionItem:E.selectedMonitor.playlist,collections:E.playlists,hotkeys:E.sharedSettings.hotkeys,location:E.selectedMonitor.location,type:"playlists"};P.open("browseCollections",{data:e}).then(function(e){var t;a?function(t){t=ge(t);var e=E.playlists.find(function(e){return e.name===t.name});angular.isObject(e)?(angular.merge(e,t),e.items=t.items):E.playlists.push(t)}(e):(t=fe(t=e),E.selectedMonitor.playlist=t,E.selectedMonitor.playlistFlags={},angular.forEach(t.items,function(e){E.selectedMonitor.playlistFlags[e.wallpaper.file]=!0}),me())})},E.callbackShowPlaylistSettings=function(){P.open("browsePlaylistSettings",{data:{settings:E.selectedMonitor.playlist.settings,defaultSettings:q()}}).then(function(){me()})},E.callbackClearPlaylist=function(){E.selectedMonitor.playlistFlags={},E.selectedMonitor.playlist.items=[],me()},E.getPreviewUrl=A.getPreviewUrl,e.on("mousedown.daytimedrag",function(e){if(angular.element(e.target).hasClass("daytimeDragBorder")){var t=Mt(e);if(angular.isObject(t.scope)&&angular.isObject(t.scope.entry)){window.cancelEventImmediately(e);var a=angular.offsetToAncestor(e,f);Tt={active:!1,entry:t.scope.entry,lastX:a.left}}}}),e.on("mousemove.daytimedrag",function(e){if(angular.isDefined(Tt)){var t=angular.offsetToAncestor(e,f);if(!Tt.active)if(2<Math.abs(t.left-Tt.lastX)){Tt.active=!0,Tt.indicator=angular.element(document.createElement("div")),Tt.indicator.addClass("daytimeIndicator"),Tt.indicator.css({left:t.left}),g.append(Tt.indicator);var a=angular.element(document.createElement("div")),i=angular.element(document.createElement("div"));a.addClass("timeHint"),i.addClass("timeHintWrapper"),i.append(a),Tt.indicator.append(i),a.text(o("date")(0,E.getTimelineFormat(),"+0000")),Tt.timeHint=a}if(Tt.active){Tt.indicator.css({left:t.left});var n=t.left/f.innerWidth();n=Dt(n)+1e-4,Tt.timeHint.text(o("date")(24*n*60*60*1e3,E.getTimelineFormat(),"+0000"))}}}),e.on("mouseup.daytimedrag",function(e){if(angular.isObject(Tt)&&Tt.active){var t=angular.offsetToAncestor(e,f);Tt.indicator.remove();var a=t.left/f.innerWidth();Tt.entry.daytimeend=Dt(a),me()}Tt=void 0,window.safeApply(E),window.cancelEventBubble(e)}),e.on("contextmenu.daytimedrag",function(e){var t=angular.element(e.target),a=Mt(e);if(t.hasClass("daytimeDragBorder")){if(!angular.isObject(a.scope)||!angular.isObject(a.scope.entry)||!angular.isNumber(a.scope.entry.daytimeend))return;C.builder().button("ui_browse_context_menu_remove","fas fa-times",function(){delete a.scope.entry.daytimeend,me(),window.safeApply(E)}).open(E,e)}else if(t.hasClass("browseWallpaperPlaylistImageChild")){if(!angular.isObject(a.scope)||!angular.isObject(a.scope.entry))return;if(!angular.isObject(a.scope.entry.wallpaper)||a.scope.entry.wallpaper.isStub)return;var i=C.builder();a.scope.entry.wallpaper!==E.currentSelection&&i.button("ui_browse_context_menu_replace_with_selection","fas fa-sync",function(){a.scope.entry.wallpaper=E.currentSelection,me(),window.safeApply(E)}),i.button("ui_browse_context_menu_choose_preset","fas fa-folder-open",function(){at(a.scope.entry.wallpaper).then(function(e){a.scope.entry.preset=e.name,me()})}),angular.isString(a.scope.entry.preset)&&i.button("ui_browse_context_menu_remove_preset","fas fa-times",function(){delete a.scope.entry.preset,me()}),i.open(E,e)}}),E.getTimelineFormat=function(){return E.selectedMonitor&&E.selectedMonitor.playlist&&E.selectedMonitor.playlist.settings&&"clock12"===E.selectedMonitor.playlist.settings.clock?"hh:mma":"HH:mm"};var jt,Wt,Lt,Ft=[];function Bt(e,t){if(angular.isObject(e)&&e!==t&&!E.sourceIsExplore){var a=Lt!==E.sourceIsWorkshop;Lt=E.sourceIsWorkshop,a||(E.pagination.current=1),function(){E.filterStatus.type=E.filter.typetags&&(!E.filter.typetags.Scene||!E.filter.typetags.Video||!E.filter.typetags.Web)||E.filter.categorytags&&(!E.filter.categorytags.Wallpaper||!E.filter.categorytags.Preset),E.filterStatus.rating=E.filter.ratingtags&&!E.filter.ratingtags.Everyone,E.filterStatus.source=E.filter.sourcetags&&(!E.filter.sourcetags.Workshop||!E.filter.sourcetags.Official||!E.filter.sourcetags.Local),E.filterStatus.resolution=!1,angular.forEach(E.filter.resolutiontags,function(e){!1===e&&(E.filterStatus.resolution=!0)}),E.filterStatus.utility=!1,angular.forEach(E.filter.utilitytags,function(e){0!==e&&(E.filterStatus.utility=!0)}),E.filterStatus.tags=!1;var a=E.sourceIsWorkshop?Y(E.browserSettings.defaultfilterconfig):[];angular.forEach(E.filter.tags,function(e,t){!1!==e||"Unspecified"===t||a.includes(t)||(E.filterStatus.tags=!0)})}(),E.sourceIsWorkshop?(E.showFilter.counts=E.filterStatus.type||E.filterStatus.rating||E.filterStatus.source||E.filterStatus.resolution||E.filterStatus.tags||E.filterStatus.utility,At()):ie(),angular.isDefined(Wt)&&(S.cancel(Wt),Wt=void 0),I&&(Wt=S(function(){E.browserSettings.filterinfo={installed:angular.copy(W),workshop:angular.copy(L)},"relevance"===E.browserSettings.filterinfo.workshop.sort&&(E.browserSettings.filterinfo.workshop.sort=void 0),delete E.browserSettings.filterinfo.installed.text,delete E.browserSettings.filterinfo.workshop.text,delete E.browserSettings.filterinfo.installed.exactMatch,delete E.browserSettings.filterinfo.workshop.exactMatch},1e3))}}function Ht(e){angular.forEach(e.items,function(e,t){E.folderRootExclusion[t]=!0}),angular.forEach(e.subfolders,Ht)}function Nt(){angular.forEach(E.filterUtilityTags,function(t){A.translateTag(t.value).then(function(e){t.label=e})}),angular.forEach(E.filterAllTags,function(t){A.translateTag(t.value).then(function(e){t.label=e})}),angular.forEach(E.filterResolutionTags,function(t){A.translateTag(t.value).then(function(e){t.label=e})})}E.requestThumbnailPath=function(e){Rt?Ft.push(e.file):(Rt=e.file,T.callDeferred("browseWallpaperObject","getThumbnail",Rt))},E.onThumbnailReceived=function(t){t.file===Rt&&(Rt=void 0,0<Ft.length&&(Rt=Ft.shift(),T.callDeferred("browseWallpaperObject","getThumbnail",Rt))),angular.isString(t.preview)&&(angular.forEach(y,function(e){e.file===t.file&&(e.preview=t.preview,e.previewsmall=t.preview)}),jt=jt||S(function(){E.sortedWallpapers=E.sortedWallpapers.slice(),jt=void 0},1e3))},E.setSteamAuthTicket=function(e){E.steamAuth.ticket=e.ticket},E.resetSearchFilter=function(){E.filter.text="",angular.element("#browseSearchFilterText").focus()},(window.browseWallpapersCtrl=E).folders=[],E.folderRootExclusion={},E.currentFolder=void 0,E.steamAuth={},E.sortedExploreQueries=[],E.sortedWallpapers=[],E.sourceIsInstalled=!0,E.steamUserInfos={},E.wallpapers=[],E.colorPickerOptions=A.getColorPickerDefaults(),E.source="installed",E.pagination=N,E.multiSelection=[],E.preview={play:!1},E.monitorSelectionState={createGroup:0},E.filterProxy={},E.filter={},E.filterTemp={filterFavoritesOnly:!1},E.filterPreset={},E.filterAuthor={},E.showFilter={visible:!1,counts:!1},E.backendUrl="http://localhost:3000",E.canAdvertiseAny=!0,E.canOpenWallpaperDetailsOnPlatform=A.canOpenWallpaperDetailsOnPlatform(),E.browserSettings={viewiconsize:"medium",showmonitorselectiononstart:!0,resultsperpage:100,explore:{favorites:[],liked:[],disliked:[],custom:[]},folders:[],authorblacklist:[],defaultfilterconfig:{}},F=[{value:"name",label:"ui_browse_sort_name"},{value:"rating",label:"ui_browse_sort_rating"},{value:"favorite",label:"ui_browse_sort_favorite"},{value:"filesize",label:"ui_browse_sort_filesize"},{value:"subscriptiondate",label:"ui_browse_sort_subscription_date"},{value:"updatedate",label:"ui_browse_sort_last_updated"}],B=A.canShowSpecializedBrowseLists()?[{value:"top_rated",label:"ui_browse_query_sort_by_votes"},{value:"trend_year",label:"ui_browse_query_sort_by_trend_year"},{value:"trend_month",label:"ui_browse_query_sort_by_trend_last_month"},{value:"trend_week",label:"ui_browse_query_sort_by_trend_last_week"},{value:"trend_today",label:"ui_browse_query_sort_by_trend_today"},{value:"most_recent",label:"ui_browse_query_sort_by_date"},{value:"most_up_votes",label:"ui_browse_query_sort_most_up_votes"},{value:"subscriptions",label:"ui_browse_query_sort_most_subscriptions"},{type:"divider"},{value:"my_favorites",label:"ui_browse_query_sort_my_favorites"},{value:"voted_up",label:"ui_browse_query_sort_voted_up"},{value:"friends_favorites",label:"ui_browse_query_sort_friends_favorites"},{value:"friends_created",label:"ui_browse_query_sort_friends_created"},{value:"followers_created",label:"ui_browse_query_sort_by_followed_users"}]:[{value:"top_rated",label:"ui_browse_query_sort_by_votes"},{value:"most_recent",label:"ui_browse_query_sort_by_date"},{value:"subscriptions",label:"ui_browse_query_sort_most_subscriptions"}],H=[{value:"published_desc",label:"ui_browse_query_sort_by_date"},{value:"published_votes",label:"ui_browse_query_sort_by_votes"},{value:"last_updated",label:"ui_browse_query_sort_last_updated"}],E.layouts=[{label:"ui_browse_monitors_layout_per_monitor",value:0},{label:"ui_browse_monitors_layout_fit",value:1},{label:"ui_browse_monitors_layout_clone_wallpaper",value:2}],E.$watch("currentSelection",function(e,t){v={},J(),angular.isDefined(e)&&(angular.isString(e.authorsteamid)&&angular.isUndefined(E.steamUserInfos[e.authorsteamid])&&T.callDeferred("ui","pollSteamUserInfo",e.authorsteamid,"browseWallpapersCtrl"),!angular.isDefined(e.workshopid)||angular.isDefined(t&&t.workshopid)&&e.workshopid===t.workshopid||(A.requiresFullAsyncWorkshop()&&T.callDeferred("ui","updateWorkshopItemMetaData",e.workshopid),E.getUserVote(e))),angular.isObject(e&&e.localization)&&(s.insertTranslations(e.localization),k.refresh()),e&&De()}),E.$watch("wallpaperConfig.layout",function(e,t){if(angular.isNumber(e)&&I&&e!==t)switch(T.callDeferred("browseWallpaperObject","changeLayout",e),Ge(),E.wallpaperConfig.layout){case 0:var a=E.monitors.find(function(e){return 0===e.index});xe(a.group||a);break;case 1:xe(E.monitors[0]);break;case 2:xe(E.monitors.find(function(e){return 0===e.index}))}}),E.$on("onInternalDropStart",function(){E.isDragDropActive=!0}),E.$on("onInternalDropStop",function(){E.isDragDropActive=!1}),E.$watch("browserSettings",function(e){angular.isObject(e)&&I&&T.callDeferred("browseWallpaperObject","persistBrowserSettings",angular.toJson(e))},!0),E.$watch("sharedSettings",function(e){angular.isObject(e)&&I&&T.callDeferred("browseWallpaperObject","persistSharedSettings",angular.toJson(e))},!0),E.$watch("userMonitorSettings",function(e){angular.isObject(e)&&I&&T.callDeferred("browseWallpaperObject","persistUserMonitorSettings",angular.toJson(e))},!0),E.$watch("filter",Bt,!0),E.$watch("filterAuthor",Bt,!0),E.$watch("filterProxy.ratingtags",function(e){E.sourceIsWorkshop&&angular.isObject(e)&&(e.Questionable||e.Mature)?E.browserSettings.agegateconfirmed?E.filter.ratingtags=angular.copy(e):P.open("ageGate").then(function(){E.filter.ratingtags=angular.copy(e),E.browserSettings.agegateconfirmed=!0}).catch(function(){E.filterProxy.ratingtags={Everyone:!0,Questionable:!1,Mature:!1}}):E.filter.ratingtags=angular.copy(e)},!0),E.$watch("folders",function(e,t){e!==t&&(E.folderRootExclusion={},angular.forEach(e,Ht),ie())},!0),E.$watch("playlists",function(e,t){angular.isArray(e)&&e!==t&&I&&T.callDeferred("browseWallpaperObject","playlistsChanged",angular.toJson(e))},!0),E.$watch("profiles",function(e,t){angular.isArray(e)&&e!==t&&I&&T.callDeferred("browseWallpaperObject","profilesChanged",angular.toJson(e))},!0),E.$on("onCppInit",function(e,t){console.error("CEF ANGULARJS BROWSER - onCppInit begin"),E.providerIcon=A.getProviderIcon(),E.showDiscover=A.canUseDiscover(),E.showExactMath=A.canUseExactMatch(),E.showApprovedTag=A.canUseApprovedTag(),E.filterAllTags=A.getAvailableTags(),E.filterUtilityTags=A.getAvailableTags(!0),E.filterSourceTags=A.getWallpaperSourceTags(),E.filterTypeTags=A.getWallpaperTypeTags(),E.filterCategoryTags=A.getWallpaperCategoryTags(),E.filterRatingTags=A.getWallpaperRatingTags(),E.filterResolutionTags=A.getResolutionTags();var a=E.filterAllTags[0];E.filterAllTags.splice(0,1),E.filterAllTags.push(a),E.filterAllTags=E.filterAllTags.map(function(e){return{label:e,value:e}}),E.filterUtilityTags=E.filterUtilityTags.map(function(e){return{label:e,value:e}}),E.filterResolutionTags=E.filterResolutionTags.map(function(e){return{label:e.replace(/Standard Definition/g,"SD"),value:e}}),W=Q(),L=Q("workshop"),E.sortOptions=F,E.filter=W,Nt(),E.backendUrl=t?"http://localhost:3000":"https://www.wallpaperengineapi.com:3000",console.error("CEF ANGULARJS BROWSER - onCppInit end")}),a.$on("$translateChangeEnd",Nt),e.on("keydown.wpe.wallpaperbrowser",function(e){if(!(0<angular.element(":focus").length||P.isAnyModalVisible())){if(37<=e.keyCode&&e.keyCode<=40){var t=E.sortedWallpapers.indexOf(E.currentSelection),a=m,i=angular.element("#wpimg0"),n=a.width(),o=i.width(),r=Math.floor(n/o);switch(e.keyCode){case 37:--t;break;case 38:t-=r;break;case 39:t+=1;break;case 40:t+=r}angular.isNumber(t)&&0<=t&&t<E.sortedWallpapers.length&&!E.changeMonitorActive&&E.callbackWallpaperSelected(E.sortedWallpapers[t])}else 46===e.keyCode?Be():e.ctrlKey&&65===e.keyCode&&(Ie(E.sortedWallpapersPrePagination),Ie(E.sortedFoldersPrePagination));window.safeApply(E)}});var Vt={findElement:function(e){var t=Mt(e);if(angular.isObject(t.scope)){var a=t.scope.entry&&t.scope.entry.wallpaper;return angular.isObject(a)?{element:t.target,data:t.scope.entry}:void 0}}};r.registerInitiator(Vt),E.dropFile=function(e){var t="";angular.forEach(e,function(e){!t&&e.toLowerCase().includes(".exe")&&(t=e)});var a=x.when(e);t&&(a=_e(t).then(function(){return e})),a.then(function(e){var t=[];if(angular.forEach(e,function(e){t.push(ne(e))}),0<t.length){var a=t[0];Le(t,E.currentFolder),ie(),Ce(a),Se(a),T.callDeferred("browseWallpaperObject","addLocalWallpaperToHistory",t.map(function(e){return e.file}))}})},E.dropFileEditor=function(e){T.callDeferred("browseWallpaperObject","createInEditor",e[0])},E.dropConfigEditor={label:"ui_browse_footer_btn_open_wallpaper_in_editor",icon:"fas fa-pencil-ruler",class:"browseWallpaperDropElements",fnCondition:function(e){return E.dropConfigEditor.disabled=1<e.length,!0}},E.dropConfigBrowser={fnCondition:function(e){var t=!1;return angular.forEach(e,function(e){A.isExtension(e,"static")&&(t=!0)}),E.dropConfigBrowser.label=t?"ui_browse_footer_btn_open_wallpaper_in_gallery_static":"ui_browse_footer_btn_open_wallpaper_in_gallery",E.dropConfigBrowser.icon=t?"fas fa-image":"fas fa-film",!0},class:"browseWallpaperDropElements"};function Ut(){return ft=!1,x.when()}var zt;function $t(){zt&&(zt.remove(),zt=void 0)}function qt(e,t){for(var a=angular.element(f.children()[0]).children(),i=e.pageX-f[0].getBoundingClientRect().left,n=0,o=0;o<a.length;++o){var r=angular.element(a[o]).outerWidth(!0);if(i<n+.5*r)return t?n:o;n+=r}return t?n:a.length}R.addCloseCallback(Ut),E.$on("$destroy",function(){R.removeCloseCallback(Ut),e.off("keydown.wpe.wallpaperbrowser"),e.off("mousedown.daytimedrag"),e.off("mousemove.daytimedrag"),e.off("mouseup.daytimedrag"),e.off("contextmenu.daytimedrag"),r.unregisterInitiator(Vt),r.unregisterContainer(g),r.unregisterContainer(m)}),r.registerContainer(g,{onMouseEnter:function(){(zt=angular.element(document.createElement("div"))).addClass("browseWallpaperPlaylistHoverIndicator"),g.append(zt),Ot(),Pt=r.beginAutoScroll("playlistScroll",g,!0)},onMouseLeave:function(){$t(),Ot()},onMouseMove:function(e){!function(e){if(zt){var t=qt(e,!0);zt.css({left:t})}}(e)},onElementDropped:function(e,t){$t(),Ot(),delete t.daytimeend;var a=qt(e,!1),i=E.selectedMonitor.playlist.items.indexOf(t);if(-1===i){var n=ke(!0,t);angular.forEach(n,function(e){E.selectedMonitor.playlistFlags[e.file]=!0,E.selectedMonitor.playlist.items.splice(a,0,{wallpaper:e})})}else a!==i&&(a<i?(E.selectedMonitor.playlist.items.splice(i,1),E.selectedMonitor.playlist.items.splice(a,0,t)):(E.selectedMonitor.playlist.items.splice(a,0,t),E.selectedMonitor.playlist.items.splice(i,1)));E.$apply(),me()}}),r.registerContainer(m,{onMouseEnter:function(){},onMouseLeave:function(){},onMouseMove:function(){},onElementDropped:function(e,t){var a=angular.element(e.target).closest(".browseWallpaperImage")[0];a=a&&a.ctx&&a.ctx.wallpaper,angular.isObject(a)&&"folder"===a.type&&Fe(t,a)}})}]).filter("orderObjectBy",function(){return function(e,a,t){var i=[];return angular.forEach(e,function(e,t){e.key=t,i.push(e)}),i.sort(function(e,t){return(e[a]||0)>(t[a]||0)?1:-1}),t&&i.reverse(),i}}).directive("validationRemoveQuotes",function(){return{require:"ngModel",link:function(e,t,a,i){i.$parsers.push(function(e){var t=e.replace(/["]/g,"'");return t!==e&&(i.$setViewValue(t),i.$render()),t})}}}).directive("attachScope",function(){return{link:function(e,t){t[0].attachedScope=e}}}),window.youtubeLoaded=function(e){if(e.contentDocument.getElementById("player")){var t=angular.element("<style>.html5-video-container {width: 100% !important;height: 100% !important; }video {width: 100% !important;height: 100% !important;top: 0px !important;left: 0px !important;object-fit: cover;} </style>");angular.element(e.contentDocument).find("html > head").append(t)}},angular.module("wallpaperbrowserApp").controller("SettingsCtrl",["$q","$timeout","$translate","$document","$scope","skin","modals","host","utils","toastr",function(t,n,e,o,r,a,i,s,l,c){var d,p=!1,u={38:"konamiUp",40:"konamiDown",37:"konamiLeft",39:"konamiRight",66:"konamiPunch",65:"konamiPunch",13:"konamiSpin"},g=[38,38,40,40,37,39,37,39,66,65,13],f=0;window.settingsCtrl=r;var m=l.getQualityPreset("low"),v=l.getQualityPreset("medium"),h=l.getQualityPreset("high");function b(e){p=e}function _(e){window.settingsObject.applyGeneral(angular.toJson(e))}function y(e,t,a){var i=[{label:"ui_settings_playback_keep_running",value:"run"}];return t&&i.push({label:"ui_settings_playback_mute",value:"mute"}),e?(i.push({label:"ui_settings_playback_pause_per_monitor",value:"pause"}),i.push({label:"ui_settings_playback_pause_all",value:"pauseall"})):i.push({label:"ui_settings_playback_pause",value:"pause"}),a&&i.push({label:"ui_settings_playback_stop",value:"stop"}),i}function w(e){r.plugins=[],angular.isObject(r.generalSettings.plugins)||(r.generalSettings.plugins={}),r.pluginsInitialState={},angular.forEach(e,function(e){var t=e.key;"ledextensions"===t&&(t="iCUE & Chroma SDK");var a=r.generalSettings.plugins[e.key]||{};r.generalSettings.plugins[e.key]=a,angular.isUndefined(a.enabled)&&(a.enabled=!0);var i=angular.copy(e);i.state=a,i.name=t,r.plugins.push(i),r.pluginsInitialState[t]=a.enabled})}function k(e){angular.isObject(r.browser)||(r.browser={}),e.profiles&&(r.browser.profiles=e.profiles),e.playlists&&(r.browser.playlists=e.playlists),e.localfiles&&(r.browser.localfiles=e.localfiles)}r.antiAliasingOptions=[{label:"ui_settings_antialiasing_none",value:"none"},{label:"MSAA x2",value:"x2"},{label:"MSAA x4",value:"x4"},{label:"MSAA x8",value:"x8"}],r.resolutionOptions=[{label:"ui_settings_resolution_half",value:"half"},{label:"ui_settings_resolution_full",value:"full"}],r.postProcessingOptions=[{label:"ui_settings_gfx_disabled",value:"disabled"},{label:"ui_settings_gfx_enabled",value:"enabled"},{label:"ui_settings_gfx_ultra",value:"ultra"}],r.monitorDetectionOptions=[{label:"Device Path",value:"devicepath"},{label:"Device Path All",value:"devicepathall"},{label:"Layout",value:"layout"},{label:"GDI",value:"gdi"},{label:"GDI All",value:"gdiall"},{label:"Deprecated",value:"deprecated"}],r.graphicsApiOptions=[{label:"DirectX 11",value:"dxgi"},{label:"DirectX 9",value:"directx"},{label:"OpenGL",value:"opengl"}],r.videoFrameworkOptions=[{label:"ui_settings_video_framework_prefer_media_foundation",value:"mf"},{label:"ui_settings_video_framework_prefer_directshow_lav",value:"dshow.lav.vmr9"}],r.videoReadOptions=[{label:"ui_settings_read_from_disk",value:"fromdisk"},{label:"ui_settings_read_from_memory",value:"frommemory"}],r.videoLoopOptions=[{label:"ui_settings_loop_default",value:"default"},{label:"ui_settings_loop_sync_clock",value:"syncclock"},{label:"ui_settings_loop_sync_topo",value:"synctopo"}],r.webmFrameworkOptions=[{label:"ui_settings_video_framework_prefer_chromium",value:"cef"},{label:"ui_settings_video_framework_prefer_native",value:"native"}],r.logLevelOptions=[{label:"ui_settings_log_none",value:"none"},{label:"ui_settings_log_errors",value:"error"},{label:"ui_settings_log_verbose",value:"verbose"}],r.uiSkins=[{label:"ui_settings_skin_white",value:"white"},{label:"ui_settings_skin_dark",value:"dark"},{label:"ui_settings_skin_halloween",value:"halloween"},{label:"ui_settings_skin_winter",value:"winter"}],r.adjustDWMColorModes=[{label:"ui_settings_adjust_windows_color_disabled",value:"disabled"},{label:"ui_settings_adjust_windows_color_accent",value:"accent"},{label:"ui_settings_adjust_windows_color_everything",value:"everything"}],r.priorityOptions=[{label:"ui_settings_process_priority_normal",value:"normal"},{label:"ui_settings_process_priority_below_normal",value:"belownormal"}],r.windows7WallpaperModeOptions=[{label:"ui_settings_windows_7_wallpaper_mode_compatibility",value:"compatibility"},{label:"ui_settings_windows_7_wallpaper_mode_block_background",value:"blockbackground"}],r.tabInfo={activeIndex:0},r.fpsSlider={hideLimitLabels:!0,floor:10,ceil:50,onStart:function(){b(!1)},onEnd:function(){b(!0),_(r.generalSettings)}},r.iconOpacitySlider={hideLimitLabels:!0,floor:0,ceil:100},r.audioSlider={hideLimitLabels:!0,floor:0,ceil:200,onStart:function(){b(!1)},onEnd:function(){b(!0),_(r.generalSettings)}},r.audioThresholdSlider={hideLimitLabels:!0,floor:0,ceil:10,step:.1,precision:2,onStart:function(){b(!1)},onEnd:function(){b(!0),_(r.generalSettings)}},r.colorPickerOptions=l.getColorPickerDefaults(),r.refreshSlider=function(){n(function(){r.$broadcast("rzSliderForceRender")},50)},r.applyPreset=function(e){switch(e){case 0:angular.merge(r.generalSettings,m);break;case 1:angular.merge(r.generalSettings,v);break;case 2:angular.merge(r.generalSettings,h)}},r.callbackOk=function(){var e;(e=t.defer(),r.generalState.isRestartRequired?i.open("genericConfirm",{data:{title:"ui_settings_advanced_restart_setting_modal_header",message:"ui_settings_advanced_restart_setting_modal_body",cancelVisible:!0,okVisible:!0}}).then(function(){s.callDeferred("settingsObject","restartApp")}):e.resolve(),e.promise).then(function(){window.settingsObject.close(!0)})},r.callbackCancel=function(){window.settingsObject.close(!1)},r.applySettings=function(e){var t=e.runtime.multimonitor;r.playbackOptionsFocus=y(t,!0,!1),r.playbackOptionsMaximized=y(t,!0,!0),r.playbackOptionsFullscreen=y(t,!0,!0),r.playbackOptionsSleep=y(!1,!1,!0),r.playbackOptionsBattery=y(!1,!1,!0),r.playbackOptionsAudio=y(!1,!0,!1),r.generalSettings=e.user||{},r.dwmColorSettings={adjustdwmcolor:r.generalSettings.adjustdwmcolor,adjustdwmcolormode:r.generalSettings.adjustdwmcolormode,adjustdwmcolorwarning:r.generalSettings.adjustdwmcolorwarning},angular.isNumber(r.generalSettings.plugindelay)||(r.generalSettings.plugindelay=0),a.setAvailableSkins(e.runtime.skins),r.uiSkinsFull=[],angular.forEach(e.runtime.skins,function(e){r.uiSkinsFull.push({label:e.label,value:e.key})}),0===r.uiSkinsFull.length&&(r.uiSkinsFull=r.uiSkins.slice()),r.runtime=e.runtime,r.sharedSettings=e.shared,r.fpsSlider.ceil=e.runtime.frequencymax,w(e.discoveredplugins),k(e),n(function(){p=!0,r.refreshSlider()})},r.updateSettings=function(e){w(e.discoveredplugins),k(e)},r.setBuildVersion=function(e){r.buildVersion=e},r.toggleAutoStartRegistry=function(t){s.callDeferred("settingsObject","toggleAutoStartRegistry",!1,t).then(function(e){e&&(r.generalSettings.autostart=t)})},r.toggleAutoStartScheduler=function(t){i.showHighPriorityWarning(t,r.generalSettings).then(function(){s.callDeferred("settingsObject","toggleAutoStartHighPriority",t,!t).then(function(e){e&&(r.generalSettings.autostartscheduler=t)})})},r.showChangelog=function(){i.open("changelog")},r.resetConfig=function(){i.open("genericConfirm",{data:{title:"ui_settings_advanced_reset_config_modal_header",message:"ui_settings_advanced_reset_config_modal_body",leftIcon:"images/warning.png",cancelVisible:!0,okVisible:!0}},{backdropClass:"modal-backdrop-danger"}).then(function(){s.callDeferred("settingsObject","resetConfig")})},r.editPerApplicationSettings=function(){r.generalSettings.apprules=r.generalSettings.apprules||[],i.open("settingsPerApplication",{data:{rules:r.generalSettings.apprules,runtime:r.runtime,browser:r.browser}})},r.editHotkeys=function(){l.validateSharedSettings(r.sharedSettings),i.open("settingsHotkeys",{data:{hotkeys:r.sharedSettings.hotkeys,runtime:r.runtime}})},r.editPluginSettings=function(t){r.generalSettings.plugins=r.generalSettings.plugins||{},angular.isObject(r.generalSettings.plugins[t.key])||(r.generalSettings.plugins[t.key]={}),angular.forEach(t.options,function(e){angular.isDefined(r.generalSettings.plugins[t.key][e.name])||(r.generalSettings.plugins[t.key][e.name]=e.default)}),i.open("settingsPlugin",{data:{plugin:t,pluginSettings:r.generalSettings.plugins}})},r.openFaq=function(){l.openUrl("var_url_faq")},r.openTranslationHelp=function(){l.openUrl("var_url_translations")},r.sendSupportMail=function(){l.openUrl("var_url_sendsupportmail")},r.showMonitorIdentificationHelp=function(){i.open("genericConfirm",{data:{title:"ui_settings_advanced_monitor_identification",message:"ui_settings_advanced_monitor_identification_tip",okVisible:!0}})},r.showSleepHackHelp=function(e){e.stopPropagation(),e.preventDefault(),i.open("genericConfirm",{data:{title:"ui_settings_advanced_sleep_hack",message:"ui_settings_advanced_sleep_hack_tip",okVisible:!0}})},r.showPluginDelayHelp=function(){i.open("genericConfirm",{data:{title:"ui_settings_plugins_options_delay_load_help_title",message:"ui_settings_plugins_options_delay_load_help_body",okVisible:!0}})},r.canUseSeasonalTheming=l.canUseSeasonalTheming,r.$watch("generalSettings",function(e){p&&_(e)},!0),r.$watch("dwmColorSettings",function(){p&&a.applyDWMColorSettings(r.dwmColorSettings).then(function(){angular.merge(r.generalSettings,r.dwmColorSettings)})},!0),r.generalSettings=angular.copy(m),r.generalState={isRestartRequired:!1},angular.merge(r.generalSettings,{graphicsapi:"dxgi",playbackfocus:"run",playbackmaximized:"pause",playbackfullscreen:"pause",language:"en-us"}),r.$watchGroup(["generalSettings.uiskin","generalSettings.uiskinseasonal"],function(){p&&a.refreshSkin()}),r.$watch("generalSettings.language",function(e,t){angular.isString(e)&&angular.isString(t)&&e!==t&&(l.setLanguage(e),s.callDeferred("settingsObject","languageChanged",e))}),r.$watchGroup(["generalSettings.monitordetection","generalSettings.windows7mode","generalSettings.trayicon","generalSettings.uihardwareacceleration","generalSettings.uieffects"],function(){p&&(r.generalState.isRestartRequired=!0)}),r.$watch("plugins",function(e){p&&angular.forEach(e,function(e){e.state.enabled!==r.pluginsInitialState[e.name]&&(r.generalState.isRestartRequired=!0)})},!0),r.$watch("generalSettings.extremesleephack",function(e){p&&!0===e&&(r.generalSettings.autostartscheduler?i.open("genericConfirm",{data:{title:"ui_settings_advanced_sleep_hack_enable_warning_header",message:"ui_settings_advanced_sleep_hack_enable_warning_body",cancelVisible:!0,okVisible:!0}}).catch(function(){r.generalSettings.extremesleephack=!1}):(r.generalSettings.extremesleephack=!1,i.open("genericConfirm",{data:{title:"ui_settings_advanced_sleep_hack_error_auto_start_header",message:"ui_settings_advanced_sleep_hack_error_auto_start_body",cancelVisible:!0,cancelText:"ui_close"}})))}),r.$watch("sharedSettings",function(e){angular.isObject(e)&&p&&s.callDeferred("settingsObject","persistSharedSettings",angular.toJson(e))},!0),o.on("keydown.wpe.konami",function(e){var t=e.keyCode;if(g[f]===t&&2===r.tabInfo.activeIndex){var a=angular.element(o[0].body),i=u[t];a.css({animation:""}),n(function(){var e="konamiSpin"===i?" 200ms":" 100ms";a.css({animation:i+e})}),++f===g.length&&(c.success("Skins unlocked",""),f=0,window.settingsObject.konamiUnlock(),r.generalSettings.konami=!0,r.generalSettings.uiskin="space")}else f=0;angular.isDefined(d)&&(n.cancel(d),d=void 0),d=n(function(){f=0},1e3)}),r.$on("$destroy",function(){o.off("keydown.wpe.konami")}),r.$on("onCppInit",function(){r.isWindows10OrGreater=10<=a.getWindowsVersion(),r.isWindows8OrGreater=8<=a.getWindowsVersion(),r.availableLanguages=l.getAvailableLanguages()})}]),angular.module("wallpaperbrowserApp").directive("droplist",["$timeout",function(a){return{templateUrl:"views/templates/droplist.html",restrict:"E",scope:{dpOptions:"=",dpSelected:"=",dpDisabled:"=",dpChange:"&",dpEmptyText:"@"},link:function(i,t){var n;if(t=angular.element(t),i.selectItem=function(e){i.dpSelected=e.value,i.selected=e,angular.isFunction(i.dpChange)&&a(function(){i.$eval(i.dpChange)}),angular.element(t.find(".dropdown-toggle")[0]).focus()},angular.isUndefined(i.dpSelected)&&angular.isArray(i.dpOptions)&&0<i.dpOptions.length){var e=i.dpOptions[0];i.selected=e,angular.isFunction(i.dpChange)&&a(function(){i.$eval(i.dpChange)}),angular.element(t.find(".dropdown-toggle")[0]).focus()}i.$watch("dpSelected",function(t){if(angular.isDefined(t)){var a=!1;angular.forEach(i.dpOptions,function(e){e.value===t&&(i.selected=e,a=!0)}),a||(n=t)}}),i.$watch("dpOptions",function(e,t){if(angular.isArray(e)&&angular.isArray(t)&&e!==t){var a=!1;angular.forEach(e,function(e){angular.equals(e,i.selected)&&(a=!0)}),a||(i.selected=e[0],i.dpSelected=i.selected&&i.selected.value)}angular.isDefined(n)&&angular.isDefined(e)&&angular.isUndefined(i.selected)&&(angular.forEach(e,function(e){e.value===n&&(i.selected=e)}),n=void 0)}),i.keyDown=function(e){if(38===e.keyCode||40===e.keyCode){var t=38===e.keyCode?-1:1,a=i.dpOptions.map(function(e){return e.value}).indexOf(i.dpSelected);a<0||(a=Math.max(0,Math.min(i.dpOptions.length-1,a+t)),i.selectItem(i.dpOptions[a]),e.stopPropagation(),e.preventDefault())}}}}}]),angular.module("wallpaperbrowserApp").directive("checkbox",["$timeout",function(a){return{templateUrl:"views/templates/checkbox.html",restrict:"E",scope:{cbChecked:"=",cbDisabled:"=",cbTitle:"=",cbBit:"=",cbRecalculateBits:"&",cbChanged:"&",cbType:"@"},link:function(e){var t="normal";angular.isDefined(e.cbType)&&(t=e.cbType),e.toggle=function(){if(!e.cbDisabled){switch(t){case"tag":angular.isNumber(e.cbChecked)||(e.cbChecked=0),e.cbChecked+=1,1<e.cbChecked&&(e.cbChecked=0);break;case"bit":e.cbChecked=e.cbRecalculateBits(),e.cbChecked^=e.cbBit;break;default:e.cbChecked=!e.cbChecked}angular.isFunction(e.cbChanged)&&a(e.cbChanged)}},e.bitChecked=function(){return e.cbChecked&e.cbBit}}}}]),angular.module("wallpaperbrowserApp").controller("EditorCtrl",["$document","$compile","$q","$uibModalStack","$rootScope","$scope","$translate","$timeout","modals","host","utils","contextMenu",function(e,x,c,t,i,E,C,A,l,P,d,p){var n=!0,T=0,o=!0;function r(){var t;if(t=E.project,angular.forEach(E.filemenu,function(e){angular.isFunction(e.shouldHide)&&angular.isObject(t)&&(e.hidden=e.shouldHide(t)),function t(a,e){angular.forEach(e,function(e){angular.isFunction(e.shouldHide)&&angular.isObject(a)&&(e.hidden=e.shouldHide(a)),angular.isFunction(e.shouldDisable)&&(e.disabled=e.shouldDisable(a)),angular.isString(e.iconTemplate)&&(e.icon=e.iconTemplate.replace(/%provider%/g,d.getProviderIcon())),angular.isArray(e.children)&&t(a,e.children)})}(t,e.children)}),E.filemenu=angular.copy(E.filemenu),angular.forEach(E.filemenu,function(e){e.disabled=!1}),angular.isUndefined(E.project))for(var e=1;e<E.filemenu.length;++e)E.filemenu[e].disabled=!0}function s(e){angular.isUndefined(e)&&(e=!1),P.callEditor("setGridVisible",e)}function u(e){angular.isUndefined(e)&&(e=!1),P.callEditor("setSelectionBoxVisible",e)}function g(){E.selectedResource.item=null}function a(e){d.openUrl(e.workshopurl,{},d.usePlatformBrowser())}function f(t,a){return X(),E.blockEditorInput=!0,P.callEditor("openProject",t).then(function(e){E.blockEditorInput=!1,angular.isObject(e.data.general)||(e.data.general={}),angular.isObject(e.data.general.properties)||(e.data.general.properties={}),angular.isObject(e.data.general.properties.schemecolor)||(e.data.general.properties.schemecolor={value:"0 0 0"}),angular.isObject(e.objectproperties)||(e.objectproperties={}),e.data.type=e.data.type.toLowerCase(),E.editorLayoutClass="scene"===e.data.type?"editorLayoutScene":"editorLayoutSimple",A(function(){window.dispatchEvent(new Event("resize"))},500),"scene"===e.data.type?(E.showSceneLayout(),s(E.editorSettings.showgrid),u(E.editorSettings.showselectionbox)):E.showSimpleLayout(),n=!1,v(t),h(e.data),E.project=e,r(),E.isRunningScriptPreview=!1,E.cameraMode="fly",E.gizmoMode="none",E.waitForScriptToggle=!1,g(),E.nativeDropOptions.previewExtension=angular.isObject(e.scene)?["texture","model","sound"]:"",d.onProjectNameChanged(e.data.title),E.updateRunScriptVisibility(),A(function(){n=!0,E.selectedResource.item=E.project.tree&&E.project.tree[0],e.scene&&E.setGizmoMode(e.scene.is2d?"multi":"translate"),angular.isArray(e.data.templateoptions)&&!e.data.templatewizardshownonce?(e.data.templatewizardshownonce=!0,Y()):a&&a.backgroundfile&&(d.isExtension(a.backgroundfile,"texture")?Q(a.backgroundfile,{instantImport:!0,lock:!0,disableTransparentCrop:!0,cropAndResize:a.backgroundfileresize}):d.isExtension(a.backgroundfile,"model")&&K(a.backgroundfile))})}).catch(function(){P.callEditor("closeProject",!0),E.blockEditorInput=!1})}function m(t){var a;return angular.forEach(E.filemenu,function(e){angular.forEach(e.children,function(e){e.tag===t&&(a=e)})}),a}function v(e){if(angular.isObject(E.editorSettings)){if(angular.isArray(E.editorSettings.recentfiles)||(E.editorSettings.recentfiles=[]),angular.isString(e)){for(var t=0;t<E.editorSettings.recentfiles.length;++t)if(E.editorSettings.recentfiles[t]===e){E.editorSettings.recentfiles.splice(t,1);break}4<E.editorSettings.recentfiles.length&&(E.editorSettings.recentfiles.length=4),E.editorSettings.recentfiles.unshift(e)}var a=[];angular.forEach(E.editorSettings.recentfiles,function(e){a.push({label:e,fn:function(){f(e)}})});var i=m("fileRecentList");i&&(i.children=a,i.disabled=0===a.length)}}function h(e){var t=m("showWallpaperInWorkshop");t&&t.id!==e.workshopid&&(t.id=e.workshopid,t.disabled=!angular.isDefined(e.workshopid),t.fn=t.disabled?void 0:function(){a(e)},r())}function b(e,t){angular.isNumber(t)||(t=angular.isNumber(e.index)?e.index:E.project.tree.length);var a=angular.copy(E.project.tree),i=[t,0].concat(e.items);return Array.prototype.splice.apply(a,i),E.project.tree=a,angular.isObject(e.objectproperties)&&angular.merge(E.project.objectproperties,e.objectproperties),g(),E.selectedResource.item=e.items[0],angular.isObject(e.userproperties)&&(E.project.data.general.properties=E.project.data.general.properties||{},angular.merge(E.project.data.general.properties,e.userproperties)),E.updateRunScriptVisibility(),E.selectedResource.item}function _(t){if(angular.isString(t.project))return C("ui_editor_delete_project_modal_body",{title:t.title}).then(function(e){return l.open("genericConfirm",{data:{title:"ui_editor_delete_project_modal_header",message:e,leftIcon:"images/warning.png",cancelVisible:!0,okVisible:!0}},{backdropClass:"modal-backdrop-danger"}).then(function(){return E.currentSelection=void 0,P.callEditor("deleteProject",t.project)})})}function y(){l.open("editorOpenWallpaper",{data:{deleteProject:_}}).then(function(e){angular.isString(e)&&f(e)})}function w(e,t){l.open("editorWelcome",{editorScope:E,options:{smallDialog:e,autoImportFile:t}}).then(function(e){angular.isString(e.file)?f(e.file,e):"openProjects"===e.action&&y()})}function k(e){E.editorSettings.previewratio=e.value}function S(){return!angular.isObject(E.steamWorkshopStatus)||!E.steamWorkshopStatus.error}function R(){X(),P.callEditor("choosePublishMethod","wallpaper").then(function(){return l.open("editorSteamPublish",{projectData:E.project.data,editorSettings:{category:"wallpaper",isSteamAvailable:S}})})}function I(e){return P.callDeferred("ui","subscribeWorkshopItem",e)}(window.editorCtrl=E).getUserVote=function(e){P.callDeferred("ui","getUserVote","editorCtrl",e)},E.setUserVote=function(e,t){P.callDeferred("ui","setUserVote","editorCtrl",e,t)},E.setFavorited=function(e,t){P.callDeferred("ui","setFavorited",e,t)};var O,M,D=[],j={handle:1},W={editorSettings:{category:"asset",subscribeItem:I,publishedItems:[],isSteamAvailable:S}};E.steamUserInfos={};var L,F={setUserVote:E.setUserVote,getUserVote:E.getUserVote,setFavorited:E.setFavorited,subscribeWorkshopItem:I,unsubscribeWorkshopItem:function(e,t){return C("ui_browse_modal_unsubscribe_body_short",{title:e}).then(function(e){return l.open("genericConfirm",{data:{title:"ui_browse_modal_unsubscribe_header",message:e,cancelVisible:!0,okVisible:!0}})}).then(function(){return P.callDeferred("ui","unsubscribeWorkshopItem",t)})},requestSteamUserInfo:function(e){P.callDeferred("ui","pollSteamUserInfo",e,"editorCtrl")},steamUserInfos:E.steamUserInfos,openSteamWorkshopPage:a,callbacks:[]};function B(e,t){var a=d.assetTypeGroups[e];return"installed"===t.status&&angular.isArray(t.assettypes)&&0<t.assettypes.filter(function(e){return-1!==a.indexOf(e)}).length}function H(e){return{name:e.title,description:e.description,path:e.file,workshopid:e.workshopid,workshopurl:e.workshopurl,previewimg:"file://"+e.preview,authorsteamid:e.authorsteamid,filesizelabel:e.filesizelabel,editable:e.editable,type:"workshopasset",group:"workshop",nestedgroup:e.assetgenre,assettypeslabel:e.assettypes.join(", "),assetscripttype:e.assetscripttype,isworkshopasset:!0,project:e.project,variantsenabled:e.variantsenabled,options:e.options,rating:e.rating,ratingrounded:e.ratingrounded,favorite:e.favorite,uservote:e.uservote}}function N(t,a){O=a,M=t,angular.forEach(D,function(e){B(t,e)&&a.push(H(e))})}function V(e){if(S()){angular.isString(e)||(e="default");var t=angular.copy(E.editorSettings.assetBrowser)||{};t.typetags=t.typetags||{},t.typetags=t.typetags[e]||{},E.editorSettings.assetBrowser=E.editorSettings.assetBrowser||{},l.open("queryWorkshop",{data:{assetBrowserSettings:t,assetBrowserSettingsGroup:e,assetBrowserItems:D,assetBrowserItemsUpdateHandle:j,workshopController:F}}).catch(function(){E.editorSettings.assetBrowser=t})}else d.showSteamError()}function U(t){if(X(),W.projectData={},S()){var e=c.when();E.editorSettings.hasacceptedassetsharingtos||(e=l.open("genericConfirm",{data:{title:"ui_editor_publish_modal_info_asset_reuse_header",message:"ui_editor_publish_modal_info_asset_reuse_body",cancelVisible:!0,okVisible:!0}}).then(function(){E.editorSettings.hasacceptedassetsharingtos=!0})),e.then(function(){return P.callEditor("choosePublishMethod","asset")}).then(function(){return P.callEditor("listAvailableEffects")}).then(function(e){return angular.isObject(t)?c.when():l.open("editorSelectAssets",{data:{assets:{layers:E.project.tree,effects:e.filter(function(e){return e.editable})},fnOpenWallpaperPublish:R}})}).then(function(e){return W.editorSettings.publishedItems=[],W.editorSettings.ageRatingDisabled=t&&t.script,angular.isObject(t)?P.callEditor("preparePublishAssets",t):angular.isArray(e.items)?P.callEditor("preparePublishAssets",{renderables:e.items,variantsenabled:e.variantsEnabled}):angular.isString(e.item)?P.callEditor("preparePublishAssets",{path:e.item}):void 0}).then(function(){return l.open("editorSteamPublish",W)})}else d.showSteamError()}function z(){P.callEditor("resetView")}function $(){E.editorSettings.showgrid&&!0===E.editorSettings.showgrid||(E.editorSettings.showgrid=!1),E.editorSettings.showgrid=!E.editorSettings.showgrid,s(E.editorSettings.showgrid)}function q(){E.editorSettings.showselectionbox&&!0===E.editorSettings.showselectionbox||(E.editorSettings.showselectionbox=!1),E.editorSettings.showselectionbox=!E.editorSettings.showselectionbox,u(E.editorSettings.showselectionbox)}function G(){E.editorSettings.showstats&&!0===E.editorSettings.showstats||(E.editorSettings.showstats=!1),E.editorSettings.showstats=!E.editorSettings.showstats}function K(e){P.callEditor("importModel",e).then(function(e){return l.open("editorImportModel",{objInfo:e})}).then(b)}function Y(){l.open("editorTemplateWizard",{projectData:E.project.data,sceneData:E.project.scenegeneraldata})}function Q(e,t){var a={status:!1};t=t||{},P.callEditor("importImage",e).then(function(e){return e.renderableCount=E.project.tree&&E.project.tree.length,e.instantImport=t.instantImport,e.jsonConfig={locktransforms:t.lock},t.disableTransparentCrop&&e.config&&(e.config.croptransparent=!1),e.config.cropandresize=t.cropAndResize,l.open("editorImportModel",{objInfo:e})}).then(function(e){if(angular.isObject(e)){var t=angular.isArray(e.items)&&0<e.items.length&&e.items[0];return e.shouldAdjustProjection&&e.resolution&&t&&(E.project.scenegeneraldata.orthogonalprojection.width=e.resolution.width,E.project.scenegeneraldata.orthogonalprojection.height=e.resolution.height,P.callEditor("moveRenderable",e.items[0].id,.5*e.resolution.width,.5*e.resolution.height,0),a.status=!0),e}}).then(b).then(function(){a.status&&z()})}function J(e){P.callEditor("importSound",e).then(function(e){return P.callEditor("addSound",e.file)}).then(b)}function X(e){angular.isFunction(E.endModalAction)&&E.endModalAction(e)&&(E.endModalAction=void 0)}function Z(e){i.$broadcast("undoRedoBegin"),P.callEditor("performUndoRedo",e||!1).then(function(){i.$broadcast("undoRedoPerformed")})}function ee(e){return"scene"!==e.data.type}function te(e){return"web"!==e.data.type}function ae(e){angular.forEach(e&&e.properties,function(e){switch(e.type){case"effects":angular.forEach(e.value,function(e){var t=ne("material",e.material);e.properties=t&&t.properties});break;case"itemlist":angular.forEach(e.value,function(e){var t=ne(e.subkey,e.subid);e.properties=t&&t.properties})}})}function ie(e){E.selectedResource.stack.push(e);var t=E.selectedResource.stack.indexOf(e),a="renderable"!==e.key&&"camerapath"!==e.key;E.selectedResource.stack=t<0||!a?[e]:E.selectedResource.stack.slice(0,t+1)}function ne(e,t){var a;return"renderable"===e?angular.forEach(E.project.tree,function(e){e.id===t&&(a=e)}):a=E.project.objectproperties[e][t],a}function oe(a,e){var i;return e&&"renderable"!==e||angular.forEach(E.project.tree,function(t){t.id===a?i=t:angular.forEach(t.properties,function(e){e.overrideresourceid===a&&(i=t)})}),i||(e?i=E.project.objectproperties[e]&&E.project.objectproperties[e][a]:angular.forEach(E.project.objectproperties,function(e){angular.isDefined(e[a])&&(i=e[a])})),i}function re(e,t){if(angular.isString(e)){var a,i=t?[e,t]:e.split(/_(.+)/),n=oe(i[0]);if(n&&angular.isArray(n.properties))if(angular.forEach(n.properties,function(e){e.key===i[1]&&(a=e)}),a)return{property:a,item:n}}}E.applyUserVote=function(t,a){angular.forEach(D,function(e){e.workshopid===t&&(e.uservote=a)}),angular.forEach(F.callbacks,function(e){e.applyUserVote(t,a)}),window.safeApply(E)},E.registerSteamUser=function(e){var t=E.steamUserInfos[e.id]||{};t.name=e.name,t.avatar=e.avatar,E.steamUserInfos[e.id]=t,window.safeApply(E)},E.onReceivePublishedAssets=function(e){W.editorSettings.publishedItems=W.editorSettings.publishedItems.concat(e)},E.updateAssetData=function(e){var t,a;for(t=0;t<e.length;++t){var i=e[t],n=!1;if(angular.isDefined(i.workshopid))for(a=0;a<D.length;++a){var o=D[a];if(angular.isDefined(o.workshopid)&&o.workshopid===i.workshopid){angular.merge(o,i),n=!0;break}}n||D.push(i);var r="unsubscribed"===i.status,s="installed"===i.status;r&&O?O.findAndRemove(function(e){return e.workshopid===i.workshopid}):s&&O&&B(M,i)&&O.pushIfNew(H(i),function(e){return e.workshopid===i.workshopid})}++j.handle},E.editTextFile=function(n){var o="shader_"+n.value,e=E.layoutCtrl.findWindow(o);e?E.layoutCtrl.activateWindow(e,!0):P.callEditor("readProjectFile",n.value).then(function(e){var a=e.text,i=E.$new();i.editorControls={openHLSLError:function(e){e.tag=o+"_error",e.title=C.instant("ui_editor_pane_header_hlsl",{name:C.instant(n.name).toString()}).toString(),function(t){var e=E.layoutCtrl.findWindow(t.tag);if(e)E.layoutCtrl.activateWindow(e,!0);else{var a=E.$new();a.editorControls={},a.scriptName=t.tag,a.content=t.source,a.contentType="hlslerror",a.initialError={message:"",line:1,column:0,errorlevel:1,name:t.tag};var i=t.error.replace(/(\r\n|\n|\r)/gm,"").match(/[.]*\((\d+),(\d+)\-*(\d*)\):(.+)/i);i&&5===i.length&&(a.initialError.line=parseInt(i[1]),a.initialError.column=parseInt(i[2]),a.initialError.columnEnd=parseInt(i[3]||"0")+1,a.initialError.message=i[4].trim()),x('<div class="editorLayoutPanel"><code-editor ce-apply="apply(value)" ce-close="close()" ce-cancel="cancel()" ce-content="content" ce-controls="editorControls" ce-script-name="scriptName" ce-script-property-name="scriptPropertyName" ce-content-type="contentType" ce-initial-error="initialError"></code-editor></div>')(a,function(e){a.close=function(){E.layoutCtrl.removeWindow(e)},E.layoutCtrl.insertWindow(e,a,{noSave:!0,tag:t.tag,icon:"fas fa-fw fa-scroll",title:t.title,closeFunction:function(){a.close()}})})}}(e)}},i.scriptName=n.value,i.scriptPropertyName=n.name,i.content=a,i.contentType=n.editmode,x('<div class="editorLayoutPanel"><code-editor ce-apply="apply(value)" ce-close="close()" ce-cancel="cancel()" ce-content="content" ce-controls="editorControls" ce-script-name="scriptName" ce-script-property-name="scriptPropertyName" ce-content-type="contentType"></code-editor></div>')(i,function(e){i.close=function(){E.layoutCtrl.removeWindow(e)},i.cancel=function(){i.apply(a)},i.apply=function(e){P.callEditor("writeProjectFile",n.root,e).then(function(){return P.callEditor("writeProjectFile",n.value,e).then(function(e){delete i.editorControls.errorInfo,e.error&&e.source&&(i.editorControls.errorInfo=e)})})};var t="ui_editor_pane_header_shader_editor";angular.isString(n.name)&&(t=C.instant("ui_editor_pane_header_shader",{name:C.instant(n.name).toString()}).toString()),E.layoutCtrl.insertWindow(e,i,{noSave:!0,tag:o,icon:"fas fa-fw fa-code",title:t,closeFunction:function(){var e=i.editorControls.getValue();e===(a||"")?i.close():l.open("genericConfirm",{data:{title:"ui_editor_script_unsaved_changes_header",message:"ui_editor_script_unsaved_changes_body",cancelVisible:!0,cancelText:"ui_close",okVisible:!0}}).then(function(){i.apply(e),i.close()}).catch(function(){i.cancel(),i.close()})}})})})},E.removePuppetWarp=function(e){l.open("genericConfirm",{data:{title:"ui_editor_puppet_warp_delete_warning_title",message:"ui_editor_puppet_warp_delete_warning_body",leftIcon:"images/warning.png",cancelVisible:!0,okVisible:!0}}).then(function(){return P.callEditor("genericSceneAction","removePuppetWarp",e.value).then(function(){if(0<E.selectedResource.stack.length){var e=E.selectedResource.stack[0];E.navigateProperty(e.key,e.id)}})})},E.genericSceneAction=function(e,t){var a=c.when();switch(e.args){case"resetPuppetWarpWeights":a=l.open("genericConfirm",{data:{title:"ui_editor_properties_reset_all_weights_modal_title",message:"ui_editor_properties_reset_all_weights_modal_body",leftIcon:"images/warning.png",cancelVisible:!0,okVisible:!0}});break;case"paintPuppetWarpWeights":E.initPaintAction("weightmask",!0);break;case"resetSelectedPuppetWarpPose":if(t&&t.selectedFlatItem&&t.selectedFlatItem.item&&t.selectedFlatItem.item.value)return a.then(function(){P.callEditor("genericSceneAction",e.args,e.value+":"+t.selectedFlatItem.item.value)})}return a.then(function(){P.callEditor("genericSceneAction",e.args,e.value)})},E.navigateUp=function(){var e=E.selectedResource.stack[E.selectedResource.stack.length-2];E.navigateProperty(e.key,e.id)},E.onPaintBrushClosed=function(){X()},E.onAnimationClosed=function(){X()},E.animationToggleKeyframe=function(){E.animationCtrl.insertKeyframeAtCurrentPosition()},E.updateWorkshopStatus=function(e){(E.steamWorkshopStatus=e).complete&&A(function(){E.steamWorkshopStatus.hidden=!0},5e3)},E.filemenu=[{label:"ui_editor_filemenu_file",children:[{label:"ui_editor_filemenu_new",icon:"glyphicon glyphicon-file",fn:function(){w(!0)}},{label:"ui_editor_filemenu_open",icon:"glyphicon glyphicon-folder-open",fn:y},{tag:"fileRecentList",label:"ui_editor_filemenu_open_recent",children:[]},{},{label:"ui_editor_filemenu_save",icon:"fas fa-save faMenuIcon",fn:function(){X();var e=c.when();angular.isObject(E.project.data)&&(e=e.then(function(){return P.callEditor("saveProjectData",angular.toJson(E.project.data))})),angular.isObject(E.project.scenegeneraldata)&&(e=e.then(function(){return P.callEditor("saveSceneGeneralData",angular.toJson(E.project.scenegeneraldata))})),e.then(function(){return P.callEditor("forceSave")})}},{label:"ui_editor_filemenu_save_as",icon:"fas fa-save faMenuIcon",fn:function(){X();var e=c.when();angular.isObject(E.project.data)&&(e=e.then(function(){return P.callEditor("saveProjectData",angular.toJson(E.project.data))})),angular.isObject(E.project.scenegeneraldata)&&(e=e.then(function(){return P.callEditor("saveSceneGeneralData",angular.toJson(E.project.scenegeneraldata))})),e.then(function(){return P.callEditor("forceSave")}).then(function(){var e={title:"ui_editor_save_as_header",message:"ui_editor_save_as_body",textinputVisible:!0,textinput:E.project.data.title.toString(),cancelVisible:!0,okVisible:!0};return l.open("genericConfirm",{data:e}).then(function(){return P.callEditor("saveAs",e.textinput)})}).then(function(e){f(e)})},shouldHide:ee},{label:"ui_editor_open_modal_delete",icon:"fas fa-trash faMenuIcon",fn:function(){_(E.project.data)}},{label:"ui_editor_filemenu_apply_wallpaper",icon:"fas fa-image faMenuIcon",fn:function(){X(),P.callEditor("applyWallpaper")}},{},{label:"ui_editor_filemenu_quit",icon:"fas fa-power-off faMenuIcon",fn:function(){window.ui.close()}}]},{label:"ui_editor_filemenu_edit",children:[{label:"ui_editor_filemenu_undo",icon:"fas fa-undo faMenuIcon",fn:function(){Z()},shouldHide:ee,shouldDisable:function(){return!(E.undoState&&E.undoState.canundo)}},{label:"ui_editor_filemenu_redo",icon:"fas fa-redo faMenuIcon",fn:function(){Z(!0)},shouldHide:ee,shouldDisable:function(){return!(E.undoState&&E.undoState.canredo)}},{shouldHide:ee},{label:"ui_editor_filemenu_change_video_file",icon:"glyphicon glyphicon-film",fn:function(){E.replaceFile(E.project.tree[0])},shouldHide:function(e){return"video"!==e.data.type}},{label:"ui_editor_filemenu_import_model",icon:"fas fa-cube faMenuIcon",fn:K,shouldHide:function(e){return"scene"!==e.data.type||e.scene.is2d}},{label:"ui_editor_filemenu_import_image",icon:"far fa-image faMenuIcon",fn:Q,shouldHide:function(e){return"scene"!==e.data.type||!e.scene.is2d}},{label:"ui_editor_filemenu_import_sound",icon:"fas fa-volume-up faMenuIcon",fn:J,shouldHide:function(e){return"scene"!==e.data.type||!e.scene.is2d}},{label:"ui_editor_filemenu_add_light",icon:"far fa-lightbulb faMenuIcon",fn:function(){P.callEditor("addLight").then(b)},shouldHide:ee},{label:"ui_editor_pane_header_camera",icon:"far fa-camera faMenuIcon",fn:function(){E.layoutCtrl.showBaseWindow(E.layoutCtrl.findWindow("camerapaths"))},shouldHide:ee},{label:"ui_editor_filemenu_change_project_settings",icon:"fas fa-cog faMenuIcon faMenuIcon",fn:function(){l.open("editorProjectSettings",{project:E.project})}},{label:"ui_editor_filemenu_open_in_explorer",icon:"fas fa-folder-open faMenuIcon",fn:function(){P.callEditor("openInExplorer")}},{shouldHide:function(e){return!angular.isArray(e.data.templateoptions)}},{label:"ui_editor_filemenu_template_wizard",icon:"fas fa-magic faMenuIcon",fn:Y,shouldHide:function(e){return!angular.isArray(e.data.templateoptions)}}]},{label:"ui_editor_filemenu_view",children:[{label:"ui_editor_filemenu_restart_preview",icon:"fas fa-sync-alt faMenuIcon",fn:function(){P.callEditor("restartPreview")},shouldHide:function(e){return"scene"===e.data.type}},{label:"ui_editor_filemenu_preview_aspect_ratio",children:[{label:"ui_editor_filemenu_aspect_ratio_free",value:"free",binding:"previewratio",fn:k},{label:"4 : 3",value:"4x3",binding:"previewratio",fn:k},{label:"16 : 10",value:"16x10",binding:"previewratio",fn:k},{label:"16 : 9",value:"16x9",binding:"previewratio",fn:k},{label:"21 : 9",value:"21x9",binding:"previewratio",fn:k}]},{label:"ui_editor_filemenu_reset_camera",icon:"fas fa-undo faMenuIcon",fn:z,shouldHide:ee},{label:"ui_editor_filemenu_reset_layout",icon:"fas fa-table faMenuIcon",fn:function(){E.layoutCtrl.reset()},shouldHide:ee},{label:"ui_editor_filemenu_windows",shouldHide:ee,children:[{label:"ui_editor_pane_header_assets",icon:"fas fa-fw fa-copy",fn:function(){E.layoutCtrl.showBaseWindow(E.layoutCtrl.findWindow("assets"))}},{label:"ui_editor_pane_header_log",icon:"fas fa-fw fa-terminal",fn:function(){E.layoutCtrl.showBaseWindow(E.layoutCtrl.findWindow("log"))}}]},{shouldHide:ee},{label:"ui_editor_filemenu_show_asset_creation",icon:"",value:!0,binding:"showassetcreation",fn:function(){(E.editorSettings.showassetcreationhidedialog?c.when():l.open("genericConfirm",{data:{title:"ui_editor_warn_advanced_assets_creation_modal_header",message:"ui_editor_warn_advanced_assets_creation_modal_body",cancelVisible:!0,okVisible:!0}}).then(function(){E.editorSettings.showassetcreation&&!0===E.editorSettings.showassetcreation?E.editorSettings.showassetcreationhidedialog=!0:E.editorSettings.showassetcreation=!1})).then(function(){E.editorSettings.showassetcreation=!E.editorSettings.showassetcreation,r()})},shouldHide:ee},{label:"ui_editor_filemenu_show_grid",icon:"",value:!0,binding:"showgrid",fn:$,shouldHide:ee},{label:"ui_editor_filemenu_show_selection_box",icon:"",value:!0,binding:"showselectionbox",fn:q,shouldHide:ee},{label:"ui_editor_filemenu_show_stats",icon:"",value:!0,binding:"showstats",fn:G,shouldHide:ee}]},{label:"ui_editor_filemenu_provider",children:[{label:"ui_editor_filemenu_browse_assets",iconTemplate:"%provider% faMenuIcon",fn:function(){V()},shouldHide:ee},{tag:"showWallpaperInWorkshop",label:"ui_editor_filemenu_show_in_workshop",iconTemplate:"%provider% faMenuIcon",disabled:!0},{},{label:"ui_editor_workshop_rules_modal_title",icon:"fas fa-book faMenuIcon",fn:function(){l.open("editorWorkshopRules")}},{label:"ui_editor_filemenu_publish_asset",icon:"glyphicon glyphicon-share-alt",fn:function(){U()},shouldHide:function(e){return"scene"!==e.data.type||!E.editorSettings.showassetcreation}},{label:"ui_editor_filemenu_prepare_for_publishing",icon:"glyphicon glyphicon-share-alt",fn:R}]},{label:"ui_editor_filemenu_help",shouldHide:function(e){return"scene"!==e.data.type&&"web"!==e.data.type},children:[{label:"ui_editor_filemenu_help_show_documentation_scene",iconTemplate:"fas fa-books",fn:function(){d.openUrl(d.url.docsScene)},shouldHide:ee},{label:"ui_editor_filemenu_help_show_documentation_web",iconTemplate:"fas fa-books",fn:function(){d.openUrl(d.url.docsWeb)},shouldHide:te},{},{label:"ui_editor_filemenu_help_image_effects",iconTemplate:"fas fa-books",fn:function(){d.openUrl(d.url.docsSceneEffects)},shouldHide:ee},{label:"ui_editor_filemenu_help_particle_effects",iconTemplate:"fas fa-books",fn:function(){d.openUrl(d.url.docsSceneParticles)},shouldHide:ee},{label:"ui_editor_filemenu_help_timeline_animation",iconTemplate:"fas fa-books",fn:function(){d.openUrl(d.url.docsSceneAnimation)},shouldHide:ee},{label:"ui_editor_filemenu_help_user_properties",iconTemplate:"fas fa-books",fn:function(){d.openUrl(d.url.docsSceneUserProperties)},shouldHide:ee},{label:"ui_editor_filemenu_help_scenescript",iconTemplate:"fas fa-books",fn:function(){d.openUrl(d.url.docsSceneScript)},shouldHide:ee},{label:"ui_editor_filemenu_help_shaders",iconTemplate:"fas fa-books",fn:function(){d.openUrl(d.url.docsSceneShaders)},shouldHide:ee},{label:"ui_editor_filemenu_help_user_properties",iconTemplate:"fas fa-books",fn:function(){d.openUrl(d.url.docsWebUserProperties)},shouldHide:te},{label:"ui_editor_filemenu_help_audio_visualization",iconTemplate:"fas fa-books",fn:function(){d.openUrl(d.url.docsWebAudioVisualization)},shouldHide:te},{label:"ui_editor_filemenu_help_rgb_devices",iconTemplate:"fas fa-books",fn:function(){d.openUrl(d.url.docsWebRGB)},shouldHide:te},{label:"ui_editor_filemenu_help_fps_limit",iconTemplate:"fas fa-books",fn:function(){d.openUrl(d.url.docsWebFPS)},shouldHide:te},{label:"ui_editor_filemenu_help_debugging",iconTemplate:"fas fa-books",fn:function(){d.openUrl(d.url.docsWebDebugging)},shouldHide:te}]}],E.setEditorSettings=function(e){if(angular.merge(E.editorSettings,e.editor),E.editorSettings.savedlayouts=E.editorSettings.savedlayouts||{},E.$watch("editorSettings",function(e,t){e!==t&&P.callEditor("saveEditorSettings",angular.toJson(e))},!0),v(),r(),e.config.initialCommands){var t=angular.fromJson(e.config.initialCommands);t.file?f(t.file):t.source&&w(!1,t.source)}else E.editorSettings.hasshownworkshoprules?w():l.open("editorWorkshopRules").then(function(){E.editorSettings.hasshownworkshoprules=!0,w()})},E.requestOpenProject=function(e){e.file?(A(function(){t.dismissAll()}),f(e.file)):e.source&&(t.dismissAll(),w(!1,e.source))},E.showVideoSizeError=function(e,t){C("ui_editor_modal_video_file_invalid_body",{file:e,size:t}).then(function(e){l.open("genericConfirm",{data:{title:"ui_editor_modal_video_file_invalid_header",message:e,leftIcon:"images/warning.png",cancelVisible:!0,cancelText:"ui_close"}})})},E.updateSteamProperties=function(e){angular.isObject(E.project&&E.project.data)&&angular.isObject(e)&&angular.extend(E.project.data,e)},E.updateGeneralSettings=function(e){angular.merge(E.project.data.general,e)},E.onGizmoActivated=function(e){E.isGizmoActive!==e&&((E.isGizmoActive=e)?++T:--T)},E.updateAssetProperties=function(e){T+=1,angular.forEach(e,function(e){var a=oe(e.id,e.key);a&&(e.properties?a.properties=e.properties:e.changedproperties&&angular.forEach(e.changedproperties,function(t){angular.forEach(a.properties,function(e){t.key===e.key&&(e.value=t.value,e.linkScript=t.linkScript,e.linkUser=t.linkUser,e.linkAnimation=t.linkAnimation,e.lastValue=e.value)})}),a===E.selectedResource.item&&ae(a))}),A(function(){--T},100)},E.replaceAssets=function(e,t){if(E.project.tree=e,angular.forEach(t,function(e,a){E.project.objectproperties[a]=E.project.objectproperties[a]||{},angular.forEach(e,function(e,t){angular.isObject(E.project.objectproperties[a][t])||(E.project.objectproperties[a][t]={}),angular.extend(E.project.objectproperties[a][t],e)})}),angular.isObject(E.selectedResource.item)&&"renderable"===E.selectedResource.item.key){var a=E.selectedResource.item?E.selectedResource.item.id:-1;g(),angular.forEach(E.project.tree,function(e){e.id===a&&(E.selectedResource.item=e)})}ae(E.selectedResource.item),A(function(){i.$broadcast("rzSliderForceRender")}),E.updateRunScriptVisibility()},E.updateAvailableAssets=function(e){E.project.availableassets=e.availableassets,E.project.availablefonts=e.availablefonts},E.resetProject=function(){n=!1,E.project=void 0,E.editorLayoutClass="editorLayoutSimple",r(),E.showSimpleLayout(),E.cameraMode="fly",E.gizmoMode="none",g(),d.onProjectNameChanged()},E.replaceFile=function(t,e){P.callEditor("replaceFile",t.name,e).then(function(e){e.error?E.showVideoSizeError(e.path,e.size):(E.project.data.file=e.path,t.name=e.name,E.project.tree=angular.copy(E.project.tree))})},E.setGizmoMode=function(e){E.gizmoMode===e&&(e="none"),P.callEditor("setGizmoMode",e).then(function(){E.gizmoMode=e})},E.setCameraMode=function(e){P.callEditor("setCameraMode",e).then(function(){E.cameraMode=e})},E.onResourceRemove=function(e){X();var t=E.project.tree.indexOf(e);if(!(t<0)){E.project.tree.splice(t,1);var a=c.defer();return P.callEditor("removeFromScene",e.id).then(function(){E.selectedResource.item===e&&g(),a.resolve()}),a.promise}},E.onResourceDragged=function(e,t){P.callEditor("sendSceneOrderChange",e,t)},E.onResourceAddedToScene=function(e,t){return P.callEditor("addAssetToScene",angular.toJson(e),t).then(function(e){b(e,t)}),!0},E.updateRunScriptVisibility=function(){L&&(A.cancel(L),L=void 0),L=A(function(){E.showRunScript=angular.hasNestedMember([E.project.tree,E.project.objectproperties,E.project.scenegeneralproperties],"linkScript")||angular.hasNestedMember([E.project.tree,E.project.objectproperties,E.project.scenegeneralproperties],"linkAnimation")},500)},E.sendAssetPropertyChange=function(i,e,n,t){if(0<T)angular.forEach(a,function(e){e.lastValue=e.value});else{var a=angular.isArray(e)?e:[e],o=0,r={},s={properties:r,tag:t||"main"};angular.forEach(a,function(e){if(e.lastValue!==e.value){n&&!n.save||(e.lastValue=e.value),s.id=s.id||e.overrideresourceid||i.id,s.key=s.key||e.overrideresourcekey||i.key;var t=E.isPropertyAnimationValid(e);if(angular.isDefined(e.linkUser)||angular.isDefined(e.linkScript)||t){var a={value:e.value};angular.isDefined(e.linkUser)&&(a.user=e.linkUser),angular.isDefined(e.linkScript)&&(a.script=e.linkScript,angular.isArray(e.linkScriptProperties)&&(a.scriptproperties=angular.sanitizeObject(e.linkScriptProperties))),t&&(a.animation=e.linkAnimation),r[e.key]=a}else r[e.key]=e.value;++o}}),0!==o&&(angular.isObject(n)&&(s.options=n),P.callEditor("sendAssetPropertyChange",s),E.updateRunScriptVisibility())}},E.showSimpleLayout=function(){angular.isFunction(E.layoutCtrl.removeAllWindows)&&E.layoutCtrl.removeAllWindows(),E.layoutType="simple"},E.showSceneLayout=function(){angular.isFunction(E.layoutCtrl.removeAllWindows)&&E.layoutCtrl.removeAllWindows(),E.layoutType="scene"},E.isEditingCameraPath=function(){return E.selectedResource.item&&"camerapath"===E.selectedResource.item.key},E.addCameraPath=function(){P.callEditor("addCameraPath").then(function(e){var t=angular.copy(E.project.camerapaths);t.push(e),E.project.camerapaths=t,g(),E.selectedResource.item=e})},E.onCameraPathRemove=function(e){var t=E.project.camerapaths.indexOf(e);if(!(t<0)){E.project.camerapaths.splice(t,1);var a=c.defer();return P.callEditor("removeCameraPath",e.id).then(function(){E.selectedResource.item===e&&g(),a.resolve()}),a.promise}},E.navigateProperty=function(e,t){X("navigateProperty");var a=ne(e,t);if(angular.isObject(a))return ie(a),g(),E.selectedResource.item=a,!0},E.updateResourceSelection=function(e,t,a){a=angular.fromJson(a)||[];var i=ne(t,e);if(i){var n=E.selectedResource.item!==i;E.selectedResource.item=i,E.selectedResource.stack=[],angular.forEach(a,function(e){var t=ne(e.key,e.id);t&&E.selectedResource.stack.push(t)}),n&&!E.selectedResource.stack.empty()&&E.selectedResource.stack.last()===i&&E.selectedResource.stack.pop()}},E.addPropertyEffect=function(t,a){var i={skipUpgrade:!1};P.callEditor("listAvailableEffects").then(function(e){return N("effects",e),l.open("editorEffectList",{data:{title:"ui_editor_effects_modal_title_add_effect",groupList:e,workshopModalFn:V,workshopController:F,workshopGroup:"effects",showAssetCreation:E.editorSettings.showassetcreation,fnCreateNew:function(e){return P.callEditor("duplicateEffectForEditing",angular.toJson(e))},fnDelete:function(e){P.callEditor("deleteCustomEffect",angular.toJson(e))}}})}).then(function(e){return i.selectedEffect=e,P.callEditor("checkEffectCompatibility",angular.toJson(e))}).then(function(e){return e&&1===e.error?l.open("genericConfirm",{data:{title:"ui_editor_effects_modal_compatibility_warning_header",message:"ui_editor_effects_modal_compatibility_warning_body",leftIcon:"images/warning.png",cancelVisible:!0,okVisible:!0,leftVisible:!0,leftText:"ui_editor_effects_modal_compatibility_warning_skip_upgrade",leftClass:"btn-primary",leftAction:"skipUpgrade"}},{backdropClass:"modal-backdrop-danger"}).then(function(e){return i.skipUpgrade="skipUpgrade"===e,i.selectedEffect}):i.selectedEffect}).then(function(e){return P.callEditor("addEffect",t.id.toString(),angular.toJson(e),i.skipUpgrade)}).then(function(e){a.value=e.items,angular.merge(E.project.objectproperties,e.objectproperties),angular.isArray(a.value)&&0<a.value.length&&E.editPropertyEffect(a.value[a.value.length-1])})},E.editPropertyEffect=function(e){E.navigateProperty("material",e.material)},E.addPropertySound=function(e,t){P.callEditor("importSound").then(function(e){E.onPropertySoundAssetDropped(t,e,t.value.length||0)})},E.onPropertySoundAssetDropped=function(e,t,a){return P.callEditor("addSound",t.file,E.selectedResource.item.id,a).then(function(){e.value=angular.copy(e.value),e.value.splice(a,0,{name:t.file})}),!0},E.onPropertyItemRemoved=function(e,t){var a=t.id||""+e.value.indexOf(t);return P.callEditor("removeRenderableItem",E.selectedResource.item.id,a,t.key).then(function(){e.value.splice(e.value.indexOf(t),1)})},E.onPropertyItemDragged=function(e,t){return P.callEditor("dragRenderableItem",E.selectedResource.item.id,e,t)};var se={};function le(e){var t=1;switch(e.type){case"vec4":t=4;break;case"color":case"vec3":t=3;break;case"vec2":t=2}return t}function ce(t,e,a){var i=0;for(angular.isDefined(e)&&(1===a?(t.push(e),i=1):e.split(" ").map(function(e){return parseFloat(e)}).forEach(function(e){t.push(e),++i}));i<a;)t.push(0),++i}function de(t,e,a){angular.isArray(e)&&e.forEach(function(e){angular.isNumber(e.value)&&(e.value=e.value+(a?t:-t))})}E.modifyScriptLink=function(i,n,e,t){var o="script_"+i.id+"_"+n.key,a=E.layoutCtrl.findWindow(o);if(a)t?E.layoutCtrl.removeWindow(a):E.layoutCtrl.activateWindow(a,!0);else if(!t){var r=n.linkScript,s=E.$new();s.editorControls={openBrowseWorkshop:function(){V("scripts")},openScriptPublish:function(e,t){U({script:e,type:t})},getSubscribedScripts:function(){var e=[];return N("scripts",e),e},shouldShowPublishDialog:function(){return E.editorSettings.showassetcreation}},s.scriptName=i.id+"_"+n.key,s.scriptPropertyName=n.key,s.content=r,s.scriptType=n.type,s.scriptContextProperties=i&&i.properties,s.scriptErrorMessage=e||se[s.scriptName],x('<div class="editorLayoutPanel"><code-editor ce-apply="apply(value)" ce-close="close()" ce-cancel="cancel()" ce-content="content" ce-controls="editorControls" ce-script-name="scriptName" ce-script-property-name="scriptPropertyName" ce-script-type="scriptType" ce-initial-error="scriptErrorMessage" ce-script-context-properties="scriptContextProperties" ce-content-type="\'js\'"></code-editor></div>')(s,function(e){function t(){var e=re(s.scriptName);n=e&&e.property||n}s.close=function(){E.layoutCtrl.removeWindow(e)},s.cancel=function(){t(),E.callbackRunScriptPreview(!1),r?s.apply(r):(delete n.linkScript,delete n.lastValue,E.sendAssetPropertyChange(i,n))},s.apply=function(e){t(),E.callbackRunScriptPreview(!1),delete se[s.scriptName],angular.isString(e)&&0<e.length?n.linkScript=e:delete n.linkScript,delete n.lastValue,E.sendAssetPropertyChange(i,n)},s.$on("onScriptStartPlayback",function(e,t){if(t){var a=s.editorControls.getValue();a!==n.linkScript&&s.apply(a)}});var a="ui_editor_pane_header_script_editor";angular.isString(n.name)&&(a=C.instant("ui_editor_pane_header_script",{name:C.instant(n.name).toString()}).toString()),E.layoutCtrl.insertWindow(e,s,{noSave:!0,tag:o,icon:"fas fa-fw fa-code",title:a,closeFunction:function(){var e=s.editorControls.getValue();e===(r||"")?s.close():l.open("genericConfirm",{data:{title:"ui_editor_script_unsaved_changes_header",message:"ui_editor_script_unsaved_changes_body",cancelVisible:!0,cancelText:"ui_close",okVisible:!0}}).then(function(){s.apply(e),s.close()}).catch(function(){s.cancel(),s.close()})}})})}},E.$on("onScriptMessage",function(e,t){if(1===(se[t.name]=t).errorlevel&&E.isRunningScriptPreview){var a=E.layoutCtrl.findWindow("log");a&&(E.layoutCtrl.activateWindow(a,E.canScriptPreviewFlash),E.canScriptPreviewFlash=!1)}}),E.callbackClickScriptMessage=function(e){var t=re(e.name);t&&E.modifyScriptLink(t.item,t.property,e)},E.callbackRunScriptPreview=function(e){X(),E.$broadcast("onScriptStartPlayback",e),E.isRunningScriptPreview!==e&&(E.waitForScriptToggle=!0),E.isRunningScriptPreview=e,E.canScriptPreviewFlash=!0,P.callEditor("runScriptPreview",e).then(function(){E.waitForScriptToggle=!1,s(E.editorSettings.showgrid),u(E.editorSettings.showselectionbox)})},E.isPropertyAnimationValid=function(e){return!(!angular.isObject(e.linkAnimation)||!angular.isObject(e.linkAnimation.options))};var pe={};function ue(a){X();var i,t="animation_"+a.id+"_"+a.key,n=0;function e(){i=ne(a.key,a.id)}if(e(),E.endModalAction=function(){var e=E.layoutCtrl.findWindow(t);e&&E.layoutCtrl.removeWindow(e)},i){var o=a.autoShowOptions;delete a.autoShowOptions;var r=[],s=!1,l=[],c=E.$new(),d=E.$watch(function(){return T},function(e,t){0===e&&0<t&&v()});(pe[t]=c).ctrl={getCurrentPropertyValues:function(e){var t=f(e.key);return h(t&&t.value)},isEditingLocked:function(){return 0<n||E.waitForScriptToggle},getCurrentPreviewValue:function(e){if(!(0<n||E.waitForScriptToggle)){var t=f(e.key);if(!angular.isDefined(t))return h();var a=t&&t.previewvalue;return a&&h(a)}},savePropertyKeyframes:function(e){0<T?angular.forEach(e,function(t){var a=!1;angular.forEach(r,function(e){e.property.key===t.property.key&&e.channel===t.channel&&(a=!0,e.keyframes=t.keyframes)}),a||r.push(t)}):m(e)},saveAnimationOptions:function(e){P.callEditor("genericSceneAction","saveAnimationOptions",a.id,e)},setPreviewFrame:function(e){v();var t={frame:e,id:i.id,key:i.key};P.callEditor("setAnimationPreviewFrame",t)},setPreviewPlayback:function(e){e&&c.ctrl.setPreviewFrame(0);var t={play:e,id:i.id,key:i.key};++n,P.callEditor("setAnimationPreviewPlayback",t).then(function(){--n})},getMode:function(){return"puppet"}},c.options={length:10,fps:10,mode:"loop"},c.properties=[],angular.forEach(i.properties,function(e){switch(e.key){case"length":c.options.length=e.value;break;case"fps":c.options.fps=e.value;break;case"mode":c.options.mode=e.value;break;case"events":c.options.events=e.value}});var p=[],u=E.$watch(function(){return e(),i&&i.properties},function(e){var t,a=[],i=[];angular.forEach(e,function(e){if(e.key&&e.key.includes(":")){var t=e.key.split(":")[1];a.includes(t)||a.push(t),i.push(e)}}),angular.equals(p,a)||(p=a,t=i,++n,c.ctrl.performSavePendingProperties(),c.properties=t,angular.frameTimeout(A,1,function(){--n}))}),g=E.$on("rebuildAnimationCurves",b);c.$on("undoRedoBegin",function(){++n}),c.$on("undoRedoPerformed",function(){e(),b(),--n}),x('<div class="editorLayoutPanel editorAnimation"><curve-editor ce-source-properties="properties" ce-options="options" ce-ctrl="ctrl"></curve-editor><div class="editorScriptBlockOverlay" ng-if="isRunningScriptPreview || waitForScriptToggle"></div></div>')(c,function(e){c.close=function(){E.layoutCtrl.removeWindow(e),E.navigateUp()},c.onClosed=function(){c.ctrl.performSavePendingProperties(),delete pe[t],c.ctrl.setPreviewFrame(-1),u(),d(),g()};E.layoutCtrl.insertWindow(e,c,{tag:t,icon:"fas fa-fw fa-play-circle",title:"ui_editor_pane_header_animation_editor",titleClass:"editorAnimationTitle",noPadding:!0,siblingTag:"log",closeFunction:function(){c.close()}}),angular.frameTimeout(A,1,function(){o&&angular.isFunction(c.ctrl.openAnimationOptions)&&c.ctrl.openAnimationOptions()})})}function f(t){if(e(),i&&i.properties)return i.properties.find(function(e){return e.key===t})}function m(e){if(s)l=l.concat(e);else{s=!0;var t=e.map(function(e){var t=e.property.key.split(":");return{key:t[0],id:t[1],keyframes:e.keyframes,channel:parseInt(e.channel.substr(1))}});P.callEditor("genericSceneAction","saveAnimation",a.id,t).then(function(){if(s=!1,0<l.length){var e=l;l=[],m(e)}})}}function v(){c.ctrl&&c.ctrl.performSavePendingProperties&&c.ctrl.performSavePendingProperties(),0<r.length&&m(r),r=[]}function h(e){var t=[];for(angular.isDefined(e)&&(t=e.split(" ").map(function(e){return parseFloat(e)}));t.length<3;)t.push(0);return t}function b(){p=[]}}E.updateAnimationPreviewPlaybackFrames=function(e){angular.forEach(e,function(e){var t="animation_"+e.id+"_"+e.key,a=pe[t];angular.isObject(a)&&a.ctrl.setAnimationPreviewFrame(e.frame)})},E.modifyAnimationLink=function(o,r,e,t){var a=r.overrideresourceid||o.id,i="animation_"+a+"_"+r.key,n=a.split(":").map(function(e){return"animation_"+e+"_"+r.key});if(r.linkAnimation&&r.linkAnimation.options&&r.linkAnimation.options.parent){if(e)return;var s=re(r.linkAnimation.options.parent.id||o.id,r.linkAnimation.options.parent.key);if(E.isPropertyAnimationValid(s.property))return void E.modifyAnimationLink(s.item,s.property);delete r.linkAnimation.options.parent}var l=E.layoutCtrl.findWindow(i);if(l)return e?E.layoutCtrl.removeWindow(l,t):E.layoutCtrl.activateWindow(l,!0),!0;if(e)return!1;function c(e){var t={};return e.relativeanimation&&(t.relative=!0),t}function d(e){var t;return e.relativeanimation&&ce(t=[],e.value,3),t}var p=angular.isUndefined(r.linkAnimation&&r.linkAnimation.options),u=!1,g={property:r,id:a,item:o,expectedChannels:le(r),linkAnimation:r.linkAnimation||c(r),referenceValues:d(r)},f=[g];function m(e,t){e.options=e.options||{},e.options.fps=t.options.fps,e.options.length=t.options.length,e.options.mode=t.options.mode}g.linkAnimation.options=g.linkAnimation.options||{fps:14.5,length:29,mode:"loop"},angular.forEach(g.linkAnimation.options.children,function(e){var t=re(e.id||o.id,e.key);if(t){var a=t.property.linkAnimation||c(t.property);m(a,g.linkAnimation),t.property.linkAnimation=a,f.push({property:t.property,id:t.property.overrideresourceid||t.item.id,item:t.item,expectedChannels:le(t.property),linkAnimation:a,referenceValues:d(t.property)})}});var v=E.$new(),h=1,b=0,_=!1;function y(o){f.forEach(function(e){var t,a,i,n=re(e.id,e.property.key);n&&(t=n,i=o,(a=e).property=t&&t.property||a.property,a.linkAnimation.previewvalue=angular.isDefined(a.property.linkAnimation&&a.property.linkAnimation.previewvalue)?a.property.linkAnimation.previewvalue:angular.isDefined(a.linkAnimation.previewvalue)?a.linkAnimation.previewvalue:a.property.value,i?(a.linkAnimation=a.property.linkAnimation||c(a.property),a.linkAnimation.previewvalue=a.property.value):a.property.linkAnimation=a.linkAnimation,a.item=t&&t.item||a.item)})}function w(t){f.forEach(function(e){e.property.linkAnimation=e.linkAnimation}),0<T?_=!0:f.forEach(function(e){t&&!t.includes(e.curveProperty)||(delete e.property.lastValue,E.sendAssetPropertyChange(e.item,e.property))})}angular.forEach(n,function(e){pe[e]=v});var k=E.$watch(function(){return T},function(e,t){0===e&&0<t&&(_&&(y(),w()),_=!1)});function S(){var i=[];f.forEach(function(e){var t,a;e.linkAnimation.previewvalue=e.property.value,e.curveProperty={key:e.property.key,name:e.property.name,channelCount:e.expectedChannels,animation:angular.copy(e.linkAnimation)},e.referenceValues&&(t=e.referenceValues,a=e.curveProperty.animation,de(t[0],a.c0,!0),de(t[1],a.c1,!0),de(t[2],a.c2,!0)),i.push(e.curveProperty)}),v.properties=i}v.animationName=a+"_"+r.key,v.ctrl={getCurrentPropertyValues:function(t){0===h&&y();var a=[];return f.forEach(function(e){t===e.curveProperty&&ce(a,e.property&&e.property.value,e.expectedChannels)}),a},isEditingLocked:function(){return 0<h||E.waitForScriptToggle},getCurrentPreviewValue:function(t){0===h&&y();var a=!1,i=[];if(f.forEach(function(e){e.curveProperty===t&&(angular.isUndefined(e.linkAnimation&&e.linkAnimation.previewvalue)?a=!0:ce(i,e.linkAnimation.previewvalue,e.expectedChannels))}),!a)return i},savePropertyKeyframes:function(e){y();var n=[];angular.forEach(e,function(i){f.forEach(function(e){var t,a;e.curveProperty===i.property&&(n.push(i.property),e.linkAnimation[i.channel]=i.keyframes,delete e.linkAnimation.previewvalue,e.referenceValues&&(e.linkAnimation[i.channel]=angular.copy(e.linkAnimation[i.channel]),t=e.referenceValues[i.channelIndex],a=e.linkAnimation[i.channel],de(t,a,!1)))})}),w(n)},saveAnimationOptions:function(e){u=!0,y();var t={options:e};if(angular.isObject(e.parent)&&(delete e.parent.id,g.linkAnimation.options.parent=e.parent),angular.isString(e.name)&&(g.linkAnimation.options.name=e.name),angular.isString(e.startpaused)&&(g.linkAnimation.options.startpaused=e.startpaused),f.forEach(function(e){m(e.linkAnimation,t)}),w(),p&&e.parent){var a=re(e.parent.id||o.id,e.parent.key);if(!a||a.item.id!==o.id||!E.isPropertyAnimationValid(a.property))return;var i=a.property;E.modifyAnimationLink(a.item,i,!0,!0),i.linkAnimation.options.children=i.linkAnimation.options.children||[];var n={key:r.key};i.linkAnimation.options.children.find(function(e){return e.id===n.id&&e.key===n.key})||i.linkAnimation.options.children.push(n),v.close(),E.modifyAnimationLink(a.item,i)}},setPreviewFrame:function(t){y(),b=t;var e=f.map(function(e){return{frame:t,id:e.id,key:e.property.key}});P.callEditor("setAnimationPreviewFrame",e)},setPreviewPlayback:function(t){y(),t&&v.ctrl.setPreviewFrame(0);var e=f.map(function(e){return{play:t,id:e.id,key:e.property.key}});P.callEditor("setAnimationPreviewPlayback",e)},getAnimatedSiblingProperties:function(){var a=[];return angular.forEach(!u&&p&&o.properties,function(e){if(e!==r&&E.isPropertyAnimationValid(e)&&!e.linkAnimation.options.parent){var t=angular.isString(e.linkAnimation.options.name)&&0<e.linkAnimation.options.name.trim().length;a.push({label:t?e.linkAnimation.options.name+" ("+e.key+")":e.key,value:":"+e.key})}}),a},getMode:function(){return"property"}},v.options=f[0].linkAnimation.options,S(),v.$on("undoRedoBegin",function(){++h}),v.$on("undoRedoPerformed",function(){y(!0),v.ctrl.setPreviewFrame(b),S(),--h}),v.$on("onScriptStartPlayback",function(e,t){h+=t?1:-1,t||(y(!0),S())}),x('<div class="editorLayoutPanel editorAnimation"><curve-editor ce-source-properties="properties" ce-options="options" ce-ctrl="ctrl"></curve-editor><div class="editorScriptBlockOverlay" ng-if="isRunningScriptPreview || waitForScriptToggle"></div></div>')(v,function(e){y(),w(),v.close=function(){E.layoutCtrl.removeWindow(e)},v.onClosed=function(){angular.forEach(n,function(e){delete pe[e]}),v.ctrl.setPreviewFrame(-1),k()};var t="ui_editor_pane_header_animation_editor";angular.isString(r.name)&&(t=C.instant("ui_editor_pane_header_animation",{name:C.instant(r.name).toString()}).toString()),E.layoutCtrl.insertWindow(e,v,{tag:i,icon:"fas fa-fw fa-play-circle",title:t,titleClass:"editorAnimationTitle",noPadding:!0,siblingTag:"log",closeFunction:function(){v.close()}}),angular.frameTimeout(A,1,function(){p&&angular.isFunction(v.ctrl.openAnimationOptions)&&v.ctrl.openAnimationOptions(),--h})})},E.deleteAnimationLink=function(e,t){var a=t.linkAnimation&&t.linkAnimation.options&&t.linkAnimation.options.parent,i=angular.isObject(a)&&re(a.id||e.id,a.key);if(E.modifyAnimationLink(e,t,!0),delete t.lastValue,delete t.linkAnimation,i){(i.property&&i.property.linkAnimation&&i.property.linkAnimation.options&&i.property.linkAnimation.options.children||[]).findAndRemove(function(e){return e.key===t.key});var n=E.modifyAnimationLink(i.item,i.property,!0,!0);delete i.property.lastValue,E.sendAssetPropertyChange(i.item,[t,i.property]),n&&E.modifyAnimationLink(i.item,i.property)}else E.sendAssetPropertyChange(e,t)},E.editBoneAnimationConstraints=function(t){l.open("editorBoneConstraints",{data:{settings:t.value&&angular.fromJson(t.value)||{},defaults:{se:!1,rs:200,rf:10,ri:30,ts:200,tf:10,ti:30,re:!1,ge:!1,gd:"0 -1 0",m:20,s:0,a:"1 0 0",r:!0,t:!1,tm:200,la:!1,lamin:"0 0 -3.14159265358",lamax:"0 0 3.14159265358",lt:!1,ltmax:100}}}).then(function(e){t.value=angular.toJson(e),E.sendAssetPropertyChange(E.selectedResource.item,t)})};var ge,fe,me={add:function(e,i){P.callEditor("genericSceneAction","addAnimation",e.id).then(function(e){if(i.value=i.value||[],i.value.push(e.item),angular.merge(E.project.objectproperties,e.objectproperties),angular.isArray(i.value)&&0<i.value.length){var t=i.value[i.value.length-1],a=oe(t.id,t.key);a&&(a.autoShowOptions=!0),me.edit(t)}})},edit:function(e){E.navigateProperty(e.key,e.id)},remove:function(e,t){return P.callEditor("genericSceneAction","removeAnimation",t.id).then(function(){e.value.splice(e.value.indexOf(t),1)})},drag:function(e,t){P.callEditor("dragRenderableItem",E.selectedResource.item.id,e,t,"puppetsingleanimation")},contextMenu:function(e,t,a){p.builder().button("ui_editor_context_menu_duplicate","fas fa-fw fa-clone",function(){P.callEditor("genericSceneAction","duplicateAnimation",a.id)}).open(E,e)}},ve={add:function(e,t){var a={title:"ui_editor_properties_animations",cancelVisible:!0,okVisible:!0,selectionVisible:!0};P.callEditor("getAvailableAnimations",e.id).then(function(e){if(0!==e.length)return a.selectionItems=e,a.selectedItem=e[0],l.open("genericConfirm",{data:a})}).then(function(){return P.callEditor("addAnimationLayer",e.id,a.selectedItem.value)}).then(function(e){t.value=e.items,angular.merge(E.project.objectproperties,e.objectproperties),angular.isArray(t.value)&&0<t.value.length&&ve.edit(t.value[t.value.length-1])})},edit:function(e){E.navigateProperty(e.key,e.id)},remove:function(e,t){return E.onPropertyItemRemoved(e,t)},drag:function(e,t){P.callEditor("dragRenderableItem",E.selectedResource.item.id,e,t,"animationlayer")},contextMenu:function(e,t,a){p.builder().button("ui_editor_context_menu_duplicate","fas fa-fw fa-clone",function(){P.callEditor("genericSceneAction","duplicateAnimationLayer",E.selectedResource.item.id,a.id)}).open(E,e)}},he={nextPoseIndex:1,save:function(t,e,a){angular.isArray(a&&a.properties)&&"0"!==a.value||(a=void 0);var i="ui_editor_puppet_warp_save_pose_title";a&&(i=C.instant("ui_editor_puppet_warp_overwrite_pose_title",{name:a.properties[0].value}));var n={title:i,message:"",cancelVisible:!0,okVisible:!0,textinputVisible:!0,textinput:a?a.properties[0].value:""};l.open("genericConfirm",{data:n}).then(function(){var e=n.textinput.trim();e||(e=C.instant("ui_editor_properties_pose_index",{index:he.nextPoseIndex}).toString(),++he.nextPoseIndex),P.callEditor("genericSceneAction","saveSkeletalPose",t.id,a?a.value:"0",e)})},load:function(e,t){P.callEditor("genericSceneAction","applySkeletalPose",e.id,t.value)},remove:function(e,t,a){return P.callEditor("genericSceneAction","removeSkeletalPose",e.id,a.value)},drag:function(e,t,a){0!==t&&(0===a&&(a=1),--t,--a,P.callEditor("genericSceneAction","orderSkeletalPoses",e.id,t,a))},contextMenu:function(e,t,a){console.log(e,t,a)}},be={};E.initPaintAction=function(e,t){var a=E.selectedResource.stack[0];if(X(),E.paintOptions.enabled=!0,E.paintOptions.mode=e,E.paintOptions.brushtype="",E.paintOptionsLocal={isolateEffect:!1,renderable:a,hiddenEffects:[]},be={},E.paintOptions.lastMode!==e)switch(E.paintOptions.lastMode=e){case"opacitymask":case"flowmask":E.paintOptions.value=255;break;case"rgbmask":E.paintOptions.color="1 1 1";break;case"weightmask":E.paintOptions.value=255,E.paintOptions.showmask=!1}E.endModalAction=function(e){return!(!t&&"navigateProperty"===e)&&(E.endPaint(!0),!0)},E.layoutCtrl.showBaseWindow(E.layoutCtrl.findWindow("brush"))},E.beginPaint=function(e){E.initPaintAction(e.mode);var t=E.selectedResource.stack[0].id;P.callEditor("beginPaint",t,e.material,e.textureindex,E.paintOptions)},E.endPaint=function(e){E.endModalAction=void 0,E.paintOptions.enabled=!1,E.layoutCtrl.removeWindow(E.layoutCtrl.findWindow("brush")),P.callEditor("endPaint",e)},E.clearPaint=function(){if("weightmask"===E.paintOptions.mode){var e=E.selectedResource.stack[0];E.genericSceneAction({args:"resetPuppetWarpWeights",value:e.id})}else P.callEditor("clearPaint")},E.applyPaintHistory=function(e){P.callEditor("applyPaintHistory",e)},E.updatePaintHistoryState=function(e){E.paintHistoryState=e},E.getPaintBrushSizePreview=function(){return 24*Math.pow(E.paintOptions.size/2e3,.2)},E.togglePaintIsolateEffect=function(){var e=E.paintOptionsLocal.renderable&&E.paintOptionsLocal.renderable.properties&&E.paintOptionsLocal.renderable.properties.find(function(e){return"effects"===e.key});console.log("togglePaintIsolateEffect",e)},E.dropFile=function(e){e.sort();var t=e[0];"scene"===E.project.data.type?d.isExtension(t,"sound")?J(t):d.isExtension(t,"texture")?Q(e):K(t):"video"===E.project.data.type&&E.replaceFile(E.project.tree[0],t)},E.importTextureFile=function(t,a,i,e,n,o){X();var r=c.when(e);angular.isString(e)||angular.isArray(e)||(r=r.then(function(){return P.callEditor("importImage").then(function(e){return e.file})})),r.then(function(e){return P.callEditor("importImage",e).then(function(e){return delete e.config.addcommand,"normalmap"===i&&(e.config.shaderpresetkey+="n"),e.config.textureonly=!0,e.config.subdirectory=o||"",l.open("editorImportModel",{objInfo:e})})}).then(function(e){P.callEditor("importTextureFile",{material:t,texture:a,texturepath:e,tag:n||"main"})})},E.exportTextureFile=function(e){X(),P.callEditor("exportTextureFile",e)},E.openMaterialBrowser=function(t,a,e){return l.open("editorMaterials",{data:{currentPath:t.value,subDirectory:e}}).then(function(e){return X(),P.callEditor("importTextureFile",{material:t.material,texture:t.textureindex,texturepath:e,tag:a||"main"})})},E.resetTextureFile=function(e,t,a){X(),P.callEditor("importTextureFile",{material:e,texture:t,tag:a||"main"})},E.duplicateTextureFile=function(e,t,a){return X(),l.open("genericConfirm",{data:{title:"ui_editor_modal_duplicate_texture_header",message:"ui_editor_modal_duplicate_texture_body",cancelVisible:!0,okVisible:!0}}).then(function(){P.callEditor("duplicateTextureFile",{material:e,texture:t,tag:a||"main"})})},E.contextMenuPropertyEffect=function(e,t,a){var i=p.builder();a&&i.button("ui_editor_context_menu_copy_effect","fas fa-fw fa-copy",function(){P.callEditor("getEffectConfig",E.selectedResource.item.id,a.id).then(function(e){ge=e})}),i.button("ui_editor_context_menu_paste_effect","fas fa-fw fa-paste",function(){P.callEditor("addEffectFromConfig",E.selectedResource.item.id,ge)},{},ge?"":"fa-disabled"),a&&(i.button("ui_editor_context_menu_paste_effect_settings","fas fa-fw fa-paste",function(){P.callEditor("applyEffectConfig",E.selectedResource.item.id,a.id,ge)},{},ge&&a.file===ge.file?"":"fa-disabled"),i.divider(),i.button("ui_editor_context_menu_duplicate_effect","fas fa-fw fa-clone",function(){P.callEditor("getEffectConfig",E.selectedResource.item.id,a.id).then(function(e){P.callEditor("addEffectFromConfig",E.selectedResource.item.id,e,a.id)})})),i.open(E,e)},E.renderableDroppedOnTextureCondition=function(e){return(!angular.isObject(E.selectedResource.stack[0])||E.selectedResource.stack[0].id!==e.id)&&(angular.isNumber(e.type)&&(3===e.type||4===e.type))},E.renderableDroppedOnTexture=function(e,t,a){P.callEditor("importTextureFile",{material:e,texture:t,texturepath:"_rt_imageLayerComposite_"+a.id+"_a",tag:"main"})},E.showAddRenderableModal=function(){P.callEditor("listAvailablePresets",E.project.scene.is2d?"scene2d":"scene3d").then(function(n){function e(e,t,a,i){n.push({name:e,description:a,type:t,group:"renderable",options:i})}var t=E.project.scene.is2d?E.particleDefaultPresets:[E.particleDefaultPresets[0]];return e("ui_editor_effects_modal_imagelayer_name","imagelayer","ui_editor_effects_modal_imagelayer_description"),e("ui_editor_effects_modal_textlayer_name","textlayer","ui_editor_effects_modal_textlayer_description",{nameVisible:!0,name:"Text Layer"}),e("ui_editor_effects_modal_fullscreenlayer_name","fullscreenlayer","ui_editor_effects_modal_fullscreenlayer_description"),e("ui_editor_effects_modal_solidlayer_name","solidlayer","ui_editor_effects_modal_solidlayer_description",{color:"1 1 1",resolution:{width:512,height:512}}),e("ui_editor_effects_modal_composelayer_name","composelayer","ui_editor_effects_modal_composelayer_description",{resolution:{width:512,height:512}}),e("ui_editor_effects_modal_particle_system_name","particle","ui_editor_effects_modal_particle_system_description",{nameVisible:!0,name:"new particle system",droplistOptions:t,droplistSelected:t[0].value}),e("ui_editor_effects_modal_sound_name","sound","ui_editor_effects_modal_sound_description"),e("ui_editor_effects_modal_model_name","model","ui_editor_effects_modal_model_description"),N("layers",n),l.open("editorEffectList",{data:{title:"ui_editor_effects_modal_title_add_renderable",groupList:n,workshopModalFn:V,workshopController:F,workshopGroup:"layers"}})}).then(function(e){switch(e.type){case"imagelayer":Q();break;case"textlayer":P.callEditor("addTextLayer",{text:e.options.name}).then(b);break;case"fullscreenlayer":P.callEditor("addCompositionLayer").then(b);break;case"solidlayer":P.callEditor("addSolidLayer",{color:e.options.color,width:e.options.resolution.width,height:e.options.resolution.height}).then(b);break;case"composelayer":P.callEditor("addCompositionLayer",{width:e.options.resolution.width,height:e.options.resolution.height}).then(b);break;case"particle":P.callEditor("createParticle",{name:e.options.name,source:e.options.droplistSelected}).then(function(e){return P.callEditor("addParticle",e)}).then(function(e){var t=b(e);E.editParticle(t)});break;case"sound":P.callEditor("importSound").then(function(e){return P.callEditor("addSound",e.file)}).then(b);break;case"model":K();break;case"preset":P.callEditor("addPreset",angular.toJson(e)).then(b);break;case"workshopasset":P.callEditor("addLayersFromWorkshopAsset",angular.toJson(e)).then(b)}})},E.updateRenderStats=function(e){E.renderStats=e},E.updateUndoState=function(e){E.undoState=e,r()},E.updateScriptMessages=function(e){angular.forEach(e,function(e){E.$broadcast("onScriptMessage",e)})},E.editParticle=function(t,a){angular.isUndefined(a)&&angular.forEach(t.properties,function(e){"particle"===e.type&&(a=e)});var i=[];angular.forEach(E.project.availableassets,function(e){"particle"===e.type&&i.push({label:e.name,value:e.file})}),l.open("editorParticleEditor",{data:{particle:a.value,existingParticles:i,editor:E}}).then(function(e){angular.isString(e)&&P.callEditor("applyParticle",t.id,e),P.callEditor("reloadParticles")})};var _e=[];E.callbackAssetContextMenu=function(e,i){if(i){var n=["origin","scale","angles"],o=function(t){var a;return angular.forEach(i.properties,function(e){e.key===t&&(a=e)}),a},t=p.builder();E.project.scene.is2d&&(t.button("ui_editor_context_menu_center","fas fa-fw fa-align-center",function(){P.callEditor("centerRenderable",i.id)}),i.cropoffset&&t.button("ui_editor_context_menu_align_with_background","fas fa-fw fa-align-justify",function(){P.callEditor("centerRenderable",i.id,i.cropoffset)}),t.button("ui_editor_context_menu_rotate_clockwise","fas fa-fw fa-redo",function(){P.callEditor("rotateRenderable",i.id,2,d.toRadians(-90))}),t.button("ui_editor_context_menu_rotate_counterclockwise","fas fa-fw fa-undo",function(){P.callEditor("rotateRenderable",i.id,2,d.toRadians(90))}),t.divider()),t.button("ui_editor_context_menu_copy_transforms","fas fa-fw fa-copy",function(){var t,a,e=(t=n,a=[],angular.forEach(i.properties,function(e){t.includes(e.key)&&a.push(e)}),a);fe=angular.copy(e)}),t.button("ui_editor_context_menu_paste_transforms","fas fa-fw fa-paste",function(){var a=[];angular.forEach(fe,function(e){var t=o(e.key);t&&(t.value=angular.copy(e.value),a.push(t))}),0<a.length&&E.sendAssetPropertyChange(i,a)},{},fe?"":"fa-disabled");var a=o("locktransforms");if(a){var r=a.value;t.button(r?"ui_editor_context_menu_unlock":"ui_editor_context_menu_lock","fas fa-fw "+(r?"fa-lock-open":"fa-lock"),function(){a.value=!a.value,E.sendAssetPropertyChange(i,a)})}if(i.haseffects){var s=i.properties&&i.properties.find(function(e){return"effects"===e.type});if(s){t.divider();var l=angular.isArray(s.value)&&0<s.value.length;t.button("ui_editor_context_menu_copy_all_effects","fas fa-fw fa-copy",function(){_e=[];var t=c.when();angular.forEach(s.value,function(e){t=t.then(function(){return P.callEditor("getEffectConfig",E.selectedResource.item.id,e.id).then(function(e){_e.push(e)})})})},{},l?"":"fa-disabled").button("ui_editor_context_menu_paste_all_effects","fas fa-fw fa-paste",function(){angular.forEach(_e,function(e){P.callEditor("addEffectFromConfig",E.selectedResource.item.id,e)})},{},0<_e.length?"":"fa-disabled")}}t.divider(),t.button("ui_editor_context_menu_duplicate","fas fa-fw fa-clone",function(){P.callEditor("duplicateRenderable",i.id).then(b)}),t.open(E,e)}},E.importFontFile=function(e){return P.callEditor("importFontFile",angular.isArray(e)?e[0]:void 0)},E.getFonts=function(){return E.project.availablefonts},e.on("keydown.editor.undo",function(e){!e.ctrlKey||"z"!==e.key&&"y"!==e.key||(e.preventDefault(),l.isAnyModalVisible()||0!==angular.element(e.target).closest(".disableEditorHotkeys").length||(E.paintOptions.enabled?E.applyPaintHistory("z"===e.key):Z("y"===e.key)))}),E.propertyControl={navigateProperty:E.navigateProperty,sendAssetPropertyChange:E.sendAssetPropertyChange,textureDropCondition:E.renderableDroppedOnTextureCondition,textureDropped:E.renderableDroppedOnTexture,beginPaint:E.beginPaint,importTextureFile:E.importTextureFile,exportTextureFile:E.exportTextureFile,openMaterialBrowser:E.openMaterialBrowser,resetTextureFile:E.resetTextureFile,duplicateTextureFile:E.duplicateTextureFile,contextMenuPropertyEffect:E.contextMenuPropertyEffect,onPropertyEffectRemoved:E.onPropertyItemRemoved,onPropertyEffectDragged:E.onPropertyItemDragged,editPropertyEffect:E.editPropertyEffect,addPropertyEffect:E.addPropertyEffect,editParticle:E.editParticle,modifyScriptLink:E.modifyScriptLink,modifyAnimationLink:E.modifyAnimationLink,deleteAnimationLink:E.deleteAnimationLink,onPropertySoundRemoved:E.onPropertyItemRemoved,onPropertySoundDragged:E.onPropertyItemDragged,onPropertySoundAssetDropped:E.onPropertySoundAssetDropped,addPropertySound:E.addPropertySound,importFontFile:E.importFontFile,getFonts:E.getFonts,onFontFileDropped:E.onFontFileDropped,editTextFile:E.editTextFile,removePuppetWarp:E.removePuppetWarp,genericSceneAction:E.genericSceneAction,navigateUp:E.navigateUp,editBoneAnimationConstraints:E.editBoneAnimationConstraints,puppetAnimationListCtrl:me,instanceAnimationListCtrl:ve,puppetPoseListCtrl:he,getProject:function(){return E.project}},E.particleDefaultPresets=[{label:"ui_editor_particle_example_basic",value:"assets/particles/example.json"},{label:"ui_editor_particle_example_cursor_follow",value:"assets/particles/examplecursorfollow.json"},{label:"ui_editor_particle_example_cursor_avoid",value:"assets/particles/examplecursoravoid.json"},{label:"ui_editor_particle_example_turbulence",value:"assets/particles/exampleturbolence.json"}],E.$watch("project.data",function(e,t){n&&e!==t&&(P.callEditor("saveProjectData",angular.toJson(e)),h(e))},!0),E.$watch("project.scenegeneraldata",function(e,t){n&&e!==t&&P.callEditor("saveSceneGeneralData",angular.toJson(e))},!0);var ye=["puppetgeometry","puppetskeleton","puppetweights","puppetsingleanimation"];E.$watch("selectedResource.item",function(e,t){if(e&&t&&e.key!==t.key&&X("navigateProperty"),angular.isObject(e)&&angular.isDefined(e.id)){ie(e);var a=E.selectedResource.stack.map(function(e){return{key:e.key,id:e.id}});P.callEditor("setSelectedRenderable",e.id,e.key,angular.toJson(a)),E.selectedResource.visible=[e],angular.isObject(e.next)&&E.selectedResource.visible.push(ne(e.next.key,e.next.id)),ae(e),T+=1,E.keyDisableScriptPreview=ye.includes(e.key),A(function(){--T,E.$broadcast("rzSliderForceRender"),o&&"puppet"===e.key?P.callEditor("genericSceneAction","checkImageSuitableForPuppetWarp",e.id).then(function(e){e||(l.open("genericConfirm",{data:{title:"ui_editor_properties_geometry_warning_title",message:"ui_editor_properties_geometry_warning_body",leftIcon:"images/warning.png",okVisible:!0}}),o=!1)}):"puppetsingleanimation"===e.key&&ue(e)})}}),E.$watch("paintOptions",function(e,t){angular.isObject(e)&&e!==t&&(e.angleDegrees=Math.round(d.toDegrees(e.angle)),P.callEditor("updatePaintOptions",e))},!0),E.$on("onCppInit",function(e,t){t&&(E.editorSettings.showassetcreation=!0,E.editorSettings.hasacceptedassetsharingtos=!0)}),E.$on("$destroy",function(){e.off("keydown.editor.undo")}),E.colorPickerOptions=d.getColorPickerDefaults(),E.editorSettings={previewratio:"free",scriptconsoleautoscroll:!0},E.editorLayoutClass="editorLayoutSimple",E.selectedResource={item:void 0,visible:[],stack:[]},E.colorPickerSettings=d.getColorPickerDefaults(),E.layoutCtrl={},E.showSimpleLayout(),E.paintOptions={enabled:!1,value:0,color:"1 1 1",size:40,opacity:100,hardness:50,mode:"opacitymask",showmask:!1,brushtype:"",angle:0},E.paintMouseHandler={fnMouseDown:function(e){if(E.paintOptions.enabled&&(e.ctrlKey||e.shiftKey))return be.ctrl=e.ctrlKey,be.shift=e.shiftKey,be.size=E.paintOptions.size,be.opacity=E.paintOptions.opacity,be.offset={left:e.offsetX,top:e.offsetY},!0},fnMouseUp:function(){be.ctrl=!1,be.shift=!1},fnMouseMove:function(e){if(E.paintOptions.enabled&&(be.ctrl||be.shift)){var t,a=e.offsetX-be.offset.left,i=be.offset.top-e.offsetY;return t=Math.abs(a)>Math.abs(i)?a:i,be.ctrl?(E.paintOptions.size=be.size+t,E.paintOptions.size=Math.min(2e3,Math.max(1,E.paintOptions.size))):be.shift&&(E.paintOptions.opacity=be.opacity+t,E.paintOptions.opacity=Math.min(100,Math.max(1,E.paintOptions.opacity))),window.safeApply(E),!0}}},E.paintOptionsSliderSize={ceil:2e3,floor:1,customValueToPosition:function(e,t,a){return((e=Math.log(e))-(t=Math.log(t)))/((a=Math.log(a))-t)},customPositionToValue:function(e,t,a){t=Math.log(t);var i=e*((a=Math.log(a))-t)+t;return Math.exp(i)}},E.nativeDropOptions={previewExtension:""},E.animationCtrl={},E.toggleShowGrid=$,E.toggleShowSelectionBox=q,E.toggleShowStats=G,P.setCallErrorSuppressed("validateVideoFile",!0),i.$on("$translateChangeEnd",r),r()}]),angular.module("wallpaperbrowserApp").directive("filemenu",["$timeout","$translate",function(e,p){return{templateUrl:"views/templates/filemenu.html",restrict:"E",scope:{fmItems:"=",fmData:"=",fmDisabled:"="},link:function(n,t){var r,s=0;function o(e){var t=angular.element(document.createElement("span"));return t.addClass(e),t}function l(e,t){function a(e){i.text(e)}var i=angular.element(document.createElement("div"));return p(e).then(a).catch(a),angular.isDefined(t)&&i.addClass(t),i}function c(t){var a=angular.element(document.createElement("button"));if(a.addClass("btn"),angular.isDefined(t.icon)&&a.append(o(t.icon+" pull-left itemIcon")),a.append(l(t.label,"item")),a.click(function(e){if(a.hasClass("disabled"))return e.stopPropagation(),void e.currentTarget.blur();angular.isFunction(t.fn)&&(t.fn(t),n.$apply())}),t.disabled&&a.addClass("disabled"),t.binding){var i=o("glyphicon glyphicon-ok pull-left");i.css({visibility:"visible","margin-right":10}),a.prepend(i),a.on("filemenu.resfresh",function(){var e=t.value===n.fmData[t.binding];i.css({visibility:e?"visible":"hidden"})})}return a}function d(e,t){var a,i,n=angular.element(document.createElement("div"));return n.addClass("btn filemenuNestedIndicatorElement"),n.append(l(t.label,"item")),n.append(o("glyphicon glyphicon-triangle-right")),n.click(function(e){e.stopPropagation()}),e.append(n),t.disabled?n.addClass("disabled"):(e.append((a=t.children,(i=angular.element(document.createElement("ul"))).addClass("dropdown-menu to-right nested"),angular.forEach(a,function(e){var t=angular.element(document.createElement("li")),a=c(e);t.append(a),i.append(t)}),i)),e.mouseover(function(){e.addClass("open")}),e.mouseout(function(){e.removeClass("open")})),n}n.onMouseOver=function(e){0<s&&r!==e.target&&(e=angular.element(e.target)).dropdown("toggle")},n.$watch("fmItems",function(o){r=void 0,e(function(){var e=t.find(".btn-group"),n=0;angular.forEach(e,function(e){(e=angular.element(e)).off("show.bs.dropdown"),e.off("hide.bs.dropdown"),e.on("show.bs.dropdown",function(){++s,r=e.children(".dropdown-toggle")[0],e.find("button").trigger("filemenu.resfresh")}),e.on("hide.bs.dropdown",function(){--s});var t,a,i=o[n++].children;e.children("ul").remove(),e.append((t=i,(a=angular.element(document.createElement("ul"))).addClass("dropdown-menu"),angular.forEach(t,function(e){if(!e.hidden){var t=angular.element(document.createElement("li"));angular.isString(e.label)?angular.isArray(e.children)?d(t,e):t.append(c(e)):t.addClass("separator"),a.append(t)}}),a))})})})}}}]);var _linkedSliderUpdateTimer,_inputUpdateTimer,openSteamDownloads,_lastRegisteredPropertyObject,_curveFrameCopy,_copiedBoneConstraintsSettings,_preventModalClose=!1;angular.element(document).on("keydown",function(e){if(27===e.which&&_preventModalClose&&(e.stopPropagation(),e.preventDefault()),13===e.which){if(document.activeElement&&["INPUT","TEXTAREA","BUTTON"].includes(document.activeElement.nodeName)&&!document.activeElement.classList.contains("ignoreModalFocus"))return;if(!_preventModalClose){e.stopPropagation(),e.preventDefault();var t=angular.element(".modal-footer")[0];(t=t&&angular.element(t).find(".btn-primary")[0])&&!t.disabled&&angular.element(t).click()}}}),angular.module("wallpaperbrowserApp").service("modals",["$q","$rootScope","$timeout","$uibModal",function(i,r,s,l){var c=0,n=this;this.open=function(e,t,a){var i={animation:!0,backdrop:"static",backdropClass:a&&a.backdropClass,resolve:t};switch(e){case"editorWelcome":i.templateUrl="views/modals/editorwelcomemodal.html",i.controller="EditorWelcomeModalCtrl";break;case"editorOpenWallpaper":i.templateUrl="views/modals/editoropenwallpapermodal.html",i.controller="EditorOpenWallpaperModalCtrl",i.windowClass="modal-dialog-full";break;case"editorSteamPublish":i.templateUrl="views/modals/editorsteampublishmodal.html",i.controller="EditorSteamPublishModalCtrl",i.size="lg";break;case"editorImportModel":i.templateUrl="views/modals/editorimportmodelmodal.html",i.controller="EditorImportModelModalCtrl",i.windowClass="modal-dialog-allow-overflow",i.size="mlg";break;case"editorProjectSettings":i.templateUrl="views/modals/editorprojectsettingsmodal.html",i.controller="EditorProjectSettingsModalCtrl",i.size="slg";break;case"editorTemplateWizard":i.templateUrl="views/modals/editortemplatewizardmodal.html",i.controller="EditorTemplateWizardModalCtrl";break;case"editorWorkshopRules":i.resolve={data:{}},i.templateUrl="views/modals/editorworkshoprules.html",i.controller="EditorWorkshopRulesModalCtrl";break;case"editorEffectList":i.templateUrl="views/modals/editoreffectlistmodal.html",i.controller="EditorEffectListModalCtrl",i.size="mlg";break;case"editorParticleEditor":i.templateUrl="views/modals/editorparticleeditormodal.html",i.controller="EditorParticleEditorModalCtrl",i.size="xlg";break;case"editorMaterials":i.templateUrl="views/modals/editormaterialsmodal.html",i.controller="EditorMaterialsModalCtrl",i.size="xlg";break;case"editorRating":i.templateUrl="views/modals/editorratingmodal.html",i.controller="EditorRatingModalCtrl",i.size="slg";break;case"editorUserProperties":i.templateUrl="views/modals/editoruserpropertiesmodal.html",i.controller="EditorUserPropertiesModalCtrl";break;case"editorUserPropertyDetails":i.templateUrl="views/modals/editoruserpropertydetailsmodal.html",i.controller="EditorUserPropertyDetailsModalCtrl";break;case"editorSelectAssets":i.templateUrl="views/modals/editorselectassetsmodal.html",i.controller="EditorSelectAssetsModalCtrl";break;case"editorAnimationOptions":i.templateUrl="views/modals/editoranimationoptionsmodal.html",i.controller="EditorAnimationOptionsModalCtrl";break;case"editorAnimationEvents":i.templateUrl="views/modals/editoranimationeventsmodal.html",i.controller="EditorAnimationEventsModalCtrl";break;case"editorAnimationHelp":i.templateUrl="views/modals/editoranimationhelpmodal.html",i.controller="GenericConfirmModalCtrl";break;case"editorBoneConstraints":i.templateUrl="views/modals/editorboneconstraintsmodal.html",i.controller="EditorBoneConstraintsModalCtrl";break;case"openFromUrl":i.templateUrl="views/modals/openfromurlmodal.html",i.controller="OpenFromUrlModalCtrl";break;case"changelog":i.templateUrl="views/modals/settingschangelogmodal.html",i.controller="SettingsChangelogModalCtrl",i.size="lg";break;case"settingsPerApplication":i.templateUrl="views/modals/settingsperapplicationmodal.html",i.controller="SettingsPerApplicationModalCtrl";break;case"settingsHotkeys":i.templateUrl="views/modals/settingshotkeysmodal.html",i.controller="SettingsHotkeysModalCtrl";break;case"settingsPlugin":i.templateUrl="views/modals/settingspluginmodal.html",i.controller="SettingsPluginModalCtrl";break;case"browseCollections":i.templateUrl="views/modals/browsecollectionsmodal.html",i.controller="BrowseCollectionsModalCtrl";break;case"browsePlaylistSettings":i.templateUrl="views/modals/browseplaylistsettingsmodal.html",i.controller="BrowsePlaylistSettingsModalCtrl";break;case"browseSplitMonitor":i.templateUrl="views/modals/browsesplitmonitormodal.html",i.controller="BrowseSplitMonitorModalCtrl";break;case"browseWallpaperSharePreset":i.templateUrl="views/modals/browsewallpapersharepresetmodal.html",i.controller="BrowseWallpaperSharePresetModalCtrl";break;case"browseWallpaperWorkshopInfo":i.templateUrl="views/modals/browsewallpaperworkshopinfomodal.html",i.controller="BrowseWallpaperWorkshopInfoModalCtrl";break;case"browseReport":i.templateUrl="views/modals/browsereportmodal.html",i.controller="BrowseReportModalCtrl";break;case"browseExploreCreateQuery":i.templateUrl="views/modals/browseexplorecreatequerymodal.html",i.controller="BrowseExploreCreateQueryModalCtrl";break;case"browseAssignHotkey":i.templateUrl="views/modals/browseassignhotkey.html",i.controller="BrowseAssignHotkeyModalCtrl";break;case"browseSetDefaults":i.templateUrl="views/modals/browsesetdefaultsmodal.html",i.controller="BrowseSetDefaultsModalCtrl";break;case"genericConfirm":i.templateUrl="views/modals/genericconfirmmodal.html",i.controller="GenericConfirmModalCtrl";break;case"ageGate":i.templateUrl="views/modals/agegatemodal.html",i.controller="AgeGateModalCtrl";break;case"queryWorkshop":i.templateUrl="views/modals/queryworkshopmodal.html",i.controller="QueryWorkshopModalCtrl",i.windowClass="modal-dialog-flex"}function n(){_preventModalClose=!1,s(function(){r.$broadcast("previewtoggle",-1)},350),r.$broadcast("modalVisible",--c)}var o=l.open(i);return o.opened.then(function(){r.$broadcast("previewtoggle",1),r.$broadcast("modalVisible",++c)}),o.result.then(n).catch(n),o.result},this.setPreventModalClose=function(e){_preventModalClose=e},this.showHighPriorityWarning=function(e,t){var a=i.when();return e&&!t.hasshownhighprioritywarning&&(a=n.open("genericConfirm",{data:{title:"ui_settings_highpriority_warning_header",message:"ui_settings_highpriority_warning",okVisible:!0,cancelVisible:!0}}).then(function(){t.hasshownhighprioritywarning=!0})),a},this.isAnyModalVisible=function(){return 0<c}}]),angular.module("wallpaperbrowserApp").controller("EditorWelcomeModalCtrl",["$timeout","$translate","$uibModalInstance","$rootScope","$scope","modals","host","utils","editorScope","options",function(e,r,t,a,s,i,l,c,d,n){function o(){var e;s.templates=[],l.callEditor("getTemplates",e).then(function(e){s.templates=e})}s.resize={},s.ok=function(){l.setCallErrorSuppressed("createNewProject",!0),l.callEditor("createNewProject",angular.toJson(s.project),s.resize.enabled&&s.resize.selected).then(function(e){t.close(e)}).catch(function(e){angular.isString(e)?c.showError(e):angular.isObject(e)&&i.open("genericConfirm",{data:{title:e.title,message:e.body,leftIcon:"images/warning.png",cancelVisible:!0,cancelText:"ui_close"}})})},s.cancel=function(){t.dismiss("cancel")},s.openPage=function(e){s.project={schemecolor:"0 0 0"};var t="glyphicon glyphicon-knight";switch(e){case"scene":s.newTitle="ui_editor_welcome_modal_new_scene_wallpaper";break;case"templates":s.newTitle="ui_editor_welcome_modal_new_template_wallpaper",s.project.resolution={width:1920,height:1080},o();break;case"video":s.newTitle="ui_editor_welcome_modal_new_video_wallpaper",t="fas fa-film";break;case"web":s.newTitle="ui_editor_welcome_modal_new_web_wallpaper",t="glyphicon glyphicon-globe";break;case"application":s.newTitle="ui_editor_welcome_modal_new_application_wallpaper",t="fas fa-gamepad"}s.project.type=e,s.page=e,s.pageIcon=t,s.project.template=""},s.importFile=function(){l.callEditor("importFile").then(function(e){s.fileDropped(e)})},s.openRecent=function(e){t.close(e)},s.openProjects=function(){t.close({action:"openProjects"})},s.openWiki=function(){c.openUrl(c.url.docs)},s.fileDropped=function(t){var e,a,i,n,o=c.getFilename(t,!0)||"New Wallpaper";c.isExtension(t,"texture")?(s.openPage("scene"),s.project.type="scene2d",s.project.file=t,s.project.title=o,n=t,l.callEditor("checkBadGIF",n).then(function(e){e.error&&c.displayGifWarning()}),a=t,i=s.project,l.callEditor("getDominantColorFromFile",a).then(function(e){i.schemecolor=e.schemecolor}),e=t,s.resize.visible=!1,l.callEditor("getResizeRecommendationsFromFile",e).then(function(e){if(0!==e.options.length){s.resizeHintValues={width:e.width,height:e.height},s.resize.selected=e.options[0].value,s.resize.visible=!0,s.resize.enabled=e.enabled,s.resize.showHint=e.enabled;var a=!1;s.resizeOptions=e.options.map(function(e){var t=r.instant(e.group)+": "+c.translateTagInstant(e.value);return a&&(a=!1,t+=" "+r.instant("ui_editor_welcome_modal_resize_recommended")),{value:e.value,label:t}})}})):c.isExtension(t,"model")?(s.openPage("scene"),s.project.type="scene3d",s.project.file=t,s.project.title=o):c.isExtension(t,"video")?l.callEditor("validateVideoFile",t).then(function(){s.openPage("video"),s.project.type="video",s.project.file=t,s.project.title=o}).catch(function(e){d.showVideoSizeError(t,e)}):c.isExtension(t,"web")?l.callEditor("getImportFileList",t).then(function(e){s.openPage("web"),s.project.file=t,s.project.type="web",s.project.filelist=e,s.project.title=o}):c.isExtension(t,"application")&&l.callEditor("getImportFileList",t).then(function(e){s.openPage("application"),s.project.file=t,s.project.type="application",s.project.filelist=e,s.project.title=o})},s.$watch("project.template",function(t){s.currentPreview=void 0,angular.isString(t)&&angular.forEach(s.templates,function(e){e.value===t&&angular.isString(e.preview)&&(s.currentPreview="file://"+e.preview)})}),s.colorPickerOptions=c.getColorPickerDefaults(),s.project={},s.editorScope=d,s.smallDialog=0,s.title=n.smallDialog?"ui_editor_welcome_modal_title_new":"ui_editor_welcome_modal_title_welcome",s.supportedFileTypes=".jpeg, .png, .tga, .gif, .mp4, .html, .obj, .fbx",l.callEditor("getProjects",!0).then(function(e){s.showOpenBtn=0<e}),c.canUploadApplications()&&(s.supportedFileTypes+=", .exe"),s.recentFileDetails=[],angular.isArray(d.editorSettings.recentfiles)&&l.callEditor("getWallpaperDetails",d.editorSettings.recentfiles).then(function(e){s.recentFileDetails=e}),n.autoImportFile&&e(function(){s.fileDropped(n.autoImportFile)})}]),angular.module("wallpaperbrowserApp").service("host",["$q","utils",function(l,c){var e,t=this,d={};this.setCallErrorSuppressed=function(e,t){d[e+"Callback"]=t},this.callDeferred=function(e,t){for(var a=l.defer(),i=[],n=2;n<arguments.length&&!angular.isUndefined(arguments[n]);++n)i.push(arguments[n]);function o(){window[r]=void 0,window[s]=void 0}var r=t+"Callback",s=t+"CallbackError";return window[r]=function(){o(),a.resolve.apply(null,arguments)},window[s]=function(){o(),d[r]||c.showError(arguments[0]),a.reject.apply(null,[1<arguments.length?arguments[1]:void 0])},window[e][t].apply(window[e],i),a.promise},this.callEditor=function(e){for(var t=["editorObject",e],a=1;a<arguments.length;++a)t.push(arguments[a]);return this.callDeferred.apply(null,t)},this.callUI=function(e){for(var t=["ui",e],a=1;a<arguments.length;++a)t.push(arguments[a]);return this.callDeferred.apply(null,t)},this.logError=function(e){window.ui&&window.ui.logError&&window.ui.logError(e)},this.getVirtualKeyNames=function(){return angular.isUndefined(e)&&(e=t.callDeferred("ui","getVirtualKeyNames")),e}}]),angular.module("wallpaperbrowserApp").directive("treeView",["$translate","$timeout","dragdrop",function(M,e,D){return{restrict:"E",scope:{tvData:"=",tvMode:"=",tvSelectedItem:"=",tvDragDropEnabled:"=",tvDragDropTag:"@",tvMultiSelectMode:"@",tvRemoveClicked:"&",tvElementDragged:"&",tvElementDoubleClicked:"&",tvNewElementAdded:"&",tvSendAssetPropertyChange:"&",tvContextMenu:"&"},link:function(S,x,E){var a,r,l="treeViewDirectoryInvisible",C=[],t=x,A="directory"===S.tvMode,P=-1,e=angular.element(document.createElement("div"));function T(){return"scene"===S.tvMode}function R(){return"enabled"===S.tvMultiSelectMode||"always"===S.tvMultiSelectMode}function I(e){e.preventDefault(),e.stopPropagation()}function O(e){angular.isFunction(e.unregisterNameWatcher)&&e.unregisterNameWatcher(),angular.isFunction(e.unregisterVisibilityWatcher)&&e.unregisterVisibilityWatcher(),angular.isFunction(e.unregisterLockWatcher)&&e.unregisterLockWatcher()}function i(e,t){t?(R()?a.includes(e)||a.push(e):(angular.isDefined(a)&&a!==e&&i(a,!1),a=e),e.addClass("active")):(R()&&a.findAndRemove(e),e.removeClass("active"))}function n(t){!R()&&angular.isDefined(a)&&i(a,!1),angular.forEach(C,function(e){e[0].item===t&&i(e,!0)})}function c(i){var n=angular.element(document.createElement("a")),t=angular.element(document.createElement("span"));t.text(M.instant(i.name)),t.addClass("editorTreeViewItemLabel"),n.append(t),n.addClass("btn activeBackHighlight"),A&&n.addClass("treeViewDirectoryListingItem");var e=-1,a=-1,o=-1;if(angular.isArray(i.properties)&&0<i.properties.length){for(var r=0;r<i.properties.length;++r){var s=i.properties[r];"name"===s.key?e=r:"visible"===s.key?a=r:"locktransforms"===s.key&&(o=r)}if(0<=e){var l=S.$watch(function(){return i&&i.properties&&i.properties[e].value},function(e){angular.isString(e)&&0<e.trim().length?t.text(e):t.text(M.instant(i.name))});n.unregisterNameWatcher=l}}var c,d,p=angular.element(document.createElement("span"));if(p.addClass("editorTreeViewItemIcon"),c=angular.isString(i.icon)?i.icon:"glyphicon glyphicon-file",p.addClass(c),n.prepend(p),n.addClass("editorTreeViewSceneGraphBtn"),T()&&0<=o&&angular.isDefined(E.tvSendAssetPropertyChange)){p.on("mousedown",function(e){1===e.which&&(e.preventDefault(),e.stopPropagation(),S.$apply(function(){i.properties[o].value=!i.properties[o].value,S.tvSendAssetPropertyChange({resource:i,property:i.properties[o]})}))});var u=function(e){var t="fas fa-fw fa-lock warningText";e?(p.removeClass(c),p.addClass(t)):(p.removeClass(t),p.addClass(c))};u(i.properties[o].value);var g=S.$watch(function(){return i&&i.properties&&i.properties[o].value},u);n.unregisterLockWatcher=g}if(T()&&0<=a&&angular.isDefined(E.tvSendAssetPropertyChange)){var f=angular.element(document.createElement("a"));f.addClass("editorTreeViewVisibilityButton");var m=angular.element(document.createElement("span"));m.addClass("fas fa-fw fa-eye"),f.append(m),n.append(f),f.on("mousedown",function(e){1===e.which&&(e.preventDefault(),e.stopPropagation(),S.$apply(function(){i.properties[a].value=!i.properties[a].value,S.tvSendAssetPropertyChange({resource:i,property:i.properties[a]})}))}),f.on("click",I),f.on("dblclick",I);var v=S.$watch(function(){return{visible:i&&i.properties&&i.properties[a].value,show:i&&i.properties&&!i.properties[a].linkUser}},function(e){m.removeClass("fa-eye fa-eye-slash"),m.addClass(e.visible?"fa-eye":"fa-eye-slash"),f.removeClass("forceVisible"),n.removeClass("treeViewItemFade"),!1===e.visible&&(f.addClass("forceVisible"),n.addClass("treeViewItemFade")),e.show?f.show():f.hide()},!0);n.unregisterVisibilityWatcher=v}if(T()&&!i.disableRemove){var h=angular.element(document.createElement("a"));h.addClass("editorTreeViewRemoveButton");var b=angular.element(document.createElement("span"));b.addClass("glyphicon glyphicon-remove"),h.append(b),n.append(h),h.on("mousedown",function(e){e.stopPropagation(),S.$apply(function(){S.tvRemoveClicked({item:i}).then(function(){n.remove(),O(n)})})})}var _=!1,y=!1,w=!1;n[0].item=i,n.on("mousedown",function(e){1===e.which&&(d={x:e.offsetX,y:e.offsetY},_=!0),y="always"===S.tvMultiSelectMode||e.ctrlKey,w=e.shiftKey}),n.on("mouseup",function(){if(_&&(_=!1,T())){if(!R()&&angular.isDefined(S.tvSelectedItem)&&S.tvSelectedItem.item===i)return void("deselect"===S.tvMultiSelectMode&&(S.tvSelectedItem.item=void 0,S.$apply()));if(angular.isDefined(i)){if(R()){var e=w||!y||!S.tvSelectedItem.includes(i);if(y&&S.tvSelectedItem.includes(i))S.tvSelectedItem.findAndRemove(i);else if(e){w||y||(S.tvSelectedItem.length=0),S.tvSelectedItem.includes(i)||S.tvSelectedItem.push(i);var t=C.indexOf(n);if(w){for(var a;t<P&&!(++t>=C.length);)a=C[t][0].item,S.tvSelectedItem.includes(a)||S.tvSelectedItem.push(C[t][0].item);for(;P<t&&!(--t<0);)a=C[t][0].item,S.tvSelectedItem.includes(a)||S.tvSelectedItem.push(C[t][0].item)}P=t}}else S.tvSelectedItem.item=i;S.$apply()}}}),n.dblclick(function(){angular.isFunction(S.tvElementDoubleClicked)&&(S.tvElementDoubleClicked({item:i}),S.$apply())}),n.contextmenu(function(e){angular.isFunction(S.tvContextMenu)&&(e.stopPropagation(),e.preventDefault(),S.tvContextMenu({item:i,$event:e}),S.$apply())});function k(){_=!1,D.finish();var e=n.css("opacity");n.css({opacity:.35}),x.addClass("treeViewInHover");var t={onCancelled:function(){n.css({opacity:e}),x.removeClass("treeViewInHover")},onDragged:function(){A?n.css({opacity:e}):n.remove(),x.removeClass("treeViewInHover")}};D.start(n,i,t,S.tvDragDropTag)}return n.on("mouseleave",function(){_&&S.tvDragDropEnabled&&k()}),n.on("mousemove",function(e){_&&S.tvDragDropEnabled&&5<Math.abs(e.offsetX-d.x)+Math.abs(e.offsetY-d.y)&&k()}),C.push(n),n}function d(s,e){angular.forEach(e,function(e){var t,a,i,n,o;if(angular.isArray(e.children)){var r=angular.element(document.createElement("div"));a=" "+e.name,i=r,n=angular.element(document.createElement("a")),o=angular.element(document.createElement("span")),n.text(a),n.addClass("btn btn-default editorTreeViewSceneGraphBtn activeBackHighlight"),n.click(function(){i.toggleClass(l),o.toggleClass("glyphicon-folder-close"),o.toggleClass("glyphicon-folder-open")}),i.addClass("treeViewDirectory "+l),o.addClass("editorTreeViewItemIcon treeViewFolderIcon glyphicon glyphicon-folder-close "),n.prepend(o),t=n,s.append(t),s.append(r),d(r,e.children)}else t=c(e),s.append(t)})}function o(e){angular.forEach(C,function(e){O(e)}),P=-1,C=[],x.empty(),a=R()?[]:void 0,d(x,e),t.off("contextmenu.tvDefaultContextMenu"),t.on("contextmenu.tvDefaultContextMenu",function(e){angular.isFunction(S.tvContextMenu)&&(e.stopPropagation(),e.preventDefault(),S.tvContextMenu({$event:e}),S.$apply())}),R()?angular.forEach(S.tvSelectedItem,function(e){n(e)}):S.tvSelectedItem&&S.tvSelectedItem.item&&(angular.forEach(e,function(e){e&&e.value&&e.value===S.tvSelectedItem.item.value&&(S.tvSelectedItem.item=e)}),n(S.tvSelectedItem.item))}function p(e,t){var a=x.children().filter(function(){return r&&this!==r[0]}),i=a.outerHeight(),n=e.pageY-x[0].getBoundingClientRect().top,o=Math.round(n/i);return o=Math.min(o,a.length),t&&(o*=i),o}e.addClass("treeViewScroll"),x.append(e),x=e,S.$on("$destroy",function(){D.unregisterContainer(t)}),S.$on("renderableNameChanged",o),S.$watch("tvData",o,!1),R()?S.$watch("tvSelectedItem",function(t){angular.forEach(C,function(e){i(e,t.includes(e[0].item))})},!0):S.$watch("tvSelectedItem.item",function(e,t){e!==t&&n(e)}),D.registerContainer(t,{onMouseEnter:function(){S.tvDragDropEnabled&&!A&&((r=angular.element(document.createElement("div"))).addClass("treeViewHoverIndicator"),x.append(r))},onMouseLeave:function(){r&&(r.remove(),r=void 0)},onMouseMove:function(e){S.tvDragDropEnabled&&function(e){if(r){var t=p(e,!0);r.css({top:t})}}(e)},onElementDropped:function(e,t){if(!S.tvDragDropEnabled||A)return!1;var a=function(e){for(var t=0;t<S.tvData.length;++t)if(S.tvData[t]===e)return t;return-1}(t),i=p(e);if(0<=a){var n=x.children(),o=S.tvData[a];S.tvData.splice(a,1),a<i&&--i,S.tvData.splice(i,0,o);for(var r=S.tvData.length-1;0<=r;--r){for(var s,l=0;l<n.length;++l)n[l].item===S.tvData[r]&&(s=n[l]);s&&x.prepend(s)}return angular.isFunction(S.tvElementDragged)&&S.tvElementDragged({from:a,to:i}),!1}return!!angular.isFunction(S.tvNewElementAdded)&&S.tvNewElementAdded({item:t,index:i})}},S.tvDragDropTag)}}}]),angular.module("wallpaperbrowserApp").directive("preview",["$timeout","host",function(h,b){return{templateUrl:"views/templates/preview.html",restrict:"E",scope:{pOptions:"=",pAspectRatio:"=",pMouseHandler:"="},link:function(l,e){var a=angular.element(e.find("#pluginCrossHairOverlay")[0]);l.pOptions=l.pOptions||{};var t,i="main"===l.pOptions.tag,n=l.pOptions.memory||"WallpaperEngineBackBufferMem",o=angular.element(e.children()[0]),r=angular.element(o.children()[0]),s=e.find("#previewPlugin")[0],c=0,d={};function p(){s&&s.postMessage&&(s.postMessage("setStreamName "+n),angular.isDefined(l.pOptions.defaultColor)&&s.postMessage("setDefaultColor "+l.pOptions.defaultColor))}function u(){angular.isObject(t)&&h.cancel(t),t=h(function(){var e=r.offset();b.callEditor("previewSizeChanged",e.left,e.top,r.innerWidth(),r.innerHeight(),l.pOptions.tag)},50)}function g(e){b.callEditor("previewToggleVisibility",e)}window[l.pOptions.ctrl]=l,angular.element(window).on("resize.doResize",function(){l.$apply()}),i&&(angular.element(".dropdown").on("show.bs.dropdown",function(){g(!1)}),angular.element(".dropdown").on("hidden.bs.dropdown",function(){g(!0)})),l.setWindowHandle=function(e){p(),s&&s.postMessage&&s.postMessage("setWindowHandle "+e)},i&&l.$on("previewtoggle",function(e,t){var a=0===c;0===(c+=t)?g(!0):1===c&&a&&g(!1)});var f=new ResizeObserver(u);function m(e){return e.y=r.innerHeight()-e.y,e.x=Math.round(e.x),e.y=Math.round(e.y),e}if(f.observe(r[0]),l.$on("$destroy",function(){f.disconnect(),angular.element(window).off("resize.doResize"),window[l.pOptions.ctrl]=void 0,e.off("pointerenter.preview"),a.off("pointerenter.preview"),e.off("pointerleave.preview"),a.off("pointerleave.preview"),e.off("pointermove.preview"),a.off("pointermove.preview"),e.off("pointerdown.preview"),a.off("pointerdown.preview"),e.off("pointerup.preview"),a.off("pointerup.preview"),e.off("touchend.preview"),a.off("touchend.preview"),e.off("pointercancel.preview"),a.off("pointercancel.preview")}),angular.isDefined(l.pAspectRatio)&&l.$watch(function(){return{width:o.outerWidth(),height:o.outerHeight(),aspect:l.pAspectRatio}},function(e){var t=e.aspect.toLowerCase().split("x");if(2===t.length){var a=Number(t[0])/Number(t[1]);if(a<=0)l.previewPadding="";else{var i=e.width,n=e.height,o=0,r=0;if(0<n&&0<i){var s=i/n;if(s<a)r=(n-i/a)/2;else if(a<s){o=(i-n*a)/2}}l.previewPadding=Math.floor(r)+"px "+Math.floor(o)+"px"}}else l.previewPadding=""},!0),h(u,1e3),l.$on("onCppInit",u),l.$on("showPreviewCrosshair",function(e,t){a.css({display:t?"block":"none"})}),l.mouseEnter=function(e){document.documentElement.style["touch-action"]="none",d={},b.callEditor("sceneMouseMove",angular.toJson(m({tag:l.pOptions.tag,mode:"enter",x:e.offsetX,y:e.offsetY,type:e.originalEvent.pointerType})))},l.mouseLeave=function(e){document.documentElement.style["touch-action"]="auto",b.callEditor("sceneMouseMove",angular.toJson(m({tag:l.pOptions.tag,mode:"leave",x:e.offsetX,y:e.offsetY,type:e.originalEvent.pointerType})))},l.mouseMove=function(e){if(!(l.pMouseHandler&&l.pMouseHandler.fnMouseMove&&l.pMouseHandler.fnMouseMove(e))){var t={x:Math.round(e.offsetX),y:Math.round(e.offsetY)};d.x===t.x&&d.y===t.y||(d=t,b.callEditor("sceneMouseMove",angular.toJson(m({tag:l.pOptions.tag,mode:"move",x:e.offsetX,y:e.offsetY,type:e.originalEvent.pointerType,shift:e.shiftKey,ctrl:e.ctrlKey}))))}},e.on("pointerenter.preview",l.mouseEnter),a.on("pointerenter.preview",l.mouseEnter),e.on("pointerleave.preview",l.mouseLeave),a.on("pointerleave.preview",l.mouseLeave),e.on("pointermove.preview",l.mouseMove),a.on("pointermove.preview",l.mouseMove),l.pOptions.interactive){l.mouseDown=function(e){l.pMouseHandler&&l.pMouseHandler.fnMouseDown&&l.pMouseHandler.fnMouseDown(e)||1!==e.which&&3!==e.which||b.callEditor("sceneMouseMove",angular.toJson(m({tag:l.pOptions.tag,mode:"down",x:e.offsetX,y:e.offsetY,key:e.which,type:e.originalEvent.pointerType,shift:e.shiftKey,ctrl:e.ctrlKey})))},l.mouseUp=function(e){l.pMouseHandler&&l.pMouseHandler.fnMouseUp&&l.pMouseHandler.fnMouseUp(e)||1!==e.which&&3!==e.which||b.callEditor("sceneMouseMove",angular.toJson(m({tag:l.pOptions.tag,mode:"up",x:e.offsetX,y:e.offsetY,key:e.which,type:e.originalEvent.pointerType,shift:e.shiftKey,ctrl:e.ctrlKey})))},l.mouseCancel=function(e){l.pMouseHandler&&l.pMouseHandler.fnMouseUp&&!l.pMouseHandler.fnMouseUp(e)||b.callEditor("sceneMouseMove",angular.toJson(m({tag:l.pOptions.tag,mode:"up",x:e.offsetX,y:e.offsetY,type:e.originalEvent.pointerType,shift:e.shiftKey,ctrl:e.ctrlKey})))},l.mouseWheel=function(e,t){b.callEditor("sceneMouseWheel",{tag:l.pOptions.tag,delta:t,type:"mouse"})},l.touchEnd=function(e){b.callEditor("sceneMouseMove",angular.toJson(m({tag:l.pOptions.tag,mode:"up",x:e.offsetX,y:e.offsetY,key:1,type:"touch",shift:e.shiftKey,ctrl:e.ctrlKey})))};var v={};l.keyDown=function(e){v[e.keyCode]||(v[e.keyCode]=!0,b.callEditor("sceneKey",angular.toJson({tag:l.pOptions.tag,mode:"down",key:e.keyCode})))},l.keyUp=function(e){delete v[e.keyCode],b.callEditor("sceneKey",angular.toJson({tag:l.pOptions.tag,mode:"up",key:e.keyCode}))},e.on("pointerdown.preview",l.mouseDown),a.on("pointerdown.preview",l.mouseDown),e.on("pointerup.preview",l.mouseUp),a.on("pointerup.preview",l.mouseUp),e.on("touchend.preview",l.touchEnd),a.on("touchend.preview",l.touchEnd),e.on("pointercancel.preview",l.mouseCancel),a.on("pointercancel.preview",l.mouseCancel)}l.previewPadding="",h(p)}}}]),angular.module("wallpaperbrowserApp").directive("previewToggle",["$rootScope",function(i){return{restrict:"A",link:function(e,t){var a=!1;t.on("shown.bs.dropdown.evt",function(){i.$broadcast("previewtoggle",1),a=!0}),t.on("hidden.bs.dropdown.evt",function(){i.$broadcast("previewtoggle",-1),a=!1}),e.$on("$destroy",function(){t.off("shown.bs.dropdown.evt"),t.off("hidden.bs.dropdown.evt"),a&&i.$broadcast("previewtoggle",-1)})}}}]),angular.module("wallpaperbrowserApp").controller("EditorOpenWallpaperModalCtrl",["$uibModalInstance","$scope","modals","utils","host","data",function(e,i,t,n,a,o){function r(){a.callEditor("getProjects").then(function(e){e.sort(function(e,t){return angular.isString(e.title)&&angular.isString(t.title)?e.official!==t.official?e.official?1:-1:e.title.localeCompare(t.title):0}),i.allWallpapers=e,i.wallpapers=e})}i.filter={text:""},i.ok=function(){e.close(i.currentSelection.project)},i.cancel=function(){e.dismiss("cancel")},i.selectItem=function(e){i.currentSelection=e},i.deleteProject=function(e){if(angular.isString(e.project))return o.deleteProject(e).then(r)},i.callbackWallpaperAllMouse=function(e,t){"left"===e?i.currentSelection=t:"dbl"===e&&(i.currentSelection=t,i.ok())},i.$watch("filter.text",function(t){if(angular.isString(t)&&0!==t.trim().length){var a=[];angular.forEach(i.allWallpapers,function(e){n.smartStringCompare(t,e.title)&&a.push(e)}),i.wallpapers=a}else i.wallpapers=i.allWallpapers}),r()}]),angular.module("wallpaperbrowserApp").controller("EditorSteamPublishModalCtrl",["$uibModalInstance","$q","$scope","$timeout","modals","utils","host","projectData","editorSettings",function(e,a,i,t,n,o,r,s,l){(window.editorSteamPublishModalCtrl=i).providerIcon=o.getProviderIcon(),i.successText="wallpaper"===l.category||"preset"===l.category?"ui_editor_publish_modal_button_show_in_workshop":"ui_editor_publish_modal_button_show_in_workshop_generic",i.close=function(){e.dismiss("cancel")},i.tagsInvalid=function(){return!angular.isArray(i.projectData.tags)||i.projectData.tags.length<1},i.getPublishButtonText=function(){return i.projectData.workshopid?"ui_editor_publish_modal_button_publish_update":"ui_editor_publish_modal_button_publish"},i.startPublish=function(){if(l.isSteamAvailable()){var e=a.when();if(!l.ageRatingDisabled)if(o.canUseAgeRatingTags()){if(!s.contentrating){var t=s.title&&s.title.toLowerCase()||"";t.includes("r18")||t.includes("r-18")||t.includes("18+")?s.contentrating="Mature":e=e.then(function(){return n.open("editorRating",{data:i.projectData})})}}else"Everyone"!==s.contentrating&&(e=e.then(function(){return n.open("genericConfirm",{data:{title:"ui_editor_workshop_modal_rating_no_rating_info_header",message:"ui_editor_workshop_modal_rating_no_rating_info_body",leftIcon:"images/warning.png",cancelVisible:!0,okVisible:!0}}).then(function(){s.contentrating="Everyone"})}));"wallpaper"!==l.category||!i.projectData||"scene"!==i.projectData.type||angular.isArray(i.projectData.templateoptions)||s.workshopid||(e=e.then(function(){return r.callEditor("checkSceneAnimated").then(function(e){if("noanimation"===e)return n.open("genericConfirm",{data:{title:"ui_editor_no_animation_modal_header",message:"ui_editor_no_animation_modal_body",leftIcon:"images/warning.png",cancelVisible:!0,okVisible:!0}},{backdropClass:"modal-backdrop-danger"})})})),o.canSkipReview()||(e=e.then(function(){return n.open("genericConfirm",{data:{title:"ui_editor_review_info_header",message:"ui_editor_review_info_body",okVisible:!0}})})),e.then(function(){i.page="publish",i.publishPage="progress",i.publishPreventCancel=!1,i.publishProgressMessage="",i.publishProgressValue=0,i.publishProgressError=void 0,i.publishSubscriptionStatus=!1,r.callUI("publishToSteam",i.projectData,i.editorSettings.dependentProject).then(function(e){i.needsToAcceptAgreement=e.needsToAcceptAgreement,i.itemId=e.id,i.workshopurl=e.workshopurl,i.publishPage="success"}).catch(function(){i.page="initial"})})}else o.showSteamError()},i.cancelPublish=function(){r.callUI("cancelPublishToSteam").then(function(e){e&&(i.page="initial",i.publishProgressValue=0)})},i.openItemInWorkshop=function(){o.openUrl(i.workshopurl,{},o.usePlatformBrowser())},i.setPublishProgress=function(e,t,a){i.publishProgressMessage=e,i.publishProgressValue=Math.floor(t),i.publishPreventCancel=a,n.setPreventModalClose(a)},i.setWorkshopId=function(e){i.projectData.workshopid=e.workshopid,i.projectData.workshopurl=e.workshopurl},i.onPublishError=function(e){i.publishPage="error",i.publishPreventCancel=!1,i.publishProgressError=e,i.publishProgressValue=0,n.setPreventModalClose(!1)},i.isPublishDisabled=function(){return!i.projectData.title||(!i.projectData.preview||i.tagsInvalid())},i.$on("$destroy",function(){window.editorSteamPublishModalCtrl=void 0}),i.projectData=s,i.editorSettings=l,i.publishProgressValue=0,i.publishPage="progress"}]),angular.module("wallpaperbrowserApp").directive("workshopDetails",["$translate","modals","host","utils","toastr",function(o,r,s,l,c){return{templateUrl:"views/templates/workshopdetails.html",restrict:"E",scope:{wdProjectData:"=",wdEditorSettings:"="},link:function(t){var n={},a="asset"===t.wdEditorSettings.category?l.getAssetGenreTags():l.getAvailableTags();function e(e){angular.isString(e)&&(t.wdProjectData.preview=e)}function i(){var e=t.selectedTag.tag;angular.isString(e)&&0<e.trim().length&&(t.wdProjectData.tags=[e])}t.visibilityOptions=[{label:"ui_workshop_tags_visibility_public",value:"public"},{label:"ui_workshop_tags_visibility_friends_only",value:"friends"},{label:"ui_workshop_tags_visibility_private",value:"private"}],t.canUseAgeRatingTags=function(){return l.canUseAgeRatingTags()&&!t.wdEditorSettings.ageRatingDisabled},t.takeSnapshot=function(){s.callUI("takeSnapshot").then(e)},t.importSnapshot=function(){s.callUI("importSnapshot").then(e)},t.openRatingModal=function(e){r.open("editorRating",{data:e})},t.getTags=function(){var i=[];return angular.forEach(a,function(e){var t,a;i.push((a={label:t=e,value:t},"en-us"!==o.use()&&(angular.isString(n[a.value])&&0<n[a.value].length?a.label+=" ("+n[a.value]+")":o("ui_workshop_tags_"+a.value.toLowerCase().replace(/[\- ]/g,"_")).then(function(e){0<(e=""+e).length&&a.label!==e&&(n[a.value]=e,l.showFullTagValue()?a.label+=" ("+e+")":a.label=e)})),a))}),i},t.canAddTag=function(){var e=!angular.isArray(t.tags)||t.tags.length<3;return e||o("ui_editor_workshop_tags_limit").then(function(e){c.error(e,"Error")}),e},t.colorPickerOptions=l.getColorPickerDefaults(),t.$watch("wdProjectData.preview",function(e){angular.isString(e)&&0<e.length&&(t.previewRefreshUrl=e+"?refresh="+(new Date).getTime())}),t.availableTags=t.getTags(),angular.isArray(t.wdProjectData.tags)&&0<t.wdProjectData.tags.length?t.selectedTag={tag:t.wdProjectData.tags[0]}:t.selectedTag={tag:"Unspecified"},t.$watch("selectedTag.tag",function(){i()}),t.selectedUploadOption={value:null},t.$watch("wdEditorSettings.publishedItems",function(e){t.uploadProjectOptions=[{label:"ui_editor_workshop_options_upload_as_new_item",value:null}];var a=t.uploadProjectOptions;angular.forEach(e,function(t){o("ui_editor_workshop_options_upload_as_update",{name:t.title}).then(function(e){a.push({label:e,value:t})})})}),"wallpaper"!==t.wdEditorSettings.category&&t.$watch("selectedUploadOption.value",function(e){angular.isObject(e)?(t.wdProjectData.workshopid=e.workshopid,t.wdProjectData.title=e.title,t.wdProjectData.description=e.description,t.wdProjectData.tags=e.tags,t.wdProjectData.contentrating=e.contentrating,t.wdProjectData.visibility=e.visibility,delete t.wdProjectData.preview,angular.isString(e.tags)&&(t.wdProjectData.tags=e.tags=e.tags.split(",")),angular.isArray(e.tags)&&angular.forEach(e.tags,function(e){a.includes(e)&&(t.selectedTag.tag=e)})):(delete t.wdProjectData.workshopid,delete t.wdProjectData.title,delete t.wdProjectData.description,delete t.wdProjectData.contentrating,t.wdProjectData.visibility="public",t.selectedTag.tag="Unspecified",i())})}}}]),angular.module("wallpaperbrowserApp").service("utils",["$document","$rootScope","$timeout","$translate","modals","toastr",function(t,a,i,n,o,r){var s,l,c,d,p,u,g,f,e,m=[],v=[],h=[],b=[],_=[],y=[],w=this;function k(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function S(e,t,a){return"#"+k(e)+k(t)+k(a)}function x(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:{r:0,g:0,b:0}}this.getAvailableTags=function(e){return angular.copy(e?v:m)},this.getResolutionTags=function(){return angular.copy(h)},this.getWallpaperSourceTags=function(){return[{value:"Official",label:"ui_browse_filter_source_official"},{value:"Workshop",label:"ui_browse_filter_source_workshop"},{value:"Local",label:"ui_browse_filter_source_my_wallpapers"}]},this.getWallpaperCategoryTags=function(){return[{value:"Wallpaper",label:"ui_browse_filter_category_wallpaper"},{value:"Preset",label:"ui_browse_filter_category_preset"}]},this.getWallpaperTypeTags=function(){return[{value:"Scene",label:"ui_browse_filter_type_scene"},{value:"Video",label:"ui_browse_filter_type_video"},{value:"Web",label:"ui_browse_filter_type_web"},{value:"Application",label:"ui_browse_filter_type_application"}]},this.getWallpaperRatingTags=function(){return[{value:"Everyone",label:"ui_workshop_tags_rating_everyone"},{value:"Questionable",label:"ui_workshop_tags_rating_questionable"},{value:"Mature",label:"ui_workshop_tags_rating_mature"}]},this.setAvailableTags=function(e,t,a){m=e,angular.isArray(t)&&(v=t),angular.isArray(a)&&(h=a)},this.setAvailableAssetTags=function(e,t){b=e,_=t},this.getAssetTypeTags=function(){return angular.copy(b)},this.getAssetGenreTags=function(){return angular.copy(_)},this.prepareTagForTranslation=function(e){return e&&e.toLowerCase().replace(/[\- ]/g,"_")||""},this.translateTag=function(t){return n("ui_workshop_tags_"+w.prepareTagForTranslation(t)).then(function(e){return 0<e.toString().length?e.toString():t}).catch(function(){return t})},this.translateTagInstant=function(e){var t=e&&n.instant("ui_workshop_tags_"+e.toLowerCase().replace(/[\- ]/g,"_")).toString()||"";return 0<t.length?t:e},this.translateRatingTag=function(t){return n("ui_workshop_tags_rating_"+t.toLowerCase().replace(/[\- ]/g,"_")).then(function(e){return 0<e.toString().length?e.toString():t}).catch(function(){return t})},this.translateRatingTagInstant=function(e){var t=e&&n.instant("ui_workshop_tags_rating_"+e.toLowerCase().replace(/[\- ]/g,"_")).toString()||"";return 0<t.length?t:e},this.translateAssetTypeTag=function(t){return n("ui_workshop_tags_asset_type_"+t.toLowerCase().replace(/[\- ]/g,"_")).then(function(e){return 0<e.toString().length?e.toString():t}).catch(function(){return t})},this.createTranslatedTagList=function(e){var t=angular.isArray(e)?e:e.split(","),a=["everyone","questionable","mature"],i=[];return angular.forEach(t,function(e){a.includes(e.toLowerCase())?w.canUseAgeRatingTags()&&i.push(w.translateRatingTagInstant(e)):m.includes(e)||v.includes(e)?i.push(w.translateTagInstant(e)):i.push(e)}),i},this.showError=function(e,t){var a={};angular.isNumber(t)&&(a.timeOut=t,a.extendedTimeOut=t),r.error(e,"Error",a)},this.showWarning=function(e){r.warning(e,"Warning")},this.showSuccess=function(e){r.success(e,"Success")},this.showBuildVersionError=function(e,t){c={callerVersion:e,appVersion:t},l={title:"ui_modal_updaterequired_title",message:"",leftIcon:"images/warning.png",okClass:"btn-primary",okText:"ui_ok",okVisible:!0},o.open("genericConfirm",{data:l},{backdropClass:"modal-backdrop-warning"}),n(s="ui_modal_updaterequired_body",c).then(function(e){l.message=e})},this.showAvailableDistroUpdate=function(e){c={distroVersion:e},l={title:"ui_modal_updaterequired_title",message:"",okClass:"btn-primary",okText:"ui_ok",okVisible:!0,cancelVisible:!0},o.open("genericConfirm",{data:l}).then(function(){window.ui.updatedistro()}),n(s="ui_modal_updateavailable_body_distro",c).then(function(e){l.message=e})},this.showInstallationWarning=function(e,t){u={runPath:e,steamPath:t},p={title:"ui_modal_installationpath_error_title",message:"",leftIcon:"images/warning.png",okClass:"btn-default",cancelVisible:!0,leftVisible:!0,left2Visible:!0,leftClass:"btn btn-primary",left2Class:"btn btn-default",leftText:"ui_modal_installationpath_fix_auto_start",left2Text:"ui_modal_installationpath_disable_auto_start",leftAction:"fix",left2Action:"disable",leftImg:"images/uac_small.png",left2Img:"images/uac_small.png"};var a=o.open("genericConfirm",{data:p},{backdropClass:"modal-backdrop-warning"});return n(d="ui_modal_installationpath_error_body",u).then(function(e){p.message=e}),a},this.getColorPickerDefaults=function(e){var t={chooseText:"OK",cancelText:"Cancel",showPalette:!0,palette:[["white","silver","black"],["red","orange","yellow"],["lime","green","#254117"],["lightblue","blue","darkblue"],["cyan","purple","Magenta"]],preferredFormat:"hex",showInput:!0,maxSelectionSize:3};return e&&(t.flat=!0),t},this.convertVec3ToHex=function(e){if(!angular.isString(e))return"#000000";var t=e.split(" ");return 3===t.length?S(Math.round(255*parseFloat(t[0])),Math.round(255*parseFloat(t[1])),Math.round(255*parseFloat(t[2]))):e},this.convertVec3ToHex_255=function(e){if(!angular.isString(e))return"#000000";var t=e.split(" ");return 3===t.length?S(Math.round(parseFloat(t[0])),Math.round(parseFloat(t[1])),Math.round(parseFloat(t[2]))):e},this.convertHexToVec3=function(e){var t=x(e);return t.r/255+" "+t.g/255+" "+t.b/255},this.convertHexToVec3_255=function(e){var t=x(e);return t.r+" "+t.g+" "+t.b},this.onProjectNameChanged=function(e){angular.isString(e)&&0<e.length?a.captionPrefix=e+" - ":a.captionPrefix="Untitled - "},this.damerauLevenshteinDistance=function(e,t){if(!angular.isString(e)||e.length<1)return angular.isString(t)&&0<t.length?t.length:0;if(!angular.isString(t)||t.length<1)return angular.isString(e)&&0<e.length?e.length:0;for(var a,i,n,o,r=e.length,s=t.length,l=new Array(r+1),c=0;c<l.length;++c)l[c]=new Array(s+1);for(c=0;c<=r;++c)l[c][0]=c;for(c=0;c<=s;++c)l[0][c]=c;for(c=1;c<=r;c++)for(var d=1;d<=s;d++)a=e[c-1]===t[d-1]?0:1,i=l[c-1][d]+1,n=l[c][d-1]+1,o=l[c-1][d-1]+a,l[c][d]=Math.min(i,Math.min(n,o)),1<c&&1<d&&e[c-1]===t[d-2]&&e[c-2]===t[d-1]&&(l[c][d]=Math.min(l[c][d],l[c-2][d-2]+a));return l[r][s]},this.smartStringCompare=function(e,t){var a=e.toLowerCase().replace(/[\?\.\!]/g,""),i=t.toLowerCase().replace(/[\?\.\!]/g,"");return!!(i.includes(a)||w.damerauLevenshteinDistance(i,a)<3)},this.getQualityPreset=function(e){switch(e){case"low":return{msaa:"none",resolution:"full",fps:10,postprocessing:"disabled",reflection:!1,preset:"low"};case"medium":return{msaa:"x2",resolution:"full",fps:15,postprocessing:"enabled",reflection:!0,preset:"medium"};case"high":return{msaa:"x2",resolution:"full",fps:25,postprocessing:"enabled",reflection:!0,preset:"high"}}},this.getFilename=function(e,t){var a=e.split(/(\\|\/)/g).pop();return t&&(a=a.split(/(\.)/g)[0]||a||e),a},this.isURL=function(e){return e.beginsWith("http://")||e.beginsWith("https://")||e.beginsWith("www.")},this.openUrl=function(e,t,a){var i=n.instant(e,t);a?window.ui.openplatformbrowser(i.toString()||e):window.ui.shellexecute(i.toString()||e)},this.cppInit=function(e,t){w.setLanguage(e),w.setSteamLanguage(t)},this.setProvider=function(e){f=e},this.lockAgeRating=function(){e=!0},this.canSendReports=function(){return"steamint"===f},this.canUseFilterSettings=function(){return"wegame"!==f},this.canUseApprovedTag=function(){return"wegame"!==f},this.canUseAgeRatingTags=function(){return"steamint"===f&&!0!==e},this.canOpenWallpaperDetailsOnPlatform=function(){return"steamchina"!==f},this.canSkipReview=function(){return"steamint"===f},this.canUseDiscover=function(){return"wegame"!==f},this.canUseCollectionsInDiscover=function(){return"steamint"===f},this.canUseExactMatch=function(){return"wegame"!==f},this.requiresFullAsyncWorkshop=function(){return"wegame"===f},this.useRatingStars=function(){return"wegame"!==f},this.useDynamicWorkshopAuthor=function(){return"steamint"===f},this.canUploadApplications=function(){return"wegame"!==f},this.showOSProviderConnectionOverlay=function(){return!0},this.canShowSpecializedBrowseLists=function(){return"wegame"!==f},this.showFullTagValue=function(){return"wegame"!==f},this.usePlatformBrowser=function(){return"wegame"===f},this.canTakeScreenshots=function(){return"wegame"!==f},this.getDefaultWorkshopTab=function(){return"wegame"===f?"workshop":"explore"},this.canUseSeasonalTheming=function(){return"wegame"!==f},this.canShowTrialWarning=function(){return"wegame"===f},this.getProviderIcon=function(e){return e?"wegame"===f?"fas fa-globe-asia":"fab fa-steam-square":"wegame"===f?"fas fa-globe-asia":"fab fa-steam"},this.setLanguage=function(e){"default"===e&&angular.isString(g)&&(e=g),n.use(e).then(function(){i(n.refresh)}),a.languageClass="langCSS"+e},this.setSteamLanguage=function(e){g=e},this.setAvailableLanguages=function(e){(y=e).sort(function(e,t){return e.label.localeCompare(t.label)}),angular.forEach(y,function(t){"en-us"!==t.value&&n("system_language_"+t.value).then(function(e){t.label+=" ("+e+")"})});var t={label:"Default",icon:w.getProviderIcon(!0),value:"default"};y.splice(0,0,t),n("system_language_"+g).then(function(e){t.label+=" ("+e+")"})},this.getAvailableLanguages=function(){return y};var E={};this.setKnownExtensions=function(e){E=e},this.isExtension=function(e,t){var a="."+/(?:\.([^.]+))?$/.exec(e)[1];return a=a.toLowerCase(),0<=(E[t]||[]).indexOf(a)},this.toDegrees=function(e){return e*(180/Math.PI)},this.toRadians=function(e){return e*(Math.PI/180)},this.getElementBounds=function(e){var t={top:e.position().top,left:e.position().left};return t.bottom=t.top+e.innerHeight(),t.right=t.left+e.innerWidth(),t},this.checkBoundsOverlap=function(e,t){return!(e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)};var C,A={};this.updateTexturePreview=function(e){A[e.id]=e.data},this.getTexturePreviews=function(){return A},this.incrementNameIndex=function(e,t){for(;0<=t.indexOf(e);){var a=e.split(" "),i=parseInt(a[a.length-1]);return a.length<2||i<2?e+" 2":(a.pop(),a.join(" ")+(i+1))}return e},this.showSteamError=function(){return o.open("genericConfirm",{data:{title:"ui_browse_modal_no_steam_title",message:"ui_browse_modal_no_steam_body",okVisible:!0}})},this.getStaticExploreQueries=function(){var t=[];w.canUseApprovedTag()&&(t=t.concat([{querytype:"most_recent",tags:["Approved"],emoji:"🏆",priority:1},{querytype:"trend_year",tags:["Approved"]}])),t=t.concat([{querytype:"trend_year",tags:["Audio responsive"],excludetags:["Relaxing","Anime","CGI","Game"]},{querytype:"trend_year",tags:["Abstract"]},{querytype:"trend_year",tags:["Animal"]},{querytype:"trend_year",tags:["Anime"]},{querytype:"trend_year",tags:["Cartoon"]},{querytype:"trend_year",tags:["Cyberpunk"]},{querytype:"trend_year",tags:["Fantasy"]},{querytype:"trend_year",tags:["Game"]},{querytype:"trend_year",tags:["Landscape"]},{querytype:"trend_year",tags:["Medieval"]},{querytype:"trend_year",tags:["MMD","Anime"]},{querytype:"trend_year",tags:["Nature"]},{querytype:"trend_year",tags:["Pixel art"]},{querytype:"trend_year",tags:["Retro"]},{querytype:"trend_year",tags:["Sci-fi"]},{querytype:"trend_year",tags:["Sports"]},{querytype:"trend_year",tags:["Technology"]},{querytype:"trend_year",tags:["Vehicle"]},{querytype:"trend_year",tags:["Memes"]}]);var a=["Unspecified"];angular.forEach(t,function(e){e.category="genre",e.includetags=[e.tags[0]],angular.isArray(e.excludetags)?e.excludetags=e.excludetags.concat(a):e.excludetags=a}),t=t.concat([{category:"misc",querytype:"friends_created",title:"ui_browse_explore_category_friends_created",tags:["Misc"]},{category:"misc",querytype:"friends_favorites",title:"ui_browse_explore_category_friends_favorites",tags:["Misc"]},{category:"misc",querytype:"voted_up",title:"ui_browse_explore_category_user_up_voted",tags:["Misc"]}]);return angular.forEach([{f:{m:3,d:20},t:{m:4,d:20},e:"🌱",i:"1884277090"},{f:{m:6,d:19},t:{m:7,d:31},e:"☀️",i:"1884277844"},{f:{m:9,d:23},t:{m:10,d:23},e:"🍂",i:"1884263373"},{f:{m:10,d:24},t:{m:11,d:2},e:"🎃",i:"1873353144"},{f:{m:12,d:1},t:{m:1,d:31},e:"❄️",i:"1884258271"}],function(e){w.isInDateRangeInclusive(e.f,e.t,!0)&&(t.push({category:"collection",itemid:e.i,title:"ui_browse_explore_category_seasonal_collection",emoji:e.e,tags:["Curated"],priority:1}),0)}),t.push({category:"collection",itemid:"1884256121",title:"ui_browse_explore_category_classics",emoji:"✨",tags:["Curated"],priority:.5}),t.push({category:"collection",itemid:"1996424920",title:"ui_browse_explore_category_led_support",emoji:"🌈",tags:["Curated"],priority:.5}),t},this.updateQueryName=function(e){switch(e.category){case"genre":e.name=e.category+e.tags[0]+e.querytype;break;case"creator":e.name=e.category+e.itemid+e.querytype;break;case"collection":e.name=e.category+e.itemid;break;case"keyword":e.name=e.category+e.keyword+e.querytype;break;default:e.name=e.category+e.querytype}e.custom&&(e.name="custom"+e.name)},this.isInDateRangeInclusive=function(e,t){var a=new Date,i=a.getDate(),n=a.getMonth()+1,o=31*n+i,r=31*e.m+e.d,s=31*t.m+t.d;return s<r&&(o<r&&(o=31*(n+12)+i),s=31*(t.m+12)+t.d),r<=o&&o<=s},this.startHotkeyListener=function(e){C=e,window.ui.startHotkeyListener(),t.on("keydown.hotkey",window.cancelEventImmediately),t.on("keypress.hotkey",window.cancelEventImmediately),t.on("keyup.hotkey",window.cancelEventImmediately)},this.onHotkeyUpdate=function(e){angular.isFunction(C)&&C(e),(e.cancel||e.finished)&&(C=void 0,t.off("keydown.hotkey"),t.off("keypress.hotkey"),t.off("keyup.hotkey"))},this.stopHotkeyListener=function(){C=void 0,t.off("keydown.hotkey"),t.off("keypress.hotkey"),t.off("keyup.hotkey"),window.ui.stopHotkeyListener()},this.isUserHotkeyAction=function(e){return"wallpaper"===e||"playlist"===e||"profile"===e},this.validateSharedSettings=function(e){e.hotkeys=e.hotkeys||[]},this.getSharedDefaultProperties=function(){return{alignment:0,alignmentposition:50,rate:100,volume:50,cameraparallax:!0}},this.displayGifWarning=function(e){return o.open("genericConfirm",{data:{title:"ui_editor_importer_gif_warning_header",message:"ui_editor_importer_gif_warning_body",leftIcon:"images/warning.png",okVisible:!0,cancelVisible:e}},{backdropClass:"modal-backdrop-danger"})},this.updatePagination=function(e,t,a){var i=[];a=a||1,t=t||1;for(var n=Math.max(1,t-4),o=Math.min(a,t+4),r=1;r<=a;++r)(1!==r&&r<n||r!==a&&o<r)&&(i.push({label:"…",class:"normalText"}),r=r<n?n:a),i.push({label:r});e.current=t,e.count=a,e.pages=i},this.showPaginationPageNumberPrompt=function(){var e={title:"ui_modal_pagination_enter_page_title",message:"",numberInputVisible:!0,okVisible:!0,cancelVisible:!0,numberinput:void 0};return o.open("genericConfirm",{data:e}).then(function(){return angular.isNumber(e.numberinput)?e.numberinput:void 0})},this.getPreviewUrl=function(e){return e.previewsmall||e.preview?'url("'+(e.previewsmall||e.preview)+'")':""},this.assetTypeGroups={layers:["Image","Particle","Sound","Model","Text","Sprite","Fullscreen","Composite"],effects:["Effect"],scripts:["Script"]},this.assetGroupType={Image:"layers",Particle:"layers",Sound:"layers",Model:"layers",Text:"layers",Sprite:"layers",Fullscreen:"layers",Composite:"layers",Effect:"effects",Script:"scripts"},this.url={docs:"https://docs.wallpaperengine.io",docsScene:"https://docs.wallpaperengine.io/scene/overview.html",docsSceneEffects:"https://docs.wallpaperengine.io/scene/effects/introduction.html",docsSceneParticles:"https://docs.wallpaperengine.io/scene/particles/introduction.html",docsSceneAnimation:"https://docs.wallpaperengine.io/scene/timeline/introduction.html",docsSceneUserProperties:"https://docs.wallpaperengine.io/scene/userproperties/overview.html",docsSceneAudioVisualization:"",docsSceneScript:"https://docs.wallpaperengine.io/scene/scenescript/introduction.html",docsSceneShaders:"https://docs.wallpaperengine.io/scene/shader/overview.html",docsSceneTextureOptimization:"https://docs.wallpaperengine.io/scene/performance/texture.html",docsWeb:"https://docs.wallpaperengine.io/web/overview.html",docsWebUserProperties:"https://docs.wallpaperengine.io/web/customization/properties.html",docsWebAudioVisualization:"https://docs.wallpaperengine.io/web/audio/visualizer.html",docsWebRGB:"https://docs.wallpaperengine.io/web/api/rgb.html",docsWebFPS:"https://docs.wallpaperengine.io/web/performance/fps.html",docsWebDebugging:"https://docs.wallpaperengine.io/web/debug/debug.html"},a.$on("$translateChangeEnd",function(){angular.isObject(c)&&angular.isObject(l)&&n(s,c).then(function(e){l.message=e}),angular.isObject(u)&&angular.isObject(p)&&n(d,u).then(function(e){p.message=e})})}]),angular.module("wallpaperbrowserApp").controller("EditorImportModelModalCtrl",["$uibModalInstance","$q","$scope","$timeout","toastr","utils","compiler","host","objInfo",function(t,e,i,a,n,o,r,s,l){var c=e.when();i.openTextureFormatFAQ=function(){o.openUrl(o.url.docsSceneTextureOptimization)},i.close=function(){t.dismiss("cancel")},i.ok=function(){i.waitingForResponse=!0;var t=angular.copy(i.objInfo);angular.forEach(t.materials,function(e){e.config.spritesheet?(delete t.config.importAsImageSequence,delete e.config.croptransparent,e.shaderpreset.combos=e.shaderpreset.combos||{},e.shaderpreset.combos.spritesheet=1):delete e.config.spritesheetsequences}),s.callEditor(l.config.copycommand,angular.toJson(t)).then(function(e){i.waitingForResponse=!1,i.modelDestinationPath=e,i.compileCtrl.start()}).catch(function(){i.waitingForResponse=!1})};var d={onCompileFailed:function(e){n.error(e,"Error"),i.okButtonLabel="Retry",i.$apply()},onCompileFinished:function(){a(function(){angular.isString(i.modelDestinationPath)&&(angular.isString(l.config.addcommand)?s.callEditor(l.config.addcommand,i.modelDestinationPath,l.jsonConfig).then(function(e){e.shouldAdjustProjection=l.shouldAdjustProjection,t.close(e)}).catch(function(){i.compileCtrl.cancel(),i.okButtonLabel="Retry"}):t.close(i.modelDestinationPath))},1e3),i.$apply()}};i.$on("$destroy",function(){r.removeListener(d)}),i.compileCtrl={},i.okButtonLabel="OK",r.addListener(d),s.callEditor("getShaderPresets",l.config.shaderpresetkey).then(function(e){var t;i.shaderPresets=e,i.objInfo=l,i.objInfo.shouldAdjustProjection=l.isImage&&0===l.renderableCount,angular.forEach(i.objInfo.materials,function(a){a.shaderpreset=e[0],a.config=a.config||{},a.config.spritesheetsequences=[{width:64,height:64,frames:10,duration:1}],c=c.then(function(){return e=a.file,t=a,s.callEditor("getTexturePreview",{path:e,size:128}).then(function(e){t.previewUrl=e.data});var e,t}),a.formats=e[0].textures[0].formats,angular.merge(a.config,e[0].textures[0].config),a.config.format=a.config.format||a.formats[0].value,i.objInfo.shouldAdjustProjection&&(a.config.clampuvs=!0),t=t||a.file}),angular.isString(t)&&!l.instantImport&&s.callEditor("checkBadGIF",t).then(function(e){e.error&&o.displayGifWarning()})}).then(function(){l.instantImport&&i.ok()})}]).directive("cropOverlay",function(){return{restrict:"E",scope:{coConfig:"=",coMaterial:"="},link:function(i,n){var o=n.prev()[0];n.addClass("editorCropOverlay");var r,s={},l=[];function c(){if(angular.isNumber(r)&&i.coConfig.croptransparent&&i.coConfig.canCropTransparency&&!i.coMaterial.spritesheet){if(0===l.length){for(var e=0;e<8;++e){var t=angular.element(document.createElement("div"));t.addClass("crop"),l.push(t),n.append(t)}l[4].addClass("cropTop"),l[5].addClass("cropRight"),l[6].addClass("cropBottom"),l[7].addClass("cropLeft")}var a={x0:Math.max(0,i.coConfig.cropx0-i.coConfig.croppadding)/i.coConfig.width*s.width,x1:Math.min(i.coConfig.width,i.coConfig.cropx1+i.coConfig.croppadding)/i.coConfig.width*s.width,y0:Math.max(0,i.coConfig.cropy0-i.coConfig.croppadding)/i.coConfig.height*s.height,y1:Math.min(i.coConfig.height,i.coConfig.cropy1+i.coConfig.croppadding)/i.coConfig.height*s.height};l[0].css({left:0,top:0,width:a.x0-2,height:a.y0}),l[1].css({left:a.x1+2,top:0,width:s.width-a.x1-3,height:a.y0}),l[2].css({left:a.x1+2,top:a.y1,width:s.width-a.x1-3,height:s.height-a.y1-1}),l[3].css({left:0,top:a.y1,width:a.x0-2,height:s.height-a.y1-1}),l[4].css({left:a.x0-2,top:0,width:a.x1-a.x0+4,height:a.y0}),l[5].css({left:a.x1,top:a.y0,width:s.width-a.x1-1,height:a.y1-a.y0}),l[6].css({left:a.x0-2,top:a.y1,width:a.x1-a.x0+4,height:s.height-a.y1-1}),l[7].css({left:0,top:a.y0,width:a.x0,height:a.y1-a.y0})}else angular.forEach(l,function(e){e.remove()}),l=[]}o.onload=function(){var e=o.naturalWidth,t=o.naturalHeight;t<e?(r=o.width/e,s.left=0,s.width=o.width,s.height=r*t,s.top=.5*(o.height-s.height)):(r=o.height/t,s.top=0,s.height=o.height,s.width=r*e,s.left=.5*(o.width-s.width)),s.top+=o.offsetTop-1,s.left+=o.offsetLeft-1;var a=angular.copy(s);a.width+=1,a.height+=1,n.css(a),c()},i.$watch("coConfig",c,!0),i.$watch("coMaterial",c,!0)}}}),angular.module("wallpaperbrowserApp").service("compiler",["utils",function(t){window.compilerService=this;var a=[];this.onCompileStarted=function(t){angular.forEach(a,function(e){angular.isFunction(e.onCompileStarted)&&e.onCompileStarted(t)})},this.onCompileFailed=function(t){angular.forEach(a,function(e){angular.isFunction(e.onCompileFailed)&&e.onCompileFailed(t)})},this.onCompileFinished=function(e){angular.isString(e)&&0<e.length&&t.showWarning(e),angular.forEach(a,function(e){angular.isFunction(e.onCompileFinished)&&e.onCompileFinished()})},this.addListener=function(e){a.push(e)},this.removeListener=function(e){a.splice(a.indexOf(e),1)}}]),angular.element.fn.getStyleObject=function(){var e,t,a=this.get(0),i={};if(window.getComputedStyle){for(var n=function(e,t){return t.toUpperCase()},o=0,r=(e=window.getComputedStyle(a,null)).length;o<r;o++){var s=(t=e[o]).replace(/\-([a-z])/g,n),l=e.getPropertyValue(t);i[s]=l}return i}if(e=a.currentStyle){for(t in e)i[t]=e[t];return i}return this.css()},angular.module("wallpaperbrowserApp").service("dragdrop",["$rootScope","$timeout","$q","$document",function(o,u,e,g){var r,s,l,c,n,d=this,p=angular.element(g[0].body),f=[],i=[];function m(){r.remove(),r=void 0,p.off("mousemove.dragdrop"),p.off("mouseup.dragdrop"),s=l=void 0}(window.dragdrop=this).finish=function(e){c&&c.dragDropListener&&c.dragDropListener.onMouseLeave(),s&&(e?s.onDragged():s.onCancelled()),o.$broadcast("onInternalDropStop",l)},this.start=function(e,t,a,i){r&&(d.finish(),m()),l=t,(s=a).dragDropTag=i,c=void 0,r=e.createDragDropElement&&e.createDragDropElement()||e.clone();var n=e.getStyleObject();r.css(n),r.css({opacity:0,position:"absolute","pointer-events":"none"}),p.append(r),p.on("mousemove.dragdrop",function(e){r.css({opacity:.5,left:e.pageX,top:e.pageY}),function(e){for(var t=0;t<f.length;++t){var a=f[t];if(angular.isDefined(a[0])){var i=a[0].getBoundingClientRect(),n=e.pageX>i.left&&e.pageX<i.left+i.width&&e.pageY>i.top&&e.pageY<i.top+i.height;n&&angular.isFunction(a.dragDropListener.condition)&&(n=a.dragDropListener.condition(l)),n&&c!==a&&(o=a,angular.isDefined(s)&&angular.isString(s.dragDropTag)===angular.isString(o.dragDropListener.dragDropTag)&&s.dragDropTag===o.dragDropListener.dragDropTag)?(c=a).dragDropListener.onMouseEnter():n||c!==a||(c=void 0,a.dragDropListener.onMouseLeave()),n&&c===a&&a.dragDropListener.onMouseMove(e)}}var o}(e)}),p.on("mouseup.dragdrop",function(e){c&&c.dragDropListener.onElementDropped(e,l)?d.finish(!0):d.finish(),m(),window.safeApply(o)}),o.$broadcast("onInternalDropStart",t)},this.registerContainer=function(e,t,a){(e.dragDropListener=t).dragDropTag=a,f.push(e)},this.unregisterContainer=function(e){var t=f.indexOf(e);0<=t&&f.splice(t,1)},this.registerInitiator=function(e){0===i.length&&(g.on("mousedown.dragdropservice.initiators",function(e){for(var t=0;t<i.length;++t){var a=i[t].findElement(e);if(a){(n=a).x=e.offsetX,n.y=e.offsetY;break}}}),g.on("mouseup.dragdropservice.initiators",function(){n=void 0}),g.on("mousemove.dragdropservice.initiators",function(e){if(angular.isObject(n)&&5<Math.abs(e.offsetX-n.x)+Math.abs(e.offsetY-n.y)){var t=n,a=t.element.css("opacity");t.element.css({opacity:.35});var i={onCancelled:function(){t.element.css({opacity:a})},onDragged:function(){t.element.css({opacity:a})}};d.start(t.element,t.data,i,t.tag),n=void 0}})),i.push(e)},this.unregisterInitiator=function(e){i.findAndRemove(e),0===i.length&&(g.off("mousedown.dragdropservice.initiators"),g.off("mouseup.dragdropservice.initiators"),g.off("mousemove.dragdropservice.initiators"))},this.beginDragTest=function(e,t){var a={x:e.offsetX,y:e.offsetY,isAccepted:!1};return g.on("mouseup.dragdropservice.tmpDragTest",function(e){g.off("mouseup.dragdropservice.tmpDragTest"),g.off("mousemove.dragdropservice.tmpDragTest"),a.isAccepted?t.finish&&t.finish(e):t.cancel&&t.cancel(e)}),g.on("mousemove.dragdropservice.tmpDragTest",function(e){a.isAccepted?t.move&&t.move(e):5<Math.abs(e.offsetX-a.x)+Math.abs(e.offsetY-a.y)&&(a.isAccepted=!0,t.start&&t.start(e))}),a},this.beginAutoScroll=function(e,a,i){function n(){r.timer||(r.timer=u(p))}function o(){r.timer&&(u.cancel(r.timer),r.timer=void 0)}var t="dragdropservice."+e+".autoscroll",r={cancel:function(){g.off("mousemove."+t),g.off("mouseup."+t),r.timer&&(u.cancel(r.timer),r.timer=void 0)},timer:void 0,speed:0},s=i?function(){return a.scrollLeft()}:function(){return a.scrollTop()},l=i?function(e){return a.scrollLeft(e)}:function(e){return a.scrollTop(e)},c=i?a[0].scrollWidth:a[0].scrollHeight,d=i?function(){return a.innerWidth()}:function(){return a.innerHeight()},p=function(){l(Math.clamp(s()+r.speed,0,c-d())),r.timer=u(p)};return g.on("mouseup."+t,function(){r.cancel()}),g.on("mousemove."+t,function(e){if(e.target===a||angular.element.contains(a[0],e.target)){var t=i?angular.offsetToAncestor(e,a).left:angular.offsetToAncestor(e,a).top;(t-=s())<50?(r.speed=t-50,n()):t>d()-50?(r.speed=t-d()+50,n()):o()}else o()}),r};var a,v=[];this.onNativeDropStart=function(e,t,a){e=e.map(function(e){return e.file}),v=e,o.osDropActive=!0,o.$broadcast("onNativeDropStart",{files:v,x:t,y:a}),window.safeApply(o)},this.onNativeDropStop=function(){u.cancel(a),o.osDropActive=!1,o.$broadcast("onNativeDropStop"),window.safeApply(o)},this.onNativeDropMove=function(e,t){u.cancel(a),o.$broadcast("onNativeDropMove",{x:e,y:t}),a=u(function(){window.safeApply(o)})},this.onNativeDropEvent=function(e,t){u.cancel(a),o.osDropActive=!1,o.$broadcast("onNativeDropDropped",{files:v,x:e,y:t}),window.safeApply(o)}}]),angular.module("wallpaperbrowserApp").directive("propertyList",["$timeout","contextMenu","modals","host","skin","utils",function(o,s,l,a,e,t){return{templateUrl:"views/templates/propertylist.html",restrict:"E",scope:{pList:"=",pOwner:"=",pCtrl:"=",pConditionScope:"=",pModalDepth:"="},link:function(r){var n=!1;function i(t){var a;return angular.forEach(r.pList,function(e){e.key===t&&(a=e)}),{resource:r.pOwner,property:a}}r.colorPickerSettings=t.getColorPickerDefaults(),r.selectedEffect={item:void 0},r.selectedItem={item:void 0},r.selectedFlatItem={item:void 0},r.texturePreviews={},r.findProperty=function(t,e){var a;return angular.forEach(e||r.pList,function(e){e.key===t&&(a=e)}),a},r.evalCondition=function(e){return r.$eval(e,r.pConditionScope||r)},r.checkBit=function(e,t){return 0!=(e&t)},r.recalculateBitFlags=function(t){var a=0;return angular.forEach(r.pList,function(e){e.key===t&&(a|=e.value&e.bit)}),a},r.onLabelClick=function(e){"checkbox"===e.type?(e.value=!e.value,r.pCtrl.sendAssetPropertyChange(r.pOwner,e)):"checkboxbit"===e.type&&(e.value=r.recalculateBitFlags(e.key),e.value^=e.bit,r.pCtrl.sendAssetPropertyChange(r.pOwner,e))},r.onScriptLabelClick=function(e,t){delete t.lastValue,"checkbox"===e.type?(e.value=!e.value,r.pCtrl.sendAssetPropertyChange(r.pOwner,t)):"checkboxbit"===e.type&&(e.value=r.recalculateBitFlags(e.key),e.value^=e.bit,r.pCtrl.sendAssetPropertyChange(r.pOwner,t))},r.hasBindings=function(e){if(!angular.isFunction(r.pCtrl.getProject))return!1;if("material"!==r.pOwner.key&&"renderable"!==r.pOwner.key&&"scene"!==r.pOwner.key&&"animationlayer"!==r.pOwner.key)return!1;switch(e.type){case"vec2":case"vec3":case"vec4":case"angle":case"color":case"slider":case"sliderint":case"knob":case"paragraph":case"hiddenbool":return!e.disablebindings;case"checkbox":case"checkboxbit":return!e.disablebindings&&"scene"===r.pOwner.key}return!1},r.hasNestedBindings=function(e){if(!angular.isFunction(r.pCtrl.getProject))return!1;if("material"!==r.pOwner.key&&"renderable"!==r.pOwner.key&&"animationlayer"!==r.pOwner.key)return!1;switch(e.type){case"vec2":case"vec3":case"vec4":case"angle":case"color":case"slider":case"sliderint":case"knob":case"paragraph":case"hiddenbool":case"checkbox":case"checkboxbit":return!e.disablebindings}return!1},r.bindingsActive=function(e){return e.linkUser||e.linkScript||e.linkAnimation},r.bindingsNestedActive=function(e){return e.user},r.onLabelRightClick=function(e,t){if(angular.isFunction(r.pCtrl.getProject)&&("material"===r.pOwner.key||"renderable"===r.pOwner.key||"animationlayer"===r.pOwner.key||"scene"===r.pOwner.key)){var a=[];switch(t.type){case"color":a=[t.type];break;case"vec2":case"vec3":case"vec4":case"angle":case"slider":case"sliderint":case"knob":a=["slider"];break;case"paragraph":a=["textinput"];break;case"hiddenbool":a=["bool","combo"];break;case"checkbox":case"checkboxbit":"scene"===r.pOwner.key&&(a=["bool","combo"])}if(0!==a.length){e.stopPropagation(),e.preventDefault();var i=s.builder();t.linkUser?i.button("ui_editor_properties_context_menu_edit_user_property","fas fa-edit",function(){l.open("editorUserProperties",{data:{project:r.pCtrl.getProject(),selected:t.linkUser,types:a}}).then(function(e){t.linkUser=e,delete t.lastValue,r.pCtrl.sendAssetPropertyChange(r.pOwner,t)})}).button("ui_editor_properties_context_menu_unbind_user_property","fas fa-times",function(){delete t.linkUser,delete t.lastValue,r.pCtrl.sendAssetPropertyChange(r.pOwner,t)},void 0,"browserReportButton"):t.linkAnimation||i.button("ui_editor_properties_context_menu_bind_user_property","fas fa-user",function(){l.open("editorUserProperties",{data:{project:r.pCtrl.getProject(),types:a}}).then(function(e){t.linkUser=e,delete t.lastValue,r.pCtrl.sendAssetPropertyChange(r.pOwner,t)})}),(a.includes("slider")||a.includes("color"))&&(t.linkAnimation?i.button("ui_editor_properties_context_menu_edit_animation","fas fa-edit",function(){r.pCtrl.modifyAnimationLink(r.pOwner,t)}).button("ui_editor_properties_context_menu_unbind_animation","fas fa-times",function(){r.pCtrl.deleteAnimationLink(r.pOwner,t)},void 0,"browserReportButton"):t.linkUser||i.button("ui_editor_properties_context_menu_bind_animation","fas fa-play-circle",function(){r.pCtrl.modifyAnimationLink(r.pOwner,t)})),t.linkScript?i.button("ui_editor_properties_context_menu_edit_script","fas fa-edit",function(){r.pCtrl.modifyScriptLink(r.pOwner,t)}).button("ui_editor_properties_context_menu_unbind_script","fas fa-times",function(){delete t.linkScript,delete t.lastValue,r.pCtrl.sendAssetPropertyChange(r.pOwner,t),r.pCtrl.modifyScriptLink(r.pOwner,t,void 0,!0)},void 0,"browserReportButton"):i.button("ui_editor_properties_context_menu_bind_script","fas fa-cog",function(){r.pCtrl.modifyScriptLink(r.pOwner,t)}),i.open(r,e,{placement:{target:e.currentTarget}})}}},r.onNestedLabelRightClick=function(e,t,a){if(angular.isFunction(r.pCtrl.getProject)&&("material"===r.pOwner.key||"renderable"===r.pOwner.key)){var i=[];switch(t.type){case"color":i=[t.type];break;case"vec2":case"vec3":case"vec4":case"angle":case"slider":case"sliderint":i=["slider"];break;case"paragraph":i=["textinput"];break;case"hiddenbool":i=["bool","combo"];break;case"checkbox":case"checkboxbit":i=["bool","combo"]}if(0!==i.length){e.stopPropagation(),e.preventDefault();var n=s.builder();t.user?n.button("ui_editor_properties_context_menu_edit_user_property","fas fa-edit",function(){l.open("editorUserProperties",{data:{project:r.pCtrl.getProject(),selected:t.user,types:i}}).then(function(e){t.user=e,delete a.lastValue,r.pCtrl.sendAssetPropertyChange(r.pOwner,a)})}).button("ui_editor_properties_context_menu_unbind_user_property","fas fa-times",function(){delete t.user,delete a.lastValue,r.pCtrl.sendAssetPropertyChange(r.pOwner,a)}):n.button("ui_editor_properties_context_menu_bind_user_property","fas fa-user",function(){l.open("editorUserProperties",{data:{project:r.pCtrl.getProject(),types:i}}).then(function(e){t.user=e,delete a.lastValue,r.pCtrl.sendAssetPropertyChange(r.pOwner,a)})}),n.open(r,e,{placement:{target:e.currentTarget}})}}},r.sendAssetPropertyChangeWeights=function(e,t,a){a.all&&angular.forEach(t.value.vertices,function(e){angular.forEach(e.weights,function(e){e.all||e.bone!==a.bone||(e.weight=a.weight)})}),r.sendAssetPropertyChange(e,t,a)},r.sendAssetPropertyChange=function(e,t,a){if(!angular.isUndefined(t.value)&&null!==t.value)return n&&((a=a||{}).save=!1),r.pCtrl.sendAssetPropertyChange(e,t,a)},r.sendNestedAssetPropertyChange=function(e,t,a,i){angular.isUndefined(e.value)?e.value=e.lastValue:e.value!==e.lastValue&&(e.lastValue=e.value,delete a.lastValue,n&&((i=i||{}).save=!1),r.pCtrl.sendAssetPropertyChange(t,a,i))},r.sendNestedAssetPropertyChangeColorEnd=function(e,t,a){o(function(){delete e.lastValue,r.sendNestedAssetPropertyChange(e,t,a)})},r.linkedControlSave=function(e){n=e},r.linkedSliderStart=function(){n=!0},r.linkedSliderEnd=function(e){n=!1;var t=i(e);delete t.property.lastValue,r.pCtrl.sendAssetPropertyChange(t.resource,t.property)},r.sendAssetPropertyChangeSliderStart=function(e){n=!0;var t=i(e);r.pCtrl.sendAssetPropertyChange(t.resource,t.property,{save:!1})},r.sendAssetPropertyChangeSliderChange=function(e){var t=i(e),a={};n&&(a.save=!1),r.pCtrl.sendAssetPropertyChange(t.resource,t.property,a)},r.sendAssetPropertyChangeSliderEnd=function(e){n=!1;var t=i(e);delete t.property.lastValue,r.pCtrl.sendAssetPropertyChange(t.resource,t.property)},r.sendAssetPropertyChangeColorEnd=function(e,t){o(function(){delete t.lastValue,r.pCtrl.sendAssetPropertyChange(e,t)})},r.sendMultipleProperties=function(e,n){var o=[];angular.forEach(n.value,function(t,a){var i=angular.copy(n);i.key=a,i.value=t,angular.forEach(r.pList,function(e){e.key===a&&(e.value=t,i.linkUser=e.linkUser,i.linkScript=e.linkScript,i.linkAnimation=e.linkAnimation)}),o.push(i)}),r.pCtrl.sendAssetPropertyChange(e,o)},r.getTexturePreview=function(e,t){return e.lastTexturePath!==t&&(e.lastTexturePath=t,a.callEditor("getTexturePreview",{id:e.id,path:t})),r.texturePreviews.hasOwnProperty(e.id)},r.emptyPixel="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",r.toggleStringProperty=function(e,t){e.value===t?e.value="":e.value=t,r.sendAssetPropertyChange(r.pOwner,e)},r.setStringProperty=function(e,t){e.value=t,r.sendAssetPropertyChange(r.pOwner,e)},r.importFontFileToProperty=function(t,e){r.pCtrl.importFontFile(e).then(function(e){t.value=e,r.sendAssetPropertyChange(r.pOwner,t)})},r.titleControls={sendAssetPropertyChange:function(e){r.pCtrl.sendAssetPropertyChange(r.pOwner,e)},onPropertyRightClick:r.onLabelRightClick,bindingsActive:r.bindingsActive},r.texturePreviews=t.getTexturePreviews()}}}]).directive("propertyTitleControls",function(){return{templateUrl:"views/templates/propertylisttitlecontrols.html",restrict:"E",link:function(a){a.toggleVisible=function(e){var t=a.pProperties.visible;t.value=e,a.titleControls.sendAssetPropertyChange(t)},a.toggleLock=function(e){var t=a.pProperties.locktransforms;t.value=e,a.titleControls.sendAssetPropertyChange(t)},a.$watch("property",function(e){a.pProperties={visible:a.findProperty("visible"),locktransforms:a.findProperty("locktransforms")},a.pRoot=e})}}}).directive("nestedProperties",function(){return{templateUrl:"views/templates/nestedproperties.html",restrict:"E",link:function(t){t.$watch("property",function(e){e&&"titleVisibleLock"===e.type?t.activeProperty=t.findProperty("visible"):t.activeProperty=t.property})}}}).directive("truncateFloat",function(){return{restrict:"A",require:"?ngModel",link:function(e,t,a,i){var n=a.truncateFloat&&parseFloat(a.truncateFloat)||5;i.$formatters.push(function(e){return parseFloat(parseFloat(e).toFixed(n))})}}}),angular.module("wallpaperbrowserApp").directive("cameraTimeline",["$document","$timeout","$translate","host",function(e,D,j,W){return{restrict:"E",scope:{ctData:"="},link:function(l,d){var p,u,g,f,m,t,n,a=angular.element(e[0].body),v={cursorPosition:0,buttonPlayState:"play",buttonKeyState:"add",playInProgress:!1},c={active:!1,keyFrame:void 0},o={duration:0},h=[];function i(e,t){var a=e.pageX-p.offset().left,i=p.width();a=(a=Math.max(0,Math.min(i,a)))/i*g.duration*2;var n,o,r=(a=Math.round(a))/2;if(angular.isObject(c.keyFrame))if(t){var s=(n=c.keyFrame[0].dataId,angular.forEach(h,function(e){e.id===n&&(o=e)}),o);W.callEditor("moveCameraTransform",l.ctData.id,s.id,r).then(function(){y(s.timestamp=r,s.marker),angular.forEach(g.transforms,function(e){e.id===s.id&&(e.timestamp=s.timestamp)})}).catch(function(){y(s.timestamp,s.marker)})}else y(r);else y(v.cursorPosition=r)}function b(){1<h.length?f.removeClass("disabled"):f.addClass("disabled")}function _(){var t=!1;angular.forEach(h,function(e){t=t||e.timestamp===v.cursorPosition}),P(1,t?"remove":"add")}function r(e,t){t=t/g.duration*100,e.css({left:t+"%"}),_()}function y(e,t){r(t||c.keyFrame||u,e)}function s(){u.removeClass("play"),v.playInProgress=!1,W.callEditor("pausePlayback"),angular.isDefined(t)&&(D.cancel(t),t=void 0)}function w(){a.off("mousemove.cameraTimeline"),a.off("mouseup.cameraTimeline"),a.off("mouseleave.cameraTimeline")}function k(){var e=angular.element(document.createElement("div"));e.addClass("editorCameraTimeline"),e.on("mousedown",function(e){v.playInProgress||(i(e),c.active=!0)}),w(),a.on("mousemove.cameraTimeline",function(e){c.active&&i(e)});function t(e){angular.isObject(c.keyFrame)&&i(e,!0),c.active=!1,c.keyFrame=void 0}return a.on("mouseup.cameraTimeline",t),a.on("mouseleave.cameraTimeline",t),e}function S(){var e=angular.element(document.createElement("span"));return e.addClass("timelineRow"),e}function x(){var e=angular.element(document.createElement("span"));return e.addClass("timestampContainer"),e}function E(e){var t=angular.element(document.createElement("span"));return t.text(Math.round(e)),t.addClass("timestamp"),t}function C(e,t){var a=angular.element(document.createElement("span"));return a.addClass(t?"smallLine":"line"),e&&a.addClass("left"),a}function A(){var e=angular.element(document.createElement("a")),t=angular.element(document.createElement("span")),a=angular.element(document.createElement("span"));return e.append(t),e.append(a),e.addClass("btn btn-primary fullWidth"),a.addClass("buttonText"),e}function P(e,t){var a=0===e?f:m,i=angular.element(a.children("span")[0]);i.removeClass();var n=angular.element(a.children("span")[1]);switch(t){case"play":n.text(" Play"),i.addClass("glyphicon glyphicon-play");break;case"pause":n.text(" Pause"),i.addClass("glyphicon glyphicon-pause");break;case"add":n.text(" Add Key"),i.addClass("glyphicon glyphicon-plus");break;case"remove":n.text(" Remove"),i.addClass("glyphicon glyphicon-remove")}0===e?v.buttonPlayState=t:v.buttonKeyState=t}function T(){"play"===v.buttonPlayState?(P(0,"pause"),v.cursorPosition+.25>g.duration&&(v.cursorPosition=0,y(v.cursorPosition)),u.addClass("play"),v.playInProgress=!0,W.callEditor("startPlayback",l.ctData.id,v.cursorPosition).then(function(){var e=function(){v.cursorPosition+.25>g.duration?(s(),P(0,"play")):(v.cursorPosition+=.5,y(v.cursorPosition),t=D(e,500))};t=D(e,500)})):(P(0,"play"),s())}function R(e,t){var a=angular.element(document.createElement("span"));return a.addClass("marker keyFrameMarker"),a.on("mousedown",function(e){v.playInProgress&&T(),e.stopPropagation(),c.keyFrame=a,c.active=!0}),h.push({marker:a,id:e,timestamp:t}),a[0].dataId=e,r(a,t),a}function I(){if("add"===v.buttonKeyState)W.callEditor("addCameraTransformToPath",l.ctData.id,v.cursorPosition).then(function(e){var t=R(e.id,e.timestamp);p.prepend(t),g.transforms.push({id:e.id,timestamp:e.timestamp}),b()});else{var t=(a=v.cursorPosition,angular.forEach(h,function(e){e.timestamp===a&&(i=e)}),i);if(!angular.isObject(t))return;W.callEditor("removeCameraTransformFromPath",l.ctData.id,t.id).then(function(){t.marker.remove(),h.splice(h.indexOf(t),1);for(var e=0;e<g.transforms.length;++e)if(g.transforms[e].id===t.id){g.transforms.splice(e,1);break}b(),_()})}var a,i}function O(e){d.empty(),h=[],(g=angular.copy(e)).transforms=e.transforms,g.duration=Math.ceil(g.duration);var t,a,i=k();d.append(i);var n=S();n.addClass("timeStamps");var o,r=i.width()/g.duration<40;for(t=0;t<g.duration;++t){var s;a=x(g.duration),0===t&&((s=E(0)).addClass("left"),a.append(s)),r&&(t+1)%5!=0&&t!==g.duration-1||(s=E(t+1),a.append(s)),n.append(a)}for(i.append(n),n=S(),t=0;t<g.duration;++t){a=x(g.duration);var l=C();a.append(l),r||a.append(C(!1,!0)),0===t&&a.append(C(!0)),n.append(a)}i.append(n),u=function(){var e=angular.element(document.createElement("span"));e.addClass("marker cursorMarker");var t=angular.element(document.createElement("span"));return t.addClass("arrow fas fa-play"),e.append(t),e}(),(o=angular.element(document.createElement("span"))).addClass("markerContainer"),(p=o).append(u),i.append(p),angular.forEach(e.transforms,function(e){var t=R(e.id,e.timestamp);p.prepend(t)});var c=angular.element(document.createElement("div"));c.addClass("editorCameraTimelineControls"),f=A(),m=A(),P(0,v.buttonPlayState),P(1,v.buttonKeyState),b(),_(),c.append(f),c.append(m),d.append(c),f.click(T),m.click(I),y(v.cursorPosition)}function M(){d.empty();var e=angular.element(document.createElement("div"));e.addClass("editorCameraTimeline errorMessage");var t=angular.element(document.createElement("span"));j("ui_editor_camera_select_path").then(function(e){t.text(e)}),e.append(t),d.append(e)}M(),l.$watch("ctData",function(e){if(angular.isObject(e)){var a=!1,i=e.transforms||[];angular.forEach(e.properties,function(e,t){"duration"===e.key&&(a=!0,angular.isFunction(n)&&n(),n=l.$watch("ctData.properties["+t+"].value",function(e){(!angular.isNumber(e)||e<1)&&(e=1),O(o={duration:e,transforms:i})}))}),a||M()}else M()}),l.$on("$destroy",function(){w(),angular.element(window).off("resize.cameraTimelineResize")}),O(o),angular.element(window).on("resize.cameraTimelineResize",function(){O(o)})}}}]),angular.module("wallpaperbrowserApp").directive("disableAnimate",["$animate",function(a){return{restrict:"A",link:function(e,t){a.enabled(t,!1)}}}]),angular.module("wallpaperbrowserApp").controller("EditorProjectSettingsModalCtrl",["$scope","$uibModalInstance","$timeout","modals","utils","project",function(e,t,a,i,n,o){e.close=function(){t.close()},e.colorPickerOptions=n.getColorPickerDefaults(),e.project=o,e.$watch("project.data.title",function(e){n.onProjectNameChanged(e)}),a(function(){e.$broadcast("rzSliderForceRender")},300)}]),angular.module("wallpaperbrowserApp").directive("vecColorConverter",["utils",function(n){return{restrict:"A",require:"ngModel",link:function(e,t,a,i){"false"!==a.vecColorConverter?(i.$parsers.push(n.convertHexToVec3),i.$formatters.push(n.convertVec3ToHex)):(i.$parsers.push(n.convertHexToVec3_255),i.$formatters.push(n.convertVec3ToHex_255))}}}]).directive("vecComponentInput",["$rootScope","$document","$parse","$timeout","utils","host",function(d,p,e,u,g,f){return{templateUrl:"views/templates/veccomponentinput.html",restrict:"E",replace:!0,require:"ngModel",scope:{model:"=ngModel",vciMode:"=",vciCount:"@",vciOptions:"=",vciOwner:"=",vciSliderOptions:"=",vciDisabled:"="},link:function(a,e,t,i){angular.isUndefined(a.vciCount)&&(a.vciCount="3"),a.settings={};var n=0;function o(e){if(angular.isString(e)){var t=e.split(" "),a={};return a.x=parseFloat(0<t.length&&t[0])||0,a.y=parseFloat(1<t.length&&t[1])||0,a.z=parseFloat(2<t.length&&t[2])||0,a.w=parseFloat(3<t.length&&t[3])||0,a}}function r(){switch(a.vciCount){case"4":if(angular.isUndefinedOrNull(a.value.x)||angular.isUndefinedOrNull(a.value.y)||angular.isUndefinedOrNull(a.value.z)||angular.isUndefinedOrNull(a.value.w))return 1;break;case"3":if(angular.isUndefinedOrNull(a.value.x)||angular.isUndefinedOrNull(a.value.y)||angular.isUndefinedOrNull(a.value.z))return 1;break;case"2":if(angular.isUndefinedOrNull(a.value.x)||angular.isUndefinedOrNull(a.value.y))return 1}}function s(e){var t="";switch(a.vciCount){case"2":t=(e.x||"0")+" "+(e.y||"0");break;case"3":t=(e.x||"0")+" "+(e.y||"0")+" "+(e.z||"0");break;case"4":t=(e.x||"0")+" "+(e.y||"0")+" "+(e.z||"0")+" "+(e.w||"0")}t!==i.$modelValue&&i.$setViewValue(t)}a.value={x:0,y:0,z:0,w:0},i.$render=function(){var e=i.$modelValue;if(angular.isString(e)){var t=o(e);"angle"===a.vciMode?(t.x=g.toDegrees(t.x),t.y=g.toDegrees(t.y),t.z=g.toDegrees(t.z),t.w=g.toDegrees(t.w),angular.isNumber(a.value.x)===angular.isNumber(t.x)&&angular.isNumber(a.value.y)===angular.isNumber(t.y)&&angular.isNumber(a.value.z)===angular.isNumber(t.z)&&angular.isNumber(a.value.w)===angular.isNumber(t.w)&&Math.round(1e6*a.value.x)===Math.round(1e6*t.x)&&Math.round(1e6*a.value.y)===Math.round(1e6*t.y)&&Math.round(1e6*a.value.z)===Math.round(1e6*t.z)&&Math.round(1e6*a.value.w)===Math.round(1e6*t.w)||(a.value=t)):a.value=t}},i.$render(),a.$watch("model",function(e,t){e!==t&&i.$render()}),a.$watch("value",function(e){if(e=angular.copy(e),!a.settings.linked||e.x===e.y){var t=o(a.model);"angle"===a.vciMode?((n<=0||!angular.isUndefinedOrNull(e.x))&&(e.x=angular.isUndefinedOrNull(e.x)?t.x:g.toRadians(e.x)),(n<=0||!angular.isUndefinedOrNull(e.y))&&(e.y=angular.isUndefinedOrNull(e.y)?t.y:g.toRadians(e.y)),(n<=0||!angular.isUndefinedOrNull(e.z))&&(e.z=angular.isUndefinedOrNull(e.z)?t.z:g.toRadians(e.z)),(n<=0||!angular.isUndefinedOrNull(e.w))&&(e.w=angular.isUndefinedOrNull(e.w)?t.w:g.toRadians(e.w))):n<=0&&(angular.isUndefinedOrNull(e.x)&&(e.x=t.x),angular.isUndefinedOrNull(e.y)&&(e.y=t.y),angular.isUndefinedOrNull(e.z)&&(e.z=t.z),angular.isUndefinedOrNull(e.w)&&(e.w=t.w)),0<n&&r()||s(e)}},!0),a.$watch("vciOptions",function(e){a.settings.linked=angular.isObject(a.vciOptions)&&"linkedslider"===a.vciOptions.mode&&a.value.x===a.value.y,a.usePositionListener=e&&"position"===e.mode}),a.toggleLinked=function(){a.settings.linked=!a.settings.linked,a.settings.linked&&(a.value.y=a.value.x)},a.suppressSave=function(e){e?++n:--n,a.vciSliderOptions&&a.vciSliderOptions.controlSave(e),e||(u.cancel(_inputUpdateTimer),_inputUpdateTimer=u(function(){r()&&s(a.value),a.vciSliderOptions&&angular.isFunction(a.vciSliderOptions.onEnd)&&a.vciSliderOptions.onEnd(a.vciSliderOptions.id)}))},a.sendAssetPropertyChangeSliderStart=function(){u.cancel(_linkedSliderUpdateTimer),u.cancel(_inputUpdateTimer),a.vciSliderOptions&&angular.isFunction(a.vciSliderOptions.onStart)&&a.vciSliderOptions.onStart(a.vciSliderOptions.id)},a.sendAssetPropertyChangeSliderEnd=function(){a.vciSliderOptions&&angular.isFunction(a.vciSliderOptions.onEnd)&&(_linkedSliderUpdateTimer=u(function(){a.vciSliderOptions.onEnd(a.vciSliderOptions.id)}))};var l,c=!(a.sendAssetPropertyChangeSliderChange=function(e,t){if(a.settings.linked)switch(e){case"x":a.value.y=t;break;case"y":a.value.x=t}});a.$on("$destroy",function(){c&&a.cancelPickPosition(),l&&p.off(l)}),a.cancelPickPosition=function(){f.callEditor("endPickPosition",!1),d.$broadcast("showPreviewCrosshair",!1),c=!1},a.pickPosition=function(){f.callEditor("startPickPosition",a.vciOwner.id,a.vciOptions.key).then(function(e){a.value.x=e.x,a.value.y=e.y,d.$broadcast("showPreviewCrosshair",!1),c=!1}),d.$broadcast("showPreviewCrosshair",!0),c=!0},a.$watch("usePositionListener",function(e){l&&p.off(l),e&&(l="keydown.vec.position.picker."+a.vciOwner.id,p.on(l,function(e){c&&27===e.keyCode&&(a.cancelPickPosition(),a.$apply(),e.stopPropagation(),e.preventDefault())}))})}}}]).directive("radianConverter",["utils",function(n){return{restrict:"A",require:"ngModel",link:function(e,t,a,i){i.$parsers.push(n.toDegrees),i.$formatters.push(n.toRadians)}}}]).directive("degreeConverter",["utils",function(n){return{restrict:"A",require:"ngModel",link:function(e,t,a,i){i.$formatters.push(n.toDegrees),i.$parsers.push(n.toRadians)}}}]).directive("scrollHorizontal",function(){return{restrict:"A",link:function(e,t){(t=angular.element(t)).on("wheel",function(e){t[0].scrollTo({top:0,left:t.scrollLeft()+e.originalEvent.deltaY,behavior:"smooth"})})}}}),angular.module("wallpaperbrowserApp").directive("ngMouseWheel",function(){return{restrict:"A",scope:{ngMouseWheel:"&"},link:function(a,e){e.bind("DOMMouseScroll mousewheel onmousewheel",function(e){var t=Math.max(-1,Math.min(1,e.originalEvent.wheelDelta));0!==t&&(a.$apply(function(){a.ngMouseWheel({delta:t})}),e.returnValue=!1,e.preventDefault&&e.preventDefault())})}}}),angular.module("wallpaperbrowserApp").controller("EditorTemplateWizardModalCtrl",["$uibModalInstance","$q","$timeout","$scope","host","toastr","compiler","utils","projectData","sceneData",function(e,a,i,n,o,t,r,s,l,c){var d,p;function u(){p=d=void 0}n.ok=function(){e.close()},n.replaceTexture=function(t){u(),o.callEditor("replaceTexture",angular.toJson(t.parameters||{})).then(function(e){var t=a.defer();return o.callEditor("checkBadGIF",e).then(function(e){if(e.error)return s.displayGifWarning(!0)}).then(function(){t.resolve(e)}),t.promise}).then(function(e){return d=t,p=e,n.currentTemplateOptionName=t.name,o.callEditor("replaceTextureCopyFiles",e,angular.toJson(t))}).then(function(){n.compileCtrl.start()})},n.setOptionConfigured=function(e){e.configured=!0};var g={onCompileStarted:function(){},onCompileFailed:function(e){t.error(e,"Error"),u(),n.$apply()},onCompileFinished:function(){angular.isObject(d)&&(d.configured=!0,d.last=p),o.callEditor("getTextureSize",p).then(function(t){i(function(){if(d.adjustprojection&&angular.isObject(t)&&angular.isObject(c)){c.orthogonalprojection=t;var e=d.destination;i(function(){o.callEditor("saveSceneGeneralData",angular.toJson(c)),o.callEditor("findRenderableByMaterial",e).then(function(e){angular.isObject(e)&&o.callEditor("centerRenderable",e.id,"0 0 0",!1)})})}u(),n.compileCtrl.cancel(),n.compileCtrl.success=!1},1e3)})}};n.$on("$destroy",function(){r.removeListener(g)}),r.addListener(g),n.compileCtrl={},n.selectedOption={value:void 0},n.templateoptions=l.templateoptions,n.colorPickerOptions=s.getColorPickerDefaults(!0),n.generalProperties=l.general&&l.general.properties||{},n.selectedOption.value=l.templateoptions[0]}]),angular.module("wallpaperbrowserApp").directive("compilerProgress",["$timeout","modals","compiler",function(r,s,l){return{templateUrl:"views/templates/compilerprogress.html",scope:{compileCtrl:"="},restrict:"E",link:function(t){var a,i;function n(e,t){if(angular.isUndefined(e))return 0;var a=1/e.total,i=a*e.current;return i+=a*t,i=Math.floor(100*i),Math.min(99,Math.max(1,i))}function o(){angular.isDefined(a)&&(r.cancel(a),a=void 0),i=0}var e={onCompileStarted:function(e){t.compileCtrl.success=!1,t.compileInfo=e,t.compileInfo.progress=n(e,0),o(),function e(){a=r(function(){i+=.02,i=Math.min(.9,i),t.compileInfo.progress=n(t.compileInfo,i),e()},500)}(),t.$apply()},onCompileFailed:function(){t.compileCtrl.active=!1,s.setPreventModalClose(!1),o(),t.$apply()},onCompileFinished:function(){s.setPreventModalClose(!1),o(),t.compileInfo.progress=100,t.compileCtrl.active=!1,t.compileCtrl.success=!0,t.$apply()}};t.compileCtrl={start:function(){t.compileInfo={},t.compileCtrl.active=!0,s.setPreventModalClose(!0)},cancel:function(){t.compileCtrl.active=!1,s.setPreventModalClose(!1),o()}},t.$on("$destroy",function(){l.removeListener(e)}),l.addListener(e)}}}]),angular.module("wallpaperbrowserApp").directive("radialProgress",["$translate","utils",function(u,g){return{restrict:"E",scope:{rpPercent:"=",rpLabel:"="},link:function(e,t){t.addClass("radialProgressContainer"),angular.isFunction(openSteamDownloads)||(openSteamDownloads=function(){g.openUrl("var_url_faqdownloads")});var a=angular.element(document.createElement("div")),i=angular.element(document.createElement("div")),n=angular.element(document.createElement("div")),o=angular.element(document.createElement("div")),r=document.createElementNS("http://www.w3.org/2000/svg","svg"),s=document.createElementNS("http://www.w3.org/2000/svg","circle"),l=document.createElementNS("http://www.w3.org/2000/svg","circle");a.addClass("steamHeader"),i.addClass("percent"),n.addClass("bytes"),o.addClass("bytes"),r.classList.add("circleBase"),s.classList.add("circleBg"),l.classList.add("circleFg"),a.click(openSteamDownloads);var c=angular.element(document.createElement("div"));c.addClass("steamDownloadLink");var d=angular.element(document.createElement("a"));d.addClass("fas fa-question-circle steamDownloadLinkInner"),d.click(openSteamDownloads),c.append(d),r.setAttribute("viewBox","-50 -50 100 100"),r.setAttribute("width","100%"),r.setAttribute("height","100%"),s.setAttribute("r",45),l.setAttribute("r",45),s.setAttribute("cx",0),s.setAttribute("cy",0);var p=-1;l.style["stroke-dasharray"]=2*Math.PI*45,l.style["stroke-dashoffset"]=2*Math.PI*45*(1-Math.min(1,p/100)),t.append(angular.element(document.createElement("div")).addClass("padTop")),t.append(a),t.append(i),t.append(n),t.append(o),t.append(c),t.append(r),r.append(s),r.append(l),o.hide(),u("ui_browse_download_header").then(function(e){a.text(e)}),u("ui_browse_download_waiting").then(function(e){o.text(e)}),e.$watch("rpPercent",function(e){var t;p!==(t=e)&&(100<=(p=t)?(a.hide(),n.hide(),o.show()):(a.show(),n.show(),o.hide()),t<=0?i.hide():(i.show(),i.text(Math.floor(t)+"%")),l.style["stroke-dashoffset"]=2*Math.PI*45*(1-Math.min(1,t/100)))}),e.$watch("rpLabel",function(e){n.text(e)})}}}]),angular.module("wallpaperbrowserApp").controller("WelcomeCtrl",["$scope","$timeout","skin","host","modals","utils",function(a,t,i,n,e,o){var r=!1;function s(e){window.welcomeObject.applyGeneral(angular.toJson(e),!0)}function l(e){angular.isArray(e)&&(a.led.visible=!!e.find(function(e){return"ledextensions"===e.key}))}a.led={enabled:!0,visible:!1},a.adjustDWMColorModes=[{label:"ui_settings_adjust_windows_color_disabled",value:"disabled"},{label:"ui_settings_adjust_windows_color_accent",value:"accent"},{label:"ui_settings_adjust_windows_color_everything",value:"everything"}],(window.welcomeCtrl=a).applySettings=function(e){a.generalSettings=e.user,a.dwmColorSettings={adjustdwmcolor:a.generalSettings.adjustdwmcolor,adjustdwmcolormode:a.generalSettings.adjustdwmcolormode,adjustdwmcolorwarning:a.generalSettings.adjustdwmcolorwarning},l(e.discoveredplugins),a.useDarkSkin="dark"===a.generalSettings.uiskin,t(function(){r=!0,a.qualityPreset="medium",a.generalSettings.hasshownwelcomedialog=!0})},a.updateSettings=function(e){l(e.discoveredplugins)},a.setBuildVersion=function(e){a.buildVersion=e},a.advancePage=function(){if(a.page++,3<a.page){a.page=3;var e=a.led.visible&&!a.led.enabled;window.welcomeExtensionObject.completedDialog(a.showBrowseWallpapers,e)}},a.toggleAutoStartRegistry=function(t){n.callDeferred("welcomeObject","toggleAutoStartRegistry",!1,t).then(function(e){e&&(a.generalSettings.autostart=t)})},a.toggleAutoStartScheduler=function(t){e.showHighPriorityWarning(t,a.generalSettings).then(function(){n.callDeferred("welcomeObject","toggleAutoStartHighPriority",t,!t).then(function(e){e&&(a.generalSettings.autostartscheduler=t)})})},a.openTranslationHelp=function(){o.openUrl("var_url_translations")},a.$watch("page",function(e,t){a.lastPage=t}),a.$watch("generalSettings",function(e){r&&s(e)},!0),a.$watch("dwmColorSettings",function(){r&&i.applyDWMColorSettings(a.dwmColorSettings).then(function(){angular.merge(a.generalSettings,a.dwmColorSettings)})},!0),a.$watch("qualityPreset",function(e){angular.isObject(a.generalSettings)&&angular.isString(e)&&angular.merge(a.generalSettings,o.getQualityPreset(e))}),a.$watch("generalSettings.language",function(e,t){angular.isString(e)&&angular.isString(t)&&e!==t&&(o.setLanguage(e),n.callDeferred("welcomeObject","languageChanged",e))}),a.$watch("useDarkSkin",function(e,t){r&&e!==t&&(a.generalSettings.uiskin=e?"dark":"white",s(a.generalSettings),i.refreshSkin())}),a.$on("onCppInit",function(){r=!0,a.isWindows10OrGreater=10<=i.getWindowsVersion(),a.availableLanguages=o.getAvailableLanguages()}),a.page=0,a.showBrowseWallpapers=!0,a.generalSettings={}}]),angular.module("wallpaperbrowserApp").controller("OpenFromUrlModalCtrl",["$scope","$uibModalInstance","data",function(i,t,e){i.hotkeys=e.hotkeys,i.keys=[],i.hideIconsKey={label:"ui_settings_hotkeys_action_hide_icons",action:"toggleicons"},i.ok=function(){var e=i.url||"";e=e.replace(/["]/g,"'"),t.close(e)},i.cancel=function(){t.dismiss("cancel")},i.findHotkeyList=function(t){var a;return angular.forEach(i.hotkeys,function(e){e.action===t.action&&(a=e)}),angular.isUndefined(a)&&(a={action:t.action,keys:[]},i.hotkeys.push(a)),a}}]),angular.module("wallpaperbrowserApp").directive("tooltip",["$timeout","$document","$translate",function(d,p,u){return{restrict:"A",link:function(e,t,i){var n,a,o=e.$eval(i.tOptions)||{};o=angular.merge({delay:750},o),t=angular.element(t);var r,s={};function l(){if(r=void 0,p.off("mousemove.tooltip.remove.general"),angular.isDefined(a)&&(d.cancel(a),a=void 0),angular.isDefined(n)){n.removeClass("show");var e=n;d(function(){e.remove()},100),n=void 0}}function c(e){angular.isDefined(n)||(angular.isDefined(a)&&d.cancel(a),a=d(function(){!function(e){if(i.tooltip&&0!==i.tooltip.length){p.off("mousemove.tooltip.remove.general"),n=angular.element(document.createElement("span"));var t=function(e){n.text(e)};u(i.tooltip,i.tValues).then(t).catch(t),r=i.tooltip,n.addClass("uiTooltip"),i.tAlignRight&&n.addClass("alignRight"),n.css({top:e.pageY+25,left:e.pageX}),angular.element(p[0].body).append(n),d(function(){n&&(n.addClass("show"),i.tAlignRight&&n.css({left:e.pageX-n.outerWidth()}))})}}(e)},o.delay))}e.$on("$destroy",function(){l(),t.off("mousemove.tooltip"),t.off("mouseleave.tooltip"),t.off("mouseenter.tooltip"),p.off("mousemove.tooltip.remove.general")}),t.on("mousemove.tooltip",function(e){if(s.left!==e.pageX||s.top!==e.pageY){if(angular.isDefined(n)){var t=s.left-e.pageX,a=s.top-e.pageY;(5<Math.sqrt(t*t+a*a)||r!==i.tooltip)&&l()}s.left=e.pageX,s.top=e.pageY,c(e)}}),t.on("mouseleave.tooltip",function(){s={},l()}),t.on("mouseenter.tooltip",function(e){s={},l(),c(e)})}}}]),angular.module("wallpaperbrowserApp").directive("modalmove",["$document",function(s){return{restrict:"A",link:function(e,t){var i=angular.element(t).closest(".modal-dialog");t=angular.element(t).find(".modal-header");var n=!1,o={left:0,top:0},r={};e.$on("$destroy",function(){t.off("mousedown.modalmove"),t.off("mouseup.modalmove"),t.off("mousemove.modalmove")}),t.on("mousedown.modalmove",function(e){n||(n=!0,r.left=e.pageX-o.left,r.top=e.pageY-o.top)}),s.on("mouseup.modalmove",function(){n=!1}),s.on("mousemove.modalmove",function(e){if(n){var t=Math.max(0,Math.min(s.width(),e.pageX)),a=Math.max(0,Math.min(s.height(),e.pageY));o={left:t-r.left,top:a-r.top},i.css(o)}}),i.css({position:"relative"})}}}]),angular.module("wallpaperbrowserApp").controller("SettingsChangelogModalCtrl",["$scope","$uibModalInstance",function(e,t){e.close=function(){t.close()}}]),angular.module("wallpaperbrowserApp").controller("GenericConfirmModalCtrl",["$scope","$uibModalInstance","data",function(e,t,a){e.data=a,e.ok=function(){a.okDisabled||t.close()},e.leftClicked=function(){angular.isFunction(a.leftCallback)?a.leftCallback(a.leftAction):t.close(a.leftAction)},e.left2Clicked=function(){angular.isFunction(a.left2Callback)?a.left2Callback(a.left2Action):t.close(a.left2Action)},e.cancel=function(){t.dismiss("cancel")}}]),angular.module("wallpaperbrowserApp").controller("EmptyCtrl",["$scope",function(e){switch(Math.floor(4*Math.random())){case 0:e.btnText="I globbed up!";break;case 1:e.btnText="JJ Flip! What the zip?";break;case 2:e.btnText="Don't just lick stuff!";break;case 3:e.btnText="Floop the pig!"}}]),angular.module("wallpaperbrowserApp").controller("BrowseCollectionsModalCtrl",["$scope","$uibModalInstance","data",function(i,n,o){var r=angular.isArray(o.hotkeys);switch(o.collectionItem=o.collectionItem||{},o.collectionItem.name=o.collectionItem.name||"",i.data=o,i.context={hotkey:[]},o.type){case"presets":i.type={labelHeader:o.isSaving?"ui_browse_preset_modal_save_header":"ui_browse_preset_modal_open_header",labelSave:"ui_browse_preset_modal_save_name",labelSaveDescription:"ui_browse_preset_modal_save_description",labelEmpty:"ui_browse_preset_modal_empty"};break;case"playlists":i.type={hotkeyAction:"playlist",labelHeader:o.isSaving?"ui_browse_playlist_modal_save_header":"ui_browse_playlist_modal_open_header",labelSave:"ui_browse_playlist_modal_save_name",labelSaveDescription:"ui_browse_playlist_modal_save_description",labelEmpty:"ui_browse_playlist_empty"};break;case"profiles":i.type={hotkeyAction:"profile",labelHeader:o.isSaving?"ui_browse_profiles_modal_save_header":"ui_browse_profiles_modal_open_header",labelSave:"ui_browse_profiles_modal_save_name",labelSaveDescription:"ui_browse_profiles_modal_save_description",labelEmpty:"ui_browse_profiles_empty"}}function s(t){var a;return t&&t.name&&angular.forEach(i.data.hotkeys,function(e){e.value!==t.name||angular.isString(i.data.location)&&e.location!==i.data.location||e.action!==i.type.hotkeyAction||(a=e)}),a}if(i.ok=function(){if(r&&(o.isSaving&&(i.data.hotkeys.findAndRemove(s(o.collectionItem)),0<i.context.hotkey.length&&i.data.hotkeys.findAndRemove((t=i.context.hotkey,angular.forEach(i.data.hotkeys,function(e){angular.equals(e.keys,t)&&(a=e)}),a))),o.isSaving&&0<i.context.hotkey.length)){var e={action:i.type.hotkeyAction,keys:i.context.hotkey,value:i.data.collectionItem.name};angular.isString(i.data.location)&&(e.location=i.data.location),i.data.hotkeys.push(e)}var t,a;n.close(i.context.currentSelection||i.data.collectionItem)},i.cancel=function(){n.dismiss("cancel")},i.deleteCollectionItem=function(e){r&&i.data.hotkeys.findAndRemove(s(e));var t=o.collections.indexOf(e);o.collections.splice(t,1),i.context.currentSelection=void 0,angular.isFunction(o.onDeleted)&&o.onDeleted(e)},o.isSaving){var e=s(o.collectionItem);i.context.hotkey=e&&e.keys||[]}else i.$watch("context.currentSelection",function(e){var t=s(e);i.context.hotkey=t&&t.keys||[]}),r&&i.$watch("context.hotkey",function(e){if(angular.isObject(i.context.currentSelection)){var t=s(i.context.currentSelection);if(0===e.length&&angular.isDefined(t))i.data.hotkeys.findAndRemove(t);else if(0<e.length&&angular.isUndefined(t)){var a={action:i.type.hotkeyAction,keys:e,value:i.context.currentSelection.name};angular.isString(i.data.location)&&(a.location=i.data.location),i.data.hotkeys.push(a)}}},!0)}]),angular.module("wallpaperbrowserApp").controller("BrowsePlaylistSettingsModalCtrl",["$timeout","$scope","$uibModalInstance","data",function(e,t,a,i){t.orderOptions=[{label:"ui_browse_playlist_modal_settings_order_random",value:"random"},{label:"ui_browse_playlist_modal_settings_order_sorted",value:"sorted"}],t.clockOptions=[{label:"ui_browse_playlist_modal_settings_clock_24",value:"clock24"},{label:"ui_browse_playlist_modal_settings_clock_12",value:"clock12"}],t.timingOptions=[{label:"ui_browse_playlist_modal_settings_timing_on_logon",value:"logon"},{label:"ui_browse_playlist_modal_settings_timing_on_timer",value:"timer"},{label:"ui_browse_playlist_modal_settings_timing_daytime",value:"daytime"},{label:"ui_browse_playlist_modal_settings_timing_never",value:"never"}],t.settings=i.settings,t.settings.delay=t.settings.delay||60,t.tempSettings={timerhours:Math.floor(t.settings.delay/60),timerminutes:t.settings.delay%60},t.ok=function(){a.close(i.settings)},t.cancel=function(){a.dismiss("cancel")},t.toggleVideoSequence=function(){"timer"===t.settings.mode&&(t.settings.videosequence=!t.settings.videosequence)},t.toggleUpdateOnPause=function(){"timer"===t.settings.mode&&(t.settings.updateonpause=!t.settings.updateonpause)},t.toggleBeginFirst=function(){"timer"===t.settings.mode&&(t.settings.beginfirst=!t.settings.beginfirst)},e(function(){t.$broadcast("rzSliderForceRender")},250),t.$watch("tempSettings",function(e){t.settings.delay=60*e.timerhours+e.timerminutes},!0)}]),angular.module("wallpaperbrowserApp").controller("EditorEffectListModalCtrl",["$scope","$uibModalInstance","$timeout","$translate","modals","utils","host","data",function(o,e,t,a,r,i,n,s){function l(t,e){e=e||o.groupList,angular.forEach(e,function(e){angular.isArray(e.items)&&e.items.findAndRemove(t),angular.isArray(e.nestedGroupList)&&l(t,e.nestedGroupList)})}function c(t){var a=!1;angular.forEach(o.groupList,function(e){e.group!==t.group||a||(t.nestedgroup?(angular.forEach(e.nestedGroupList,function(e){e.nestedgroup===t.nestedgroup&&(e.items.push(t),a=!0)}),a||(e.nestedGroupList.push({name:i.translateTagInstant(t.nestedgroup)||"",items:[t],nestedgroup:t.nestedgroup,visible:!0,open:!0}),e.nestedGroupList.sort(function(e,t){return e.name.localeCompare(t.name)}))):(e.items.push(t),a=!0),e.visible=!0)})}(window.effectListModalCtrl=o).workshopController=s.workshopController,o.inputList=s.groupList,o.showAssetCreation=s.showAssetCreation,o.fnCreateNew=s.fnCreateNew,o.fnDelete=s.fnDelete,o.groupList=[{group:"workshop",name:"ui_editor_effects_modal_group_workshop",visible:!1,open:!0,nestedGroupList:[],items:[]},{group:"localeffects",name:"ui_editor_effects_modal_group_my_effects",visible:!1,open:!0,items:[]},{group:"preset",name:"ui_editor_effects_modal_group_presets",visible:!1,open:!0,items:[]},{group:"renderable",name:"ui_editor_effects_modal_group_renderables",visible:!1,open:!0,items:[]},{group:"animate",name:"ui_editor_effects_modal_group_animate",visible:!1,open:!0,items:[]},{group:"blur",name:"ui_editor_effects_modal_group_blur",visible:!1,open:!0,items:[]},{group:"colorize",name:"ui_editor_effects_modal_group_colorize",visible:!1,open:!0,items:[]},{group:"distort",name:"ui_editor_effects_modal_group_distort",visible:!1,open:!0,items:[]},{group:"enhance",name:"ui_editor_effects_modal_group_enhance",visible:!1,open:!0,items:[]}],o.selected={},angular.forEach(s.groupList,c),o.title=s.title,o.colorPickerOptions=i.getColorPickerDefaults(),0<o.groupList.length&&(o.selected.group=o.groupList[0]),o.close=function(){e.dismiss("cancel")},o.ok=function(){e.close(o.selected.item)},o.browseWorkshop=function(){s.workshopModalFn(s.workshopGroup)},o.registerSteamUser=function(e){var t=o.steamUserInfos[e.id]||{};t.name=e.name,t.avatar=e.avatar,o.steamUserInfos[e.id]=t},o.providerIcon=i.getProviderIcon(),o.openSteamUserPage=function(e){i.openUrl("var_url_userpage",{id:e})},o.openSteamWorkshopPage=function(e){i.openUrl(e.workshopurl)},o.unsubscribeWorkshopItem=function(e){o.workshopController.unsubscribeWorkshopItem(e.name,e.workshopid).then(function(){l(e),o.selected.item=void 0})},o.createNew=function(i){var n=angular.isDefined(i),e=n&&i.name||"";return a(n?"ui_editor_effect_list_modal_create_duplicate_effect_body":"ui_editor_effect_list_modal_create_new_effect_body",{effect:a.instant(e).toString()}).then(function(e){var t={title:n?"ui_editor_effect_list_modal_create_duplicate_effect_header":"ui_editor_effect_list_modal_create_new_effect_header",message:e,cancelVisible:!0,okVisible:!0,textinputVisible:!0,textinput:"",textinputRequired:!0},a=n&&angular.copy(i)||{path:"effects/_empty/effect.json"};r.open("genericConfirm",{data:t}).then(function(){return a.name=t.textinput,o.fnCreateNew(a)}).then(function(e){o.selected.item=e,o.ok()})})},o.deleteItem=function(e){return a("ui_editor_effect_list_modal_delete_effect_body",{effect:e.name}).then(function(e){return r.open("genericConfirm",{data:{title:"ui_editor_effect_list_modal_delete_effect_header",message:e,leftIcon:"images/warning.png",cancelVisible:!0,okVisible:!0}},{backdropClass:"modal-backdrop-danger"})}).then(function(){l(e),o.fnDelete(e),o.selected.item=void 0})},o.applyUserVote=function(e,t){e===o.selected.item.workshopid&&(o.selected.item.uservote=t)},o.$watch("selected.item",function(e,t){angular.isObject(e)&&e!==t&&(e.preview&&!e.isworkshopasset?n.callEditor("startEffectPreview",e.path,e.preview):e.options&&e.options.droplistOptions&&(e.options.droplistSelected=e.options.droplistOptions[0].value,e.variants&&!e.isworkshopasset&&n.callEditor("startEffectPreview",e.path,e.variants[e.options.droplistSelected].preview)),e.authorsteamid&&o.workshopController.requestSteamUserInfo(e.authorsteamid),e.workshopid&&o.workshopController.getUserVote(e.workshopid))}),o.$watch("selected.item.options.droplistSelected",function(e,t){angular.isObject(o.selected.item)&&angular.isArray(o.selected.item.variants)&&angular.isObject(o.selected.item.variants[e])&&angular.isString(o.selected.item.variants[e].preview)&&e!==t&&!e.isworkshopasset&&n.callEditor("startEffectPreview",o.selected.item.path,o.selected.item.variants[e].preview)}),o.$watch("inputList",function(e){angular.isArray(e)&&(!function t(e){angular.forEach(e,function(e){angular.isArray(e.items)&&e.items.findAndRemove(function(e){return angular.isString(e.workshopid)}),angular.isArray(e.nestedGroupList)&&t(e.nestedGroupList)})}(o.groupList),angular.forEach(e.filter(function(e){return angular.isString(e.workshopid)}),c))},!0),o.workshopController.callbacks.push(o),o.$on("$destroy",function(){window.effectListModalCtrl=null,n.callEditor("stopEffectPreview"),o.workshopController.callbacks.findAndRemove(o)})}]),angular.module("wallpaperbrowserApp").directive("nativeDropTarget",["$translate","utils","dragdrop",function(p,u,e){return{restrict:"A",scope:{nativeDropTarget:"&",ndtExtensionTag:"=",ndtConfig:"=",ndtInternalFunction:"&",ndtInternalCondition:"=",ndtDesiredModalDepth:"=",ndtEnabled:"="},link:function(r,s){var l,a,n=!0,i=r.ndtDesiredModalDepth||0;function o(e){if(!angular.isDefined(l)){var t=e||angular.element("#nativeDropLayer");(l=angular.element(document.createElement("div"))).addClass("nativeDropHoverIndicator "+(r.ndtConfig&&r.ndtConfig.class||"")),r.ndtConfig&&r.ndtConfig.disabled&&l.addClass("disabled"),t.append(l);var a=angular.element(s),i=a.offset();if(i.left-=5,i.top-=5,l.offset(i),l.width(a.outerWidth()),l.height(a.outerHeight()),angular.isObject(r.ndtConfig)&&angular.isDefined(r.ndtConfig.label)){var n=angular.element(document.createElement("div"));n.addClass("nativeDropHoverLabel");var o="";angular.isString(r.ndtConfig.icon)&&(o='<div><span class="'+r.ndtConfig.icon+'"></span></div>'),n.html(o+p.instant(r.ndtConfig.label).toString()),l.append(n)}}}function c(){angular.isUndefined(l)||(l.remove(),l=void 0)}function d(e){if(angular.isUndefined(l))a=!1;else{var t=l.offset();(a=!(e.x<t.left||e.x>t.left+l.outerWidth()||e.y<t.top||e.y>t.top+l.outerHeight()||r.ndtConfig&&r.ndtConfig.disabled))?l.addClass("over"):l.removeClass("over")}}angular.isFunction(r.ndtInternalFunction)&&angular.isFunction(r.ndtInternalCondition)&&(e.registerContainer(s,{condition:r.ndtInternalCondition,onMouseEnter:function(){angular.isDefined(l)&&l.addClass("over")},onMouseLeave:function(){angular.isDefined(l)&&l.removeClass("over")},onMouseMove:function(){},onElementDropped:function(e,t){r.ndtInternalFunction({data:t})}},"renderable"),r.$on("onInternalDropStart",function(e,t){r.ndtInternalCondition(t)&&o(angular.element("body"))}),r.$on("onInternalDropStop",function(){c()})),r.$on("onNativeDropStart",function(e,a){if(n&&(!angular.isDefined(r.ndtEnabled)||r.ndtEnabled)){var t=angular.isString(r.ndtExtensionTag)?[r.ndtExtensionTag]:angular.isArray(r.ndtExtensionTag)?r.ndtExtensionTag:void 0;if(angular.isArray(t)){var i=!1;if(angular.forEach(t,function(t){angular.forEach(a.files,function(e){i=i||u.isExtension(e,t)})}),!i)return}angular.isObject(r.ndtConfig)&&angular.isFunction(r.ndtConfig.fnCondition)&&!r.ndtConfig.fnCondition(a.files)||(o(),d(a))}}),r.$on("onNativeDropStop",function(){c()}),r.$on("onNativeDropMove",function(e,t){d(t)}),r.$on("onNativeDropDropped",function(e,t){d(t),a&&angular.isFunction(r.nativeDropTarget)&&r.nativeDropTarget({droppedFiles:t.files}),c()}),r.$on("modalVisible",function(e,t){n=t===i}),r.$on("$destroy",function(){e.unregisterContainer(s)})}}}]),angular.module("wallpaperbrowserApp").service("localeLoaderSupport",["$sanitize",function(i){var t={};this.insertTranslations=function(e){e=angular.copy(e),angular.forEach(e,function(a){angular.forEach(angular.copy(a),function(e,t){angular.isString(t)&&0===t.indexOf("ui_")?a[t]=i(a[t]):delete a[t]})}),angular.merge(t,e)},this.getTranslations=function(e){return t[e]}}]).filter("san",["$sanitize",function(t){return function(e){return t(e)}}]),angular.module("wallpaperbrowserApp").service("contextMenu",["$document","$translate","$compile","$timeout",function(e,p,u,g){var s,i=this,l=angular.element(e[0].body),f=angular.element(window),m=[];function v(){angular.forEach(m,function(e){e.$destroy()}),m=[],l.off("mousedown.ctxMenuDown"),l.off("wheel.ctxMenuDown"),s&&(s.remove(),s=void 0)}function c(e,t,a){var i=f.width(),n=f.height(),o=t.innerWidth(),r=t.innerHeight(),s={left:Math.floor(e.pageX)+1,top:Math.floor(e.pageY)};if(a&&a.target){a.target=angular.element(a.target);var l=a.target.offset(),c=(a.target.outerWidth(),a.target.outerHeight());s.left=Math.floor(l.left),s.top=Math.floor(l.top)+c,s.left+o>i&&(s.left-=s.left+o-i,s.left=Math.max(0,s.left)),s.top+r>n&&(s.top=l.top-r,s.top=Math.max(0,s.top))}else s.left+o>i&&(s.left-=o,s.left=Math.max(0,s.left)),s.top+r>n&&(s.top-=s.top+r-n,s.top=Math.max(0,s.top));t.css(s)}function h(c,e){var d=angular.element(document.createElement("ul"));return d.addClass("dropdown-menu ctxMenu"),angular.forEach(e,function(a){var i,n,e;if("slider"===a.type){i=angular.element(document.createElement("li")),n=angular.element(document.createElement("a")),(e=angular.element(document.createElement("span"))).addClass("fas fa-fw ctxMenuIcon"),a.icon&&e.addClass(a.icon),n.addClass("ctxLink"),n.append(e),i.append(n);var t=c.$new();return t.entry=a,t.callbackChange=function(){a.options.onChange(a.options.value)},m.push(t),u('<rzslider rz-slider-model="entry.options.value" rz-slider-options="{ceil:entry.options.max, floor:entry.options.min, enforceStep:false, onChange:callbackChange}"></rzslider>')(t,function(e){e.addClass("ctxSlider"),n.append(e)}),void d.append(i)}if("divider"===a.type){var o=angular.element(document.createElement("li"));return o.addClass("divider"),void d.append(o)}i=angular.element(document.createElement("li")),n=angular.element(document.createElement("a")),e=angular.element(document.createElement("span"));var r=angular.element(document.createElement("span"));if(a.icon&&e.addClass(a.icon),e.addClass("fa-fw ctxMenuIcon"),n.addClass("ctxLink"),n.addClass(a.class),n.append(e),r.addClass("ctxLabel"),r.text(p.instant(a.label)),a.labelElement=r,n.append(r),a.hotkey){var s=angular.element(document.createElement("span"));s.addClass("ctxHotkey "+a.hotkeyClass),s.text(a.hotkey),n.append(s)}if(angular.isFunction(a.callback)&&n.click(function(){a.callback(a.callbackData),v(),window.safeApply(c)}),i.append(n),angular.isArray(a.nested)){var l=angular.element(document.createElement("span"));l.addClass("fas fa-fw fa-chevron-right ctxChevron"),n.append(l),n.hover(function(){if(d.lastOpenContextMenu&&d.lastOpenContextMenu.p!==n&&(d.lastOpenContextMenu.p.nestedMenu=void 0,d.lastOpenContextMenu.e.remove(),d.lastOpenContextMenu=void 0),g.cancel(n.pendingTimeout),!n.nestedMenu){var e=h(c,a.nested),t=angular.element(document.createElement("div"));t.addClass("ctxMenuWrapper"),t.append(e),n.append(t),n.nestedMenu=t,d.lastOpenContextMenu={e:t,p:n},g(function(){t&&(t.addClass("open"),function(e,t){var a=t.offset(),i=t.position(),n=a.left;i.left+=t.width(),a.left+=t.width();var o=f.width(),r=f.height(),s=e.innerWidth(),l=e.innerHeight();a.left+s>o&&(i.left-=s+t.width(),i.left=Math.max(-n,i.left)),a.top+l>r&&(i.top-=a.top+l-r,i.top=Math.max(20-a.top+t.position().top,i.top),r-20<l&&(e.addClass("ctxMenuOverflow"),i.height=r-20)),e.css(i)}(e,i))})}},function(){g.cancel(n.pendingTimeout),n.pendingTimeout=g(function(){n.nestedMenu&&(n.nestedMenu.remove(),n.nestedMenu=void 0)},1e3)})}d.append(i)}),d}this.open=function(e,t,a,i){function n(e){s&&s[0].contains(e.target)||v()}v(),l.on("mousedown.ctxMenuDown",n),l.on("wheel.ctxMenuDown",n);var o=angular.element(document.createElement("div"));o.addClass("ctxMenuWrapper");var r=h(e,a);c(t,r,i&&i.placement),o.append(r),s=o,l.append(s),g(function(){s&&(s.addClass("open"),c(t,r,i&&i.placement))})},this.builder=function(){var o=[];return{open:function(e,t,a){i.open(e,t,o,a)},getElements:function(){return o},button:function(e,t,a,i,n){return angular.isString(t)?o.push({label:e,icon:t,callback:a,callbackData:i,class:n}):angular.isFunction(t)&&o.push({label:e,callback:t}),this},hotkey:function(e,t){return o[o.length-1].hotkey="("+e+")",o[o.length-1].hotkeyClass=t||"",this},slider:function(e,t){return o.push({icon:e,type:"slider",options:t}),this},divider:function(){return o.push({type:"divider"}),this},subMenu:function(e,t,a){return o.push({label:e,icon:t,nested:angular.isObject(t)?t.getElements():a.getElements()}),this},empty:function(){return 0===o.length},id:function(e){return o.last().id=e,this},updateLabel:function(t,a){return angular.forEach(o,function(e){e.id===t&&(e.label=a,e.labelElement&&e.labelElement.text(a))}),this}}}}]),angular.module("wallpaperbrowserApp").controller("EditorParticleEditorModalCtrl",["$scope","$q","$uibModalInstance","$translate","$timeout","modals","host","utils","data",function(o,r,e,a,t,s,l,i,n){var c,d={color:"0.5 0.5 0.5",showaxis:!0,showstats:!0};function p(){angular.isDefined(c)&&(t.cancel(c),c=void 0)}function u(){l.callEditor("getParticleStats",o.currentParticle.id).then(function(e){o.particleStats=e}),p(),c=t(u,1e3)}function g(t){o.selected={},p(),l.callEditor("loadParticleInEditor",t,o.particleeditorsettings).then(function(e){o.elementGroups=e.elementGroups,o.objectProperties=e.properties,o.currentParticle={id:e.id,path:t},o.selected={item:o.elementGroups[0].items[0]},angular.forEach(o.elementGroups,function(e){angular.forEach(e.items,function(e){e.viewport&&angular.forEach(e.properties,function(e){"reset"===e.key?e.value=d:e.value=o.particleeditorsettings[e.key]})})}),u()})}function f(){angular.isObject(o.currentParticle)&&l.callEditor("saveParticle",o.currentParticle.id,o.currentParticle.path)}window.particleEditorCtrl=o,angular.isObject(n.editor.editorSettings.particleeditorsettings)||(n.editor.editorSettings.particleeditorsettings=d),o.data=n,o.particleeditorsettings=n.editor.editorSettings.particleeditorsettings,o.elementGroups={},o.selected={},o.propertyControl={sendAssetPropertyChange:function(e,t,a){return n.editor.sendAssetPropertyChange(e,t,a,"particle")},navigateProperty:function(e,t){o.selected.item=o.objectProperties[e][t]},importTextureFile:function(e,t,a,i){return n.editor.importTextureFile(e,t,a,i,"particle","particle")},openMaterialBrowser:function(e){n.editor.openMaterialBrowser(e,"particle",["particle","util"])},resetTextureFile:function(e,t){return n.editor.resetTextureFile(e,t,"particle")},duplicateTextureFile:function(e,t){return n.editor.duplicateTextureFile(e,t,"particle")}},o.viewportControl={sendAssetPropertyChange:function(e,t){console.log(t);var a=angular.isArray(t)?t:[t];angular.forEach(a,function(e){o.particleeditorsettings[e.key]=e.value}),l.callEditor("updateParticleEditorSettings",o.particleeditorsettings)}},o.replaceAssets=function(e){o.elementGroups=e.elementGroups,o.objectProperties=e.properties,o.selected={item:o.elementGroups[0].items[0]}},o.ok=function(){f(),e.close(o.data.particle)},o.cancel=function(){f(),e.close()},o.deleteParticle=function(t){a("ui_editor_particle_delete_particle_body",{particle:t}).then(function(e){return s.open("genericConfirm",{data:{title:"ui_editor_particle_delete_particle_header",message:e,leftIcon:"images/warning.png",cancelVisible:!0,okVisible:!0}})}).then(function(){l.callEditor("deleteParticle",t).then(function(){angular.isObject(o.currentParticle)&&o.currentParticle.path===t&&(o.currentParticle=void 0),o.data.existingParticles.findAndRemove(function(e){return e.value===t}),0<o.data.existingParticles.length?o.data.particle=o.data.existingParticles[0].value:delete o.data.particle})})},o.duplicateParticle=function(e){var t={title:"ui_editor_particle_duplicate_particle_header",message:"ui_editor_particle_duplicate_particle_body",cancelVisible:!0,okVisible:!0,textinputVisible:!0,textinput:i.incrementNameIndex("new_particle_system",o.data.existingParticles.map(function(e){return e.value}))};s.open("genericConfirm",{data:t}).then(function(){return f(),l.callEditor("createParticle",{name:t.textinput,source:e}).then(function(e){o.data.existingParticles.push({value:e.file,label:e.name}),o.data.particle=e.file})})},o.newParticle=function(){var e={title:"ui_editor_particle_new_particle_header",message:"ui_editor_particle_new_particle_body",cancelVisible:!0,okVisible:!0,textinputVisible:!0,textinput:"new particle system",droplistVisible:!0,droplistOptions:n.editor.particleDefaultPresets,droplistSelected:n.editor.particleDefaultPresets[0].value};s.open("genericConfirm",{data:e}).then(function(){return l.callEditor("createParticle",{name:e.textinput,source:e.droplistSelected}).then(function(e){o.data.existingParticles.push({value:e.file,label:e.name}),o.data.particle=e.file})})},o.addElement=function(t,a){var e,i={title:"ui_editor_particle_add_element_"+a+"_header",message:"ui_editor_particle_add_element_"+a+"_body",cancelVisible:!0,okVisible:!0,selectionVisible:!0};if("children"===a){var n=angular.copy(o.data.existingParticles);n.findAndRemove(function(e){return e.value===o.data.particle}),e=r.when(n)}else e=l.callEditor("getAvailableParticleElements",a);e.then(function(e){return i.selectionItems=e,i.selectedItem=e[0],s.open("genericConfirm",{data:i})}).then(function(){var e=i.selectedItem.value;return l.callEditor("addParticleElement",o.currentParticle.id,a,e)}).then(function(e){t.items=angular.copy(t.items),t.items.push(e),o.selected.item=e})},o.onElementDragged=function(e,t,a){return l.callEditor("orderParticleElements",o.currentParticle.id,a,e,t)},o.onElementRemoved=function(e,t,a){var i=e.indexOf(t);if(!(i<0))return e.splice(i,1),l.callEditor("removeParticleElement",o.currentParticle.id,a,t.id)},angular.isString(o.data.particle)&&g(o.data.particle),o.$watch("data.particle",function(e,t){angular.isString(e)&&e!==t&&(f(),g(e))}),o.$on("$destroy",function(){l.callEditor("stopParticleEditorPreview"),window.particleEditorCtrl=void 0,p()}),o.$on("modal.closing",function(e,t){"escape key press"===t&&(e.preventDefault(),o.cancel())})}]),angular.module("wallpaperbrowserApp").controller("EditorMaterialsModalCtrl",["$scope","$q","$uibModalInstance","$translate","$timeout","modals","utils","host","data",function(a,e,t,i,n,o,r,s,l){var c=[];function d(){c.length=0}function p(){!function e(){if(0!==c.length){var t=c.shift();return n(function(){return s.callEditor("getTexturePreview",{id:t.local,path:t.local,size:128})}).then(e)}}()}function u(t){a.visibleMaterials=[],angular.forEach(a.availableMaterials,function(e){(!t||1<t.length&&r.smartStringCompare(t,e.local))&&a.visibleMaterials.push(e)})}a.data=l,a.selected={item:void 0},a.ok=function(){t.close(a.selected.item.local)},a.cancel=function(){t.dismiss()},a.texturePreviews=r.getTexturePreviews(),s.callEditor("getAvailableTextures",l.subDirectory||"").then(function(e){a.availableMaterials=e,angular.forEach(e,function(e){e.local===l.currentPath&&(a.selected.item=e)}),d(),c=angular.copy(e),p(),u()}),a.$on("$destroy",function(){d()}),a.$watch("textureFilter",function(e,t){angular.isString(e)&&e!==t&&u(e)})}]),angular.module("wallpaperbrowserApp").controller("BrowseSplitMonitorModalCtrl",["$scope","$uibModalInstance","data",function(t,a,e){t.directionOptions=[{label:"ui_browse_monitors_vertical",value:0},{label:"ui_browse_monitors_horizontal",value:1}],t.settings=angular.copy(e),t.settings.config.position*=t.settings.bounds[t.settings.config.direction].max,t.settings.config.position=Math.floor(t.settings.config.position),t.resetPosition=function(){var e=t.settings.bounds[t.settings.config.direction].max;t.settings.config.position=e/2,t.settings.config.position=Math.floor(t.settings.config.position)},t.ok=function(){var e=t.settings.bounds[t.settings.config.direction].max;angular.isNumber(t.settings.config.position)||(t.settings.config.position=e/2,t.settings.config.position=Math.floor(t.settings.config.position)),t.settings.config.position=Math.max(1,Math.min(e-1,t.settings.config.position)),t.settings.config.position/=e,a.close(t.settings)},t.cancel=function(){a.dismiss("cancel")}}]),angular.module("wallpaperbrowserApp").directive("monitorSelection",["$document","$compile",function(o,S){return{restrict:"E",scope:{msMonitors:"=",msScale:"=",msSplits:"=",msGroups:"=",msLayout:"=",msSelectedMonitor:"=",msSelectionState:"=",msUserMonitorSettings:"=",msMakeSelection:"&",msOnSplitMoved:"&",msSplitDblClick:"&",msCreateGroup:"&",msMonitorContextMenu:"&",msSplitContextMenu:"&"},link:function(l,a){var s,c=a.parent(),d=[],p=[],e=angular.element(o[0].body),u=[],g=[];function f(e,t){p.push({object:e,element:t})}function m(t,e){e.click(function(){l.msSelectionState.createGroup?l.msCreateGroup({monitors:d}):l.msMakeSelection({monitor:t}),window.safeApply(l)}),e.dblclick(function(){l.msSelectionState.createGroup||(l.msMakeSelection({monitor:t,toggleMonitorSelection:!0}),window.safeApply(l))}),e.contextmenu(function(e){l.msMonitorContextMenu({$event:e,monitor:t}),window.safeApply(l)})}function v(e){var o=angular.element(document.createElement("div")),t=angular.element(document.createElement("div")),a=angular.element(document.createElement("div")),i=angular.element(document.createElement("div"));!function(){var i=l.$new();u.push(i);function n(){return e.group&&e.group.location||e.location}i.isAudioEnabled=function(){return!angular.isObject(l.msUserMonitorSettings)||!angular.isObject(l.msUserMonitorSettings[n()])||l.msUserMonitorSettings[n()].videoaudiooutput},S("<div class=\"audioToggle fa\" ng-class=\"{'fa-volume-up':isAudioEnabled(),'fa-volume-mute dangerText':!isAudioEnabled()}\" tooltip=\"{{isAudioEnabled() ? 'ui_browse_monitors_mute' :'ui_browse_monitors_unmute'}}\"></div>")(i,function(a){a.click(function(e){var t=!i.isAudioEnabled();l.msUserMonitorSettings=l.msUserMonitorSettings||{},l.msUserMonitorSettings[n()]=l.msUserMonitorSettings[n()]||{},l.msUserMonitorSettings[n()].videoaudiooutput=t,a.removeClass("fa-volume-up fa-volume-mute dangerText"),a.addClass(t?"fa-volume-up":"fa-volume-mute dangerText"),i.muteToolTip=t?"ui_browse_monitors_mute":"ui_browse_monitors_unmute",e.stopPropagation(),window.safeApply(l)}),a.dblclick(function(e){e.stopPropagation()}),o.append(a)})}(),o.addClass("inner"),t.addClass("cell"),a.addClass("number"),i.addClass("resolution");var n=e.index+1;e.isClone?n="C"+(e.group?e.group.index+1:""):e.isGroup?n="G"+n:e.splitIndex&&(n="S"+e.splitIndex),i.text(Math.round(e.w)+"x"+Math.round(e.h)),a.text(n),t.append(a),o.append(t),o.append(i);var r=e.group&&e.group.wallpaper||e.wallpaper;if(r){var s=l.$watch(function(){return r.preview},function(e){if(e)o.css({"background-image":"url('"+e+"')"});else{var t=angular.element(document.createElement("div"));t.addClass("title"),t.text(r.title),o.append(t)}});g.push(s)}return o}function h(e,t,a){var i=0===e.direction,n=angular.element(document.createElement("div"));if(n.addClass("monitorSplitUnit"),angular.isObject(l.msSplits[t.location])){var o=l.msSplits[t.location];n.addClass("noHover"),n.append(b(o))}else{t.isClone&&0===l.msLayout?m(t.group,n):m(t,n),f(t,n);var r=v(t);n.append(r)}return a?i?n.css({width:(e.w-e.w*e.position)*l.msScale}):n.css({height:(e.h-e.h*e.position)*l.msScale}):i?n.css({width:e.w*e.position*l.msScale}):n.css({height:e.h*e.position*l.msScale}),n}function b(t){var e=angular.element(document.createElement("div")),a=0===t.direction;e.addClass(a?"monitorSplitContainerVertical":"monitorSplitContainerHorizontal"),e.append(h(t,t.left,!1)),e.append(h(t,t.right,!0));var i=angular.element(document.createElement("div"));i.addClass("monitorSplitDrag"),i.addClass(a?"vertical":"horizontal");var n={width:a?4:t.w*l.msScale,height:a?t.h*l.msScale:4,top:a?0:t.h*t.position*l.msScale-2,left:a?t.w*t.position*l.msScale-2:0};i.css(n),e.append(i);var o=a?t.w:t.h,r=l.msSplits[t.location+"/R"];return angular.isObject(r)&&r.direction===t.direction&&(o*=t.position+(1-t.position)*r.position),i.on("mousedown",function(e){s=s||{split:t,element:i,isVertical:a,elementCss:n,lastX:e.pageX,lastY:e.pageY,max:o*l.msScale-5}}),i.dblclick(function(){l.msSplitDblClick({location:t.location}),window.safeApply(l)}),i.contextmenu(function(e){l.msSplitContextMenu({$event:e,location:t.location}),window.safeApply(l)}),e}function i(e,t){t=t||e;var a,i,n=l.msScale,o=angular.element(document.createElement("div"));return o.addClass("monitorSelectionMonitor"),o.css({left:Math.floor(t.x*n),top:Math.floor(t.y*n),width:Math.floor(t.w*n),height:Math.floor(t.h*n)}),angular.isObject(l.msSplits)&&angular.isDefined(l.msSplits[e.location])?(o.addClass("noHover"),o.append(b(l.msSplits[e.location]))):o.append((a=e,(i=angular.element(document.createElement("div"))).addClass("monitorRoot"),a.isClone&&0===l.msLayout?m(a.group,i):m(a,i),i.append(v(a)),i)),f(e,o),o}function n(){angular.forEach(p,function(e){e.object===l.msSelectedMonitor||e.object.group===l.msSelectedMonitor?e.element.addClass("active"):e.element.removeClass("active")})}function _(e){return{leftMin:e.x,leftMax:e.x+e.w,topMin:e.y,topMax:e.y+e.h}}function y(e,t){return{leftMin:Math.min(e.leftMin,t.leftMin),leftMax:Math.max(e.leftMax,t.leftMax),topMin:Math.min(e.topMin,t.topMin),topMax:Math.max(e.topMax,t.topMax)}}function t(){if(angular.forEach(u,function(e){e.$destroy()}),u=[],p=[],angular.forEach(g,function(e){e()}),s=void 0,a.empty(),1===l.msLayout){if(l.msMonitors&&0<l.msMonitors.length){var t=_(l.msMonitors[0]);angular.forEach(l.msMonitors,function(e){t=y(t,_(e))}),t.x=t.leftMin,t.w=t.leftMax-t.leftMin,t.y=t.topMin,t.h=t.topMax-t.topMin;var e=i(l.msMonitors[0],t);a.append(e)}}else 2===l.msLayout?angular.forEach(l.msMonitors,function(e){var t=i(e);a.append(t)}):(angular.forEach(l.msMonitors,function(e){if(!e.isInGroup||1!==e.group.layout){var t=i(e);a.append(t)}}),angular.forEach(l.msGroups,function(e){if(1===e.layout){var t=i(e);a.append(t)}}));n()}function w(o){var r;return angular.forEach(p,function(e){var t=e.object;if(2===l.msSelectionState.createGroup){if(angular.isObject(l.msSplits[t.location]))return}else if(t.isSplit||t.isInGroup)return;var a,i,n=_(t);a=n,(i=o).left>=a.leftMin&&i.left<a.leftMax&&i.top>=a.topMin&&i.top<=a.topMax&&(r=t)}),r}function k(n){var o=[];return angular.forEach(p,function(e){if(!e.object.isSplit&&!e.object.isInGroup){var t,a,i=_(e.object);a=i,(t=n).leftMin<a.leftMax&&t.leftMax>a.leftMin&&t.topMin<a.topMax&&t.topMax>a.topMin&&o.push(e)}}),o}e.on("mousemove.splitdrag",function(e){if(s){var t={};s.isVertical?(s.elementCss.left+=e.pageX-s.lastX,s.lastX=e.pageX,t.left=s.elementCss.left,t.left=Math.max(1,Math.min(s.max,t.left))):(s.elementCss.top+=e.pageY-s.lastY,s.lastY=e.pageY,t.top=s.elementCss.top,t.top=Math.max(1,Math.min(s.max,t.top))),s.element.css(t)}}),e.on("mouseup.splitdrag",function(){if(s){var e=s.element.position();e=Math.round(((s.isVertical?e.left:e.top)+2)/l.msScale),(e/=s.isVertical?s.split.w:s.split.h)!==s.split.position&&(l.msOnSplitMoved({location:s.split.location,position:e}),window.safeApply(l))}s=void 0}),e.on("mousemove.monitorCreateGroup",function(e){if(0!==l.msSelectionState.createGroup){d=[];var t={top:e.pageY,left:e.pageX},a=c.offset();t.left-=a.left,t.top-=a.top,t.left/=l.msScale,t.top/=l.msScale,angular.forEach(p,function(e){e.element.removeClass("groupHover")});var i=w(t);if(angular.isObject(i)&&i!==l.msSelectedMonitor){var n;if(1===l.msSelectionState.createGroup){var o=_(l.msSelectedMonitor),r=_(i);r=y(o,r),n=function e(a){var t=k(a);return angular.forEach(t,function(e){var t=_(e.object);a=y(a,t)}),k(a).length>t.length?e(a):t}(r)}else n=[],angular.forEach(p,function(e){e.object!==i&&e.object!==l.msSelectedMonitor||n.push(e)}),l.msSelectedMonitor.isGroup&&n.push(l.msSelectedMonitor);angular.forEach(n,function(e){e.isGroup?d.push(e):(e.element.addClass("groupHover"),d.push(e.object))})}}}),l.$watch("msMonitors",t,!0),l.$watch("msScale",t,!0),l.$watch("msSplits",t,!0),l.$watch("msGroups",t,!0),l.$watch("msLayout",t,!0),l.$watch("msSelectedMonitor",n),l.$on("$destroy",function(){e.off("mousemove.splitdrag"),e.off("mouseup.splitdrag"),e.off("mousemove.monitorCreateGroup")})}}}]),angular.module("wallpaperbrowserApp").controller("BrowseWallpaperWorkshopInfoModalCtrl",["$scope","$uibModalInstance","$rootScope","modals","utils","data",function(e,t,a,i,n,o){e.data=o,e.filterConfig=o.filterConfig,e.ok=function(){t.close(e.genres)},e.cancel=function(){t.dismiss("cancel")},e.isDefaultFilterSelect=function(){return void 0!==e.filterConfig.Anime},o.canCancel||i.setPreventModalClose(!0),e.$on("$destroy",function(){i.setPreventModalClose(!1)})}]),angular.module("wallpaperbrowserApp").controller("BrowseWallpaperSharePresetModalCtrl",["$scope","$uibModalInstance","data",function(i,e,t){i.data={preset:angular.toJson(t.preset,!0)},i.ok=function(){e.close(angular.fromJson(i.data.preset))},i.cancel=function(){e.dismiss("cancel")},i.$watch("data.preset",function(e){var t;try{angular.isString(e)&&0<e.length&&(t=atob(e),angular.isString(t)&&0<t.length&&(e=t,i.data.preset=e))}catch(e){}var a={exception:""};i.isJsonValid=JSON.validate(e,a),i.jsonError=a.exception}),i.copyPreset=function(){var e=angular.element("#jsonTextArea"),t=angular.element("#jsonTextAreaTmp"),a=e.val();t.val(btoa(a)),t.select(),document.execCommand("Copy")},i.pastePreset=function(){angular.element("#jsonTextArea").val("").select(),document.execCommand("Paste")}}]),angular.module("wallpaperbrowserApp").controller("BrowseReportModalCtrl",["$scope","$translate","$http","$httpParamSerializer","$uibModalInstance","host","data","utils",function(i,n,a,o,r,s,l,c){i.categories=[{label:"ui_browse_report_modal_category_other",value:"other"},{label:"ui_browse_report_modal_category_genre",value:"genre"},{label:"ui_browse_report_modal_category_rating",value:"rating"},{label:"ui_browse_report_modal_category_copyright",value:"copyright"},{label:"ui_browse_report_modal_category_spam",value:"spam"}],i.descriptions={other:"ui_browse_report_modal_category_other_description",genre:"ui_browse_report_modal_category_genre_description",rating:"ui_browse_report_modal_category_rating_description",copyright:"ui_browse_report_modal_category_copyright_description",spam:"ui_browse_report_modal_category_spam_description"};var d={status:"initial"},e=c.getAvailableTags();i.genres=e.map(function(e){return{label:e,value:e}}),angular.forEach(i.genres,function(t){c.translateTag(t.value).then(function(e){t.label=e})}),i.ratings=[{value:"Questionable",label:"ui_workshop_tags_rating_questionable"},{value:"Mature",label:"ui_workshop_tags_rating_mature"},{value:"Ban",label:"ui_workshop_tags_rating_ban"}],i.data=l.wallpaper,i.steamAuth=l.steamAuth,i.translatedCurrentTags="",i.translatedCurrentRatingTags="",angular.forEach(l.wallpaper.tags.split(","),function(t){e.includes(t)?(i.genres.findAndRemove(function(e){return e.value===t}),c.translateTag(t).then(function(e){0<i.translatedCurrentTags.length&&(i.translatedCurrentTags+=", "),i.translatedCurrentTags+=e})):"Everyone"!==t&&"Questionable"!==t&&"Mature"!==t||c.translateRatingTag(t).then(function(e){0<i.translatedCurrentRatingTags.length&&(i.translatedCurrentRatingTags+=", "),i.translatedCurrentRatingTags+=e})}),i.context={category:i.categories[0].value,workshopid:i.data.workshopid,creatorid:i.data.authorsteamid,suggestedgenre:"",suggestedrating:""},i.ok=function(){var e=angular.copy(i.context);"rating"===e.category&&"Ban"===e.suggestedrating&&(e.category="violation",e.suggestedrating="");var t=o({steamauthticket:l.steamAuth.ticket});i.reportInProgress=!0,a.post(l.backendUrl+"/api/reports/v1?"+t,e).then(function(e){i.reportInProgress=!1,e&&e.error?n("ui_browse_report_modal_error").then(function(e){c.showError(e.toString())}):(r.close(),n("ui_browse_report_modal_success").then(function(e){c.showSuccess(e.toString())}))}).catch(function(a){if(401===(a&&a.status)&&"initial"===d.status)d.status="token",i.steamAuth.ticket="",s.callDeferred("browseWallpaperObject","refreshAuthToken");else{i.reportInProgress=!1;var e=401===(a&&a.status)?"ui_browse_report_modal_error_401":"ui_browse_report_modal_error";n(e).then(function(e){var t=a&&a.status&&" (HTTP "+a.status+")";c.showError(e.toString()+t)})}})},i.cancel=function(){r.dismiss("cancel")},i.isReportDisabled=function(){return"genre"===i.context.category&&i.context.suggestedgenre.length<1||("rating"===i.context.category&&i.context.suggestedrating.length<1||("copyright"===i.context.category||(!i.context.note||i.context.note.length<1)))},i.openDMCA=function(){window.ui.shellexecute("https://steamcommunity.com/dmca/create/")},i.$watch("context.category",function(){i.context.suggestedgenre="",i.context.suggestedrating=""}),i.$watch("steamAuth.ticket",function(e){angular.isString(e)&&0<e.length&&"token"===d.status&&(d.status="done",i.ok())})}]),angular.module("wallpaperbrowserApp").controller("EditorRatingModalCtrl",["$scope","$translate","$uibModalInstance","data",function(e,t,a,i){e.data=i,e.highlight={rating:""},e.ok=function(e){i.contentrating=e,a.close()},e.cancel=function(){a.dismiss("cancel")}}]),angular.module("wallpaperbrowserApp").controller("AgeGateModalCtrl",["$scope","$uibModalInstance",function(i,e){var n=new Date;i.okDisabled=!0,i.date={day:n.getDate(),month:n.getMonth(),year:n.getFullYear()},i.ok=function(){i.okDisabled||e.close()},i.cancel=function(){e.dismiss("cancel")},i.$watchGroup(["date.month","date.year"],function(){var e;i.days=[];var t=i.date.month;if(1===t)if(i.date.year%4==0)for(e=1;e<=29;++e)i.days.push({value:e,label:""+e});else for(e=1;e<=28;++e)i.days.push({value:e,label:""+e});else if(8===t||3===t||5===t||10===t)for(e=1;e<=30;++e)i.days.push({value:e,label:""+e});else for(e=1;e<=31;++e)i.days.push({value:e,label:""+e})}),i.$watch("date",function(e){var t=new Date(e.year,e.month,e.day,0,0,0,0),a=new Date(n.getFullYear()-18,n.getMonth(),n.getDate(),0,0,0,0);i.okDisabled=a<t},!0),function(){i.years=[];for(var e=0;e<100;++e)i.years.push({value:n.getFullYear()-e,label:""+(n.getFullYear()-e)})}(),function(){i.months=[];for(var e=0;e<12;++e)i.months.push({value:e,label:""+(e+1)})}()}]),angular.module("wallpaperbrowserApp").controller("BrowseExploreCreateQueryModalCtrl",["$scope","$uibModalInstance","utils","data",function(t,e,a,i){t.data=i,t.categoryOptions=[{label:"ui_browse_explore_create_query_modal_keyword",value:"keyword"},{label:"ui_browse_explore_create_query_modal_creator",value:"creator"}],a.canUseCollectionsInDiscover()&&t.categoryOptions.push({label:"ui_browse_explore_create_query_modal_collection",value:"collection"}),t.ok=function(){e.close(i.query)},t.cancel=function(){e.dismiss("cancel")},t.validateQuery=function(){switch(t.data.query.category){case"keyword":return angular.isString(t.data.query.keyword);case"creator":case"collection":return/^\d+$/.test(t.data.query.itemid)}return!1},t.$watch("data.query.category",function(e){switch(e){case"keyword":t.queryTypeOptions=[{label:"ui_browse_query_sort_by_trend_year",value:"trend_year"},{label:"ui_browse_query_sort_by_trend_last_week",value:"trend_week"},{label:"ui_browse_query_sort_by_date",value:"most_recent"},{label:"ui_browse_query_sort_most_subscriptions",value:"subscriptions"}],t.data.query.querytype=t.queryTypeOptions[0].value;break;case"creator":t.queryTypeOptions=[{label:"ui_browse_query_sort_by_votes",value:"published_votes"},{label:"ui_browse_query_sort_by_date",value:"published_desc"}],t.data.query.querytype=t.queryTypeOptions[0].value}delete t.data.query.keyword,delete t.data.query.itemid})}]),angular.module("wallpaperbrowserApp").directive("ngRightClick",["$parse",function(n){return function(t,e,a){var i=n(a.ngRightClick);e.bind("contextmenu",function(e){t.$apply(function(){e.preventDefault(),i(t,{$event:e})})})}}]),angular.module("wallpaperbrowserApp").directive("wallpaperThumbnail",["$translate","$document","$timeout","$compile","utils","dragdrop",function(S,x,E,C,A,P){return{restrict:"E",scope:{wtWallpapers:"=",wtWallpaperFlags:"=",wtFolders:"=",wtSelection:"=",wtMultiselection:"=",wtEnabledragdrop:"=",wtTag:"=",wtMousecallback:"&",wtSelectioncallback:"&",wtFlagcallback:"&",wtBlacklist:"="},link:function(O,o,M){o=angular.element(o);var r,s=[],l=[],n=[],t=!1,c={},d=[];function D(e){e.stopPropagation()}function p(e){r&&(r.removeClass("selected"),r=void 0),e&&(r=e).addClass("selected")}function u(e){O.wtMultiselection&&O.wtMultiselection.includes(e.ctx.wallpaper)?e.addClass("multiselect"):e.removeClass("multiselect")}function g(e){e.ctx.info&&e.ctx.info.checkbox&&(O.wtWallpaperFlags&&O.wtWallpaperFlags[e.ctx.wallpaper.file]?(e.ctx.info.checkboxChecked.show(),e.ctx.info.checkboxNotChecked.hide(),e.ctx.info.checkbox.addClass("visible")):(e.ctx.info.checkboxChecked.hide(),e.ctx.info.checkboxNotChecked.show(),e.ctx.info.checkbox.removeClass("visible")))}function j(t){if(t.ctx.title[0].innerHTML!==t.ctx.wallpaper.title&&t.ctx.title.text(t.ctx.wallpaper.title),t.ctx.info){if(t.ctx.lastStatus!==t.ctx.wallpaper.status){switch(t.removeClass("installed downloadable"),t.ctx.progress&&"downloading"!==t.ctx.wallpaper.status?(E.cancel(t.ctx.progressShowTimeout),E.cancel(t.ctx.progressHideTimeout),t.ctx.downloadElement.addClass("hideProgress"),"installed"===t.ctx.wallpaper.status&&t.ctx.downloadElement.addClass("finishProgress"),t.ctx.progressHideTimeout=E(function(){d.findAndRemove(t.progressContext),t.progressContext.$destroy(),t.ctx.progress.remove(),delete t.progressContext,delete t.ctx.progress,t.ctx.downloadElement.hide()},700)):t.ctx.progress||"downloading"!==t.ctx.wallpaper.status||(t.ctx.downloadElement.removeClass("finishProgress"),t.ctx.downloadElement.addClass("hideProgress"),t.ctx.downloadElement.show(),t.progressContext=t.ctx.$new(),d.push(t.progressContext),t.ctx.progress=C('<radial-progress class="inner radialProgressContainer" rp-percent="wallpaper.downloadpercent" rp-label="wallpaper.downloadlabel"></radial-progress>')(t.progressContext,function(e){t.ctx.downloadElement.append(e),t.ctx.progressShowTimeout=E(function(){t.ctx.downloadElement.removeClass("hideProgress")})})),"error"===t.ctx.lastStatus?((o=t).removeClass("error"),o.ctx.steamDownloadError&&o.ctx.steamDownloadError.hide()):"error"===t.ctx.wallpaper.status&&((n=t).addClass("error"),n.ctx.steamDownloadError?n.ctx.steamDownloadError.show():(n.ctx.steamDownloadError=angular.element(document.createElement("div")),n.ctx.steamDownloadError.addClass("steamDownloadError"),n.ctx.steamDownloadError.html(S.instant("ui_browse_download_error_restart_steam").toString()),n.append(n.ctx.steamDownloadError))),t.ctx.wallpaper.status){case"installed":t.addClass("installed");break;case"downloadable":t.addClass("downloadable");break;case"downloading":E.cancel(t.ctx.progressHideTimeout)}t.ctx.lastStatus=t.ctx.wallpaper.status}if(t.css({"background-image":(i=t.ctx.wallpaper.previewsmall)?'url("'+i+'")':""}),t.ctx.wallpaper===O.wtSelection?p(t):t===r&&p(),t.ctx.wallpaper.approved?t.ctx.info.approved.show():t.ctx.info.approved.hide(),t.ctx.wallpaper.favorite?t.ctx.info.favorite.show():t.ctx.info.favorite.hide(),"installed"===O.wtTag||t.ctx.wallpaper.local||"installed"!==t.ctx.wallpaper.status?t.ctx.info.iconSave.hide():t.ctx.info.iconSave.show(),O.wtBlacklist&&t.ctx.wallpaper.authorsteamid&&O.wtBlacklist.includes(t.ctx.wallpaper.authorsteamid)?t.addClass("blacklisted"):t.removeClass("blacklisted"),t.ctx.assetCategory&&(t.ctx.assetCategory.removeClass("layers effects scripts"),t.ctx.wallpaper.assettypes&&0<t.ctx.wallpaper.assettypes.length)){var e="ui_query_workshop_modal_asset_category_layers";switch(A.assetGroupType[t.ctx.wallpaper.assettypes[0]]){case"layers":t.ctx.assetCategory.addClass("layers");break;case"effects":t.ctx.assetCategory.addClass("effects"),e="ui_query_workshop_modal_asset_category_effects";break;case"scripts":t.ctx.assetCategory.addClass("scripts"),e="ui_query_workshop_modal_asset_category_scripts"}var a=c[e];a||(c[e]=S.instant(e),a=c[e]),t.ctx.assetCategory.text(a)}u(t),g(t,O.wtWallpaperFlags)}var i,n,o}function f(e,t){e.ctx.wallpaper=t,j(e)}var W={click:function(e){t||(O.wtMousecallback({btn:"left",context:e.currentTarget.ctx.wallpaper,$event:e}),window.safeApply(O))},dblclick:function(e){O.wtMousecallback({btn:"dbl",context:e.currentTarget.ctx.wallpaper,$event:e}),window.safeApply(O)},contextmenu:function(e){O.wtMousecallback({btn:"right",context:e.currentTarget.ctx.wallpaper,$event:e}),window.safeApply(O)},folderclick:function(e){e.currentTarget.ctx.editTitle.val(e.currentTarget.ctx.wallpaper.title),e.currentTarget.ctx.title.hide(),e.currentTarget.ctx.editTitle.show(),e.stopPropagation(),e.currentTarget.ctx.editTitle.focus()},folderkeyup:function(e){13!==e.which&&27!==e.which||(27===e.which&&e.currentTarget.ctx.editTitle.val(e.currentTarget.ctx.wallpaper.title),e.currentTarget.ctx.editTitle.blur(),window.safeApply(O))},folderblur:function(e){e.currentTarget.ctx.wallpaper.title=e.currentTarget.ctx.editTitle.val(),e.currentTarget.ctx.title.text(e.currentTarget.ctx.wallpaper.title),e.currentTarget.ctx.editTitle.hide(),e.currentTarget.ctx.title.show(),window.safeApply(O)},toggleplaylist:function(e){var t=angular.element(e.currentTarget).closest(".browseWallpaperImage")[0].ctx.wallpaper;O.wtFlagcallback({wallpaper:t}),window.safeApply(O)}};function m(e){var t=O.$new(!0);t.wallpaper=e;var a=angular.element(document.createElement("div"));a[0].ctx=t,a[0].attachedScope=t,a.ctx=t,a.addClass("browseWallpaperImage");var i=angular.element(document.createElement("img"));i.attr("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAALSURBVAgdY/jPAAACAQEAxV8bXgAAAABJRU5ErkJggg=="),i.addClass("translucentBox"),a.append(i),a.click(W.click),a.dblclick(W.dblclick),a.contextmenu(W.contextmenu);var n,o,r,s,l,c,d,p=angular.element(document.createElement("div")),u=angular.element(document.createElement("div")),g=angular.element(document.createElement("div")),f=angular.element(document.createElement("div"));if("folder"!==e.type){var m=angular.element(document.createElement("div"));m.addClass("progressParent"),(t.downloadElement=m).hide(),a.append(m);var v={},h=angular.element(document.createElement("div")),b=angular.element(document.createElement("span")),_=angular.element(document.createElement("span")),y=angular.element(document.createElement("span"));if(h.addClass("icons"),b.addClass("fas fa-save wallpaperStatusIcon"),_.addClass("fas fa-heart wallpaperStatusIcon"),y.addClass("fas fa-trophy browseWallpaperApprovedBright wallpaperStatusIcon"),v.iconSave=b,v.favorite=_,v.approved=y,b.hide(),_.hide(),y.hide(),h.append(y),h.append(_),h.append(b),u.append(h),"wtFlagcallback"in M){var w=angular.element(document.createElement("div")),k=(n=v,o=angular.element(document.createElement("div")),r=angular.element(document.createElement("div")),s=angular.element(document.createElement("span")),l=angular.element(document.createElement("span")),c=angular.element(document.createElement("span")),d=angular.element(document.createElement("span")),o.click(D),o.dblclick(D),c.addClass("fas fa-check-square checkBox"),d.addClass("far fa-square checkBox"),c.hide(),o.addClass("checkBoxBase"),r.addClass("checkBoxOuter"),s.addClass("fas fa-square checkBoxBackground"),l.append(c),l.append(d),r.append(s),r.append(l),o.append(r),n.checkboxChecked=c,n.checkboxNotChecked=d,o);w.addClass("checker"),w.append(k),v.checkbox=w,p.append(w),k.click(W.toggleplaylist)}t.info=v}else{a.addClass("folder");var S,x,E=angular.element(document.createElement("div")),C=angular.element(document.createElement("span")),A=angular.element(document.createElement("span")),P=angular.element(document.createElement("span")),T=angular.element(document.createElement("input")).attr("type","text");x=e.folderIcon?(S=e.folderIcon.replace("fa ","fas "),e.folderIcon.replace("fa ","fas ")):(S="fas fa-folder folderClosed","fas fa-folder-open folderOpened"),e.folderColor&&(S+=" "+e.folderColor,x+=" "+e.folderColor),A.addClass(S+" fa-stack-1x"),P.addClass(x+" fa-stack-1x"),E.addClass("folderContainer"),C.addClass("browseFolderStack fa-stack"),T.addClass("folderTitleEdit"),T.hide(),u.addClass("editable"),C.append(A),C.append(P),E.append(C),a.append(E),g.append(T),t.editTitle=T,g[0].ctx=t,T[0].ctx=t,g.click(W.folderclick),T.keyup(W.folderkeyup),T.blur(W.folderblur)}if(p.addClass("wallpaperInfo"),u.addClass("caption"),"assetworkshop"===O.wtTag){var R=angular.element(document.createElement("span"));R.addClass("assetCategory"),a.append(R),t.assetCategory=R}t.title=f,g.append(f),u.append(g),p.append(u),a.append(p);var I=angular.element(document.createElement("div"));return I.addClass("selectBorder"),a.append(I),j(a),a}var v,e,a={findElement:function(e){if(1===e.which&&O.wtEnabledragdrop){var t=angular.element(angular.element(e.target).closest(".browseWallpaperImage")[0]),a=t&&t[0]&&t[0].ctx;if(angular.isObject(a)&&angular.isObject(a.wallpaper)&&"downloadable"!==a.wallpaper.status)return{element:t,data:a.wallpaper}}}};function i(){v&&v.element&&v.element.remove(),v=void 0}function h(e){var t=angular.offsetToAncestor(e,o),a={left:Math.min(v.origin.left,t.left),top:Math.min(v.origin.top,t.top),width:Math.abs(v.origin.left-t.left),height:Math.abs(v.origin.top-t.top)};a.top+a.height>o[0].scrollHeight&&(a.height=o[0].scrollHeight-a.top),v.element.css(a)}function b(){e&&(e.cancel(),e=void 0)}function _(){function e(e){var t=A.getElementBounds(e);A.checkBoundsOverlap(i,t)&&a.push(e)}var a=[],i=A.getElementBounds(v.element);return angular.forEach(n,e),angular.forEach(s,e),a}P.registerInitiator(a),o.mousedown(function(t){b(),e=P.beginAutoScroll("browseScroll",o),1===t.which&&O.wtEnabledragdrop&&t.target===o[0]&&P.beginDragTest(t,{start:function(e){!function(e,t){i();var a=angular.offsetToAncestor(e,o);(v={origin:a,element:angular.element(document.createElement("div"))}).element.addClass("browseWallpaperSelectionRectangle"),o.append(v.element),h(t)}(t,e)},finish:function(){var e=_().map(function(e){return e.ctx.wallpaper});O.wtSelectioncallback({items:e,$event:t}),window.safeApply(O),i()},cancel:function(){i()},move:function(e){h(e)}})}),o.contextmenu(function(e){O.wtMousecallback({btn:"right",$event:e}),window.safeApply(O)}),x.mouseup(b);var y=[];if("discover"!==O.wtTag)for(var w=0;w<20;++w){var k=angular.element(document.createElement("div"));k.addClass("browseWallpaperImage pseudo"),y.push(k)}O.$watch("wtWallpapers",function(e){if(!angular.isArray(e))return angular.forEach(s,function(e){e.detach()}),l=s.concat(l),void(s=[]);for(var t=0;t<Math.min(e.length,s.length);++t)f(s[t],e[t]);var a=s.length!==e.length;if(a&&angular.forEach(y,function(e){e.detach()}),0<l.length&&s.length<e.length){var i=Math.min(e.length-s.length,l.length);for(t=0;t<i;++t)f(l[t],e[s.length]),s.push(l[t]),o.append(l[t]);l.splice(0,i)}for(t=s.length;t<e.length;++t){var n=m(e[t]);n.attr("id","wpimg"+t),o.append(n),s.push(n)}if(e.length<s.length){for(t=e.length;t<s.length;++t)l.push(s[t]),s[t].detach();s.splice(e.length,s.length-e.length)}a&&angular.forEach(y,function(e){o.append(e)})}),O.$watch("wtFolders",function(e){if(angular.forEach(n,function(e){e.remove()}),n=[],angular.isArray(e))for(var t=e.length-1;0<=t;--t){var a=m(e[t]);a.attr("id","wpfolder"+t),o.prepend(a),n.push(a)}}),O.$watch("wtWallpaperFlags",function(){angular.forEach(s,g)},!0),O.$watch("wtSelection",function(t){if(!r||r.ctx.wallpaper!==t){var a=!1;angular.forEach(s,function(e){e.ctx.wallpaper===t&&(p(e),a=!0)}),a||p()}}),O.$watch("wtMultiselection",function(){angular.forEach(s,function(e){u(e)}),angular.forEach(n,function(e){u(e)})},!0),O.$on("$destroy",function(){P.unregisterInitiator(a),angular.forEach(d,function(e){e.$destroy()}),d=[]}),O.$on("onInternalDropStart",function(){E(function(){t=!0})}),O.$on("onInternalDropStop",function(){E(function(){t=!1})})}}}]),angular.module("wallpaperbrowserApp").directive("ratingTable",function(){return{templateUrl:"views/templates/ratingtable.html",restrict:"E",scope:{highlight:"="},link:function(){}}}),angular.module("wallpaperbrowserApp").directive("explorescroll",function(){return{restrict:"A",link:function(e,t){function a(){var e={left:0<i.scrollLeft(),right:Math.floor(i.scrollLeft())<Math.floor(i[0].scrollWidth-i.innerWidth())};e.left!==r.left&&(r.left=e.left,e.left?n.show():n.hide()),e.right!==r.right&&(r.right=e.right,e.right?o.show():o.hide())}var i=(t=angular.element(t)).children(".browseExploreQueryScroll"),n=t.children(".exploreArrowLeft"),o=t.children(".exploreArrowRight"),r={left:!0,right:!0};i.scroll(a);var s=new ResizeObserver(a);s.observe(i[0]),a(),e.$on("$destroy",function(){s.disconnect()}),n.click(function(){i[0].scroll({left:i.scrollLeft()-.9*i.innerWidth(),behavior:"smooth"})}),o.click(function(){i[0].scroll({left:i.scrollLeft()+.9*i.innerWidth(),behavior:"smooth"})})}}}),angular.module("wallpaperbrowserApp").directive("intersectionhandler",function(){return{restrict:"A",scope:{ishSentinel:"@",ishCallback:"&"},link:function(t,e){var a=(e=angular.element(e)).find(t.ishSentinel),i=new IntersectionObserver(function(e){angular.isArray(e)&&0!==e.length&&(angular.forEach(e,function(e){t.ishCallback({visible:e.isIntersecting})}),window.safeApply(t))},{root:e[0]});i.observe(a[0]),t.$on("$destroy",function(){i.disconnect()})}}}),angular.module("wallpaperbrowserApp").directive("explorequerytitle",["$rootScope","$q","$translate","utils",function(t,a,r,s){return{restrict:"E",templateUrl:"views/templates/explorequerytitle.html",scope:{eqtQuery:"=",eqtUserInfo:"="},link:function(n){function o(e){n.translatedTitle=e.toString()}function e(){var e=a.when(""),i=angular.isArray(n.eqtQuery.tags)&&0<n.eqtQuery.tags.length;i&&(e=s.translateTag(n.eqtQuery.tags[0])),e.then(function(e){var t={genre:e.toString(),user:n.eqtUserInfo[n.eqtQuery.itemid]&&n.eqtUserInfo[n.eqtQuery.itemid].name||r.instant("ui_browse_details_author_pending").toString(),collectiontitle:n.eqtQuery.collection&&n.eqtQuery.collection.title,keyword:n.eqtQuery.keyword,emoji:n.eqtQuery.emoji};if(i){var a=s.prepareTagForTranslation(n.eqtQuery.tags[0]);r(n.eqtQuery.title+"_"+a).then(o).catch(function(){return r(n.eqtQuery.title,t).then(o)})}else r(n.eqtQuery.title,t).then(o)})}n.translateTag=s.translateTagInstant,n.$watch("eqtQuery",e,!0),n.$watch("eqtUserInfo",e,!0),t.$on("$translateChangeEnd",e)}}}]),angular.module("wallpaperbrowserApp").directive("explorequeryactions",function(){return{restrict:"E",templateUrl:"views/templates/explorequeryactions.html",scope:{eqtQuery:"=",eqtSettings:"=",eqtCallbacks:"="}}}),angular.module("wallpaperbrowserApp").directive("ngVisible",function(){return{restrict:"A",link:function(e,t,a){e.$watch(a.ngVisible,function(e){t.css("visibility",e?"visible":"hidden")})}}}),angular.module("wallpaperbrowserApp").directive("hotkeyinput",["$translate","$q","utils","host","modals",function(s,l,c,d,p){return{restrict:"E",templateUrl:"views/templates/hotkeyinput.html",scope:{hkKeys:"=",hkItem:"=",hkPool:"="},link:function(n,e){var a=angular.element(angular.element(e).find(".hotkeyInput")),o=!1,i={pause:"ui_settings_hotkeys_action_pause",stop:"ui_settings_hotkeys_action_stop",mute:"ui_settings_hotkeys_action_mute",nextwallpaper:"ui_settings_hotkeys_action_next_wallpaper",togglerecord:"ui_settings_hotkeys_action_recording",toggleicons:"ui_settings_hotkeys_action_hide_icons",screenshot:"ui_settings_hotkeys_action_take_screenshot",wallpaper:"ui_settings_hotkeys_action_user_wallpaper",playlist:"ui_settings_hotkeys_action_user_playlist",profile:"ui_settings_hotkeys_action_user_profile",windowbrowser:"ui_settings_hotkeys_action_window_browser",windowsettings:"ui_settings_hotkeys_action_window_settings",windoweditor:"ui_settings_hotkeys_action_window_editor"};function r(e,t){if(n.isInputFocused&&(!angular.isArray(e)||0===e.length))return n.hotkeyLabel=s.instant("ui_settings_hotkeys_prompt_enter_combination").toString(),n.displayFaintText=!0,void(n.showCombinationError=t&&o);n.displayFaintText=!1,d.getVirtualKeyNames().then(function(t){var a="",i=!1;angular.forEach(e,function(e){angular.isString(t[e])&&(o=!0,n.showCombinationError=!1,i&&(a+=" + "),i=!0,a+=t[e])}),n.hotkeyLabel=a})}function t(t){r(t.keys,!0),(t.cancel||t.finished)&&(p.setPreventModalClose(!1),a.blur(),t.finished&&(n.showCombinationError=!1,function(t){var a;angular.forEach(n.hkPool,function(e){e&&e.keys===t||e&&angular.equals(e.keys,t)&&(a=e)});var e=a&&angular.isObject(n.hkItem)&&n.hkItem.action===a.action&&(!angular.isString(n.hkItem.value)||n.hkItem.value===a.value)&&(!angular.isString(n.hkItem.location)||n.hkItem.location===a.location);return angular.isDefined(a)?e?l.when(a):s(i[a.action]).then(function(e){return s("ui_settings_hotkeys_modal_prompt_override_body",{action:e.toString()}).then(function(e){return p.open("genericConfirm",{data:{title:"ui_settings_hotkeys_modal_prompt_override_header",message:e,okVisible:!0,cancelVisible:!0}}).then(function(){return a})})}):l.when()}(t.keys).then(function(e){angular.isObject(e)&&(e.keys.length=0,c.isUserHotkeyAction(e.action)&&n.hkPool.findAndRemove(e)),n.hkKeys.length=0,angular.forEach(t.keys,function(e){n.hkKeys.push(e)})}).catch(function(){n.hkKeys.length=0,r()}))),window.safeApply(n)}a.click(function(e){window.cancelEventImmediately(e)}),a.keydown(function(e){window.cancelEventImmediately(e)}),a.keyup(function(e){window.cancelEventImmediately(e)}),a.keypress(function(e){window.cancelEventImmediately(e)}),a.blur(function(){n.showCombinationError=!1,c.stopHotkeyListener(),n.isInputFocused=!1,r(n.hkKeys),window.safeApply(n)}),n.$on("$destroy",function(){a.off("click"),a.off("keydown"),a.off("keyup"),a.off("keypress"),a.off("blur ")}),n.clearHotkey=function(){n.hkKeys.length=0},n.startHotkeyRecording=function(){o=!1,p.setPreventModalClose(!0),c.startHotkeyListener(t),n.isInputFocused=!0,r()},n.$watch("hkKeys",r,!0),n.isInputFocused=!1}}}]),angular.module("wallpaperbrowserApp").directive("radiobutton",function(){return{templateUrl:"views/templates/radiobutton.html",restrict:"E",scope:{model:"=ngModel",rbDisabled:"=",rbTitle:"=",rbValue:"="},require:"ngModel",link:function(e){e.toggle=function(){angular.isDefined(e.rbDisabled)&&e.rbDisabled||(e.model=e.rbValue)}}}}),angular.module("wallpaperbrowserApp").directive("userProperties",["$timeout","utils","modals","host",function(l,e,t,c){return{templateUrl:"views/templates/userproperties.html",restrict:"E",scope:{upProperties:"=",upProjectData:"=",upSelectedProperty:"=",upVisibleTypes:"="},link:function(n,a){a=angular.element(a),n.properties=[],n.colorPickerOptions=e.getColorPickerDefaults();var i,o=!1,r=angular.isArray(n.upVisibleTypes)&&0<n.upVisibleTypes.length&&"color"===n.upVisibleTypes[0];function s(){var t=0;angular.forEach(n.properties,function(e){delete e.order,e.index=t,++t})}n.isPropertyReadOnly=function(e){return"schemecolor"===e.key},n.moveProperty=function(e,t){var a=n.properties.indexOf(e),i=a+t;i=Math.max(0,Math.min(n.properties.length-1,i)),n.properties.move(a,i),s()},n.movePropertyToIndex=function(e){if(!o){var t=n.properties.indexOf(e);n.properties.move(t,e.index);var a=0;angular.forEach(n.properties,function(e){delete e.order,e.index=a,++a}),s()}},n.orderKeyPress=function(e,t){13===e.which&&(n.movePropertyToIndex(t),o=!0,angular.frameTimeout(l,1,function(){var e=angular.element(a.find(".orderInput")[t.index]);e.select(),e[0].scrollIntoView()}),angular.frameTimeout(l,2,function(){o=!1}))},n.createProperty=function(){t.open("editorUserPropertyDetails",{data:{mode:"create",projectData:n.upProjectData,allowedTypes:n.upVisibleTypes}}).then(function(e){for(var t=n.properties.map(function(e){return e.key}),a=1,i=e.key;t.includes(e.key);)e.key=i+a,++a;n.properties.push(e),angular.isArray(n.activeProperties)&&n.activeProperties.push(e.key),angular.isObject(n.upSelectedProperty)&&!angular.isString(n.upSelectedProperty.selected)&&(n.upSelectedProperty.selected=e.key),s()})},n.editProperty=function(a){t.open("editorUserPropertyDetails",{data:{mode:"edit",projectData:n.upProjectData,property:a,allowedTypes:n.upVisibleTypes}}).then(function(e){var t=n.properties.indexOf(a);n.properties.splice(t,1,e)})},n.removeProperty=function(e){n.properties.findAndRemove(e),s()},n.isTypeVisible=function(e){return!angular.isArray(n.upVisibleTypes)||n.upVisibleTypes.includes(e)},i=10,angular.forEach(n.upProperties,function(e,t){if("schemecolor"!==t||r){var a=angular.copy(e);a.key=t,angular.isNumber(e.order)?i=Math.max(e.order,i):a.order=i++,n.properties.push(a)}}),n.properties.sort(function(e,t){return e.order-t.order}),s(),n.$watch("properties",function(e,t){var a;angular.isObject(t)&&!angular.equals(e,t)&&(a=100,angular.forEach(n.upProperties,function(e,t){"schemecolor"!==t&&delete n.upProperties[t]}),angular.forEach(n.properties,function(e){var t=angular.copy(e);t.order=a++,delete t.key,n.upProperties[e.key]=t}))},!0),c.callEditor("getUsedUserProperties").then(function(e){n.activeProperties=e.activeUserProperties})}}}]),angular.module("wallpaperbrowserApp").directive("layout",["$rootScope","$document","$timeout","$compile",function(le,ce,de,pe){return{restrict:"A",scope:{lSavedLayouts:"=",lLayoutType:"=",lCtrl:"="},link:function(v,h){var r;h=angular.element(h);var a,i,b,e,n={},o=[],g=4,_=26,s=1,l=4,p=16,f=20,d=36,c=4,m=2,u=[],y=[],w={},k=[],S=0,x=[],E={simple:{background:{orientation:"horizontal",position:300,first:{panels:["files"]},second:{panels:["preview"]}},floating:[]},scene:{background:{orientation:"horizontal",position:250,first:{panels:["layers","sceneoptions","camerapaths","brush"]},second:{orientation:"horizontal",position:300,align:"end",first:{orientation:"vertical",position:165,align:"end",first:{panels:["preview"]},second:{panels:["assets","log","animation"]}},second:{panels:["properties"]}}},floating:[]}};function C(e,t){e.panelOptions.noHide?t?e.css({visibility:"visible"}):e.css({visibility:"hidden"}):t?e.css({display:""}):e.css({display:"none"})}function t(e){if(angular.isObject(e)){if(angular.isArray(e.panels)){var a=[];angular.forEach(e.panels,function(e){var t=n[e];angular.isObject(t)&&(t.panelOptions&&t.panelOptions.hidden&&(t.hidden=!0),a.push(t))}),0<a.length?e.panels=a:delete e.panels}t(e.first),t(e.second)}}function A(e,t){angular.isObject(t)&&(angular.isArray(t.panels)&&(t.panels.findAndRemove(e),delete e.split),A(e,t.first),A(e,t.second))}function P(t){A(t,r.background),angular.forEach(r.floating,function(e){A(t,e.first)})}function T(e,t){if(angular.isObject(t)){if(angular.isArray(t.panels)&&t.activePanel===e){t.activePanel=void 0;var a=0;angular.forEach(t.panels,function(e){e.hidden||++a}),0===a&&(t.panels=[],delete e.split)}T(e,t.first),T(e,t.second)}}function R(e){return function e(t,a){var i;if(angular.isObject(a))return angular.forEach(a.panels,function(e){e.panelOptions&&e.panelOptions.tag===t&&(i=a)}),i||e(t,a.first)||e(t,a.second)}(e,r.background)}function I(){angular.forEach(u,function(e){e.remove()}),u=[]}function O(){angular.forEach(y,function(e){e.remove()}),y=[]}function M(){angular.forEach(x,function(e){e.$destroy()}),x=[]}function D(){angular.isObject(b)&&b.$destroy(),b=void 0}function j(e){delete e.second,delete e.first,delete e.panels,delete e.align,delete e.activePanel,delete e.titleContainer,delete e.position,delete e.orientation,delete e.isFloating,delete e.panelBackground,delete e.drag}function W(e){if(!angular.isObject(e))return 0;var t=0;angular.forEach(e.panels,function(e){e.hidden||++t});var a=W(e.first),i=W(e.second);if(angular.isObject(e.first)&&0===a){var n=e.second;j(e),angular.extend(e,n)}else if(angular.isObject(e.second)&&0===i){var o=e.first;j(e),angular.extend(e,o)}return t+a+i}function L(e){angular.isObject(e)&&(delete e.activePanel,delete e.titleContainer,delete e.isFloating,delete e.panelBackground,delete e.drag,delete e.background,angular.isArray(e.panels)&&(e.panels=e.panels.filter(function(e){return e.panelOptions&&!e.panelOptions.noSave}).map(function(e){return e.panelOptions.tag})),L(e.first),L(e.second))}function F(e,t,a){var i,n=t?'tooltip="'+(e.panelOptions.tooltip||e.panelOptions.title)+'"':"",o=e.panelOptions.icon?"optionalLabel":"",r=a?'<a class="closeIcon" ng-click="closeWindow(panel)"><span class="fas fa-fw fa-times"></span></a>':"";return angular.isString(e.panelOptions.title)?(i='<span class="'+e.panelOptions.icon+' panelIcon"></span>',pe("<span "+n+">"+i+' <span class="'+o+'" translate="'+e.panelOptions.title+'"></span>'+r+"</span>")):(i='<span class="'+e.panelOptions.icon+' panelIcon single"></span>',pe("<span "+n+">"+i+' <span class="'+o+'"></span>'+r+"</span>"))}function B(e,t){var a=angular.element(document.createElement("div")),i=angular.element(document.createElement("span"));a.addClass("editorLayoutAnchor"),a.css({width:d,height:d}),i.addClass("icon far fa-fw "+e),a.append(i),a[0].anchorOptions=t,h.append(a),k.push(a)}function H(){angular.forEach(k,function(e){e.remove()}),k=[]}function N(){var o=h.innerWidth(),r=h.innerHeight(),s=.5*o,l=.5*r,c=.5*d;angular.forEach(k,function(e){var t=e[0].anchorOptions;if(t.hoverElement){var a=.5*t.hoverElement.innerWidth(),i=.5*t.hoverElement.innerHeight(),n=t.hoverElement.position();switch(t.orientation){case"n":e.css({left:n.left+a-c,top:n.top+i-c-d});break;case"e":e.css({left:n.left+a-c+d,top:n.top+i-c});break;case"s":e.css({left:n.left+a-c,top:n.top+i-c+d});break;case"w":e.css({left:n.left+a-c-d,top:n.top+i-c});break;case"":default:e.css({left:n.left+a-c,top:n.top+i-c})}}else switch(t.orientation){case"n":e.css({left:s-c});break;case"e":e.css({left:o-d,top:l-c});break;case"s":e.css({left:s-c,top:r-d});break;case"w":e.css({top:l-c})}})}function V(e){H(),B("fa-arrow-to-top",{orientation:"n"}),B("fa-arrow-to-right",{orientation:"e"}),B("fa-arrow-to-bottom",{orientation:"s"}),B("fa-arrow-to-left",{orientation:"w"}),e&&Math.min(e.innerWidth(),e.innerHeight())>5*d&&(B("fa-square",{hoverElement:e}),e.split.isFloating||(B("fa-arrow-square-up",{orientation:"n",hoverElement:e}),B("fa-arrow-square-right",{orientation:"e",hoverElement:e}),B("fa-arrow-square-down",{orientation:"s",hoverElement:e}),B("fa-arrow-square-left",{orientation:"w",hoverElement:e}))),N()}function U(e){angular.isArray(e.split.panels)&&e.split.panels.includes(e)||(e.split.panels=e.split.panels||[],e.split.panels.push(e)),(e.split.activePanel=e).hidden&&(e.hidden=!1,v.applyLayout())}function z(t){angular.isObject(t)&&(z(t.first),z(t.second),angular.forEach(t.panels,function(e){e.split=t}),angular.isArray(t.panels)?angular.isObject(t.activePanel)&&t.panels.includes(t.activePanel)||!(0<t.panels.length)||U(t.panels[0]):delete t.activePanel)}function $(){ce.off("mousemove.editor.layout"),ce.off("mouseup.editor.layout"),ce.off("mousemove.editor.floatresize"),ce.off("mouseup.editor.floatresize")}function q(e){e.overlay&&(e.overlay.remove(),delete e.overlay),e.panel&&(e.panel.removeClass("editorLayoutDragOverlayContent"),delete e.panel)}function G(){ce.off("mousemove.editor.title"),ce.off("mouseup.editor.title"),q(w),H()}function K(c,e,t,d){var a=angular.element(document.createElement("div"));a.addClass("editorLayoutResizeHandle");var i=l;switch(d){case"n":a.css({left:i,top:-i,right:i,height:2*i,cursor:"ns-resize"});break;case"e":a.css({right:-i,top:i,bottom:i,width:2*i,cursor:"ew-resize"});break;case"s":a.css({left:i,bottom:-i,right:i,height:2*i,cursor:"ns-resize"});break;case"w":a.css({left:-i,top:i,bottom:i,width:2*i,cursor:"ew-resize"});break;case"ne":a.css({right:-i,top:-i,width:2*i,height:2*i,cursor:"ne-resize"});break;case"nw":a.css({left:-i,top:-i,width:2*i,height:2*i,cursor:"nw-resize"});break;case"se":a.css({right:-i,bottom:-i,width:2*i,height:2*i,cursor:"se-resize"});break;case"sw":a.css({left:-i,bottom:-i,width:2*i,height:2*i,cursor:"sw-resize"});break;case"move":a.css({left:i,top:i,right:i,height:p+_,cursor:"move"})}t.append(a),e.push(a),a.on("mousedown",function(a){var i,n,o,r,s,l;switch(d){case"n":r=c.top,s=c.top+c.height-f-_,l=c.top+c.height,ce.on("mousemove.editor.floatresize",function(e){var t=Math.min(s,r+e.pageY-a.pageY);c.top=t,c.height=l-t,v.resizeLayout()});break;case"s":r=c.height,s=f+_,ce.on("mousemove.editor.floatresize",function(e){var t=Math.max(s,r+e.pageY-a.pageY);c.height=t,v.resizeLayout()});break;case"e":i=c.width,n=f,ce.on("mousemove.editor.floatresize",function(e){var t=Math.max(n,i+e.pageX-a.pageX);c.width=t,v.resizeLayout()});break;case"w":i=c.left,n=c.left+c.width-f,o=c.left+c.width,ce.on("mousemove.editor.floatresize",function(e){var t=Math.min(n,i+e.pageX-a.pageX);c.left=t,c.width=o-t,v.resizeLayout()});break;case"ne":r=c.top,s=c.top+c.height-f-_,l=c.top+c.height,i=c.width,n=f,ce.on("mousemove.editor.floatresize",function(e){var t=Math.min(s,r+e.pageY-a.pageY);c.top=t,c.height=l-t,t=Math.max(n,i+e.pageX-a.pageX),c.width=t,v.resizeLayout()});break;case"nw":r=c.top,s=c.top+c.height-f-_,l=c.top+c.height,i=c.left,n=c.left+c.width-f,o=c.left+c.width,ce.on("mousemove.editor.floatresize",function(e){var t=Math.min(s,r+e.pageY-a.pageY);c.top=t,c.height=l-t,t=Math.min(n,i+e.pageX-a.pageX),c.left=t,c.width=o-t,v.resizeLayout()});break;case"se":r=c.height,s=f+_,i=c.width,n=f,ce.on("mousemove.editor.floatresize",function(e){var t=Math.max(s,r+e.pageY-a.pageY);c.height=t,t=Math.max(n,i+e.pageX-a.pageX),c.width=t,v.resizeLayout()});break;case"sw":r=c.height,s=f+_,i=c.left,n=c.left+c.width-f,o=c.left+c.width,ce.on("mousemove.editor.floatresize",function(e){var t=Math.max(s,r+e.pageY-a.pageY);c.height=t,t=Math.min(n,i+e.pageX-a.pageX),c.left=t,c.width=o-t,v.resizeLayout()});break;case"move":ce.on("mousemove.editor.floatresize",function(e){c.left+=e.originalEvent.movementX,c.top+=e.originalEvent.movementY,v.resizeLayout()})}ce.on("mouseup.editor.floatresize",function(){$(),v.resizeLayout(),window.safeApply(v)})})}function Y(e){I(),$(),function e(i,t){if(angular.isObject(i&&i.first)&&angular.isObject(i&&i.second)){var n=angular.element(document.createElement("div"));n.addClass("editorLayoutDrag"),"horizontal"===i.orientation&&n.addClass("horizontal"),i.drag=n,h.append(n),t.push(n),e(i.first,t),e(i.second,t),n.on("mousedown",function(){$(),v.validateSplitPositions(r.background);var a=h.offset();ce.on("mousemove.editor.layout",function(e){var t;t="horizontal"===i.orientation?(t=e.pageX-a.left,n.css({left:t-g}),e.originalEvent.movementX):(t=e.pageY-a.top,n.css({top:t-g}),e.originalEvent.movementY),"end"===i.align?i.position-=t:i.position+=t,angular.isObject(i.second)&&i.second.orientation===i.orientation&&i.align===i.second.align&&(i.second.position-=t),v.resizeLayout(!0),window.safeApply(v)}),ce.on("mouseup.editor.layout",function(){$(),v.applyLayout(),window.safeApply(v)})})}}(e.background,u),angular.forEach(e.floating,function(e){var t,a,i;t=e,a=u,(i=angular.element(document.createElement("div"))).addClass("editorLayoutFloatBackground"),t.background=i,h.append(i),a.push(i),K(t,a,i,"n"),K(t,a,i,"e"),K(t,a,i,"s"),K(t,a,i,"w"),K(t,a,i,"ne"),K(t,a,i,"nw"),K(t,a,i,"se"),K(t,a,i,"sw"),K(t,a,i,"move")})}function Q(e,t){var a=h.offset(),i=.5*_;t.overlay.css({left:e.pageX-a.left-i,top:e.pageY-a.top-i}),t.panel.css({left:e.pageX-a.left-i,top:e.pageY-a.top-i+_+c}),C(t.panel,!0)}function J(e,t){var a=e.offset();return a.w=e.outerWidth(),a.h=e.outerHeight(),!(t.left<a.left||t.left>a.left+a.w||t.top<a.top||t.top>a.top+a.h)}function X(e,a){if(angular.isObject(e)){if(angular.isArray(e.panels)&&0<e.panels.length){if(!e.isFloating){var t=angular.element(document.createElement("div"));t.addClass("editorLayoutPanelBackground"),e.panelBackground=t,h.prepend(t),a.push(t)}var i=angular.element(document.createElement("div"));i.addClass("editorLayoutTitleContainer"),(i[0].split=e).titleContainer=i,h.append(i),a.push(i),angular.forEach(e.panels,function(m){if(!m.hidden){var t=v.$new();x.push(t);var e=angular.isFunction(m.panelOptions.closeFunction);F(m,!0,e)(t,function(e){t.panel=m,t.closeWindow=m.panelOptions.closeFunction,e.addClass("editorLayoutTitleCard "+(m.panelOptions&&m.panelOptions.titleClass||"")),i.append(e),e[0].titleContainer=i,a.push(e),(m.title=e)[0].panel=m,"simple"!==v.lLayoutType&&e.on("mousedown",function(){U(m),v.resizeLayout(),G(),w={offset:i.offset(),targetTitleContainer:i},ce.on("mousemove.editor.title",function(a){var t,i,n=a.pageX-w.offset.left,e=a.pageY-w.offset.top;if(angular.isObject(w.targetTitleContainer)){var o,r=w.targetTitleContainer.children();angular.forEach(r,function(e){var t=.5*(e=angular.element(e)).outerWidth();e.offset().left-w.offset.left+t<n&&e!==m.title&&(o=e)});var s=w.targetTitleContainer.outerWidth(),l=w.targetTitleContainer.outerHeight(),c=n<0||s<n||e<0||l<e,d=w.targetTitleContainer;if(c)return d[0].split.panels.findAndRemove(m),delete w.targetTitleContainer,m.addClass("editorLayoutDragOverlayContent"),m.css({"z-index":""}),v.applyLayout(),w.overlay=(t=m,(i=angular.element(document.createElement("div"))).addClass("editorLayoutDragOverlay"),D(),b=v.$new(),F(t,!1)(b,function(e){e.addClass("editorLayoutTitleCard "+(t.panelOptions&&t.panelOptions.titleClass||"")),e.css({height:_,display:"inline-block"}),i.append(e)}),i),w.panel=m,h.append(w.overlay),Q(a,w),delete w.contentHover,void V();!o&&(r.length<1||r[0]!==m.title)?w.targetTitleContainer.prepend(m.title):o&&m.title.insertAfter(o),r=d.children();var p=d[0].split;p.panels=[],angular.forEach(r,function(e){p.panels.push(angular.element(e)[0].panel)}),v.resizeLayout()}else{Q(a,w);var u,g,f=h.find(".editorLayoutTitleContainer");if(angular.forEach(f,function(e){J(e=angular.element(e),{left:a.pageX,top:a.pageY})&&(u=e);var t=e[0].split.activePanel;t&&J(t,{left:a.pageX,top:a.pageY})&&(g=t)}),delete w.targetAnchor,angular.forEach(k,function(e){J(e,{left:a.pageX,top:a.pageY})&&(w.targetAnchor=e)}),!angular.isObject(w.targetAnchor)){if(angular.isObject(u))return q(w),u[0].split.panels.push(m),u[0].split.activePanel=m,v.applyLayout(),w.targetTitleContainer=m.title[0].titleContainer,w.offset=w.targetTitleContainer.offset(),void H();angular.isObject(g)&&w.contentHover!==g&&V(w.contentHover=g)}}window.safeApply(v)}),ce.on("mouseup.editor.title",function(){var e=!1;if(w.targetAnchor)!function(e,t){var a=e[0].anchorOptions;if(a.hoverElement&&!a.orientation)return a.hoverElement.split.panels.push(t),a.hoverElement.split.activePanel=t;var i={position:300,orientation:"horizontal",first:{panels:[t]},second:r.background};if(a.hoverElement&&(["n","s"].includes(a.orientation)?i.position=.5*a.hoverElement.innerHeight():i.position=.5*a.hoverElement.innerWidth(),i.second=angular.extend({},a.hoverElement.split)),["n","s"].includes(a.orientation)&&(i.orientation="vertical"),["e","s"].includes(a.orientation)){i.align="end";var n=i.second;i.second=i.first,i.first=n}a.hoverElement?(j(a.hoverElement.split),angular.extend(a.hoverElement.split,i)):r.background=i}(w.targetAnchor,m),e=!0;else if(w.overlay){var t=w.overlay.position();t.width=m.outerWidth(),t.height=m.outerHeight()+_,t.first={panels:[m]},r.floating.push(t),e=!0}G(),e?v.applyLayout():v.resizeLayout(),window.safeApply(v)})})})}})}X(e.first,a),X(e.second,a)}}function Z(e,i,t){var n=angular.copy(t);if(n.top+=_,n.height-=_,n["z-index"]="",i.panelBackground&&i.panelBackground.css(n),angular.forEach(e,function(e){if(!e.hidden){var t=angular.copy(n);if(!i.isFloating){var a=c;e.panelOptions&&e.panelOptions.noPadding&&(a=1),t.top+=a,t.left+=a,t.width-=2*a,t.height-=2*a}e.css(t),e===i.activePanel?C(e,!0):C(e,!1),e.title.removeClass("active")}}),i.titleContainer){var a=angular.copy(t);a.height=_+s,i.titleContainer.css(a)}i.activePanel&&i.activePanel.title.addClass("active")}function ee(e){!function e(t,a,i){if(angular.isObject(i&&i.first)){var n=i.first&&i.first.panels,o=i.second&&i.second.panels;if(angular.isObject(i&&i.second)){var r=i.orientation||"horizontal",s="horizontal"===r?a.width:a.height,l="end"===i.align?s-i.position:i.position,c="horizontal"===r?f:f+_;l=Math.round(Math.max(c,Math.min(s-c,l)));var d=angular.copy(a),p=angular.copy(a);if("horizontal"===r?(d.width=l-m,p.width=p.width-l-m,p.left+=l+m):(d.height=l-m,p.height=p.height-l-m,p.top+=l+m),Z(n,i.first,d),Z(o,i.second,p),e(t,d,i.first),e(t,p,i.second),i.drag&&!t){var u=angular.copy(d);"horizontal"===r?(u.left+=u.width-g+m,u.width=2*g):(u.top+=u.height-g+m,u.height=2*g),i.drag.css(u)}}else Z(n,i.first,a),e(t,a,i.first)}}(e,{top:0,left:0,width:h.innerWidth(),height:h.innerHeight()},{first:r.background})}function te(){var e=h.find(".editorLayoutTitleContainer");angular.forEach(e,function(e){e.scrollWidth>e.clientWidth?(e.labelShowMinWidth=e.scrollWidth,angular.element(e).addClass("editorLayoutHideLabelsInTitle")):e.labelShowMinWidth<e.clientWidth&&angular.element(e).removeClass("editorLayoutHideLabelsInTitle")}),le.$broadcast("rzSliderForceRender")}function ae(e){if(r){ee(e);var t=10;angular.forEach(r.floating,function(e){!function(e,t){e.width=Math.round(Math.min(e.width,h.innerWidth()-20)),e.height=Math.round(Math.min(e.height,h.innerHeight()-20)),e.left=Math.round(Math.min(h.innerWidth()-40,Math.max(40-e.width,e.left))),e.top=Math.round(Math.min(h.innerHeight()-20,Math.max(0,e.top)));var a={top:e.top,left:e.left,width:e.width,height:e.height};Z(e.first.panels,e.first,a),angular.forEach(e.first.panels,function(e){e.css({"z-index":t+2}),e.title.css({"z-index":t})}),a.top-=p,a.left-=l,a.width+=2*l,a.height+=l+p,a["z-index"]=t,e.background.css(a),e.first.titleContainer.css({"z-index":t+1})}(e,t),t+=3}),N(),de(te),0===S&&function(){if(angular.isObject(r)&&v.lSavedLayouts){a&&(de.cancel(a),a=void 0);var e=angular.copy(r);W(e),L(e.background),angular.forEach(e.floating,L),e=angular.fromJson(angular.toJson(e));var t=v.lLayoutType;a=de(i=function(){v.lSavedLayouts[t]=e},500)}}()}}function ie(e){t((r=angular.copy(e)).background),angular.forEach(r.floating,t)}function ne(e){var t;angular.isObject(e)&&ie(e),angular.forEach(n,function(e){C(e,!1)}),W(r.background),r.floating=r.floating.filter(function(e){return angular.isArray(e&&e.first&&e.first.panels)&&0<e.first.panels.length}),z(r.background),angular.forEach(r.floating,function(e){e.first.isFloating=!0,z(e.first)}),t=r,O(),M(),X(t.background,y),angular.forEach(t.floating,function(e){X(e.first,y)}),Y(r),ae()}function oe(e){var t=angular.isArray(e)?e:[e];if(angular.forEach(t,function(e){h.append(e)}),angular.isArray(r.floating)&&0<r.floating.length){var a=r.floating[r.floating.length-1];a.first.panels.push(e),a.first.activePanel=e}else{var i=h.innerWidth(),n=h.innerHeight(),o={left:.1*i,top:.1*n,width:.8*i,height:.8*n,first:{panels:t}};r.floating.push(o)}}function re(e){r.floating.findAndRemove(e),r.floating.push(e),v.resizeLayout()}function se(t){t.split&&(U(t),angular.forEach(r.floating,function(e){e.first&&e.first.panels&&e.first.panels.includes(t)&&re(e)}),v.resizeLayout())}e=h.find("[layout-panel]"),angular.forEach(e,function(e){var a=v.$parent.$eval(e.attributes["layout-panel"].value);((e=angular.element(e)).panelOptions=a).canClose&&(a.closeFunction=function(){var t;a.hidden?(e.hidden=!0,T(t=e,r.background),angular.forEach(r.floating,function(e){T(t,e.first)})):P(e),v.applyLayout(),angular.isFunction(a.onClose)&&a.onClose()}),n[a.tag]=e}),v.$watch("lLayoutType",function(){a&&i&&(i(),de.cancel(a),i=a=void 0);var e=v.lLayoutType||"simple",t=v.lSavedLayouts||{};t=t&&t[e]?t:E,++S,ne(t[e]),--S}),v.$watch(function(){return{w:h.innerWidth(),h:h.innerHeight()}},function(){++S,ae(),--S},!0),v.applyLayout=ne,v.resizeLayout=ae,v.validateSplitPositions=function(e){!function e(t,a){if(angular.isObject(a&&a.first))if(angular.isObject(a&&a.second)){var i=a.orientation||"horizontal",n="horizontal"===i?t.width:t.height,o="end"===a.align?n-a.position:a.position,r="horizontal"===i?f:f+_;o=Math.round(Math.max(r,Math.min(n-r,o))),"end"===a.align?a.position=n-o:a.position=o;var s=angular.copy(t),l=angular.copy(t);"horizontal"===i?(s.width=o-m,l.width=l.width-o-m,l.left+=o+m):(s.height=o-m,l.height=l.height-o-m,l.top+=o+m),e(s,a.first),e(l,a.second)}else e(t,a.first)}({left:0,top:0,width:h.innerWidth(),height:h.innerHeight()},e)},v.activateWindow=se,v.lCtrl.reset=function(){var e=v.lLayoutType||"simple";ie(E[e]),0<o.length&&oe(o.map(function(e){return e.panel})),ne()},v.lCtrl.insertWindow=function(e,t,a){var i=!0;e.panelOptions=a,o.push({panel:e,scope:t}),a&&a.siblingTag&&(e.split=R(a.siblingTag),e.split&&(e.split.panels.push(e),h.append(e))),e.split||(i=!1,oe(e)),v.applyLayout(),v.activateWindow(e,i)},v.lCtrl.showBaseWindow=function(e){e.split||(e.panelOptions&&e.panelOptions.siblingTag&&(e.split=R(e.panelOptions.siblingTag),e.split&&e.split.panels.push(e)),e.split||oe(e),v.applyLayout()),v.activateWindow(e)},v.lCtrl.removeWindow=function(t,e){var a=o.find(function(e){return e.panel===t});a?(angular.isFunction(a.scope.onClosed)&&!e&&a.scope.onClosed(),P(t),t.remove(),a.scope.$destroy(),o.findAndRemove(a),v.applyLayout()):t.panelOptions&&t.panelOptions.closeFunction&&(t.panelOptions.closeFunction(),v.applyLayout())},v.lCtrl.removeAllWindows=function(){angular.forEach(o,function(e){P(e.panel),e.panel.remove(),e.scope.$destroy()}),o=[],v.applyLayout()},v.lCtrl.findWindow=function(t){return n[t]?n[t]:(angular.forEach(o,function(e){e.panel.panelOptions.tag===t&&(a=e.panel)}),a);var a},v.lCtrl.activateWindow=se,v.$on("$destroy",function(){q(w),$(),G(),O(),I(),ce.off("mousedown.editor.layoutFocusFloat"),M(),D()}),ce.on("mousedown.editor.layoutFocusFloat",function(a){var i;angular.forEach(r.floating,function(e){var t={left:a.pageX,top:a.pageY};!J(e.background,t)||r.floating.last()===e&&e===i||(i=e)}),i&&re(i)})}}}]).directive("layoutPanel",function(){return{restrict:"A"}}).directive("layoutClass",function(){return{restrict:"A",link:function(e,a,t){var i=e.$eval(t.layoutClass);a=angular.element(a),e.$watch(function(){return{w:a.innerWidth(),h:a.innerHeight()}},function(t){angular.forEach(i.rules,function(e){angular.isDefined(e.minWidth)&&(t.w<e.minWidth?a.addClass(e.minWidthClass):a.removeClass(e.minWidthClass)),angular.isDefined(e.minHeight)&&(t.h<e.minHeight?a.addClass(e.minHeightClass):a.removeClass(e.minHeightClass))})},!0)}}}),angular.module("wallpaperbrowserApp").directive("codeEditor",["$q","$http","$timeout","utils","host","skin","contextMenu",function(I,O,M,D,j,W,L){return{restrict:"E",templateUrl:"views/templates/codeeditor.html",scope:{ceContent:"=",ceControls:"=",ceClose:"&",ceCancel:"&",ceApply:"&",ceContentType:"=",ceScriptName:"=",ceScriptPropertyName:"=",ceScriptType:"=",ceScriptContextProperties:"=",ceInitialError:"="},link:function(p,e){e=angular.element(e);var l,t,n="scripterr",o=[],s=e.find("#codeView"),a=angular.element(s[0]),i={w:0,h:0},r=new ResizeObserver(function(e){angular.isArray(e)&&0<e.length&&150<e[0].contentRect.width&&150<e[0].contentRect.height&&l&&(e[0].contentRect.width!==i.w||e[0].contentRect.height!==i.h)&&(i.w=e[0].contentRect.width,i.h=e[0].contentRect.height,M.cancel(t),t=M(function(){150<a.innerWidth()&&150<a.innerHeight()&&l.layout()},50))}),c=I.defer();function d(e){return"/**\n * "+e+"\n */\n"}function u(e){switch(e){case"number":case"slider":case"sliderint":case"knob":return"Number";case"vec2":return"Vec2";case"vec3":case"color":return"Vec3";case"vec4":return"Vec4";case"string":case"paragraph":return"String";case"checkbox":case"checkboxbit":case"hiddenbool":return"Boolean"}}function g(e){var t=u(p.ceScriptType);if(t)return d("@param {"+t+"} value - for property '{{key}}'"+(e||"")+"\n * @return {"+t+"} - update current property value").replace("{{key}}",p.ceScriptPropertyName)}function f(){var i=d("The property object this script is bound to.")+"interface IThisPropertyObject extends IThisPropertyObjectBase {\n";return angular.forEach(p.ceScriptContextProperties,function(e){var t,a=u(e.type);a&&(t=e.key,!["locktransforms"].includes(t))&&(i+=e.key+": "+a+"\n")}),i+="}\n\n"+d("The property object this script is bound to.")+"declare var thisObject: IThisPropertyObject;"}function m(){_lastRegisteredPropertyObject&&(_lastRegisteredPropertyObject.dispose(),_lastRegisteredPropertyObject=void 0),p.ceScriptContextProperties&&(_lastRegisteredPropertyObject=monaco.languages.typescript.javascriptDefaults.addExtraLib(f(),"Context Object"))}function v(){return l.getModel().getValue(monaco.editor.EndOfLinePreference.LF)}if(angular.isDefined(window.require))c.resolve();else{var h=document.createElement("script");h.type="text/javascript",h.src="monaco/vs/loader.js",document.getElementsByTagName("head")[0].appendChild(h);var b=c;h.onload=function(){b.resolve(),window.safeApply(p)},c={promise:I.all([O.get("monaco/autocomplete/lib.es5.d.ts"),O.get("monaco/autocomplete/lib.es2015.collection.d.ts"),O.get("monaco/autocomplete/lib.es2015.core.d.ts"),O.get("monaco/autocomplete/lib.es2015.generator.d.ts"),O.get("monaco/autocomplete/lib.es2015.iterable.d.ts"),O.get("monaco/autocomplete/lib.es2015.promise.d.ts"),O.get("monaco/autocomplete/lib.es2015.proxy.d.ts"),O.get("monaco/autocomplete/lib.es2015.reflect.d.ts"),O.get("monaco/autocomplete/lib.es2015.symbol.d.ts"),O.get("monaco/autocomplete/lib.es2015.symbol.wellknown.d.ts"),O.get("monaco/autocomplete/lib.es2016.array.include.d.ts"),O.get("monaco/autocomplete/lib.es2017.intl.d.ts"),O.get("monaco/autocomplete/lib.es2017.object.d.ts"),O.get("monaco/autocomplete/lib.es2017.sharedmemory.d.ts"),O.get("monaco/autocomplete/lib.es2017.string.d.ts"),O.get("monaco/autocomplete/lib.es2017.typedarrays.d.ts"),O.get("monaco/autocomplete/lib.es2018.asynciterable.d.ts"),O.get("monaco/autocomplete/lib.es2018.intl.d.ts"),O.get("monaco/autocomplete/lib.es2018.promise.d.ts"),O.get("monaco/autocomplete/lib.es2018.regexp.d.ts"),O.get("monaco/autocomplete/lib.es2019.array.d.ts"),O.get("monaco/autocomplete/lib.es2019.string.d.ts"),O.get("monaco/autocomplete/lib.es2019.symbol.d.ts"),O.get("monaco/autocomplete/lib.sceneScript.d.ts"),b])}}function _(){l.setSelection(l.getModel().getFullModelRange())}function y(e,t){angular.isUndefined(t)&&((t=l.getSelection()).startColumn=t.endColumn=0);var a={identifier:{major:1,minor:1},range:new monaco.Range(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn),text:e,forceMoveMarkers:!0};l.executeEdits("Snippet",[a])}function w(e){return O.get("monaco/snippets/"+e+".js").then(function(e){return e.data||""})}function k(e){var t="import * as "+e+" from '"+e+"';",a="import * as",i=v(),n=i.includes(a);if(!i.includes(t)){var o=1,r="\n";if(n){for(;!l.getModel().getLineContent(o).includes(a);)++o;for(var s=0;l.getModel().getLineContent(o).includes(a);)++o,++s;0<s&&(r="")}else{for(;!l.getModel().getLineContent(o)&&o<l.getModel().getLineCount();)++o;"'use strict';"===l.getModel().getLineContent(o)&&++o}y(r+t+"\n",{startColumn:0,endColumn:0,startLineNumber:o,endLineNumber:o})}}function S(e){y(e,{startColumn:0,endColumn:0,startLineNumber:l.getModel().getLineCount()+1,endLineNumber:l.getModel().getLineCount()+1})}function x(e){w(e).then(function(e){!function(e){var t,a="export var scriptProperties = createScriptProperties()",i="\t.finish();",n=v(),o=n.includes(a)&&n.includes(i),r=n.includes("import * as"),s=1;if(o){for(;!l.getModel().getLineContent(s).includes(a);)++s;for(;!l.getModel().getLineContent(s).includes(i);)++s}else{for(;!l.getModel().getLineContent(s)&&s<l.getModel().getLineCount();)++s;if("'use strict';"===l.getModel().getLineContent(s)&&++s,r){for(;!l.getModel().getLineContent(s)&&s<l.getModel().getLineCount();)++s;for(;l.getModel().getLineContent(s).includes("import * as");)++s}y(i+"\n",t={startColumn:0,endColumn:0,startLineNumber:s,endLineNumber:s}),y("\n"+a+"\n",t),s+=2}y(e,t={startColumn:0,endColumn:0,startLineNumber:s,endLineNumber:s})}(e)})}function E(e){var t='#include "'+e+'"';if(!v().includes(t)){var a=1;for(l.getModel().getLineContent(a)&&(t="\n"+t);!l.getModel().getLineContent(a)&&a<l.getModel().getLineCount();)++a;for(;l.getModel().getLineContent(a).includes("// [COMBO]");)++a;for(;!l.getModel().getLineContent(a)&&a<l.getModel().getLineCount();)++a;for(;l.getModel().getLineContent(a).includes("#include");)++a;y(t+=a<l.getModel().getLineCount()&&!l.getModel().getLineContent(a)?"\n":"\n\n",{startColumn:0,endColumn:0,startLineNumber:a,endLineNumber:a})}}function C(e,t,a){var i="uniform "+e+" "+t+";";if(a&&(i+=" // "+a),!v().includes(i)){var n=1;for(l.getModel().getLineContent(n)&&(i="\n"+i);!l.getModel().getLineContent(n)&&n<l.getModel().getLineCount();)++n;for(;l.getModel().getLineContent(n).includes("// [COMBO]");)++n;for(;!l.getModel().getLineContent(n)&&n<l.getModel().getLineCount();)++n;for(;l.getModel().getLineContent(n).includes("#include");)++n;for(;!l.getModel().getLineContent(n)&&n<l.getModel().getLineCount();)++n;for(;l.getModel().getLineContent(n).includes("uniform");)++n;y(i+=n<l.getModel().getLineCount()&&!l.getModel().getLineContent(n)?"\n":"\n\n",{startColumn:0,endColumn:0,startLineNumber:n,endLineNumber:n})}}function A(e){var t="// [COMBO] "+e;if(!v().includes(t)){var a=1;for(l.getModel().getLineContent(a)&&(t="\n"+t);!l.getModel().getLineContent(a)&&a<l.getModel().getLineCount();)++a;for(;l.getModel().getLineContent(a).includes("// [COMBO]");)++a;y(t+=a<l.getModel().getLineCount()&&!l.getModel().getLineContent(a)?"\n":"\n\n",{startColumn:0,endColumn:0,startLineNumber:a,endLineNumber:a})}}function P(e){return w(e).then(function(e){_(),y(e)})}function T(e,t,a){return e.button(a,"fas fa-cog",function(){C(t,a)})}function R(e,t,a,i,n){return e.button(t,"fas fa-wrench",function(){C(a,i,n)})}c.promise.then(function(r){require.config({paths:{vs:"monaco/vs"}}),require(["vs/editor/editor.main"],function(){if(angular.isArray(r)){monaco.languages.typescript.javascriptDefaults.setCompilerOptions({noLib:!0,allowNonTsExtensions:!0,allowJs:!0});for(var e=0;e<r.length-1;++e){var t=r[e];monaco.languages.typescript.javascriptDefaults.addExtraLib(t.data,t.config.url)}}var a="vs";W.isDarkTheme()&&(a="vs-dark");var i,n=p.ceContent||(i="'use strict';\n\n"+g(),i+="export function update(value) {\n\t\n\treturn value;\n}\n"),o="js"===p.ceContentType?"javascript":"cpp";(l=monaco.editor.create(s[0],{value:n,language:o,wordWrap:"on",theme:a,renderWhitespace:"boundary",insertSpaces:!1,readOnly:!p.isEditable()})).addCommand(monaco.KeyMod.chord(monaco.KeyMod.CtrlCmd|monaco.KeyCode.KEY_K,monaco.KeyMod.CtrlCmd|monaco.KeyCode.KEY_D),function(){l.getAction("editor.action.formatDocument").run()}),p.ceInitialError&&(p.$broadcast("onScriptMessage",p.ceInitialError),angular.isNumber(p.ceInitialError.line)&&0<p.ceInitialError.line&&l.revealLineInCenter(p.ceInitialError.line)),m()})}),r.observe(s[0]),p.$on("$destroy",function(){r.disconnect(),e.off("click.hoverurl")}),e.on("click.hoverurl",function(e){var t=angular.element(e.target);t.is("a")&&0<t.closest(".monaco-editor-hover-content").length&&window.ui.shellexecute(t.text())}),p.$on("onScriptMessage",function(e,t){if(t.name===p.ceScriptName&&0<t.line){var a={message:t.message,startLineNumber:t.line,startColumn:t.column,endColumn:t.columnEnd||t.column,severity:1===t.errorlevel?monaco.MarkerSeverity.Error:monaco.MarkerSeverity.Info,source:n},i={hoverMessage:t.message,range:new monaco.Range(t.line,t.column,t.line,t.columnEnd||t.column),options:{linesDecorationsClassName:"editorCodeLineDecorationError",inlineClassName:"editorCodeLineDecorationErrorInline"}};monaco.editor.setModelMarkers(l.getModel(),n,[a]),o=l.deltaDecorations(o,[i])}}),p.close=function(){p.ceClose()},p.cancel=function(){p.ceCancel()},p.apply=function(){monaco.editor.setModelMarkers(l.getModel(),n,[]),o=l.deltaDecorations(o,[]),p.ceApply({value:v()})},p.isShaderType=function(){return"vert"===p.ceContentType||"frag"===p.ceContentType||"geom"===p.ceContentType},p.isJSType=function(){return"js"===p.ceContentType},p.isEditable=function(){return p.isShaderType()||"js"===p.ceContentType},p.openEditMenu=function(e){var t=L.builder().button("ui_editor_filemenu_undo","fas fa-undo",function(){l.trigger("","undo")}).hotkey("CTRL + Z").button("ui_editor_filemenu_redo","fas fa-redo",function(){l.trigger("","redo")}).hotkey("CTRL + Y").divider().button("ui_editor_script_format_document","fas fa-file-alt",function(){l.getAction("editor.action.formatDocument").run()}).hotkey("CTRL + K, D").button("ui_editor_script_comment_selection","far fa-comment-alt-lines",function(){l.getAction("editor.action.addCommentLine").run()}).hotkey("CTRL + K, C").button("ui_editor_script_uncomment_selection","far fa-comment-alt-slash",function(){l.getAction("editor.action.removeCommentLine").run()}).hotkey("CTRL + K, U");switch(p.ceContentType){case"js":t.divider().button("ui_editor_script_documentation","fas fa-books",function(){D.openUrl(D.url.docsSceneScript)});break;case"vert":case"frag":case"geom":t.divider().button("ui_editor_script_documentation","fas fa-books",function(){D.openUrl(D.url.docsSceneShaders)})}t.open(p,e,{placement:{target:e.currentTarget}})},p.openSnippetMenu=function(e){switch(p.ceContentType){case"js":t=e,a=L.builder().button("init","fas fa-function",function(){S("\n"+g()+"export function init(value) {\n\treturn value;\n}\n")}).button("update","fas fa-function",function(){S("\n"+g()+"export function update(value) {\n\treturn value;\n}\n")}).button("resizeScreen","fas fa-function",function(){S("\n"+d("@param {Vec2} size")+"export function resizeScreen(size) {\n\t\n}\n")}).button("applyUserProperties","fas fa-function",function(){S("\n"+d("@param {Object} changedUserProperties - only includes user properties that were recently changed!")+"export function applyUserProperties(changedUserProperties) {\n\t\n}\n")}).button("destroy","fas fa-function",function(){S("\nexport function destroy() {\n\t\n}\n")}).button("animationEvent","fas fa-function",function(){S("\n"+g("\n * @param {AnimationEvent} event - info about the event")+"export function animationEvent(event, value) {\n\t\n}\n")}).button("cursorEnter","fas fa-function",function(){S("\n"+d("@param {ICursorEvent} event")+"export function cursorEnter(event) {\n\t\n}\n")}).button("cursorLeave","fas fa-function",function(){S("\n"+d("@param {ICursorEvent} event")+"export function cursorLeave(event) {\n\t\n}\n")}).button("cursorMove","fas fa-function",function(){S("\n"+d("@param {ICursorEvent} event")+"export function cursorMove(event) {\n\t\n}\n")}).button("cursorClick","fas fa-function",function(){S("\n"+d("@param {ICursorEvent} event")+"export function cursorClick(event) {\n\t\n}\n")}).button("cursorDown","fas fa-function",function(){S("\n"+d("@param {ICursorEvent} event")+"export function cursorDown(event) {\n\t\n}\n")}).button("cursorUp","fas fa-function",function(){S("\n"+d("@param {ICursorEvent} event")+"export function cursorUp(event) {\n\t\n}\n")}),i=L.builder().button("ui_editor_script_insert_property_slider","fas fa-user-cog",function(){x("scriptproperty_slider")}).button("ui_editor_script_insert_property_checkbox","fas fa-user-cog",function(){x("scriptproperty_checkbox")}).button("ui_editor_script_insert_property_text","fas fa-user-cog",function(){x("scriptproperty_text")}).button("ui_editor_script_insert_property_color","fas fa-user-cog",function(){x("scriptproperty_color")}).button("ui_editor_script_insert_property_combo","fas fa-user-cog",function(){x("scriptproperty_combo")}),n=L.builder().button("ui_editor_script_module_color_utilities","fas fa-database",function(){k("WEColor")}).button("ui_editor_script_module_math_utilities","fas fa-database",function(){k("WEMath")}).button("ui_editor_script_module_vector_utilities","fas fa-database",function(){k("WEVector")}),o=L.builder().button("ui_editor_script_snippet_rainbow_color","far fa-stream",function(){P("script_vec3_color_rainbow")}).hotkey("color").button("ui_editor_script_snippet_drag_drop","far fa-stream",function(){P("script_origin_drag_drop")}).button("ui_editor_script_snippet_click_play_sound","far fa-stream",function(){P("script_layer_click_to_play")}).button("ui_editor_script_snippet_rotation","far fa-stream",function(){P("script_angles_rotation")}).hotkey("angles").button("ui_editor_script_snippet_rotation_pivot","far fa-stream",function(){P("script_angles_rotation_pivot")}).hotkey("angles").button("ui_editor_script_snippet_screen_bounce","far fa-stream",function(){P("script_origin_reflect")}).hotkey("origin").button("ui_editor_script_snippet_audio_scale","far fa-stream",function(){P("script_scale_audio_response")}).hotkey("scale").button("ui_editor_script_snippet_audio_factor","far fa-stream",function(){P("script_factor_audio_response")}).hotkey("number"),L.builder().subMenu("ui_editor_script_insert_function",a).subMenu("ui_editor_script_insert_property",i).subMenu("ui_editor_script_import_base_module",n).subMenu("ui_editor_script_replace_code",o).open(p,t,{placement:{target:t.currentTarget}});break;case"vert":case"frag":case"geom":!function(e){var t=L.builder().button("ui_editor_shader_snippet_basic_image_vertex","far fa-triangle",function(){P("shader_vert_passthrough")}).hotkey("vert").button("ui_editor_shader_snippet_basic_image_fragment","fas fa-palette",function(){P("shader_frag_passthrough")}).hotkey("frag"),a=L.builder().button("common.h","fas fa-file-code",function(){E("common.h")}).button("common_blending.h","fas fa-file-code",function(){E("common_blending.h")}).button("common_fragment.h","fas fa-file-code",function(){E("common_fragment.h")}).button("common_vertex.h","fas fa-file-code",function(){E("common_vertex.h")}),i=L.builder();T(i,"float","g_Alpha"),T(i,"vec3","g_Color"),T(i,"float","g_Time"),T(i,"float","g_Daytime"),T(i,"vec2","g_PointerPosition"),T(i,"vec2","g_TexelSize"),T(i,"vec2","g_TexelSizeHalf");var n=L.builder();T(n,"vec3","g_EyePosition"),T(n,"vec3","g_ViewForward"),T(n,"vec3","g_ViewRight"),T(n,"vec3","g_ViewUp"),T(n,"vec3","g_OrientationForward"),T(n,"vec3","g_OrientationRight"),T(n,"vec3","g_OrientationUp"),T(n,"mat4x4","g_ModelMatrix"),T(n,"mat4x4","g_ModelMatrixInverse"),T(n,"mat4x4","g_ViewProjectionMatrix"),T(n,"mat4x4","g_ModelViewProjectionMatrix"),T(n,"mat4x4","g_ModelViewProjectionMatrixInverse");for(var o=L.builder(),r=0;r<8;++r)T(o,"vec4","g_Texture"+r+"Resolution"),T(o,"vec4","g_Texture"+r+"Rotation"),T(o,"vec2","g_Texture"+r+"Translation");var s=L.builder();T(s,"float","g_AudioSpectrum16Left[16]"),T(s,"float","g_AudioSpectrum16Right[16]"),T(s,"float","g_AudioSpectrum32Left[32]"),T(s,"float","g_AudioSpectrum32Right[32]"),T(s,"float","g_AudioSpectrum64Left[64]"),T(s,"float","g_AudioSpectrum64Right[64]");var l=L.builder();T(l,"vec3","g_LightAmbientColor"),T(l,"vec3","g_LightSkylightColor"),T(l,"vec4","g_LightsColorRadius[4]"),T(l,"vec3","g_LightsPosition[4]");var c=L.builder().subMenu("ui_editor_shader_constants_general",i).subMenu("ui_editor_shader_constants_view",n).subMenu("ui_editor_shader_constants_texture",o).subMenu("ui_editor_shader_constants_audio",s).subMenu("ui_editor_shader_constants_light",l),d=L.builder();R(d,"ui_editor_shader_variable_slider_float","float","u_userNewSlider",'{"material":"My new slider","default":1,"range":[0,1]}'),R(d,"ui_editor_shader_variable_slider_int","float","u_userNewIntSlider",'{"material":"My new slider","int":true,"default":0,"range":[0,10]}'),R(d,"ui_editor_shader_variable_linked_slider","vec2","u_userNewLinkedSliders",'{"material":"My new linked sliders","linked":true,"default":"0.5 0.5","range":[0,1]}'),R(d,"ui_editor_shader_variable_color_picker","vec3","u_userNewColor",'{"material":"My new color","type":"color","default":"1 1 1"}'),R(d,"ui_editor_shader_variable_uv_picker","vec2","u_userNewPosition",'{"material":"My new position","position":true,"default":"0.5 0.5"}'),d.button("ui_editor_shader_combo_checkbox","fas fa-wrench",function(){A('{"material":"My Combo Name","combo":"USERCOMBOIDENTIFIER","type":"options","default":0}')}).button("ui_editor_shader_combo_2_options","fas fa-wrench",function(){A('{"material":"My Combo Name","combo":"USERCOMBOIDENTIFIER","type":"options","default":0,"options":{"Option A":0,"Option B":1}}')}).button("ui_editor_shader_combo_3_options","fas fa-wrench",function(){A('{"material":"My Combo Name","combo":"USERCOMBOIDENTIFIER","type":"options","default":0,"options":{"Option A":0,"Option B":1,"Option C":2}}')}),L.builder().subMenu("ui_editor_shader_replace",t).subMenu("ui_editor_shader_add_include",a).subMenu("ui_editor_shader_constants",c).subMenu("ui_editor_shader_variables",d).open(p,e,{placement:{target:e.currentTarget}})}(e)}var t,a,i,n,o},p.openWorkshopMenu=function(e){var t=p.ceControls.getSubscribedScripts(),a=L.builder();if(0===t.length)a.button("ui_editor_script_workshop_browse_empty",D.getProviderIcon(),function(){p.ceControls.openBrowseWorkshop()});else{var i=u(p.ceScriptType);angular.forEach(t,function(e){a.button(e.name,"fas fa-file-code",function(){j.callEditor("readJsonFile",e.path).then(function(e){_(),y(e.script)})}),e.assetscripttype&&a.hotkey(e.assetscripttype,e.assetscripttype===i?"ctxHotkeySuccess":"ctxHotkeyDanger")})}var n=L.builder().button("ui_editor_script_workshop_browse",D.getProviderIcon(),function(){p.ceControls.openBrowseWorkshop()}).subMenu("ui_editor_script_workshop_replace",a);p.ceControls.shouldShowPublishDialog()&&n.divider().button("ui_editor_script_workshop_publish","glyphicon glyphicon-share-alt",function(){p.ceControls.openScriptPublish(v().toString(),u(p.ceScriptType))}),n.open(p,e,{placement:{target:e.currentTarget}})},angular.isObject(p.ceControls)&&(p.ceControls.getValue=function(){return v()}),e.focusin(m)}}}]),angular.module("wallpaperbrowserApp").directive("scriptConsole",function(){return{restrict:"E",templateUrl:"views/templates/scriptconsole.html",scope:{scMsgClick:"&",scEditorSettings:"="},link:function(o,e){var n,r=angular.element(e.find(".scriptLogBox")[0]);o.clearLog=function(){r.empty()},o.$on("onScriptMessage",function(e,t){if(a=t,!angular.isObject(n)||n._message!==a.message||(n._msg=a,++n._count,999<n._count&&(n._count=999),n._countNode.text(n._count),n._countNode.css({visibility:"visible"}),0)){var a;t.clearlog&&o.scEditorSettings.scriptconsoleautoclear?o.clearLog():77<=r[0].childNodes.length&&angular.element(r[0].childNodes[0]).remove();var i=function(e){var t=angular.element(document.createElement("div")),a=angular.element(document.createElement("span")),i=angular.element(document.createElement("span")),n=angular.element(document.createElement("span"));switch(t.addClass("editorScriptLogEntry"),a.addClass("editorScriptLogCount"),i.addClass("label"),n.addClass("editorScriptLogMessage"),e.errorlevel){case 0:t.addClass("info"),i.addClass("label-warning");break;case 1:t.addClass("error"),i.addClass("label-danger");break;case-1:i.addClass("label-default")}return a.css({visibility:"hidden"}),n.text(e.message),a.append(i),t.append(a),t.append(n),angular.isFunction(o.scMsgClick)&&t.click(function(){o.scMsgClick({message:t._msg})}),t._message=e.message,t._msg=e,t._countNode=i,t._count=1,t}(t);n=i,r.append(i),o.scEditorSettings.scriptconsoleautoscroll&&r.scrollTop(r[0].scrollHeight)}})}}}),angular.module("wallpaperbrowserApp").directive("workshopRating",["utils",function(e){return{restrict:"E",replace:!0,scope:{wrItem:"=",setUserVote:"=",setFavorited:"="},templateUrl:function(){return e.useRatingStars()?"views/templates/workshopratingstars.html":"views/templates/workshopratingscore.html"}}}]),angular.module("wallpaperbrowserApp").directive("workshopAuthor",["utils",function(e){return{restrict:"E",replace:!0,scope:{waInfos:"=",waItem:"=",waBrowseAuthor:"=",waOpenUserPage:"="},templateUrl:function(){return e.useDynamicWorkshopAuthor()?"views/templates/workshopauthordynamic.html":"views/templates/workshopauthorstatic.html"}}}]),angular.module("wallpaperbrowserApp").directive("knob",["$document","utils",function(p,u){return{templateUrl:"views/templates/knob.html",restrict:"E",replace:!0,require:"ngModel",scope:{model:"=ngModel",kOnStart:"&",kOnEnd:"&",kOffset:"="},link:function(s,l,e,a){var t=(l=angular.element(l)).find(".knobInput"),i=l.find(".knobPointer"),n=angular.isNumber(s.kOffset)?s.kOffset:0;function o(){p.off("mousemove.knob"),p.off("mouseup.knob")}function c(e){var t=e-n*Math.PI;t=t<0?(t-Math.PI)%(2*Math.PI)+Math.PI:(t+Math.PI)%(2*Math.PI)-Math.PI,a.$setViewValue(t)}function r(e){var t=.5*l.innerWidth(),a=.5*l.innerHeight(),i=e.pageY,n=e.pageX,o=l.offset();o.top+=a,o.left+=t;var r={top:i-o.top,left:n-o.left};c(Math.atan2(r.left,-r.top)),window.safeApply(s)}function d(e){e=Math.max(-1,Math.min(1,e));var t=u.toDegrees(s.model),a=Math.round(t);a.toFixed(5)!==t.toFixed(5)?t=a:t+=e,c(u.toRadians(t)),window.safeApply(s)}t.mousedown(function(e){angular.isFunction(s.kOnStart)&&s.kOnStart(),l.addClass("active"),p.on("mousemove.knob",r),p.on("mouseup.knob",function(e){angular.isFunction(s.kOnStart)&&s.kOnEnd(),r(e),o(),l.removeClass("active")}),r(e)}),t.on("mousewheel",function(e){d(e.originalEvent.wheelDelta),e.stopPropagation(),e.preventDefault()}),t.keydown(function(e){38===e.which||39===e.which?d(1):37!==e.which&&40!==e.which||d(-1)}),s.$on("$destroy",o),s.$watch("model",function(e){var t;t=e,t+=Math.PI*(.5+n),i.css({transform:"rotate("+t+"rad)"})})}}}]),angular.module("wallpaperbrowserApp").directive("curveEditor",["$document","$timeout","$translate","contextMenu","skin","modals",function(e,K,Y,Q,J,X){return{templateUrl:"views/templates/curveeditor.html",restrict:"E",template:"",scope:{ceSourceProperties:"=",ceOptions:"=",ceCtrl:"="},link:function(f,o){o=angular.element(o);var c,m,v={bgActive:"#eee",bgInactive:"#ddd",gridLight:"#ddd",gridDark:"#aaa",timelineDark:"#ccc",timelineText:"#000",timelineEvent:"#f39",selectedFrame:"rgb(224, 183, 0)",curveColors:["#f00","#0f0","#00f"],selectedVertex:"rgb(231, 192, 90)",selectionRectangle:"rgba(122, 193, 255, 0.3)",selectionRectangleBorder:"rgba(84, 141, 255, 0.7)"};J.isDarkTheme()&&angular.merge(v,{bgActive:"#333",bgInactive:"#292929",gridLight:"#292929",gridDark:"#111",timelineDark:"#1e1e1e",timelineText:"#eee",selectedFrame:"rgb(112, 91, 0)"});var r,l,s,d=20,p=30,u=20,g=20,h=1,b=1,_=.5*d,y=8,w=5,k=3,i=[],a=o.find(".curves")[0],n=angular.element(o.find(".background")[0]),S=a.getContext("2d"),x=u*h,E=g*b;function C(t,e){if(!angular.isArray(t))return C([t],e);0<i.length&&(angular.forEach(i,function(e){t.includes(e)||t.push(e)}),i=[]);var a=[];angular.forEach(t,function(t){angular.forEach(f.properties,function(e){e.parent===t&&a.push({channel:"c"+e.index,channelIndex:e.index,keyframes:e.keyframes,property:t})})}),0<a.length&&f.ceCtrl.savePropertyKeyframes(a),e||f.ceCtrl.setPreviewFrame(f.selected.frame)}function e(){0<i.length&&(C(i,!0),i=[])}function t(){angular.frameTimeout(K,1,e)}function A(){f.animationOptions.isPlaying&&f.pausePlayback()}function P(e){return!angular.isArray(e.properties)||e.properties.length<1||e.properties[0].value}function T(t){var a;return angular.forEach(f.properties,function(e){e.keyframes.includes(t)&&(a=e)}),a}function R(){var a=[];return angular.forEach(f.selected.vertices,function(e){var t=T(e);t&&P(t)&&a.push(e)}),a}function I(e){if(c){var t=-.5,a=1.5;angular.forEach(f.properties,function(e){P(e)&&angular.forEach(e.keyframes,function(e){t=Math.min(t,e.value),a=Math.max(a,e.value)})});var i=c.h-d,n=c.w-p,o=g*(a-t)*1.2,r=u*f.ceOptions.length*1.05;b=i/o,b=Math.max(1e-5,b);var s={left:-(p+2),top:_+g*b*(Math.abs(t)-a)*.5};e?l.top=s.top:(h=Math.min(3,n/r),l=s)}}function O(){l||I(),m={left:l.left,right:l.left+c.w,top:-(l.top-c.h/2),bottom:-(l.top+c.h/2)},x=u*h,E=g*b}function M(e,t){return e.frame-t.frame}function D(t){return function(e){return e.frame===t}}function j(e){e.sort(M);for(var t=-99999,a=0;a<e.length;++a){for(;e[a].frame<=t;)++e[a].frame;t=e[a].frame}}function W(e,t,a,i,n){return Math.pow(1-e,3)*t+3*Math.pow(1-e,2)*e*a+3*(1-e)*Math.pow(e,2)*i+Math.pow(e,3)*n}function L(e,t,a,i){S.beginPath(),S.moveTo(e,t),S.lineTo(a,i),S.stroke()}function F(){var g;!c||E<=0||x<=0||(S.resetTransform(),S.fillStyle=v.bgInactive,S.fillRect(0,0,c.w,c.h),!angular.isObject(f.ceOptions)||!angular.isNumber(f.ceOptions.length)||f.ceOptions.length<1||(S.translate(-m.left,m.top),S.scale(1,-1),function(){S.save(),S.lineWidth=1,S.fillStyle=v.bgActive,S.strokeStyle=v.gridLight,S.fillRect(0,m.top,f.ceOptions.length*x,m.bottom-m.top);for(var e=x,t=E;e<15;)e*=2;for(;t<15;)t*=2;var a=m.left%20;S.setLineDash([10,10]);for(var i=Math.floor(m.bottom/t)*t;i<m.top;i+=t)S.beginPath(),S.moveTo(m.left-a,i),S.lineTo(m.right,i),S.stroke();S.setLineDash([]);for(var n=Math.floor(m.left/e)*e;n<m.right;n+=e)S.beginPath(),S.moveTo(n,m.top),S.lineTo(n,m.bottom),S.stroke();S.strokeStyle=v.gridDark,S.beginPath(),S.moveTo(0,m.top),S.lineTo(0,m.bottom),S.stroke(),S.beginPath(),S.moveTo(m.left,0),S.lineTo(m.right,0),S.stroke(),S.restore()}(),g=-1,S.lineWidth=1,angular.forEach(f.properties,function(e){if(++g,angular.isArray(e.keyframes)&&0!==e.keyframes.length&&P(e)){var t,a,i,n=e.keyframes[0],o=e.keyframes[e.keyframes.length-1];for(S.strokeStyle=v.curveColors[g%3],S.fillStyle=v.curveColors[g%3],S.beginPath(),S.moveTo(m.left,n.value*E),S.lineTo(n.frame*x,n.value*E),S.stroke(),S.beginPath(),S.moveTo(o.frame*x,o.value*E),S.lineTo(m.right,o.value*E),S.stroke(),t=0;t<e.keyframes.length-1;++t){a=e.keyframes[t];var r=((i=e.keyframes[t+1]).frame-a.frame)/2;S.beginPath(),S.moveTo(a.frame*x,a.value*E);var s=a.front.enabled?a.front.x:0,l=a.front.enabled?a.front.y:0,c=i.back.enabled?i.back.x:0,d=i.back.enabled?i.back.y:0;S.bezierCurveTo((a.frame+s*r)*x,(a.value+ +l)*E,(i.frame+c*r)*x,(i.value+ +d)*E,i.frame*x,i.value*E),S.stroke()}for(S.strokeStyle=v.curveColors[g%3],S.fillStyle=v.curveColors[g%3],t=0;t<e.keyframes.length;++t){var p,u;if(a=e.keyframes[t],f.selected.vertices.includes(a))a.back.enabled&&(u={x:(p={x:a.frame*x,y:a.value*E}).x+a.back.x*k*x,y:p.y+a.back.y*k*E},L(p.x,p.y,u.x,u.y),S.fillStyle=f.selected.hoverControlPoint===a.back?v.selectedVertex:v.curveColors[g%3],S.fillRect(u.x-w/2,u.y-w/2,w,w)),a.front.enabled&&(u={x:(p={x:a.frame*x,y:a.value*E}).x+a.front.x*k*x,y:p.y+a.front.y*k*E},L(p.x,p.y,u.x,u.y),S.fillStyle=f.selected.hoverControlPoint===a.front?v.selectedVertex:v.curveColors[g%3],S.fillRect(u.x-w/2,u.y-w/2,w,w))}for(t=0;t<e.keyframes.length;++t)a=e.keyframes[t],S.fillStyle=f.selected.vertices.includes(a)||f.selected.hoverVertex===a?v.selectedVertex:v.curveColors[g%3],S.fillRect(a.frame*x-y/2,a.value*E-y/2,y,y)}}),function(){if(void 0!==s){var e=Math.min(s.left,s.left2)*x,t=Math.max(s.left,s.left2)*x,a=Math.min(s.top,s.top2)*E,i=Math.max(s.top,s.top2)*E;S.fillStyle=v.selectionRectangle,S.strokeStyle=v.selectionRectangleBorder,S.lineWidth=1,S.fillRect(e,a,t-e,i-a),S.beginPath(),S.moveTo(e,a),S.lineTo(t,a),S.lineTo(t,i),S.lineTo(e,i),S.lineTo(e,a),S.stroke()}}(),S.scale(1,-1),S.translate(0,-m.top),function(){for(var e,t,a,i=1,n=1,o=angular.isDefined(f.animationOptions.previewFrame)?f.animationOptions.previewFrame:f.selected.frame,r=1e3<f.ceOptions.length?25:100<f.ceOptions.length?18:15;x*i<r;)i*=2;for(;E*n<15;)n*=2;S.font="10px sans-serif",S.fillStyle=v.bgInactive,S.strokeStyle=v.timelineDark,S.lineWidth=1,S.fillRect(m.left,0,p,c.h-d-1),S.beginPath(),S.moveTo(m.left+p,0),S.lineTo(m.left+p,c.h-d-1),S.stroke(),S.fillStyle=v.timelineText,S.save(),S.translate(0,m.top);for(var s=Math.floor(m.bottom/(E*n))*E*n;s<m.top;s+=E*n)e=Math.floor(s/E+.5).toString(),t=S.measureText(e),S.fillText(e,m.left+p-t.width-2,3-s);S.restore(),S.fillStyle=v.bgInactive,S.fillRect(m.left,c.h-d,m.right-m.left,d),S.strokeStyle=v.timelineDark,S.lineWidth=1,S.beginPath(),S.moveTo(m.left,c.h-d-.5),S.lineTo(m.right,c.h-d-.5),S.stroke();var l=Math.floor(Math.max(0,Math.floor(m.left/x))/i)*i;for(S.fillStyle=v.timelineText,a=l;;a+=i){if(a>=f.ceOptions.length)a=f.ceOptions.length;else if(a+i>f.ceOptions.length)continue;if(a!==o&&(e=a.toString(),t=S.measureText(e),S.fillText(e,x*a-.5*t.width,c.h-d+8)),a===f.ceOptions.length)break}S.fillStyle=v.timelineEvent,angular.forEach(f.ceOptions.events,function(e){S.beginPath(),S.arc(x*e.frame,c.h-5,3,0,2*Math.PI),S.fill()}),S.fillStyle=v.selectedFrame,S.strokeStyle=v.selectedFrame,S.lineWidth=2,S.beginPath(),S.moveTo(o*x,0),S.lineTo(o*x,c.h),S.stroke(),S.beginPath(),S.moveTo(o*x-10,c.h),S.lineTo(o*x-10,c.h-d/2),S.lineTo(o*x,c.h-d),S.lineTo(o*x+10,c.h-d/2),S.lineTo(o*x+10,c.h),S.fill(),S.fillStyle=v.timelineText,e=Math.round(o).toString(),t=S.measureText(e),S.fillText(e,x*o-.5*t.width,c.h-d+16)}()))}function B(e){var t=Math.round((e.offsetX+m.left)/x);t=Math.max(0,Math.min(f.ceOptions.length,t)),f.selected.frame=t}function H(e){return e.offsetY>=c.h-d&&Math.abs(e.offsetX-f.selected.frame*x+m.left)<4}function N(e,t){if(!(c.h-e.offsetY<d)){var a=e.offsetX-t.x+m.left,i=-e.offsetY-t.y+m.top;return Math.abs(a)<2*y&&Math.abs(i)<2*y?{dx:a,dy:i}:void 0}}function V(e){var t=e.front,a=e.back;t&&(t.x=Math.max(0,Math.min(2,t.x))),a&&(a.x=Math.max(-2,Math.min(0,a.x)))}function U(e,t){var a,i,n=e.front===t?e.back:e.front;n.enabled&&t.enabled&&(e.lockangle&&e.locklength?(n.x=-t.x,n.y=-t.y):e.lockangle?(a=Math.sqrt(n.x*n.x*u*u+n.y*n.y*E*E)/(E*u),i=Math.sqrt(t.x*t.x*u*u+t.y*t.y*E*E)/(E*u),n.x=-t.x,n.y=-t.y,n.x*=a/i,n.y*=a/i):e.locklength&&(a=Math.sqrt(n.x*n.x*u*u+n.y*n.y*E*E)/(E*u),i=Math.sqrt(t.x*t.x*u*u+t.y*t.y*E*E)/(E*u),n.x*=i/a,n.y*=i/a),V(e))}function z(e){var n=[];angular.forEach(f.properties,function(e){if(P(e)&&(f.selected.items.empty()||f.selected.items.includes(e))){var t=f.ceCtrl.getCurrentPropertyValues(e.parent),a=e.keyframes.find(D(f.selected.frame)),i=t&&e.index<t.length?t[e.index]:function(e,t){for(var a=0;a<=e.keyframes.length;++a){if(0===a&&t<=e.keyframes[a].frame)return e.keyframes[a].value;if(0<a&&a<e.keyframes.length&&t>=e.keyframes[a-1].frame&&t<e.keyframes[a].frame){for(var i=e.keyframes[a-1],n=e.keyframes[a],o=(t-i.frame)/(n.frame-i.frame),r=(n.frame-i.frame)/2,s=1,l=0;l<1e3;++l){var c=W(o,i.frame,i.frame+i.front.x*r,n.frame+n.back.x*r,n.frame);if(Math.abs(c-t)<.01)break;t<c?o-=s*=.99:o+=s*=.99}return W(o,i.value,i.value+i.front.y,n.value+n.back.y,n.value)}if(a===e.keyframes.length&&0<a)return e.keyframes[a-1].value}return 0}(e,f.selected.frame);a?a.value=i:(e.keyframes.push({frame:f.selected.frame,value:i,back:{enabled:"both"===f.animationOptions.beziermode||"left"===f.animationOptions.beziermode,x:-1,y:0},front:{enabled:"both"===f.animationOptions.beziermode||"right"===f.animationOptions.beziermode,x:1,y:0},lockangle:f.animationOptions.lockangle,locklength:f.animationOptions.locklength}),e.keyframes.sort(M),n.includes(e.parent)||n.push(e.parent))}}),C(n,e),F()}function $(){f.curveTooltip=""}f.selected={frame:0,previewFrame:0,vertices:[],items:[],hoverVertex:void 0},f.properties=[],f.animationOptions={autokeyframe:!0,beziermode:"both",locklength:!0,lockangle:!0,isPlaying:!1},n.on("pointerdown",function(e){m&&(f.animationOptions.isPlaying||(r||(r={left:e.offsetX,top:e.offsetY,which:e.which},n[0].setPointerCapture(e.originalEvent.pointerId),1===e.which&&(f.selected.hoverControlPoint?(r.selectionHandled=!0,r.controlPoint=f.selected.hoverControlPoint,r.controlPointInfo=f.selected.hoverControlPointInfo,r.property=f.selected.hoverControlPointInfo.property,r.modifiedProperties=[f.selected.hoverControlPointInfo.property.parent],r.x=r.controlPoint.x,r.y=r.controlPoint.y):f.selected.hoverVertex?(f.selected.vertices.includes(f.selected.hoverVertex)||(e.shiftKey||e.ctrlKey?f.selected.vertices.push(f.selected.hoverVertex):(f.selected.vertices=[f.selected.hoverVertex],f.selected.hoverVertex.back&&f.selected.hoverVertex.back.enabled&&f.selected.hoverVertex.front&&f.selected.hoverVertex.front.enabled?f.animationOptions.beziermode="both":f.selected.hoverVertex.back&&f.selected.hoverVertex.back.enabled?f.animationOptions.beziermode="left":f.selected.hoverVertex.back&&f.selected.hoverVertex.back.enabled?f.animationOptions.beziermode="right":f.animationOptions.beziermode="none",f.animationOptions.lockangle=f.selected.hoverVertex.lockangle,f.animationOptions.locklength=f.selected.hoverVertex.locklength),r.selectionHandled=!0),r.vertex=f.selected.hoverVertex,r.property=f.selected.hoverVertexInfo.property,r.vertexInfo=f.selected.hoverVertexInfo,r.allVertices=[],angular.forEach(R(),function(e){r.allVertices.push({vertex:e,property:T(e),frame:e.frame+f.selected.hoverVertexInfo.dx/x,value:e.value,ovalue:e.value})}),F()):e.offsetY>c.h-d||H(e)?(f.selected.hoverVertex=void 0,B(e),r.timeline=!0,F()):r.selectionRect={top:(-r.top+m.top)/E,left:(r.left+m.left)/x})),window.safeApply(f)))}),n.on("pointerup",function(e){if(m){if(r&&r.which===e.which){if(s){var t=function(e){for(var t=[],a=f.properties.length-1;0<=a;--a){var i=f.properties[a];if(angular.isArray(i.keyframes)&&P(i))for(var n=i.keyframes.length-1;0<=n;--n){var o=i.keyframes[n];o.frame>=e.x0&&o.frame<=e.x1&&o.value>=e.y0&&o.value<=e.y1&&t.push(o)}}return t}({x0:Math.min(s.left,s.left2),x1:Math.max(s.left,s.left2),y0:Math.min(s.top,s.top2),y1:Math.max(s.top,s.top2)});e.shiftKey?angular.forEach(t,function(e){f.selected.vertices.includes(e)||f.selected.vertices.push(e)}):e.ctrlKey?angular.forEach(t,function(e){f.selected.vertices.includes(e)?f.selected.vertices.findAndRemove(e):f.selected.vertices.push(e)}):f.selected.vertices=t,s=void 0}else{r.vertex&&(angular.forEach(r.allVertices,function(e){j(e.property.keyframes)}),r.controlPoint||r.hasMoved||(e.ctrlKey||e.shiftKey?f.selected.vertices.includes(r.vertex)?e.shiftKey||r.selectionHandled||f.selected.vertices.findAndRemove(r.vertex):f.selected.vertices.push(r.vertex):f.selected.vertices=[r.vertex]));var a=r.modifiedProperties||[];angular.forEach(r.allVertices,function(e){a.includes(e.property.parent)||a.push(e.property.parent)}),C(a)}r=void 0,n[0].releasePointerCapture(e.originalEvent.pointerId)}F(),window.safeApply(f)}}),n.on("pointermove",function(t){if(m){if(r){if(r.hasMoved=!0,r.controlPoint)r.x+=(t.offsetX-r.left)/x/k,r.y-=(t.offsetY-r.top)/E/k,r.controlPoint.x=r.x,t.shiftKey?r.controlPoint.y=0:r.controlPoint.y=r.y,V(r.controlPointInfo.vertex),U(r.controlPointInfo.vertex,r.controlPoint),V(r.controlPointInfo.vertex);else if(r.vertex)angular.forEach(r.allVertices,function(e){e.frame+=(t.offsetX-r.left)/x,e.value-=(t.offsetY-r.top)/E,e.vertex.frame=Math.round(e.frame),t.shiftKey?e.vertex.value=e.ovalue:e.vertex.value=e.value,e.property.keyframes.sort(M)});else if(r.timeline){var e=f.selected.frame;B(t),e!==f.selected.frame&&window.safeApply(f)}else r.selectionRect?(r.selectionRect.top2=(-t.offsetY+m.top)/E,r.selectionRect.left2=(t.offsetX+m.left)/x,s=r.selectionRect):(l.left-=t.offsetX-r.left,l.top-=t.offsetY-r.top,O());r.left=t.offsetX,r.top=t.offsetY,F(),$(),window.safeApply(f)}else{var a=function(e){for(var t=f.properties.length-1;0<=t;--t){var a=f.properties[t];if(angular.isArray(a.keyframes)&&P(a))for(var i=a.keyframes.length-1;0<=i;--i){var n,o=a.keyframes[i];if(f.selected.vertices.includes(o))if(o.back.enabled&&(n=N(e,{x:(o.frame+o.back.x*k)*x,y:(o.value+o.back.y*k)*E}))&&(n.controlPoint=o.back),o.front.enabled&&!n&&(n=N(e,{x:(o.frame+o.front.x*k)*x,y:(o.value+o.front.y*k)*E}))&&(n.controlPoint=o.front),n)return n.vertex=o,n.property=a,n}}}(t);if(((f.selected.hoverControlPointInfo=a)&&a.controlPoint)!==f.selected.hoverControlPoint&&(f.selected.hoverControlPoint=a&&a.controlPoint,f.selected.hoverVertex=void 0,F(),$(),window.safeApply(f)),!a){var i=function(e){for(var t,a=Number.MAX_VALUE,i=f.properties.length-1;0<=i;--i){var n=f.properties[i];if(angular.isArray(n.keyframes)&&P(n))for(var o=n.keyframes.length-1;0<=o;--o){var r=n.keyframes[o],s=N(e,{x:r.frame*x,y:r.value*E});if(s){var l=s.dx*s.dx+s.dy*s.dy;l<a&&(a=l,s.vertex=r,s.property=n,t=s)}}}return t}(t);((f.selected.hoverVertexInfo=i)&&i.vertex)!==f.selected.hoverVertex&&(f.selected.hoverVertex=i&&i.vertex,f.selected.hoverControlPoint=void 0,F(),f.selected.hoverVertex?(n=i.property,f.curveTooltip=n.name):$(),window.safeApply(f))}}var n;r&&r.timeline||H(t)?o.addClass("dragH"):o.removeClass("dragH")}}),n.on("pointerleave",function(){$(),window.safeApply(f)}),n.on("wheel",function(e){var t,a;if(e.shiftKey||e.ctrlKey){t=0<e.originalEvent.deltaY?-1:1,a=b*(1+.1*t);var i=e.originalEvent.offsetY-.5*c.h;l.top+=i,l.top*=a/b,l.top-=i,b=a}else t=0<e.originalEvent.deltaY?-1:1,a=h*(1+.1*t),l.left+=e.originalEvent.offsetX,l.left*=a/h,l.left-=e.originalEvent.offsetX,h=a;O(),F()}),f.hasKeyframe=function(a){var i=!0;return angular.forEach(f.properties,function(e){if(P(e)&&(f.selected.items.empty()||f.selected.items.includes(e))){var t=!1;angular.forEach(e.keyframes,function(e){t=t||e.frame===a}),i=i&&t}}),i},f.cycleBezierMode=function(){switch(f.animationOptions.beziermode){case"both":f.animationOptions.beziermode="left";break;case"left":f.animationOptions.beziermode="right";break;case"right":f.animationOptions.beziermode="none";break;case"none":f.animationOptions.beziermode="both"}var a=[];angular.forEach(f.selected.vertices,function(e){e.back.enabled="both"===f.animationOptions.beziermode||"left"===f.animationOptions.beziermode,e.front.enabled="both"===f.animationOptions.beziermode||"right"===f.animationOptions.beziermode;var t=T(e);a.includes(t.parent)||a.push(t.parent)}),C(a),F()},f.insertKeyframes=function(){z()},f.removeKeyframes=function(){var t;t=[],angular.forEach(f.properties,function(e){P(e)&&(f.selected.items.empty()||f.selected.items.includes(e))&&(e.keyframes.length<2||(e.keyframes.findAndRemove(D(f.selected.frame)),t.includes(e.parent)||t.push(e.parent)))}),C(t),F()},f.resetView=function(e){I(e),O(),F()},f.showHelp=function(){X.open("editorAnimationHelp",{data:{}})},f.editAnimationEvents=function(e){f.ceOptions.events=f.ceOptions.events||[],X.open("editorAnimationEvents",{data:{frame:e,events:f.ceOptions.events}}).then(function(e){f.ceOptions.events=e.sort(function(e,t){return e.frame-t.frame}),F(),f.ceCtrl.saveAnimationOptions(f.ceOptions)})},f.toggleLockAngle=function(){f.animationOptions.lockangle=!f.animationOptions.lockangle;var a=[];angular.forEach(R(),function(e){e.lockangle=f.animationOptions.lockangle,e.lockangle&&U(e,e.back),V(e);var t=T(e);a.includes(t.parent)||a.push(t.parent)}),C(a),F()},f.toggleLockLength=function(){f.animationOptions.locklength=!f.animationOptions.locklength;var a=[];angular.forEach(R(),function(e){e.locklength=f.animationOptions.locklength,e.locklength&&U(e,e.back),V(e);var t=T(e);a.includes(t.parent)||a.push(t.parent)}),C(a),F()},f.resetSelectedVertices=function(){var a=[];angular.forEach(R(),function(e){e.back.x=-1,e.back.y=0,e.front.x=1,e.front.y=0;var t=T(e);a.includes(t.parent)||a.push(t.parent)}),C(a),F()},f.listPropertyChanged=function(){F()},f.openAnimationOptions=function(){var e=angular.isFunction(f.ceCtrl.getAnimatedSiblingProperties)&&f.ceCtrl.getAnimatedSiblingProperties();X.open("editorAnimationOptions",{data:{options:angular.copy(f.ceOptions),siblingProperties:e,mode:f.ceCtrl.getMode()}}).then(function(e){f.ceOptions.fps=Math.max(1e-5,e.fps),f.ceOptions.length=Math.max(1,e.length),f.ceOptions.mode=e.mode,e.parent?f.ceOptions.parent=e.parent:delete f.ceOptions.parent,e.name?f.ceOptions.name=e.name:delete f.ceOptions.name,e.startpaused?f.ceOptions.startpaused=e.startpaused:delete f.ceOptions.startpaused,F(),f.ceCtrl.saveAnimationOptions(f.ceOptions)})},f.moveToFrame=function(e){A(),f.selected.frame=e?f.ceOptions.length:0,F()},f.startPlayback=function(){f.animationOptions.isPlaying=!0,delete f.animationOptions.previewFrame,f.ceCtrl.setPreviewPlayback(!0)},f.pausePlayback=function(e){e&&angular.isDefined(f.animationOptions.previewFrame)&&(f.selected.frame=Math.round(f.animationOptions.previewFrame)),f.animationOptions.isPlaying=!1,delete f.animationOptions.previewFrame,f.ceCtrl.setPreviewPlayback(!1),F()};var q=0;f.initCurves=function(){A(),f.properties=[],angular.forEach(f.ceSourceProperties,function(e){for(var t=[],a=0;a<e.channelCount;++a){var i={key:e.key,parent:e,index:a,icon:"fas fa-wave-sine",name:Y.instant(e.name||e.key),properties:[{key:"visible",value:!0}]};if(t.push(i),1<e.channelCount){i.name+=[" x"," y"," z"," w"][a]}if(angular.isArray(e.animation&&e.animation["c"+a])&&0<e.animation["c"+a].length)i.keyframes=e.animation["c"+a];else{var n=f.ceCtrl.getCurrentPropertyValues(e);i.keyframes=[{frame:0,value:n&&n.length>a?n[a]:0,back:{enabled:!0,x:-1,y:0},front:{enabled:!0,x:1,y:0},lockangle:!0,locklength:!0}]}f.properties.push(i)}}),f.selected.vertices=[],f.selected.items=[],f.selected.hoverVertex=void 0,F(),f.listenForValueChanges&&f.listenForValueChanges(),l&&0===q&&f.resetView(!0)},f.$on("undoRedoBegin",function(){++q}),f.$on("undoRedoPerformed",function(){K(function(){--q},1e3)}),f.propertContextMenu=function(e,t,a){console.log(e,t,a),Q.builder().button("ui_editor_properties_show_single","fas fa-fw fa-angle-right",function(){angular.forEach(f.properties,function(e){e.properties[0].value=!1}),a.properties[0].value=!0,F()}).button("ui_editor_properties_show_all","fas fa-fw fa-angle-double-right",function(){angular.forEach(f.properties,function(e){e.properties[0].value=!0}),F()}).divider().button("ui_editor_properties_select_single","fas fa-fw fa-check",function(){f.selected.items=[a]}).button("ui_editor_properties_select_all","fas fa-fw fa-check-double",function(){angular.forEach(f.properties,function(e){f.selected.items.includes(e)||f.selected.items.push(e)})}).open(f,e)},f.$watch("ceSourceProperties",f.initCurves),f.$watch(function(){return{w:Math.round(n.innerWidth()),h:Math.round(n.innerHeight())}},function(e,t){0!==e.w&&0!==e.h&&(e&&t&&e.w===t.w&&e.h===t.h&&m||(c=e,a.width=e.w,a.height=e.h,O(),F()))},!0),f.$watch("selected.items",function(){F()},!0),f.$watch("selected.frame",function(e){angular.isNumber(e)&&(A(),0<i.length?t():f.ceCtrl.setPreviewFrame(f.selected.frame))});var G=[];f.listenForValueChanges=function(){angular.forEach(G,function(e){e()}),G=[],angular.forEach(f.ceSourceProperties,function(a){G.push(f.$watch(function(){return f.ceCtrl.getCurrentPropertyValues(a)},function(e){var t=f.ceCtrl.getCurrentPreviewValue(a);e&&f.animationOptions.autokeyframe&&!f.ceCtrl.isEditingLocked()&&!function(e,t){if(angular.isArray(e)||(e=[e]),angular.isArray(t)||(t=[t]),e.length===t.length){for(var a=0;a<e.length;++a)if(2e-4<Math.abs(e[a]-t[a]))return;return 1}}(t,e)&&(A(),z(!0),(i=[a]).uniquify())},!0))})},f.$on("$destroy",function(){document.body.removeEventListener("blur",t),document.body.removeEventListener("pointerup",t)}),document.body.addEventListener("blur",t,!0),document.body.addEventListener("pointerup",t,!0),o.keydown(function(e){if(32===e.which)return f.animationOptions.isPlaying?f.pausePlayback(!0):f.startPlayback(),void window.safeApply(f);if(!f.animationOptions.isPlaying){var o=[];switch(e.which){case 37:f.selected.frame=Math.max(0,f.selected.frame-1),F();break;case 39:f.selected.frame=Math.min(f.ceOptions.length,f.selected.frame+1),F();break;case 46:angular.forEach(f.properties,function(e){for(;1<e.keyframes.length;){for(var t=!1,a=R(),i=0;i<a.length;++i){var n=e.keyframes.indexOf(a[i]);if(0<=n){e.keyframes.splice(n,1),t=!0,o.includes(e.parent)||o.push(e.parent);break}}if(!t)break}}),C(o),F();break;case 67:var t=R();if(e.ctrlKey&&0<t.length){var n=t[0].frame;angular.forEach(t,function(e){n=Math.min(n,e.frame)}),_curveFrameCopy=[],angular.forEach(t,function(e){var t=T(e),a=f.properties.indexOf(t),i=_curveFrameCopy[a]||[];_curveFrameCopy[a]=i,(e=angular.copy(e)).frame-=n,i.push(e)})}break;case 75:f.hasKeyframe(f.selected.frame)?f.removeKeyframes():f.insertKeyframes();break;case 86:if(e.ctrlKey&&_curveFrameCopy&&0<_curveFrameCopy.length){var a=angular.copy(_curveFrameCopy);angular.forEach(a,function(e){angular.forEach(e,function(e){e.frame+=f.selected.frame})});var i,r,s=[];if(angular.forEach(f.properties,function(e){(f.selected.items.empty()||f.selected.items.includes(e))&&s.push(e)}),a.length<=s.length)for(i=0;i<a.length;++i)angular.forEach(a[i],function(e){s[i].keyframes.push(e),o.includes(s[i].parent)||o.push(s[i].parent)}),j(s[i].keyframes);else r=0,angular.forEach(a,function(e){0!==e.length&&(r<s.length&&(angular.forEach(e,function(e){s[r].keyframes.push(e),o.includes(s[r].parent)||o.push(s[r].parent)}),j(s[r].keyframes)),++r)});C(o),F()}}window.safeApply(f)}}),f.ceCtrl.setAnimationPreviewFrame=function(e){f.animationOptions.isPlaying&&(f.animationOptions.previewFrame=e,F(),"single"===f.ceOptions.mode&&Math.abs(e-f.ceOptions.length)<.01&&f.pausePlayback(!1))},f.ceCtrl.openAnimationOptions=f.openAnimationOptions,f.ceCtrl.performSavePendingProperties=e}}}]),angular.module("wallpaperbrowserApp").controller("SettingsPerApplicationModalCtrl",["$scope","$uibModalInstance","utils","host","data",function(n,e,t,a,o){function i(){a.callDeferred("settingsObject","getRunningApplications").then(function(e){n.applications=e,n.applications.sort(function(e,t){return angular.isString(e.executablename)&&angular.isString(t.executablename)?e.executablename.localeCompare(t.executablename):0})})}n.rules=o.rules,n.newRule={},n.selected={},n.page={name:""},n.conditionOptions=[{label:"ui_settings_playback_condition_is_running",value:"running"},{label:"ui_settings_playback_condition_is_focused",value:"focused"},{label:"ui_settings_playback_condition_is_maximized",value:"maximized"},{label:"ui_settings_playback_condition_is_fullscreen",value:"fullscreen"},{label:"ui_settings_playback_condition_is_playing_audio",value:"playingaudio"}],n.actionLabels={run:"ui_settings_playback_keep_running",pause:o.runtime&&o.runtime.multimonitor?"ui_settings_playback_pause_per_monitor":"ui_settings_playback_pause",pauseall:"ui_settings_playback_pause_all",stop:"ui_settings_playback_stop",stopall:"ui_settings_playback_stop_all",mute:"ui_settings_playback_mute",loadwallpaper:"ui_settings_playback_load_wallpaper",loadplaylist:"ui_settings_playback_load_playlist",loadprofile:"ui_settings_playback_load_profile"},n.conditionLabels={running:"ui_settings_playback_condition_is_running",focused:"ui_settings_playback_condition_is_focused",maximized:"ui_settings_playback_condition_is_maximized",fullscreen:"ui_settings_playback_condition_is_fullscreen",playingaudio:"ui_settings_playback_condition_is_playing_audio"},n.applications=[],n.openSteamWorkshopPage=function(e){t.openUrl(e.workshopurl,{},t.usePlatformBrowser())},n.showCreatePage=function(){n.page.name="create",n.newRule={condition:n.conditionOptions[0].value,action:"pause"},n.oldRule=void 0,i()},n.showEditPage=function(e){n.page.name="edit",n.newRule=angular.copy(e),n.oldRule=e,i()},n.requiresWallpaperSelection=function(){return n.newRule.action&&n.newRule.action.startsWith("load")},n.cancelLoadRule=function(){n.page.name=n.lastPage,delete n.selected.wallpaper,delete n.newRule.file},n.chooseWallpaper=function(){switch(n.lastPage=n.page.name,n.page.name="wallpaper",n.filter={},n.loadItems=[],n.newRule.action){case"loadwallpaper":a.callDeferred("settingsObject","getWallpaperCache").then(function(e){n.loadItems=e.map(function(e){return{label:e.title,value:e}}),n.loadItems=n.loadItems.concat((o.browser.localfiles||[]).map(function(e){return{label:t.isURL(e)?e:e.replace(/^.*[\\\/]/,""),value:{file:e}}})),n.selected.wallpaper=e.find(function(e){return e.file===n.newRule.file}),angular.isObject(n.selected.wallpaper)||delete n.newRule.file});break;case"loadplaylist":n.loadItems=(o.browser.playlists||[]).map(function(e){return{label:e.name,value:{file:e.name}}}),n.selected.wallpaper=o.browser.playlists.find(function(e){return e.name===n.newRule.file}),angular.isObject(n.selected.wallpaper)||delete n.newRule.file;break;case"loadprofile":n.loadItems=(o.browser.profiles||[]).map(function(e){return{label:e.name,value:{file:e.name}}}),n.selected.wallpaper=o.browser.profiles.find(function(e){return e.name===n.newRule.file}),angular.isObject(n.selected.wallpaper)||delete n.newRule.file}},n.selectWallpaper=function(e){n.filter.search=e.label,n.newRule.file=e.value.file,n.selected.wallpaper=e.value},n.clearWallpaperSearch=function(){n.filter.search="",delete n.newRule.file,delete n.selected.wallpaper},n.createRule=function(){var e=n.newRule;n.page.name="",n.oldRule?n.rules.splice(n.rules.indexOf(n.oldRule),1,e):n.rules.unshift(e)},n.close=function(){e.close()},n.$watch("newRule.condition",function(e){var t,a,i;n.actionOptions=(t=o.runtime&&o.runtime.multimonitor&&"playingaudio"!==e&&"running"!==e,i=[],"running"!==(a=e)&&i.push({label:"ui_settings_playback_keep_running",value:"run"}),i.push({label:"ui_settings_playback_mute",value:"mute"}),t?(i.push({label:"ui_settings_playback_pause_per_monitor",value:"pause"}),i.push({label:"ui_settings_playback_pause_all",value:"pauseall"})):i.push({label:"ui_settings_playback_pause",value:"pause"}),"playingaudio"!==a&&i.push({label:"ui_settings_playback_stop",value:"stop"}),i.push({label:"ui_settings_playback_load_wallpaper",value:"loadwallpaper"}),i.push({label:"ui_settings_playback_load_playlist",value:"loadplaylist"}),i.push({label:"ui_settings_playback_load_profile",value:"loadprofile"}),i),angular.isString(n.newRule.action)||(n.newRule.action=n.actionOptions[0].value)})}]),angular.module("wallpaperbrowserApp").controller("SettingsHotkeysModalCtrl",["$scope","$uibModalInstance","utils","host","data",function(i,e,n,t,a){i.hotkeys=a.hotkeys;var o=[];angular.forEach(i.hotkeys,function(e){n.isUserHotkeyAction(e.action)&&o.push(e)}),i.list=[{title:"ui_settings_hotkeys_group_playback",items:[{label:"ui_settings_hotkeys_action_pause",action:"pause"},{label:"ui_settings_hotkeys_action_stop",action:"stop"},{label:"ui_settings_hotkeys_action_mute",action:"mute"},{label:"ui_settings_hotkeys_action_next_wallpaper",action:"nextwallpaper"}]},{title:"ui_settings_hotkeys_group_general",items:[{label:"ui_settings_hotkeys_action_recording",action:"togglerecord"},{label:"ui_settings_hotkeys_action_hide_icons",action:"toggleicons"},{label:"ui_settings_hotkeys_action_take_screenshot",action:"screenshot"}]},{title:"ui_settings_hotkeys_group_windows",items:[{label:"ui_settings_hotkeys_action_window_browser",action:"windowbrowser"},{label:"ui_settings_hotkeys_action_window_settings",action:"windowsettings"},{label:"ui_settings_hotkeys_action_window_editor",action:"windoweditor"}]},{title:"ui_settings_hotkeys_group_wallpaper",stub:"ui_settings_hotkeys_group_wallpaper_stub",items:o}],n.canTakeScreenshots()||i.list[1].items.splice(2,1),i.findHotkeyList=function(t){return n.isUserHotkeyAction(t.action)?t:(angular.forEach(i.hotkeys,function(e){e.action===t.action&&(a=e)}),angular.isUndefined(a)&&(a={action:t.action,keys:[]},i.hotkeys.push(a)),a);var a},i.close=function(){angular.forEach(i.hotkeys.slice(),function(e){n.isUserHotkeyAction(e.action)&&0===e.keys.length&&i.hotkeys.findAndRemove(e)}),e.close()}}]),angular.module("wallpaperbrowserApp").controller("BrowseAssignHotkeyModalCtrl",["$scope","$uibModalInstance","data",function(e,t,a){e.name=a.name,e.hotkeys=a.hotkeys,e.keys=[],e.ok=function(){t.close(e.keys)},e.cancel=function(){t.dismiss("cancel")}}]),angular.module("wallpaperbrowserApp").controller("SettingsPluginModalCtrl",["$timeout","$scope","$uibModalInstance","data",function(e,t,a,i){t.plugin=i.plugin,t.pluginSettings=i.pluginSettings,t.ok=function(){a.close()},e(function(){t.$broadcast("rzSliderForceRender")},300)}]),angular.module("wallpaperbrowserApp").controller("BrowseSetDefaultsModalCtrl",["$scope","$translate","$uibModalInstance","utils","data",function(a,i,e,t,n){var o={};angular.forEach(t.getSharedDefaultProperties(),function(e,t){o[t]={value:e,key:t}}),o.rate.disableByDefault=!0,a.data={properties:n.properties,options:[],mode:"updateall"},i("ui_browse_details_properties_apply_to_all_update_selection",{count:n.selectionCount}).then(function(e){a.data.selectionTitle=e.toString()}),a.ok=function(){e.close(a.data)},a.cancel=function(){e.dismiss("cancel")},a.resetDefaultValues=function(){angular.forEach(a.data.options,function(e){o[e.key]&&(e.value=o[e.key].value)})},a.anyPropertyEnabled=function(){var t=!1;return angular.forEach(a.data.options,function(e){e.enabled&&(t=!0)}),t},angular.forEach(a.data.properties,function(e){var t=o[e.key];t?a.data.options.push({label:i.instant(e.text).toString().replace(/<[^>]+>/gm,""),key:e.key,value:e.value,enabled:!t.disableByDefault}):e.plugin&&a.data.options.push({label:i.instant(e.text).toString().replace(/<[^>]+>/gm,""),key:e.key,value:e.value,enabled:!0})})}]),angular.module("wallpaperbrowserApp").controller("EditorUserPropertyDetailsModalCtrl",["$scope","$uibModalInstance","utils","data",function(a,e,t,i){function n(e){switch(delete e.min,delete e.max,delete e.mode,delete e.options,delete e.step,delete e.precision,delete e.fraction,e.type){default:e.value="";break;case"directory":e.value="",e.mode="ondemand";break;case"color":e.value="1 0 0";break;case"slider":e.value=1,e.min=0,e.max=1,e.fraction=!0,e.precision=2;break;case"bool":e.value=!0;break;case"combo":e.options=[],e.value=void 0}}function o(){a.property.key.toLowerCase().replace(/\W+/g,"").trim()?(a.property.key=a.property.key.toLowerCase().replace(/\W+/g,""),a.property.key.match(/^\d/g)&&(a.property.key="_"+a.property.key)):a.property.key="newproperty"}"create"===i.mode?(a.title="ui_editor_user_properties_add_property",a.property={text:"New Property"}):(a.title="ui_editor_user_properties_edit_property",a.property=angular.copy(i.property)),"scene"===i.projectData.type?a.typeOptions=[{label:"ui_editor_user_properties_type_color",value:"color"},{label:"ui_editor_user_properties_type_slider",value:"slider"},{label:"ui_editor_user_properties_type_bool",value:"bool"},{label:"ui_editor_user_properties_type_combo",value:"combo"},{label:"ui_editor_user_properties_type_textinput",value:"textinput"}]:a.typeOptions=[{label:"ui_editor_user_properties_type_color",value:"color"},{label:"ui_editor_user_properties_type_slider",value:"slider"},{label:"ui_editor_user_properties_type_bool",value:"bool"},{label:"ui_editor_user_properties_type_combo",value:"combo"},{label:"ui_editor_user_properties_type_textinput",value:"textinput"},{label:"ui_editor_user_properties_type_directory",value:"directory"},{label:"ui_editor_user_properties_type_file",value:"file"}],a.fileTypeOptions=[{label:"ui_editor_user_properties_file_type_image",value:"image"},{label:"ui_editor_user_properties_file_type_video",value:"video"}],a.directoryFetchOptions=[{label:"ui_editor_user_properties_fetch_mode_on_demand",value:"ondemand"},{label:"ui_editor_user_properties_fetch_mode_all",value:"fetchall"}],angular.isArray(i.allowedTypes)&&0<i.allowedTypes.length&&a.typeOptions.findAndRemove(function(e){return!i.allowedTypes.includes(e.value)}),"create"===i.mode&&(a.property.type=a.typeOptions[0].value,n(a.property)),a.colorPickerOptions=t.getColorPickerDefaults(),a.newOption={label:"",value:""},a.isCreatingNew="create"===i.mode,a.viewState={isEditingKey:!1},a.addPropertyOption=function(){a.property.options.push(angular.copy(a.newOption)),a.newOption.label="",a.newOption.value=""},a.removePropertyOption=function(e){a.property.options.findAndRemove(e)},a.ok=function(){switch(a.property.type){case"slider":a.property.fraction?((!angular.isNumber(a.property.precision)||a.property.precision<1||4<a.property.precision)&&(a.property.precision=1),a.property.step=1===a.property.precision?1:Math.pow(.1,a.property.precision-1)):(delete a.property.step,delete a.property.precision);break;default:delete a.property.step,delete a.property.precision,delete a.property.fraction}o(),"combo"===a.property.type&&(angular.isDefined(a.property.value)&&angular.isDefined(a.property.options&&a.property.options.find(function(e){return e.value===a.property.value}))||(a.property.value=a.property.options[0].value)),e.close(a.property)},a.cancel=function(){e.dismiss("cancel")},a.isOkDisabled=function(){return a.property.key.length<1||!("combo"!==a.property.type||angular.isArray(a.property.options)&&0!==a.property.options.length)},a.$watch("property.type",function(e,t){angular.isString(e)&&angular.isString(t)&&e!==t&&n(a.property)}),"create"===i.mode&&a.$watch("property.text",function(e){a.viewState.isEditingKey||(a.property.key=e,o())})}]),angular.module("wallpaperbrowserApp").controller("EditorUserPropertiesModalCtrl",["$scope","$translate","$uibModalInstance","utils","data",function(a,t,i,e,n){function o(){var e=a.selectedProperty.selected&&angular.isObject(a.project.data.general.properties)&&a.project.data.general.properties[a.selectedProperty.selected];e&&"combo"===e.type&&angular.isArray(e.options)&&0<e.options.length&&e.options.findIndex(function(e){return e.value===a.selectedProperty.condition})<0&&(a.selectedProperty.condition=e.options[0].value)}a.project=n.project,a.types=n.types,a.selectedProperty={selected:angular.isObject(n.selected)?n.selected.name:n.selected,condition:angular.isObject(n.selected)&&n.selected.condition},a.ok=function(){var e=a.selectedProperty.selected,t=angular.isObject(a.project.data.general.properties)&&a.project.data.general.properties[a.selectedProperty.selected];t&&"combo"===t.type&&(e={name:e,condition:a.selectedProperty.condition}),i.close(t&&e)},a.getTranslatedTypes=function(e){return e.map(function(e){return t.instant("ui_editor_user_properties_type_"+e)}).join(", ")},a.$watch("selectedProperty.selected",function(e,t){e!==t&&o()}),a.$watch("project.data.general.properties[selectedProperty.selected]",function(e,t){e!==t&&angular.isObject(e)&&"combo"===e.type&&o()},!0)}]),angular.module("wallpaperbrowserApp").controller("EditorWorkshopRulesModalCtrl",["$scope","$uibModalInstance","utils","data",function(e,t,a,i){e.data=i,e.ok=function(){t.close()},e.openWorkshopWebRules=function(){a.openUrl("var_url_providerrules")}}]),angular.module("wallpaperbrowserApp").controller("EditorSelectAssetsModalCtrl",["$uibModalInstance","$q","$scope","data",function(t,e,a,i){a.fnOpenWallpaperPublish=function(){a.cancel(),i.fnOpenWallpaperPublish()};var n=0<i.assets.layers.filter(function(e){return"object"===e.name}).length;a.assetLayers=i.assets.layers.filter(function(e){return n||"light"!==e.name}).map(function(e){var t=angular.isArray(e.properties)&&e.properties.find(function(e){return"name"===e.key});return{label:t&&t.value||e.name,icon:e.icon,id:e.id,selected:!1}}),a.assetEffects=i.assets.effects.map(function(e){return{label:e.name,value:e.path}}),a.assetTypes=[{label:"ui_editor_publish_assets_modal_asset_type_layers",value:"layers"},{label:"ui_editor_publish_assets_modal_asset_type_effects",value:"effects"}],a.selected={type:a.assetTypes[0].value,effect:void 0,variantsEnabled:!1},a.$watch("selected.type",function(e){"effects"===e&&0<a.assetEffects.length&&(a.selected.effect=a.assetEffects[0].value)}),a.isAnythingSelected=function(e){switch(a.selected.type){case"layers":return e?a.assetLayers.filter(function(e){return e.selected}).length>=e:angular.isObject(a.assetLayers.find(function(e){return e.selected}));case"effects":return a.selected.effect}},a.cancel=function(){t.dismiss("cancel")},a.ok=function(){switch(a.selected.type){case"layers":var e=a.assetLayers.filter(function(e){return e.selected}).map(function(e){return e.id});t.close({variantsEnabled:a.selected.variantsEnabled&&1<e.length,items:e});break;case"effects":t.close({item:a.selected.effect})}}}]),angular.module("wallpaperbrowserApp").controller("EditorAnimationOptionsModalCtrl",["$scope","$uibModalInstance","data",function(t,a,e){t.settings=e.options,t.tempSettings={seconds:+(e.options.length/e.options.fps).toFixed(3),parent:"",length:e.options.length+1},t.mode=e.mode,angular.isObject(e.options.parent)&&(t.tempSettings.parent=e.options.parent.id+":"+e.options.parent.key),t.modeOptions=[{label:"ui_editor_animation_modal_loop",value:"loop"},{label:"ui_editor_animation_modal_mirror",value:"mirror"},{label:"ui_editor_animation_modal_single",value:"single"}],t.propertyLinkOptions=[],angular.isArray(e.siblingProperties)&&0<e.siblingProperties.length&&(t.propertyLinkOptions=[{label:"ui_editor_animation_modal_create_new_animation",value:""}].concat(e.siblingProperties)),t.ok=function(){if(t.settings.length=Math.max(1,Math.round(t.tempSettings.length-1)),t.settings.fps=t.settings.length/t.tempSettings.seconds,t.tempSettings.parent){var e=t.tempSettings.parent.split(":");t.settings.parent={id:e[0],key:e[1]}}else delete t.settings.parent;t.settings.name||delete t.settings.name,a.close(t.settings)}}]).controller("EditorAnimationEventsModalCtrl",["$scope","$uibModalInstance","data",function(t,e,a){t.events=angular.copy(a.events),t.newEvent={frame:a.frame},t.addEvent=function(){angular.isString(t.newEvent.name)&&0!==t.newEvent.name.trim().length&&(t.newEvent.name=t.newEvent.name.trim(),angular.isNumber(t.newEvent.frame)||(t.newEvent.frame=0),t.events.push(angular.copy(t.newEvent)),delete t.newEvent.name)},t.removeEvent=function(e){t.events.findAndRemove(e)},t.ok=function(){t.addEvent(),t.events=t.events.filter(function(e){return e&&e.name&&0<e.name.trim().length}),e.close(t.events)},t.cancel=function(){e.dismiss("cancel")}}]),angular.module("wallpaperbrowserApp").controller("EditorBoneConstraintsModalCtrl",["$timeout","$scope","$uibModalInstance","utils","data",function(e,t,a,i,n){function o(e){if(!angular.isString(e))return 0;for(var t=e.split(" ").map(function(e){return parseFloat(e)});t.length<2;)t.push(0);return Math.atan2(-t[1],t[0])}function r(e){return Math.cos(e)+" "+Math.sin(-e)+" 0"}function s(e){if(!angular.isString(e))return 0;for(var t=e.split(" ").map(function(e){return parseFloat(e)});t.length<3;)t.push(0);return Math.round(i.toDegrees(t[2]))}function l(e){return angular.isNumber(e)||(e=0),"0 0 "+i.toRadians(e)}function c(){t.temp={gd:o(t.settings.gd),a:o(t.settings.a),lamin:s(t.settings.lamin),lamax:s(t.settings.lamax)}}t.settings=angular.copy(n.settings),t.defaults=n.defaults,t.settings=angular.extend(angular.copy(t.defaults),t.settings),c(),t.ok=function(){t.settings.gd=r(t.temp.gd),t.settings.a=r(t.temp.a),t.settings.lamin=l(t.temp.lamin),t.settings.lamax=l(t.temp.lamax),a.close(t.settings)},t.cancel=function(){a.dismiss()},t.resetSettings=function(){var e=angular.copy(t.settings);t.settings=angular.copy(t.defaults),t.settings.re=e.re,t.settings.se=e.se,c()},t.copySettings=function(){_copiedBoneConstraintsSettings=angular.copy(t.settings)},t.canPaste=function(){return angular.isObject(_copiedBoneConstraintsSettings)},t.pasteSettings=function(){t.settings=angular.copy(_copiedBoneConstraintsSettings),c()},e(function(){t.$broadcast("rzSliderForceRender")},250)}]),angular.module("wallpaperbrowserApp").controller("QueryWorkshopModalCtrl",["$scope","$uibModalInstance","host","utils","contextMenu","data",function(r,e,a,o,s,i){window.queryWorkshopModalCtrl=this;var n=i.assetBrowserItems,l={text:"",sort:"top_rated",ratingtags:{Mature:!1,Questionable:!1,Everyone:!0},typetags:{},assetgenretags:{},utilitytags:{}},c={current:1,count:1,pages:[],visible:!0},d=1;function p(){if(angular.isArray(r.queryWallpapers)&&angular.isArray(n))for(var e=0;e<r.queryWallpapers.length;++e){var t=r.queryWallpapers[e];if(angular.isString(t.workshopid))for(var a=0;a<n.length;++a){var i=n[a];if(t.workshopid===i.workshopid){t!==i&&"unsubscribed"!==i.status?(r.queryWallpapers.splice(e,1,i),r.currentSelection===t&&(r.currentSelection=i)):angular.merge(t,i);break}}}}r.workshopController=i.workshopController,r.assetBrowserItemsUpdateHandle=i.assetBrowserItemsUpdateHandle,r.providerIcon=o.getProviderIcon(),o.canShowSpecializedBrowseLists()?r.sortOptions=[{value:"top_rated",label:"ui_browse_query_sort_by_votes"},{value:"trend_year",label:"ui_browse_query_sort_by_trend_year"},{value:"trend_month",label:"ui_browse_query_sort_by_trend_last_month"},{value:"trend_week",label:"ui_browse_query_sort_by_trend_last_week"},{value:"trend_today",label:"ui_browse_query_sort_by_trend_today"},{value:"most_recent",label:"ui_browse_query_sort_by_date"},{value:"most_up_votes",label:"ui_browse_query_sort_most_up_votes"},{value:"subscriptions",label:"ui_browse_query_sort_most_subscriptions"}]:r.sortOptions=[{value:"top_rated",label:"ui_browse_query_sort_by_votes"},{value:"most_recent",label:"ui_browse_query_sort_by_date"},{value:"subscriptions",label:"ui_browse_query_sort_most_subscriptions"}],r.callbackResetFilter=function(){r.filter=angular.copy(l),r.pagination=c},r.resetSearchFilter=function(){r.filter.text=""},r.canUseAgeRatingTags=o.canUseAgeRatingTags,r.close=function(){e.dismiss("cancel")},r.unsubscribeWorkshopItem=function(e){r.workshopController.unsubscribeWorkshopItem(e.title,e.workshopid).then(function(){r.currentSelection===e&&(r.currentSelection=void 0)})},r.callbackChangePage=function(e,t){if("…"!==e){var a=e;angular.isString(a)&&(a=r.pagination.current,"next"===e?++a:--a),(a=Math.clamp(a,1,r.pagination.count))===r.pagination.current&&!t||(o.updatePagination(r.pagination,a,r.pagination.count),r.refreshQuery())}else o.showPaginationPageNumberPrompt(e).then(r.callbackChangePage)},r.refreshQuery=function(){function e(){i=n.excludedTags.length}function t(e,t){var a=n.excludedTags.length-i;e<=a&&(n.excludedTags.splice(n.excludedTags.length-a,a),angular.isString(t)&&n.excludedTags.push(t))}var i,n={requiredTags:["Asset"],excludedTags:[],sort:r.filter.sort,text:r.filter.text,page:c.current,token:++d};angular.forEach(r.filter.utilitytags,function(e,t){1===e?n.requiredTags.push(t):2===e&&n.excludedTags.push(t)}),e(),angular.forEach(r.filter.assetgenretags,function(e,t){e||n.excludedTags.push(t)}),t(r.filterAssetGenreTags.length,"Unspecified"),e(),angular.forEach(r.filter.typetags,function(e,t){e||n.excludedTags.push(t)}),t(r.filterTypeTags.length),e(),angular.forEach(r.filter.ratingtags,function(e,t){e||n.excludedTags.push(t)}),t(r.filterRatingTags.length),r.queryActive=!0,r.showErrorInBackground=!1,r.queryWallpapers=[],a.callEditor("queryWorkshop",n).then(function(e){r.queryActive=!1,r.queryNoCache=!1,angular.forEach(e.wallpapers,function(e){e.approved=0<=e.tags.indexOf("Approved")}),r.originalQueryWallpapers=angular.copy(e.wallpapers),r.queryWallpapers=e.wallpapers,p(),o.updatePagination(c,n.page,e.pagecount)})},r.callbackWallpaperAllMouse=function(e,t,a){switch(a.stopPropagation(),e){case"left":r.currentSelection=t;var i=angular.element(a.target).closest(".browseWallpaperImage")[0];i&&i.scrollIntoView&&i.scrollIntoView({behavior:"smooth",inline:"nearest",block:"nearest"});break;case"right":var n=s.builder();angular.isObject(t)&&(t.workshopid&&("downloadable"===t.status?n.button("ui_browse_context_menu_subscribe","fas fa-download",function(){r.workshopController.subscribeWorkshopItem(t.workshopid)}):n.button("ui_browse_context_menu_unsubscribe","fas fa-times",function(){r.unsubscribeWorkshopItem(t)})),t&&(t.workshopid||"installed"===t.status)&&(n.divider(),t.workshopid&&n.button("ui_browse_context_menu_workshop",o.getProviderIcon(),function(){r.workshopController.openSteamWorkshopPage(t)})),n.open(r,a));break;case"dbl":r.workshopController.subscribeWorkshopItem(t.workshopid)}},r.showFilter={visible:!1,sort:"top_rated"},r.filterRatingTags=o.getWallpaperRatingTags(),r.filterTypeTags=o.getAssetTypeTags().map(function(e){return{label:e,value:e}}),r.filterAssetGenreTags=o.getAssetGenreTags().map(function(e){return{label:e,value:e}}),r.filterUtilityTags=o.getAvailableTags(!0).map(function(e){return{label:e,value:e}}),angular.forEach(r.filterTypeTags,function(t){o.translateAssetTypeTag(t.value).then(function(e){t.label=e}),i.assetBrowserSettingsGroup&&o.assetTypeGroups[i.assetBrowserSettingsGroup]?l.typetags[t.value]=o.assetTypeGroups[i.assetBrowserSettingsGroup].includes(t.value):l.typetags[t.value]=!0}),angular.forEach(r.filterUtilityTags,function(t){o.translateTag(t.value).then(function(e){t.label=e})}),angular.forEach(r.filterAssetGenreTags,function(t){o.translateTag(t.value).then(function(e){t.label=e}),l.assetgenretags[t.value]="Unspecified"!==t.value}),r.callbackResetFilter(),angular.isObject(i.assetBrowserSettings.filter)&&angular.merge(r.filter,i.assetBrowserSettings.filter),r.$watch("filter",function(e,t){angular.isObject(e)&&e!==t&&(delete angular.copy(e).text,angular.merge(i.assetBrowserSettings,e),r.refreshQuery())},!0),r.$watch("assetBrowserItemsUpdateHandle.handle",function(e,t){if(angular.isDefined(t)&&e!==t&&r.queryWallpapers){for(var a=0;a<r.queryWallpapers.length;++a){var i=r.queryWallpapers[a];if("unsubscribed"===i.status)for(var n=0;n<r.originalQueryWallpapers.length;++n){var o=r.originalQueryWallpapers[n];o.workshopid===i.workshopid&&angular.merge(i,o)}}p(),r.queryWallpapers=r.queryWallpapers.concat([])}}),r.$watch("currentSelection",function(e){e&&e.authorsteamid&&i.workshopController.requestSteamUserInfo(e.authorsteamid)}),r.refreshQuery()}]),angular.module("wallpaperbrowserApp").run(["$templateCache",function(e){e.put("views/ci/changelog.html",'<div><div class="changelogHeadline">REV 2521 2ee19a27a - Kristjan Skutta, Wed Jan 13 13:51:13 2021 +0100</div> <pre class="changelogBody">- Locked revision script to master branch.\n</pre><div class="changelogHeadline">REV 2520 14f5d906a - Kristjan Skutta, Wed Jan 13 13:09:44 2021 +0100</div> <pre class="changelogBody">- Removed utility + string replace thing.\n</pre><div class="changelogHeadline">REV 2519 9713ec090 - Kristjan Skutta, Wed Jan 13 00:54:47 2021 +0100</div> <pre class="changelogBody">- Fixed dangling pointer of dominant color function.\n</pre><div class="changelogHeadline">REV 2518 9712a96fa - Kristjan Skutta, Tue Jan 12 23:02:11 2021 +0100</div> <pre class="changelogBody">- Changed resolution tag styling.\n</pre><div class="changelogHeadline">REV 2517 f88854fa7 - Kristjan Skutta, Tue Jan 12 22:49:01 2021 +0100</div> <pre class="changelogBody">- Made resize hint more obvious.\n</pre><div class="changelogHeadline">REV 2516 fe1ef36cb - Kristjan Skutta, Tue Jan 12 22:37:15 2021 +0100</div> <pre class="changelogBody">- Added automatic crop &amp; resize function to initial image import into editor.\n</pre><div class="changelogHeadline">REV 2515 6622d7bfb - Kristjan Skutta, Tue Jan 12 01:40:38 2021 +0100</div> <pre class="changelogBody">- Added error message for platform mismatch from steam china/global.\n</pre><div class="changelogHeadline">REV 2514 963c7b93f - Kristjan Skutta, Mon Jan 11 23:42:50 2021 +0100</div> <pre class="changelogBody">- Improved mouse event in non-client area under high DPI.\n- Improved DPI sizing of fixed size Windows when DPI changes.\n- Fixed mouse cursor change flicker bug.\n</pre><div class="changelogHeadline">REV 2513 8922c5fe2 - Kristjan Skutta, Mon Jan 11 14:42:57 2021 +0100</div> <pre class="changelogBody">- Restored DPI scaling fix for now because Windows is just a huge fucking mess.\n</pre><div class="changelogHeadline">REV 2512 810624d4a - Kristjan Skutta, Mon Jan 11 13:35:18 2021 +0100</div> <pre class="changelogBody">- Fixed skin theme not matching winter collection dates.\n- Adjusted navigate confirm margin.\n</pre><div class="changelogHeadline">REV 2511 e8efaf1a9 - Kristjan Skutta, Mon Jan 11 00:23:42 2021 +0100</div> <pre class="changelogBody">- Removed an used image background array.\n</pre><div class="changelogHeadline">REV 2510 0c0348109 - Kristjan Skutta, Sun Jan 10 23:40:26 2021 +0100</div> <pre class="changelogBody">- Hid exact match and approved tag for wegame.\n</pre><div class="changelogHeadline">REV 2509 e8cc9b9c3 - Tim Eulitz, Sun Jan 10 17:40:15 2021 +0100</div> <pre class="changelogBody">- Update translations\n</pre><div class="changelogHeadline">REV 2508 dc117691f - Kristjan Skutta, Sun Jan 10 16:49:37 2021 +0100</div> <pre class="changelogBody">- Changed winter collection duration.\n- Removed navigation label from editor.\n</pre><div class="changelogHeadline">REV 2507 03bc96079 - Kristjan Skutta, Sun Jan 10 00:56:50 2021 +0100</div> <pre class="changelogBody">- Fixed new my favorites filter.\n- Fixed title filter case sensitivity.\n</pre><div class="changelogHeadline">REV 2506 feea30cdd - Kristjan Skutta, Sat Jan 9 02:53:10 2021 +0100</div> <pre class="changelogBody">- Added favorites filter.\n- Split utility filters with hack.\n</pre><div class="changelogHeadline">REV 2505 45195da54 - Kristjan Skutta, Fri Jan 8 23:44:17 2021 +0100</div> <pre class="changelogBody">- Added fixed direction option to flow paint brush.\n</pre><div class="changelogHeadline">REV 2504 d426bad84 - Kristjan Skutta, Fri Jan 8 21:53:22 2021 +0100</div> <pre class="changelogBody">- Added LED brightness option.\n- Removed recent queries from approved list.\n- Changed editor property navigation options.\n</pre><div class="changelogHeadline">REV 2503 298628e6c - Kristjan Skutta, Fri Jan 8 19:12:27 2021 +0100</div> <pre class="changelogBody">- Added scheme color extraction for static images.\n</pre><div class="changelogHeadline">REV 2502 5e97329a5 - Kristjan Skutta, Fri Jan 8 17:09:48 2021 +0100</div> <pre class="changelogBody">- Added link for audio disabled info.\n</pre><div class="changelogHeadline">REV 2501 38257742f - Kristjan Skutta, Fri Jan 8 01:01:58 2021 +0100</div> <pre class="changelogBody">- Fixed click collision on layers with parallax offset.\n</pre><div class="changelogHeadline">REV 2500 a7e7e7c80 - Kristjan Skutta, Thu Jan 7 14:36:07 2021 +0100</div> <pre class="changelogBody">- Added Steam int launcher back to project.\n</pre><div class="changelogHeadline">REV 2499 10477d056 - Kristjan Skutta, Thu Jan 7 14:30:17 2021 +0100</div> <pre class="changelogBody">- Added text filtering for Steam China.\n</pre><div class="changelogHeadline">REV 2498 f62aa08b5 - Kristjan Skutta, Wed Jan 6 20:12:33 2021 +0100</div> <pre class="changelogBody">- VHS fix if scale is forced to 0.\n</pre><div class="changelogHeadline">REV 2497 68d92cc27 - Kristjan Skutta, Wed Jan 6 16:51:40 2021 +0100</div> <pre class="changelogBody">- Changed styling of exact match option.\n</pre><div class="changelogHeadline">REV 2496 416692a25 - Kristjan Skutta, Wed Jan 6 14:11:31 2021 +0100</div> <pre class="changelogBody">- Disabled external workshop links for Steam China.\n- Removed collection queries from Steam China.\n</pre><div class="changelogHeadline">REV 2495 b3adc0158 - Kristjan Skutta, Wed Jan 6 13:35:40 2021 +0100</div> <pre class="changelogBody">- Fixed issue that causes VHS effect to turn grey if artifacts is set to 0.\n- Added playlist prefix to recent uploads.\n</pre><div class="changelogHeadline">REV 2494 6d42348bd - Kristjan Skutta, Wed Jan 6 02:51:02 2021 +0100</div> <pre class="changelogBody">- Added exact match option to Workshop search.\n- Hid missing items from recent list if all referenced files are deleted.\n</pre><div class="changelogHeadline">REV 2493 ab6f54eb2 - Kristjan Skutta, Wed Jan 6 01:18:14 2021 +0100</div> <pre class="changelogBody">- Potentially fixed mouse events for high DPI when transmitted through non-client area.\n- Fixed VHS being ugly when artifacts are set to 0.\n- Moved special query tags to top and removed exclusion option.\n- Fixed percentage not resetting when subscribing wallpapers externally.\n</pre><div class="changelogHeadline">REV 2492 54aef66d0 - Kristjan Skutta, Tue Jan 5 13:29:21 2021 +0100</div> <pre class="changelogBody">- Moved Steam China flag file into SC depot.\n- Rejected Steam connection if wrong Steam platform gets detected.\n</pre><div class="changelogHeadline">REV 2491 8b2627534 - Kristjan Skutta, Tue Jan 5 03:04:14 2021 +0100</div> <pre class="changelogBody">- Added dynamic version and beta infos to WE browse caption.\n</pre><div class="changelogHeadline">REV 2490 f916c85c0 - Kristjan Skutta, Tue Jan 5 02:37:55 2021 +0100</div> <pre class="changelogBody">- Shader version bump to force recompile with version 47.\n</pre><div class="changelogHeadline">REV 2489 da65cc937 - Kristjan Skutta, Tue Jan 5 02:36:44 2021 +0100</div> <pre class="changelogBody">- Added Steam China support to UI.\n</pre><div class="changelogHeadline">REV 2488 0d24f8202 - Kristjan Skutta, Tue Jan 5 02:25:16 2021 +0100</div> <pre class="changelogBody">- Added Steam China locale depot to build.\n- Added parallax options to 3D models.\n</pre><div class="changelogHeadline">REV 2487 54204cd50 - Kristjan Skutta, Mon Jan 4 23:43:37 2021 +0100</div> <pre class="changelogBody">- Added hack for queries with single double quote.\n- Added hdr clone text.\n- Added utility id list export.\n- Added file logging to scenescript log.\n</pre><div class="changelogHeadline">REV 2486 dad5d25a7 - Kristjan Skutta, Mon Jan 4 00:45:17 2021 +0100</div> <pre class="changelogBody">- Fixed not all media extension client threads being registered if extension are already loaded.\n</pre><div class="changelogHeadline">REV 2485 508059821 - Kristjan Skutta, Sun Jan 3 22:15:21 2021 +0100</div> <pre class="changelogBody">- Fixed sprite sheet time going beyond next frame duration.\n- Potentially fixed crash when multiple scene wallpapers are in multiple playlists.\n- Attempted to work around monaco editor freezing again.\n</pre><div class="changelogHeadline">REV 2484 0a482ad1e - Biohazard90, Sun Jan 3 18:06:47 2021 +0100</div> <pre class="changelogBody">- Update Steam API.\n- Removed dx SDK.\n</pre><div class="changelogHeadline">REV 2483 dffa8b1a6 - Kristjan Skutta, Tue Dec 22 00:04:32 2020 +0100</div> <pre class="changelogBody">- Made hdr work when bloom has an object value bound.\n</pre><div class="changelogHeadline">REV 2482 27b41dadb - Kristjan Skutta, Sun Dec 20 15:04:15 2020 +0100</div> <pre class="changelogBody">- Removed wchar_t version of fatalerror function.\n</pre><div class="changelogHeadline">REV 2481 eaa6c8e02 - Kristjan Skutta, Sun Dec 20 01:56:04 2020 +0100</div> <pre class="changelogBody">- Fixed texture previews not loading if multiple are requested on the same frame.\n</pre><div class="changelogHeadline">REV 2480 80cf87d3c - Kristjan Skutta, Sun Dec 20 01:39:22 2020 +0100</div> <pre class="changelogBody">- New nav stack rebuilding on ctrl+z/y.\n- Added explicit close callback for anim windows to fix events sometimes not firing or firing when not expected.\n- Changed close button on puppet anim editor to call nav up too.\n</pre><div class="changelogHeadline">REV 2479 2c29282bf - Kristjan Skutta, Sun Dec 20 01:02:50 2020 +0100</div> <pre class="changelogBody">- Fixed various issues with image wallpapers.\n</pre><div class="changelogHeadline">REV 2478 70f13592f - Kristjan Skutta, Sat Dec 19 21:33:23 2020 +0100</div> <pre class="changelogBody">- Fixed bone background/parent sort options not being saved.\n</pre><div class="changelogHeadline">REV 2477 4567518de - Kristjan Skutta, Sat Dec 19 20:15:38 2020 +0100</div> <pre class="changelogBody">- Overwrite unchanged file to avoid anti-virus false positives.\n- Heap alloc particle cmd buffers.\n</pre><div class="changelogHeadline">REV 2476 5f53b49a8 - Kristjan Skutta, Sat Dec 19 19:42:50 2020 +0100</div> <pre class="changelogBody">- Fixed stack address overlap for particle command buffers which broke instance memory links.\n</pre><div class="changelogHeadline">REV 2475 af51d949b - Kristjan Skutta, Sat Dec 19 15:42:25 2020 +0100</div> <pre class="changelogBody">- Removed some unused code.\n</pre><div class="changelogHeadline">REV 2474 49802538b - Kristjan Skutta, Sat Dec 19 04:52:04 2020 +0100</div> <pre class="changelogBody">- Quit retrying for dx immediately if the window was closed from the outside.\n</pre><div class="changelogHeadline">REV 2473 e57801399 - Kristjan Skutta, Sat Dec 19 03:14:09 2020 +0100</div> <pre class="changelogBody">- Improved bone sorting.\n</pre><div class="changelogHeadline">REV 2472 9521ba1f8 - Kristjan Skutta, Sat Dec 19 01:07:52 2020 +0100</div> <pre class="changelogBody">- New preview image resizing URL.\n</pre><div class="changelogHeadline">REV 2471 d7a37c923 - Kristjan Skutta, Sat Dec 19 00:14:50 2020 +0100</div> <pre class="changelogBody">- Fixed diagnostics process detection.\n</pre><div class="changelogHeadline">REV 2470 a9adde103 - Kristjan Skutta, Sat Dec 19 00:00:09 2020 +0100</div> <pre class="changelogBody">- Added full-fledged bone sorting tools to puppet warp.\n- Reverted fill mode border to use built-in system because the complete border is glitchy on win 7.\n- More dx error output for scene wallpaper init.\n</pre><div class="changelogHeadline">REV 2469 0d81af0b1 - Kristjan Skutta, Fri Dec 18 04:56:45 2020 +0100</div> <pre class="changelogBody">- Fixed HDR upgrade disabling sprite sheets.\n</pre><div class="changelogHeadline">REV 2468 bb2f0f2e7 - Kristjan Skutta, Fri Dec 18 01:41:50 2020 +0100</div> <pre class="changelogBody">- Optimized particle loading by reducing JSON copies.\n- Prevented unique ID exhaustion by clearing it instead of dead locking.\n- Changed particle config saving to manually remove all default json members.\n</pre><div class="changelogHeadline">REV 2467 7e993a2ba - Kristjan Skutta, Thu Dec 17 04:33:22 2020 +0100</div> <pre class="changelogBody">- Fixed refraction effect not being able to be packed into pkg.\n- Improved texture animation timer precision.\n</pre><div class="changelogHeadline">REV 2466 c0223f62a - Kristjan Skutta, Wed Dec 16 23:32:27 2020 +0100</div> <pre class="changelogBody">- Fixed curve editor rendering dead lock when size is invalid.\n</pre><div class="changelogHeadline">REV 2465 c2566cd8a - Kristjan Skutta, Wed Dec 16 22:43:16 2020 +0100</div> <pre class="changelogBody">- Fixed property link saving for animation layer properties.\n- Fixed file duplication always adding suffix to new filenames.\n</pre><div class="changelogHeadline">REV 2464 9fbbafb01 - Kristjan Skutta, Wed Dec 16 18:03:01 2020 +0100</div> <pre class="changelogBody">- Fixed HDR in razer bedroom again.\n</pre><div class="changelogHeadline">REV 2463 8d3dd8bc5 - Kristjan Skutta, Wed Dec 16 17:33:03 2020 +0100</div> <pre class="changelogBody">- Renamed LDR bloom material to avoid assets breaking when people don\'t bother applying the update.\n</pre><div class="changelogHeadline">REV 2462 83987439c - Kristjan Skutta, Wed Dec 16 14:43:51 2020 +0100</div> <pre class="changelogBody">- Legacy fixes for when image layers had a color set but were created before color support was added.\n</pre><div class="changelogHeadline">REV 2461 e0c5bcbd6 - Kristjan Skutta, Wed Dec 16 13:47:47 2020 +0100</div> <pre class="changelogBody">- Back to d3dcompiler 43 again, leave this for the next update.\n</pre><div class="changelogHeadline">REV 2460 2b9dbc5d7 - Kristjan Skutta, Wed Dec 16 13:36:26 2020 +0100</div> <pre class="changelogBody">- More tray icon hacks.\n</pre><div class="changelogHeadline">REV 2459 39d16e7d9 - Kristjan Skutta, Wed Dec 16 03:49:50 2020 +0100</div> <pre class="changelogBody">- Fixed shader optimization of arrays with size 1 to invalidate the graphics device.\n</pre><div class="changelogHeadline">REV 2458 5e642aa6d - Kristjan Skutta, Wed Dec 16 03:11:20 2020 +0100</div> <pre class="changelogBody">- Fixed editor jpeg re-compression issue.\n- Bumped shader version to force re-compile.\n</pre><div class="changelogHeadline">REV 2457 9bccd886f - Kristjan Skutta, Wed Dec 16 02:52:51 2020 +0100</div> <pre class="changelogBody">- Trying compiler 47 again but this time using DLLs from 2018 with static runtime.\n</pre><div class="changelogHeadline">REV 2456 8f7070ec3 - Kristjan Skutta, Wed Dec 16 01:33:31 2020 +0100</div> <pre class="changelogBody">- Fixed symbol for x64 compiler name.\n</pre><div class="changelogHeadline">REV 2455 2539a4977 - Kristjan Skutta, Tue Dec 15 23:21:38 2020 +0100</div> <pre class="changelogBody">- Reverting d3d update to 47 because windows fucking sucks.\n</pre><div class="changelogHeadline">REV 2454 62dea0e83 - Kristjan Skutta, Tue Dec 15 22:21:12 2020 +0100</div> <pre class="changelogBody">- Reverted Steamworks to 1.47.\n</pre><div class="changelogHeadline">REV 2453 db1576843 - Kristjan Skutta, Tue Dec 15 22:10:20 2020 +0100</div> <pre class="changelogBody">- Steam CMD update.\n</pre><div class="changelogHeadline">REV 2452 a580531b2 - Kristjan Skutta, Tue Dec 15 20:19:03 2020 +0100</div> <pre class="changelogBody">- Removed implicit d3d compiler dependency and built custom module loader to solve broken system files.\n</pre><div class="changelogHeadline">REV 2451 e2a262f65 - Kristjan Skutta, Tue Dec 15 19:03:22 2020 +0100</div> <pre class="changelogBody">- Added 64 bit d3dcompiler 47 to distribution to try and substitute messed system files on broken computers.\n</pre><div class="changelogHeadline">REV 2450 8bd7cee1c - Kristjan Skutta, Tue Dec 15 18:04:32 2020 +0100</div> <pre class="changelogBody">- Renamed internal colorization properties to avoid conflicts with existing wallpapers.\n- Fixed scene audio response not disabling when there are multiple wallpapers with audio response.\n</pre><div class="changelogHeadline">REV 2449 7f52e739b - Kristjan Skutta, Tue Dec 15 14:58:06 2020 +0100</div> <pre class="changelogBody">- Disabled seasonal skinning for wegame only.\n</pre><div class="changelogHeadline">REV 2448 c03e31131 - Kristjan Skutta, Tue Dec 15 14:23:39 2020 +0100</div> <pre class="changelogBody">- Updated shimmering particles.\n</pre><div class="changelogHeadline">REV 2447 29fc7fad1 - Kristjan Skutta, Tue Dec 15 04:57:29 2020 +0100</div> <pre class="changelogBody">- Added new HDR style to shimmering particles.\n</pre><div class="changelogHeadline">REV 2446 c9e552c97 - Kristjan Skutta, Tue Dec 15 02:08:19 2020 +0100</div> <pre class="changelogBody">- Fixed shared blur/keyevent handler for editable labels not handling all cases correctly.\n</pre><div class="changelogHeadline">REV 2445 f621dad8c - Kristjan Skutta, Mon Dec 14 23:11:49 2020 +0100</div> <pre class="changelogBody">- Fixed asset browser not showing downloads properly.\n- Changed all wiki links to new website.\n</pre><div class="changelogHeadline">REV 2444 7529a7cc1 - Tim Eulitz, Mon Dec 14 22:39:54 2020 +0100</div> <pre class="changelogBody">- Update Translations\n</pre><div class="changelogHeadline">REV 2443 dc49132e0 - Kristjan Skutta, Mon Dec 14 22:08:45 2020 +0100</div> <pre class="changelogBody">- Fixed service not receiving resume event to apply load delay in safe mode.\n</pre><div class="changelogHeadline">REV 2442 99c9b36f4 - Kristjan Skutta, Mon Dec 14 18:06:51 2020 +0100</div> <pre class="changelogBody">- Disabled script preview when editing puppet warps.\n</pre><div class="changelogHeadline">REV 2441 f195fcb19 - Kristjan Skutta, Mon Dec 14 17:58:05 2020 +0100</div> <pre class="changelogBody">- Added support for preprocesssor symbols in uniform array declarations.\n- Added dynamic bones uniform that is internally converted to a fixed size.\n- Added warning for bone count limit.\n- Changed bone limit to 128 bones.\n</pre><div class="changelogHeadline">REV 2440 8c1ea0efe - Kristjan Skutta, Mon Dec 14 05:05:42 2020 +0100</div> <pre class="changelogBody">- Fixed another small mistake with big consequences.\n</pre><div class="changelogHeadline">REV 2439 1940d1c48 - Kristjan Skutta, Mon Dec 14 05:03:54 2020 +0100</div> <pre class="changelogBody">- Fixed app status polling not happening.\n</pre><div class="changelogHeadline">REV 2438 eac4dd32d - Kristjan Skutta, Mon Dec 14 04:04:41 2020 +0100</div> <pre class="changelogBody">- Refactored main app status flags.\n</pre><div class="changelogHeadline">REV 2437 65f33d076 - Kristjan Skutta, Mon Dec 14 03:16:24 2020 +0100</div> <pre class="changelogBody">- Added global plugin manager delay when started from high-priority.\n</pre><div class="changelogHeadline">REV 2436 3b3b4247b - Kristjan Skutta, Mon Dec 14 01:15:09 2020 +0100</div> <pre class="changelogBody">- Added log snippets to diagnostics.\n</pre><div class="changelogHeadline">REV 2435 4de499321 - Kristjan Skutta, Sun Dec 13 22:18:04 2020 +0100</div> <pre class="changelogBody">- Releasing instance mutex right before shutdown completed.\n</pre><div class="changelogHeadline">REV 2434 8d3ce046d - Kristjan Skutta, Sun Dec 13 20:30:21 2020 +0100</div> <pre class="changelogBody">- Improved restart behavior by shutting mutex down before LED plugin, since it bugs and blocks the whole program when Chroma is enabled.\n</pre><div class="changelogHeadline">REV 2433 73611d3da - Kristjan Skutta, Sun Dec 13 19:58:21 2020 +0100</div> <pre class="changelogBody">- Added new docs URLs where possible.\n- Removed scene audio visualization guide because there is just no url for this right now.\n</pre><div class="changelogHeadline">REV 2432 8e58f4928 - Kristjan Skutta, Sun Dec 13 18:29:04 2020 +0100</div> <pre class="changelogBody">- Improved panel colors again to interfere less with bright colors in graph editor.\n</pre><div class="changelogHeadline">REV 2431 156835387 - Kristjan Skutta, Sun Dec 13 18:26:23 2020 +0100</div> <pre class="changelogBody">- Improved anim/brush panel colors for dark skins.\n- Improved number spacing for anims with &gt; 1000 frames.\n- Improved rendering of timeline number to improve performance.\n</pre><div class="changelogHeadline">REV 2430 0663f9fb3 - Kristjan Skutta, Sun Dec 13 17:40:00 2020 +0100</div> <pre class="changelogBody">- More tray icon stability.\n</pre><div class="changelogHeadline">REV 2429 e3abc1661 - Kristjan Skutta, Sun Dec 13 04:35:26 2020 +0100</div> <pre class="changelogBody">- Reduced periodic scene locking from editor update function.\n</pre><div class="changelogHeadline">REV 2428 b838e1112 - Kristjan Skutta, Sun Dec 13 04:25:16 2020 +0100</div> <pre class="changelogBody">- Implemented old FPS limiter for editor because it is more reactive to external locking mechanisms.\n</pre><div class="changelogHeadline">REV 2427 93e6b156f - Kristjan Skutta, Sun Dec 13 02:35:48 2020 +0100</div> <pre class="changelogBody">- Fixed gamma correction for editor gizmos that get drawn after HDR combine.\n</pre><div class="changelogHeadline">REV 2426 f05680a55 - Kristjan Skutta, Sun Dec 13 01:56:00 2020 +0100</div> <pre class="changelogBody">- Fixed puppet poses not deleting.\n- Added minimum inertia/friction to physics bones.\n</pre><div class="changelogHeadline">REV 2425 8f799a1c4 - Kristjan Skutta, Sat Dec 12 23:18:53 2020 +0100</div> <pre class="changelogBody">- Final HDR fixes.\n</pre><div class="changelogHeadline">REV 2424 04acd330f - Kristjan Skutta, Sat Dec 12 19:32:33 2020 +0100</div> <pre class="changelogBody">- Added a couple of icons to the puppet menus.\n</pre><div class="changelogHeadline">REV 2423 2502bc2bc - Kristjan Skutta, Sat Dec 12 18:43:50 2020 +0100</div> <pre class="changelogBody">- Fixed DXT1 + SRGB crashing in texture allocation.\n</pre><div class="changelogHeadline">REV 2422 8afff5328 - Kristjan Skutta, Sat Dec 12 18:21:27 2020 +0100</div> <pre class="changelogBody">- Aligned texture format info btn and added link.\n</pre><div class="changelogHeadline">REV 2421 c39c5a1bf - Kristjan Skutta, Sat Dec 12 18:17:49 2020 +0100</div> <pre class="changelogBody">- Added help button to texture format dropdown.\n- Changed image layer preview style.\n- Added nav labels to basic objects.\n</pre><div class="changelogHeadline">REV 2420 e263aebef - Kristjan Skutta, Sat Dec 12 15:10:52 2020 +0100</div> <pre class="changelogBody">- Forced tray icon re-creation on logon because Windows buggy.\n</pre><div class="changelogHeadline">REV 2419 0f7048051 - Kristjan Skutta, Sat Dec 12 05:07:15 2020 +0100</div> <pre class="changelogBody">- Added texture preview for image layers in editor.\n</pre><div class="changelogHeadline">REV 2418 15887884e - Kristjan Skutta, Sat Dec 12 04:34:58 2020 +0100</div> <pre class="changelogBody">- Fixed slicing memory corruption.\n</pre><div class="changelogHeadline">REV 2417 ade541d90 - Kristjan Skutta, Sat Dec 12 03:16:05 2020 +0100</div> <pre class="changelogBody">- Hid max distance when translate disabled properly.\n- Fixed temp settings not resetting when resetting constraint settings.\n- Changed constraints reset to not reset spring/rigid enable option.\n</pre><div class="changelogHeadline">REV 2416 e8c91528c - Kristjan Skutta, Sat Dec 12 02:44:05 2020 +0100</div> <pre class="changelogBody">- Fixed a few more effects for HDR rendering.\n</pre><div class="changelogHeadline">REV 2415 017138048 - Kristjan Skutta, Sat Dec 12 01:49:17 2020 +0100</div> <pre class="changelogBody">- Added SRGB flag to all base textures.\n- Added automatic texture re-compile when enabling HDR on an old project so the SRGB flag will be set.\n- Rebuild HDR pipeline to perform SRGB reads properly.\n- Added frametime dampening to physics bones to reduce jitter on low fps.\n</pre><div class="changelogHeadline">REV 2414 c1b6eb749 - Kristjan Skutta, Fri Dec 11 03:57:50 2020 +0100</div> <pre class="changelogBody">- Improved weight generation across island meshes.\n</pre><div class="changelogHeadline">REV 2413 73b785ff4 - Kristjan Skutta, Fri Dec 11 02:54:45 2020 +0100</div> <pre class="changelogBody">- Added special crash msg for certain NV DLLs.\n- Made camera path menu optional and hid it by default.\n- Fixed preview panel never hiding and used visibility to not break the shared memory stream.\n- Made DL percent bold.\n</pre><div class="changelogHeadline">REV 2412 0358932b8 - Kristjan Skutta, Fri Dec 11 02:22:07 2020 +0100</div> <pre class="changelogBody">- Changed puppet warp editor to set keyframes on frame zero before loading UI through pose apply system.\n</pre><div class="changelogHeadline">REV 2411 21aafff92 - Kristjan Skutta, Thu Dec 10 23:37:30 2020 +0100</div> <pre class="changelogBody">- Improved puppet priority sorting for limbs.\n- Cleaned up more tray window related code.\n</pre><div class="changelogHeadline">REV 2410 317f51ab1 - Kristjan Skutta, Thu Dec 10 18:36:39 2020 +0100</div> <pre class="changelogBody">- Cleaned up code after splitting tray icon from event window.\n</pre><div class="changelogHeadline">REV 2409 1c5e761ed - Kristjan Skutta, Thu Dec 10 18:32:11 2020 +0100</div> <pre class="changelogBody">- Split tray window from event window to improve behavior when the tray icon must be recreated but the whole program does not need to be restarted.\n</pre><div class="changelogHeadline">REV 2408 bdb3ad00e - Kristjan Skutta, Thu Dec 10 03:08:37 2020 +0100</div> <pre class="changelogBody">- Fixed RGB device colors in HDR mode, removed gamma conversion again.\n</pre><div class="changelogHeadline">REV 2407 e3f4a6515 - Kristjan Skutta, Thu Dec 10 01:45:51 2020 +0100</div> <pre class="changelogBody">- Disabled HDR brightness value completely in LDR mode.\n- Made shaders properly take system state into account and compile a different version for HDR and LDR.\n- Added HDR to Razer bedroom.\n</pre><div class="changelogHeadline">REV 2406 0e6d51fb8 - Kristjan Skutta, Wed Dec 9 17:44:10 2020 +0100</div> <pre class="changelogBody">- Changed anim events UI.\n</pre><div class="changelogHeadline">REV 2405 70d4fbbe5 - Kristjan Skutta, Wed Dec 9 15:43:01 2020 +0100</div> <pre class="changelogBody">- Added image repaint issue detection.\n- Removed transition changes from download anim because they\'re buggy.\n</pre><div class="changelogHeadline">REV 2404 6cf1e52f1 - Kristjan Skutta, Tue Dec 8 18:35:22 2020 +0100</div> <pre class="changelogBody">- Added a repaint spam detection.\n</pre><div class="changelogHeadline">REV 2403 097aab49b - Kristjan Skutta, Tue Dec 8 17:57:46 2020 +0100</div> <pre class="changelogBody">- Added property animation rate to scripting.\n</pre><div class="changelogHeadline">REV 2402 870d21d2f - Kristjan Skutta, Tue Dec 8 17:41:36 2020 +0100</div> <pre class="changelogBody">- Fixed animation layer reversing and blending.\n</pre><div class="changelogHeadline">REV 2401 ebf997580 - Kristjan Skutta, Tue Dec 8 17:02:01 2020 +0100</div> <pre class="changelogBody">- Changed puppet anims to use float for fps.\n- Made animation script interface more uniform, added similar functions and properties to all animation systems.\n</pre><div class="changelogHeadline">REV 2400 ee99482f5 - Kristjan Skutta, Tue Dec 8 03:05:11 2020 +0100</div> <pre class="changelogBody">- Fixed initial plugin wallpaper options not being applied when DLL is loaded too slowly.\n</pre><div class="changelogHeadline">REV 2399 185eebf47 - Kristjan Skutta, Mon Dec 7 20:09:40 2020 +0100</div> <pre class="changelogBody">- Removed manual scaling from progress bar.\n- Made texture import options simpler.\n</pre><div class="changelogHeadline">REV 2398 eb724130a - Kristjan Skutta, Sun Dec 6 19:26:18 2020 +0100</div> <pre class="changelogBody">- Changed visibility property on particle systems to destroy all particles immediately when toggled off to improve behavior with user properties.\n- Tweaked dl finished animation.\n</pre><div class="changelogHeadline">REV 2397 af6ef33c3 - Kristjan Skutta, Sun Dec 6 18:31:28 2020 +0100</div> <pre class="changelogBody">- Changed curve editor zoom reset to also adjust horizontal zoom.\n- Fixed numbers in timeline to become too close at the end.\n- Removed camera path label.\n</pre><div class="changelogHeadline">REV 2396 a40dacae0 - Kristjan Skutta, Sun Dec 6 02:28:10 2020 +0100</div> <pre class="changelogBody">- Added finished download animation.\n</pre><div class="changelogHeadline">REV 2395 f7fe736bc - Kristjan Skutta, Sun Dec 6 00:46:57 2020 +0100</div> <pre class="changelogBody">- Changed animation option dialog to hide other option when linking an animation.\n</pre><div class="changelogHeadline">REV 2394 ebc4848e9 - Kristjan Skutta, Sat Dec 5 23:32:27 2020 +0100</div> <pre class="changelogBody">- Updated no preview image again.\n</pre><div class="changelogHeadline">REV 2393 526e1c031 - Kristjan Skutta, Sat Dec 5 23:24:48 2020 +0100</div> <pre class="changelogBody">- Removed disable-direct-composition unless hardware acceleration is disabled.\n</pre><div class="changelogHeadline">REV 2392 67dbb5282 - Kristjan Skutta, Sat Dec 5 22:26:20 2020 +0100</div> <pre class="changelogBody">- Updated no preview image.\n</pre><div class="changelogHeadline">REV 2391 5b76b3556 - Kristjan Skutta, Sat Dec 5 20:52:16 2020 +0100</div> <pre class="changelogBody">- Added separate ui effects option.\n</pre><div class="changelogHeadline">REV 2390 7b12522cf - Kristjan Skutta, Sat Dec 5 20:34:20 2020 +0100</div> <pre class="changelogBody">- Fixed modal backdrop class order.\n</pre><div class="changelogHeadline">REV 2389 59cf1de6d - Kristjan Skutta, Sat Dec 5 20:29:49 2020 +0100</div> <pre class="changelogBody">- Added UI effects translation.\n</pre><div class="changelogHeadline">REV 2388 2c371d079 - Kristjan Skutta, Sat Dec 5 19:52:22 2020 +0100</div> <pre class="changelogBody">- Improved blur effects.\n- Improved wallpaper reflow performance when wallpapers get updated.\n</pre><div class="changelogHeadline">REV 2387 294855f4d - Kristjan Skutta, Sat Dec 5 16:31:19 2020 +0100</div> <pre class="changelogBody">- Exposed option to control ui hardware accel better.\n- Added CSS overrides to disable some effects with hardware accel disabled.\n</pre><div class="changelogHeadline">REV 2386 ec4bdc979 - Kristjan Skutta, Sat Dec 5 03:18:44 2020 +0100</div> <pre class="changelogBody">- Fixed frost image for distro.\n</pre><div class="changelogHeadline">REV 2385 0567d5d2b - Kristjan Skutta, Sat Dec 5 03:05:24 2020 +0100</div> <pre class="changelogBody">- Another attempt at download animations.\n</pre><div class="changelogHeadline">REV 2384 5c98d1402 - Kristjan Skutta, Sat Dec 5 02:44:52 2020 +0100</div> <pre class="changelogBody">- Changed progress circle to use SVG and added transition to progress.\n</pre><div class="changelogHeadline">REV 2383 63be441fa - Kristjan Skutta, Sat Dec 5 00:10:42 2020 +0100</div> <pre class="changelogBody">- Made file size label shorter.\n</pre><div class="changelogHeadline">REV 2382 b3242924d - Kristjan Skutta, Fri Dec 4 23:36:56 2020 +0100</div> <pre class="changelogBody">- Added frosting effect to backdrop.\n</pre><div class="changelogHeadline">REV 2381 dcb86c587 - Kristjan Skutta, Fri Dec 4 21:22:54 2020 +0100</div> <pre class="changelogBody">- Added dynamic divider for properties in scene wallpapers when there are any custom properties.\n- Fixed trial reminder alert.\n- Changed download progress help icon.\n- Changed wallpaper property storage to delete default properties instead of saving the default values on reset/change.\n</pre><div class="changelogHeadline">REV 2380 1b85f0ad8 - Kristjan Skutta, Fri Dec 4 03:54:30 2020 +0100</div> <pre class="changelogBody">- Removed minimum fps limit.\n- Fixed multipass property links not being updated from preview playback correctly.\n</pre><div class="changelogHeadline">REV 2379 c40b8f597 - Kristjan Skutta, Fri Dec 4 03:27:15 2020 +0100</div> <pre class="changelogBody">- Removed progress bar smoothing and animation.\n- Attempted to make curve editor more robust.\n</pre><div class="changelogHeadline">REV 2378 e35fb1276 - Kristjan Skutta, Thu Dec 3 22:29:17 2020 +0100</div> <pre class="changelogBody">- Improved download text visibility.\n</pre><div class="changelogHeadline">REV 2377 7a3c5dd8b - Kristjan Skutta, Thu Dec 3 22:28:10 2020 +0100</div> <pre class="changelogBody">- Improved downloading visuals.\n</pre><div class="changelogHeadline">REV 2376 a80167594 - Kristjan Skutta, Thu Dec 3 21:57:56 2020 +0100</div> <pre class="changelogBody">- Translation updates.\n</pre><div class="changelogHeadline">REV 2375 76aeb0a68 - Kristjan Skutta, Thu Dec 3 17:08:45 2020 +0100</div> <pre class="changelogBody">- Added restore value for label editing in browser by pressing escape.\n- Fixed fps computation for stupid seconds input.\n</pre><div class="changelogHeadline">REV 2374 7965db6eb - Kristjan Skutta, Thu Dec 3 03:31:34 2020 +0100</div> <pre class="changelogBody">- Fixed keyframe paste when no properties are selected and they should behave as all are selected.\n</pre><div class="changelogHeadline">REV 2373 78c259c06 - Kristjan Skutta, Thu Dec 3 03:18:19 2020 +0100</div> <pre class="changelogBody">- Made tree view fade text on hidden items.\n</pre><div class="changelogHeadline">REV 2372 694f55eb4 - Kristjan Skutta, Thu Dec 3 01:05:24 2020 +0100</div> <pre class="changelogBody">- Made slider labels clickable in browser.\n- Increased timeline point size.\n- Changed anim options to show length + 1.\n</pre><div class="changelogHeadline">REV 2371 c2ca1b64a - Kristjan Skutta, Wed Dec 2 22:30:10 2020 +0100</div> <pre class="changelogBody">- Added automatic selection reversal to undo/redo system.\n- Disabled slider linking storage because it\'s buggy.\n- Reverted blur fx optimization because it looks bad when scaled.\n- Reordered edge detection options.\n</pre><div class="changelogHeadline">REV 2370 5cfd56978 - Kristjan Skutta, Wed Dec 2 01:22:08 2020 +0100</div> <pre class="changelogBody">- Added color options to scene wallpapers.\n- Made rating table even more obvious.\n- Set max simulation time for phys bones to reduce jitter on low fps.\n</pre><div class="changelogHeadline">REV 2369 a85fb4575 - Kristjan Skutta, Tue Dec 1 17:25:29 2020 +0100</div> <pre class="changelogBody">???\n</pre><div class="changelogHeadline">REV 2368 cc910903e - Kristjan Skutta, Tue Dec 1 15:57:24 2020 +0100</div> <pre class="changelogBody">- Fixed anim options not showing up automatically when adding new puppet warp anim.\n</pre><div class="changelogHeadline">REV 2367 8107472bb - Kristjan Skutta, Tue Dec 1 02:59:51 2020 +0100</div> <pre class="changelogBody">- Added shortcut button to edit animation from anim layer menu.\n- Added automatic reset Y zoom when changing bone selection.\n- Added tooltip to curve editor keyframe points.\n- Changed skinning anim to reset while geometry editing.\n- Changed color of bone hierarchy arrow.\n- Made preview frames and preview playback both take disabled bones into account while editing.\n</pre><div class="changelogHeadline">REV 2366 0641204ed - Kristjan Skutta, Mon Nov 30 22:18:42 2020 +0100</div> <pre class="changelogBody">- Translation update.\n</pre><div class="changelogHeadline">REV 2365 4a9baa636 - Kristjan Skutta, Mon Nov 30 21:23:30 2020 +0100</div> <pre class="changelogBody">- Translation updates.\n</pre><div class="changelogHeadline">REV 2364 f873447f5 - Tim Eulitz, Mon Nov 30 18:30:28 2020 +0100</div> <pre class="changelogBody">- Update Locales\n</pre><div class="changelogHeadline">REV 2363 50091c834 - Kristjan Skutta, Mon Nov 30 15:08:14 2020 +0100</div> <pre class="changelogBody">- Fixed hashutil skipping locale generation.\n</pre><div class="changelogHeadline">REV 2362 7008a5c49 - Kristjan Skutta, Sun Nov 29 22:06:30 2020 +0100</div> <pre class="changelogBody">- Added known dependency checker to diagnostics.\n</pre><div class="changelogHeadline">REV 2361 e16a5a63d - Kristjan Skutta, Sun Nov 29 02:54:58 2020 +0100</div> <pre class="changelogBody">- Fixed crash when accessing invalid bone transform by index.\n</pre><div class="changelogHeadline">REV 2360 030dc5725 - Kristjan Skutta, Sat Nov 28 23:41:42 2020 +0100</div> <pre class="changelogBody">- Added getAnimation to ILayer script auto complete.\n</pre><div class="changelogHeadline">REV 2359 08259cb8c - Kristjan Skutta, Sat Nov 28 21:37:04 2020 +0100</div> <pre class="changelogBody">- Queuing web re-save after project opening to refresh audio processing state in project.\n- Always forced audio processing input to be enabled for web wallpapers.\n</pre><div class="changelogHeadline">REV 2358 3680d217c - Kristjan Skutta, Sat Nov 28 20:17:43 2020 +0100</div> <pre class="changelogBody">- Added automatic audio listener detection for web wallpapers in editor.\n</pre><div class="changelogHeadline">REV 2357 f723cf42f - Kristjan Skutta, Sat Nov 28 16:59:59 2020 +0100</div> <pre class="changelogBody">- Added additional alignment options to scenes, images, MF and LAV wallpapers.\n- Added shared alignment system between videos and scene wallpapers.\n</pre><div class="changelogHeadline">REV 2356 074475edc - Kristjan Skutta, Fri Nov 27 00:03:51 2020 +0100</div> <pre class="changelogBody">- Made texture memory stats take HDR into account.\n- Added backbuffer allocations to texture stats.\n</pre><div class="changelogHeadline">REV 2355 f6a7bb285 - Kristjan Skutta, Thu Nov 26 19:38:09 2020 +0100</div> <pre class="changelogBody">- Added HDR tag.\n- Added text input value to user property overview.\n</pre><div class="changelogHeadline">REV 2354 f5fecdcee - Kristjan Skutta, Wed Nov 25 23:41:42 2020 +0100</div> <pre class="changelogBody">- Added script access to initial layer config.\n- Fixed particle HDR brightness not being loaded without color override.\n- Added test code for additive prop animations someday.\n</pre><div class="changelogHeadline">REV 2353 2296f6d67 - Kristjan Skutta, Wed Nov 25 17:39:25 2020 +0100</div> <pre class="changelogBody">- Made property links work without ID to allow easy duplication.\n</pre><div class="changelogHeadline">REV 2352 c62a11803 - Kristjan Skutta, Wed Nov 25 15:34:01 2020 +0100</div> <pre class="changelogBody">- Fixed animation property changes not registering or registering in wrong situations.\n</pre><div class="changelogHeadline">REV 2351 66ef72a55 - Kristjan Skutta, Wed Nov 25 03:54:46 2020 +0100</div> <pre class="changelogBody">- Fixed curve editor not redrawing on vis toggle.\n- Made gizmo hittest test closest gizmo first.\n</pre><div class="changelogHeadline">REV 2350 71b33dc79 - Kristjan Skutta, Wed Nov 25 03:38:28 2020 +0100</div> <pre class="changelogBody">- Changed reset pose in anim mode to load pose from selected cached pose.\n- Fixed a few curve editor save and override bugs.\n- Fixed phys bone copy paste not covering converted properties.\n- Exposed HDR feather to editor.\n- Added HDR define to shader compiler.\n- Batched preview frame and playback for anim links to improve performance.\n</pre><div class="changelogHeadline">REV 2349 e3063cdc4 - Kristjan Skutta, Tue Nov 24 23:45:38 2020 +0100</div> <pre class="changelogBody">- String.\n</pre><div class="changelogHeadline">REV 2348 8f09a6ebb - Kristjan Skutta, Tue Nov 24 22:33:48 2020 +0100</div> <pre class="changelogBody">- New translation strings.\n</pre><div class="changelogHeadline">REV 2347 c700717fb - Kristjan Skutta, Tue Nov 24 04:02:45 2020 +0100</div> <pre class="changelogBody">- Fixed eye dropper on multi monitor system with primary monitor on right side.\n- Added scene time rollover after a week of uninterrupted runtime and high precision master clock.\n</pre><div class="changelogHeadline">REV 2346 20dba1a19 - Kristjan Skutta, Tue Nov 24 02:07:05 2020 +0100</div> <pre class="changelogBody">- Added video color options for MF and DSHOW player.\n- Linked CEF muting to audio output setting.\n- Simplified wallpaper property generation.\n</pre><div class="changelogHeadline">REV 2345 c27e88d85 - Kristjan Skutta, Mon Nov 23 19:53:10 2020 +0100</div> <pre class="changelogBody">- Added some additional strings for video output modifiers.\n</pre><div class="changelogHeadline">REV 2344 050dcc729 - Kristjan Skutta, Mon Nov 23 18:18:02 2020 +0100</div> <pre class="changelogBody">- Removed old wiki links.\n</pre><div class="changelogHeadline">REV 2343 bf62a5603 - Kristjan Skutta, Mon Nov 23 18:16:22 2020 +0100</div> <pre class="changelogBody">- Added disabled bloom sliders when HDR is active.\n</pre><div class="changelogHeadline">REV 2342 5f41cdc15 - Kristjan Skutta, Mon Nov 23 18:10:52 2020 +0100</div> <pre class="changelogBody">- Added help menu with lots of options.\n- Changed fps warning to use triangle.\n- Split bloom LDR/HDR options.\n</pre><div class="changelogHeadline">REV 2341 febb90e70 - Kristjan Skutta, Mon Nov 23 04:00:30 2020 +0100</div> <pre class="changelogBody">- Added precision option to user property sliders.\n</pre><div class="changelogHeadline">REV 2340 43833d424 - Kristjan Skutta, Mon Nov 23 03:51:40 2020 +0100</div> <pre class="changelogBody">- Added numeric order input to user properties for now.\n- Changed URLs with image file extension to load as URL instead of static image.\n</pre><div class="changelogHeadline">REV 2339 a7ba8b5a8 - Kristjan Skutta, Mon Nov 23 00:51:48 2020 +0100</div> <pre class="changelogBody">- Fixed text losing HDR color when effects are applied.\n</pre><div class="changelogHeadline">REV 2338 f4e9a9265 - Kristjan Skutta, Sun Nov 22 18:12:38 2020 +0100</div> <pre class="changelogBody">- Better sorting for followed content queries to show followed wallpapers first.\n- Fixed custom query delete not working in full page query.\n- Changed tooltip to stay visible until the element has been left.\n- Added local project delete hint.\n- Added perf warning hints to post processing and MSAA.\n</pre><div class="changelogHeadline">REV 2337 74f95ff88 - Tim Eulitz, Sun Nov 22 12:43:36 2020 +0100</div> <pre class="changelogBody">- Update locales\n</pre><div class="changelogHeadline">REV 2336 d922b6bf6 - Kristjan Skutta, Sun Nov 22 01:20:10 2020 +0100</div> <pre class="changelogBody">- Added list with followed wallpapers to followed content tab.\n</pre><div class="changelogHeadline">REV 2335 ee86fc629 - Kristjan Skutta, Sat Nov 21 21:20:36 2020 +0100</div> <pre class="changelogBody">- Added wallpaper tag to required explore tags.\n- Fixed stutter when moving with keys in editor.\n- Added shift key to speed editor camera up.\n</pre><div class="changelogHeadline">REV 2334 71b9cea2f - Kristjan Skutta, Sat Nov 21 21:01:23 2020 +0100</div> <pre class="changelogBody">- Added brightness option to model shader.\n- Added compiler detection for faulty normal and tangents and fixing them.\n</pre><div class="changelogHeadline">REV 2333 9559e3bcc - Kristjan Skutta, Sat Nov 21 20:02:25 2020 +0100</div> <pre class="changelogBody">- Added explicit bloom scatter option.\n- Added 5 sec service delay after hibernation to improve stability.\n</pre><div class="changelogHeadline">REV 2332 912995eda - Kristjan Skutta, Sat Nov 21 18:47:44 2020 +0100</div> <pre class="changelogBody">- Updated discover UI and editor welcome.\n</pre><div class="changelogHeadline">REV 2331 70c194c89 - Kristjan Skutta, Sat Nov 21 16:49:29 2020 +0100</div> <pre class="changelogBody">- Added dedicated brightness control to HDR renderables.\n- Removed help overlay.\n- Added more obvious documentation button to editor welcome dialog.\n- Added help file menu.\n- Added fav wallpapers button to discover.\n- Renamed fav discover queries to starred.\n- Changed render context color to use floats instead of bytes.\n</pre><div class="changelogHeadline">REV 2330 757fcfbe8 - Kristjan Skutta, Fri Nov 20 23:52:07 2020 +0100</div> <pre class="changelogBody">- Added new automatic stopping option for exhausted VRAM.\n- Added temp error output for Steam subscription list.\n</pre><div class="changelogHeadline">REV 2329 a7cc7bebf - Kristjan Skutta, Fri Nov 20 03:36:58 2020 +0100</div> <pre class="changelogBody">- Error logging when vram exhausting becomes activated.\n</pre><div class="changelogHeadline">REV 2328 64981c2a5 - Kristjan Skutta, Fri Nov 20 03:35:24 2020 +0100</div> <pre class="changelogBody">- Added option to keep scene wallpapers dormant if dedicated VRAM appears to be exhausted to prevent thrashing.\n</pre><div class="changelogHeadline">REV 2327 523d520ee - Kristjan Skutta, Fri Nov 20 00:03:17 2020 +0100</div> <pre class="changelogBody">- Added bicubic upsampling to reduce box artifacts on smallest bloom passes.\n</pre><div class="changelogHeadline">REV 2326 aef12d434 - Kristjan Skutta, Thu Nov 19 21:21:19 2020 +0100</div> <pre class="changelogBody">- Smoother HDR bloom generation.\n- Fixed puppet anim properties resetting after text input.\n</pre><div class="changelogHeadline">REV 2325 42f79450c - Kristjan Skutta, Thu Nov 19 16:55:14 2020 +0100</div> <pre class="changelogBody">- Finalized HDR bloom.\n</pre><div class="changelogHeadline">REV 2324 60fcd9c51 - Kristjan Skutta, Thu Nov 19 16:13:48 2020 +0100</div> <pre class="changelogBody">- Removed old HDR bloom code.\n</pre><div class="changelogHeadline">REV 2323 b0241c3d4 - Kristjan Skutta, Thu Nov 19 16:00:22 2020 +0100</div> <pre class="changelogBody">- Better bloom downsampling approach.\n</pre><div class="changelogHeadline">REV 2322 b7a76ab72 - Kristjan Skutta, Thu Nov 19 03:06:17 2020 +0100</div> <pre class="changelogBody">- Added HDR publish tag.\n- Removed unused texture binds.\n</pre><div class="changelogHeadline">REV 2321 72219da07 - Kristjan Skutta, Thu Nov 19 02:42:21 2020 +0100</div> <pre class="changelogBody">- HDR FX finalized.\n</pre><div class="changelogHeadline">REV 2320 c67f2f060 - Kristjan Skutta, Wed Nov 18 22:27:53 2020 +0100</div> <pre class="changelogBody">- HDR support for both blur effects.\n- Removed additional RT from blur precise to use shared RT instead.\n</pre><div class="changelogHeadline">REV 2319 ffe9d7281 - Kristjan Skutta, Wed Nov 18 22:22:31 2020 +0100</div> <pre class="changelogBody">- Gaussian passes optimization for several effects.\n- Improved HDR blending for godrays/shine effects.\n</pre><div class="changelogHeadline">REV 2318 e35d6bfd0 - Kristjan Skutta, Wed Nov 18 16:11:02 2020 +0100</div> <pre class="changelogBody">- Made editor change backbuffer format when bloom is toggled off while HDR is still enabled.\n</pre><div class="changelogHeadline">REV 2317 218aa6c2f - Kristjan Skutta, Wed Nov 18 16:08:42 2020 +0100</div> <pre class="changelogBody">- Fixed HLSL error parsing and added support for new column range from compiler.\n</pre><div class="changelogHeadline">REV 2316 043311edf - Kristjan Skutta, Wed Nov 18 15:18:01 2020 +0100</div> <pre class="changelogBody">- Attempting to fix effect composition again.\n</pre><div class="changelogHeadline">REV 2315 ce5d93a5c - Kristjan Skutta, Wed Nov 18 03:42:21 2020 +0100</div> <pre class="changelogBody">- Added trial alert and reminder modal.\n</pre><div class="changelogHeadline">REV 2314 6ca7b1a45 - Kristjan Skutta, Wed Nov 18 00:53:34 2020 +0100</div> <pre class="changelogBody">- Changed buildscripts to more easily maintain signing.\n- Added linear/srgb conversion for LED downsample.\n</pre><div class="changelogHeadline">REV 2313 bfcf1d8fe - Kristjan Skutta, Tue Nov 17 20:31:55 2020 +0100</div> <pre class="changelogBody">- Added support for overbrightening to pulse and nitro shaders.\n</pre><div class="changelogHeadline">REV 2312 469e96577 - Kristjan Skutta, Tue Nov 17 18:39:22 2020 +0100</div> <pre class="changelogBody">- Changed HDR bloom to take advantage of blurring before downsampling.\n</pre><div class="changelogHeadline">REV 2311 5518fb538 - Kristjan Skutta, Tue Nov 17 18:03:56 2020 +0100</div> <pre class="changelogBody">- Implemented dx re-init when HDR is toggled on or off by the wallpaper or user for editor and main app.\n</pre><div class="changelogHeadline">REV 2310 3cec8d495 - Kristjan Skutta, Tue Nov 17 04:39:31 2020 +0100</div> <pre class="changelogBody">- Progress on HDR bloom prototype.\n</pre><div class="changelogHeadline">REV 2309 ae50177aa - Kristjan Skutta, Tue Nov 17 03:01:07 2020 +0100</div> <pre class="changelogBody">- HDR bloom WIP.\n</pre><div class="changelogHeadline">REV 2308 b4782cb4c - Kristjan Skutta, Mon Nov 16 15:04:18 2020 +0100</div> <pre class="changelogBody">- Added visualization for anim events to curve editor.\n</pre><div class="changelogHeadline">REV 2307 f1a0bcf1f - Kristjan Skutta, Mon Nov 16 01:45:59 2020 +0100</div> <pre class="changelogBody">- Built a more robust system to allow format modifications in the future without having to worry about backward compatibility when only adding more data to existing format blocks.\n</pre><div class="changelogHeadline">REV 2306 7ad07dc05 - Kristjan Skutta, Mon Nov 16 01:26:35 2020 +0100</div> <pre class="changelogBody">- Added animation event support to puppet animations.\n</pre><div class="changelogHeadline">REV 2305 2ac71a6fe - Kristjan Skutta, Mon Nov 16 00:50:12 2020 +0100</div> <pre class="changelogBody">- Added animation events to property animations.\n</pre><div class="changelogHeadline">REV 2304 efc9ad9be - Kristjan Skutta, Sun Nov 15 03:29:25 2020 +0100</div> <pre class="changelogBody">- Added 3D extrusion option to puppet model generation.\n</pre><div class="changelogHeadline">REV 2303 c655bf7c3 - Kristjan Skutta, Sat Nov 14 22:30:38 2020 +0100</div> <pre class="changelogBody">- Added default script properties to audio factor/scale snippets.\n- Added refraction preview project.\n- Added improved transparency blending to shine effect.\n- Changed center scale gizmo to keep aspect ratio intact if it\'s not 1:1 on all axes.\n- Attempted to improve reflection blending over transparent area.\n</pre><div class="changelogHeadline">REV 2302 22d9c649c - Kristjan Skutta, Sat Nov 14 21:47:07 2020 +0100</div> <pre class="changelogBody">- Better effect precompose rules to reduce buffer copies.\n</pre><div class="changelogHeadline">REV 2301 60d646b4f - Kristjan Skutta, Sat Nov 14 21:40:30 2020 +0100</div> <pre class="changelogBody">- Added refract effect.\n- Improved effect composition blending system with arbitrary framebuffer access and internal effect composition.\n- Fixed audio scripts flipping out with high smoothing values.\n- Improved loading performance by reducing effect layer RT and VBO dirty rebuilding.\n</pre><div class="changelogHeadline">REV 2300 44dae7e5e - Kristjan Skutta, Fri Nov 13 21:06:11 2020 +0100</div> <pre class="changelogBody">- Added effect model and texture projection shader transforms.\n- Made x-ray effect work even when it\'s not the last effect.\n</pre><div class="changelogHeadline">REV 2299 b5e061ab2 - Kristjan Skutta, Fri Nov 13 13:32:24 2020 +0100</div> <pre class="changelogBody">- Cleaning up some effect compose code.\n</pre><div class="changelogHeadline">REV 2298 e5479326c - Kristjan Skutta, Fri Nov 13 12:56:20 2020 +0100</div> <pre class="changelogBody">- Changed auto weight generation to only paint vertices that have a connection to a bone in the first step.\n</pre><div class="changelogHeadline">REV 2297 469472ef7 - Kristjan Skutta, Fri Nov 13 01:09:25 2020 +0100</div> <pre class="changelogBody">- Added additive animation layer support.\n</pre><div class="changelogHeadline">REV 2296 5b2085cdf - Kristjan Skutta, Thu Nov 12 18:25:26 2020 +0100</div> <pre class="changelogBody">- Added scenescript setInterval.\n</pre><div class="changelogHeadline">REV 2295 d80404620 - Kristjan Skutta, Thu Nov 12 03:07:47 2020 +0100</div> <pre class="changelogBody">- Fixed crash when canceling timeout after it ran out already.\n</pre><div class="changelogHeadline">REV 2294 beddb13a8 - Kristjan Skutta, Thu Nov 12 03:03:36 2020 +0100</div> <pre class="changelogBody">- Removed a redundant V8 internal field.\n</pre><div class="changelogHeadline">REV 2293 765dbb123 - Kristjan Skutta, Thu Nov 12 03:01:04 2020 +0100</div> <pre class="changelogBody">- Added setTimeout support to scene script.\n</pre><div class="changelogHeadline">REV 2292 91266e22f - Kristjan Skutta, Thu Nov 12 01:43:55 2020 +0100</div> <pre class="changelogBody">- Improved slider auto keyframe.\n-\n</pre><div class="changelogHeadline">REV 2291 5fdc20e90 - Kristjan Skutta, Thu Nov 12 00:33:22 2020 +0100</div> <pre class="changelogBody">- Updated FreeType/HarfBuzz.\n- Added frame access to anim layers.\n- Added start paused option to anim properties.\n- Improved anim property undo/redo.\n- Made auto start option in welcome dialog more obvious.\n</pre><div class="changelogHeadline">REV 2290 9e9a84cc6 - Kristjan Skutta, Tue Nov 10 20:27:43 2020 +0100</div> <pre class="changelogBody">- Made puppet anims relative.\n- Made it possible to play looped puppet animations in reverse.\n- Added texture animation script access.\n</pre><div class="changelogHeadline">REV 2289 ccb59e38b - Kristjan Skutta, Mon Nov 9 17:07:22 2020 +0100</div> <pre class="changelogBody">- Made transform property animations relative.\n</pre><div class="changelogHeadline">REV 2288 872074ef5 - Kristjan Skutta, Mon Nov 9 01:14:29 2020 +0100</div> <pre class="changelogBody">- Added text property saving debounce.\n</pre><div class="changelogHeadline">REV 2287 73f1f15e8 - Kristjan Skutta, Sun Nov 8 23:55:35 2020 +0100</div> <pre class="changelogBody">- Added puppet bone scripting access.\n</pre><div class="changelogHeadline">REV 2286 be80c5b4e - Kristjan Skutta, Sun Nov 8 16:23:50 2020 +0100</div> <pre class="changelogBody">- Full animation layer scripting access.\n- Optimizing puppet animation undo performance by avoiding some JSON parsing and file reading.\n</pre><div class="changelogHeadline">REV 2285 346068a1b - Kristjan Skutta, Sat Nov 7 21:36:07 2020 +0100</div> <pre class="changelogBody">- Finished basic puppet editor undo/redo.\n</pre><div class="changelogHeadline">REV 2284 6e8c479d2 - Kristjan Skutta, Sat Nov 7 16:34:19 2020 +0100</div> <pre class="changelogBody">- Began working on puppet editor undo/redo stuff.\n- Added basic property animation scripting access.\n- Fixed playlist images not appearing if unusual install directory.\n</pre><div class="changelogHeadline">REV 2283 ad7658048 - Kristjan Skutta, Thu Nov 5 02:51:23 2020 +0100</div> <pre class="changelogBody">- Property animation joining WIP.\n- Improved animated texture packing if source texture is power of two resolution.\n- Super advanced new FPS limiting system all custom and much better than anything on the internet. High FPS targets like 144 will now be hit instead of previously only reaching 120-125.\n</pre><div class="changelogHeadline">REV 2282 79e40173c - Kristjan Skutta, Mon Nov 2 01:59:31 2020 +0100</div> <pre class="changelogBody">- Added support for puppet warp on animated images.\n- Added torque limit.\n- Removed project size limit only for valid video files.\n</pre><div class="changelogHeadline">REV 2281 a7fd818c0 - Kristjan Skutta, Sun Nov 1 02:56:06 2020 +0100</div> <pre class="changelogBody">- Bone physics fixes.\n- Knob numbers for gravity and angle.\n- Reset, copy paste for bone physics.\n- Added visuals for bone physics.\n</pre><div class="changelogHeadline">REV 2280 57a997253 - Kristjan Skutta, Sat Oct 31 03:07:58 2020 +0100</div> <pre class="changelogBody">- Fixed translation bone physics sim subdiv by zero when no motion detected.\n</pre><div class="changelogHeadline">REV 2279 f9bf2b982 - Kristjan Skutta, Sat Oct 31 02:43:45 2020 +0100</div> <pre class="changelogBody">- Added detection for existing puppet models to image importing.\n</pre><div class="changelogHeadline">REV 2278 2f5314193 - Kristjan Skutta, Sat Oct 31 02:12:34 2020 +0100</div> <pre class="changelogBody">- Bound vertices of floating islands in image to nearest other vertex weights.\n</pre><div class="changelogHeadline">REV 2277 349c27c1a - Kristjan Skutta, Sat Oct 31 01:58:43 2020 +0100</div> <pre class="changelogBody">- Added bone sim to anim layer system.\n- Made friction options more uniform.\n- Added support for puppet model generation on cropped, padded and hardware compressed textures.\n- Changed texture compression rules to allow cropping on all textures except hardware compressed ones because they need to be pow2.\n</pre><div class="changelogHeadline">REV 2276 39e5c9a53 - Kristjan Skutta, Fri Oct 30 03:33:34 2020 +0100</div> <pre class="changelogBody">- Added angular limits options to bone physics.\n</pre><div class="changelogHeadline">REV 2275 98d74c0e0 - Kristjan Skutta, Thu Oct 29 22:37:42 2020 +0100</div> <pre class="changelogBody">- Fixed bone translation gravity being in wrong coordinate system.\n</pre><div class="changelogHeadline">REV 2274 1a54e18e2 - Kristjan Skutta, Thu Oct 29 18:44:26 2020 +0100</div> <pre class="changelogBody">- Disabled seasonal themeing for WEG.\n- Bone physics improvements.\n</pre><div class="changelogHeadline">REV 2273 54f416176 - Kristjan Skutta, Thu Oct 29 00:47:20 2020 +0100</div> <pre class="changelogBody">- Cleaning up bone physics code.\n</pre><div class="changelogHeadline">REV 2272 6b3d72b76 - Kristjan Skutta, Thu Oct 29 00:10:42 2020 +0100</div> <pre class="changelogBody">- R&amp;D bone physics.\n</pre><div class="changelogHeadline">REV 2271 217d3943a - Kristjan Skutta, Wed Oct 28 13:28:10 2020 +0100</div> <pre class="changelogBody">- Bone physics improvements.\n- Fixed control nextWallpaper not being applied to all locations when none is specified and not forcing single locations to advance.\n</pre><div class="changelogHeadline">REV 2270 9cf24a8b3 - Kristjan Skutta, Tue Oct 27 22:46:54 2020 +0100</div> <pre class="changelogBody">- Bone physics progress.\n</pre><div class="changelogHeadline">REV 2269 7e33059db - Kristjan Skutta, Tue Oct 27 18:58:48 2020 +0100</div> <pre class="changelogBody">- R&amp;D on bone physics simulation.\n- Added permanent unrestricted upload switch.\n</pre><div class="changelogHeadline">REV 2268 d61fe6992 - Kristjan Skutta, Sun Oct 25 00:39:37 2020 +0200</div> <pre class="changelogBody">- Added bone constraints stubs.\n</pre><div class="changelogHeadline">REV 2267 38d01d6fc - Kristjan Skutta, Sat Oct 24 16:46:20 2020 +0200</div> <pre class="changelogBody">- Improved puppet warp subdivision algorithm.\n- Improved vertex/bone selection scaling with layer and camera.\n</pre><div class="changelogHeadline">REV 2266 223962d66 - Kristjan Skutta, Sat Oct 24 00:23:58 2020 +0200</div> <pre class="changelogBody">- Added custom puppet warp geo slicing.\n- Fixed pointer offset when painting/selecting vertices.\n</pre><div class="changelogHeadline">REV 2265 4acc77677 - Kristjan Skutta, Thu Oct 22 20:32:43 2020 +0200</div> <pre class="changelogBody">- Finished skeletal poses for animation system.\n- Added auto re-select to tree view on rebuild data.\n</pre><div class="changelogHeadline">REV 2264 bdf3ddf1c - Kristjan Skutta, Thu Oct 22 03:52:45 2020 +0200</div> <pre class="changelogBody">- Began adding pose save/load for puppet animations.\n</pre><div class="changelogHeadline">REV 2263 e13368cbc - Kristjan Skutta, Wed Oct 21 19:42:49 2020 +0200</div> <pre class="changelogBody">- Stubs for skeletal poses.\n- Added context menu to curve editor.\n</pre><div class="changelogHeadline">REV 2262 b19cc0364 - Kristjan Skutta, Tue Oct 20 18:45:08 2020 +0200</div> <pre class="changelogBody">- Added delay to connection overlay.\n- Made connection overlay not block mouse input.\n- Fixed installed resolution tags being hidden when preset filtering was enabled on Workshop.\n- Changed animation system to interpolate last frame correctly which overflows animation length for perfect looping.\n- Changed gizmos to not move right away after selection.\n- Improved bezier approximation code to handle extreme cases better.\n</pre><div class="changelogHeadline">REV 2261 3f72bae81 - Kristjan Skutta, Mon Oct 19 19:37:20 2020 +0200</div> <pre class="changelogBody">- Attempted to fix anim changes not saving.\n- Attempted to fix various animation transformation issues with scaling of the layer and bones.\n</pre><div class="changelogHeadline">REV 2260 01640d97d - Kristjan Skutta, Mon Oct 19 02:55:34 2020 +0200</div> <pre class="changelogBody">- Puppet warp progress.\n</pre><div class="changelogHeadline">REV 2259 5f4c1f139 - Kristjan Skutta, Sun Oct 18 00:53:14 2020 +0200</div> <pre class="changelogBody">- Updated Steam SDK to 1.50.\n- Added bone z order options to puppet warp system.\n- Fixed unspecified genre not being filtered out when reset filters is used on the Workshop.\n</pre><div class="changelogHeadline">REV 2258 0e2aa1d87 - Kristjan Skutta, Sat Oct 17 03:53:20 2020 +0200</div> <pre class="changelogBody">- Made connection overlay dependent on program version.\n</pre><div class="changelogHeadline">REV 2257 2472a52d0 - Kristjan Skutta, Sat Oct 17 03:46:29 2020 +0200</div> <pre class="changelogBody">- Reverted sprite sheet frame blending fix.\n</pre><div class="changelogHeadline">REV 2256 23d5c9b3e - Kristjan Skutta, Fri Oct 16 22:51:15 2020 +0200</div> <pre class="changelogBody">- Fixed a crash when adding anim layers.\n</pre><div class="changelogHeadline">REV 2255 d3b2ba58a - Kristjan Skutta, Fri Oct 16 20:23:50 2020 +0200</div> <pre class="changelogBody">- Delayed provider overlay so it\'s not flashing.\n</pre><div class="changelogHeadline">REV 2254 dd5a408a5 - Kristjan Skutta, Fri Oct 16 20:18:16 2020 +0200</div> <pre class="changelogBody">- Added provider connection overlay to Steam because some people have some serious Steam crap going on.\n- Puppet warp stuff.\n</pre><div class="changelogHeadline">REV 2253 c72677abf - Kristjan Skutta, Fri Oct 16 18:56:38 2020 +0200</div> <pre class="changelogBody">- Puppet warp progress.\n- Fixed folder paths in move to menu not containing all folders.\n</pre><div class="changelogHeadline">REV 2252 d85490cda - Kristjan Skutta, Thu Oct 15 22:56:21 2020 +0200</div> <pre class="changelogBody">- Brush size/opacity hotkeys for ctrl/shift.\n- Updated CUE SDK to 3.0.361.\n- Puppet warp progress.\n</pre><div class="changelogHeadline">REV 2251 0b0a87c94 - Kristjan Skutta, Thu Oct 15 03:14:56 2020 +0200</div> <pre class="changelogBody">- Added warning when trying to use puppet warp on an image that doesn\'t have transparency.\n</pre><div class="changelogHeadline">REV 2250 d44bbfb43 - Kristjan Skutta, Thu Oct 15 02:45:36 2020 +0200</div> <pre class="changelogBody">- Better puppet warp weight gen.\n</pre><div class="changelogHeadline">REV 2249 7a1aa91df - Kristjan Skutta, Thu Oct 15 01:53:17 2020 +0200</div> <pre class="changelogBody">- Attempted to fix anim layers not being saved while modifying puppet warp.\n</pre><div class="changelogHeadline">REV 2248 35228481d - Kristjan Skutta, Thu Oct 15 01:43:56 2020 +0200</div> <pre class="changelogBody">- Puppet warp fixes.\n</pre><div class="changelogHeadline">REV 2247 bf6460f4c - Kristjan Skutta, Wed Oct 14 02:42:11 2020 +0200</div> <pre class="changelogBody">- Puppet warp progress.\n</pre><div class="changelogHeadline">REV 2246 6c8f764f9 - Kristjan Skutta, Wed Oct 14 01:15:58 2020 +0200</div> <pre class="changelogBody">- Puppet warp progress.\n</pre><div class="changelogHeadline">REV 2245 323c0d8e7 - Kristjan Skutta, Tue Oct 13 03:51:11 2020 +0200</div> <pre class="changelogBody">- Removed Dx9 and OGL support completely.\n</pre><div class="changelogHeadline">REV 2244 4bedc1be2 - Kristjan Skutta, Tue Oct 13 03:00:14 2020 +0200</div> <pre class="changelogBody">- Puppet warp progress.\n</pre><div class="changelogHeadline">REV 2243 10916ff99 - Kristjan Skutta, Mon Oct 12 03:34:00 2020 +0200</div> <pre class="changelogBody">- Puppet warp progress.\n</pre><div class="changelogHeadline">REV 2242 28840e4c2 - Kristjan Skutta, Mon Oct 12 01:12:13 2020 +0200</div> <pre class="changelogBody">- Puppet warp progress.\n</pre><div class="changelogHeadline">REV 2241 c0be2ecac - Kristjan Skutta, Sun Oct 11 00:53:00 2020 +0200</div> <pre class="changelogBody">- Puppet warp progress.\n</pre><div class="changelogHeadline">REV 2240 ee0b3ab9c - Kristjan Skutta, Sat Oct 10 01:44:29 2020 +0200</div> <pre class="changelogBody">- Puppet warp progress.\n</pre><div class="changelogHeadline">REV 2239 ce5ae3f71 - Kristjan Skutta, Thu Oct 8 00:23:55 2020 +0200</div> <pre class="changelogBody">- Puppet warp progress.\n</pre><div class="changelogHeadline">REV 2238 965d0eba2 - Kristjan Skutta, Wed Oct 7 02:19:48 2020 +0200</div> <pre class="changelogBody">- Sick puppet warp progress.\n</pre><div class="changelogHeadline">REV 2237 6f002ba89 - Kristjan Skutta, Mon Oct 5 19:57:31 2020 +0200</div> <pre class="changelogBody">- Puppet warp progress.\n- Attempted new solution for WEG apply wallpaper when no rail client is active yet the change wallpaper event is being sent.\n</pre><div class="changelogHeadline">REV 2236 01f49c077 - Kristjan Skutta, Sun Oct 4 23:55:32 2020 +0200</div> <pre class="changelogBody">- Puppet warp progress.\n- Improved sprite sheet transparency blending.\n</pre><div class="changelogHeadline">REV 2235 4646d2bc7 - Kristjan Skutta, Thu Oct 1 21:37:44 2020 +0200</div> <pre class="changelogBody">- Puppet warp progress.\n</pre><div class="changelogHeadline">REV 2234 8783fdd98 - Kristjan Skutta, Thu Oct 1 02:45:03 2020 +0200</div> <pre class="changelogBody">- Puppet warp progress.\n- Attempted to stop event child particle emission when parent is turned invisible.\n- Disabled audio buffer loading when audio is fully muted to avoid Windows reserving and activating an audio stream that prevents sleep.\n- Disabled browse window restore when editor apply wallpaper is used multiple times.\n- Fixed daytime playlist being affected by video ended event.\n</pre><div class="changelogHeadline">REV 2233 81c43feef - Kristjan Skutta, Mon Sep 28 15:22:28 2020 +0200</div> <pre class="changelogBody">- Removed web dependency button because it\'s impossible to use now due to WEG\'s system.\n- Fixed local project date update not updating wallpaper sorting.\n- Changed user combo property always setting a default value when saving.\n- Removed layout system blinking which existed since like forever already and never was a problem before.\n- Added more trash norton hacks to crash detection.\n- Fixed transparency cropping breaking the image when it goes into negative range.\n- Added downsampling to static image wallpapers.\n</pre><div class="changelogHeadline">REV 2232 e56acac43 - Kristjan Skutta, Sun Sep 20 00:54:55 2020 +0200</div> <pre class="changelogBody">- Another attempt at fixing key frames not being saved by dragging a gizmo.\n</pre><div class="changelogHeadline">REV 2231 358cbf90d - Kristjan Skutta, Sun Sep 20 00:08:40 2020 +0200</div> <pre class="changelogBody">- Improved drag/drop reaction performance due to crazy slow JS message processing.\n- Attempted to solve animation not saving.\n</pre><div class="changelogHeadline">REV 2230 5b75122f2 - Kristjan Skutta, Sat Sep 19 23:13:59 2020 +0200</div> <pre class="changelogBody">- Curve editor progress.\n</pre><div class="changelogHeadline">REV 2229 23f2a4034 - Kristjan Skutta, Sat Sep 19 01:45:53 2020 +0200</div> <pre class="changelogBody">- Puppet warp progress.\n- Some DPI mess fixes for UI.\n- Attempted to fix brush panel sometimes not appearing.\n</pre><div class="changelogHeadline">REV 2228 085f03e67 - Kristjan Skutta, Tue Sep 15 21:56:34 2020 +0200</div> <pre class="changelogBody">- Fixed max size constant underflowing.\n</pre><div class="changelogHeadline">REV 2227 3a9d31f62 - Kristjan Skutta, Tue Sep 15 21:11:11 2020 +0200</div> <pre class="changelogBody">- Fixed video size tolerance.\n</pre><div class="changelogHeadline">REV 2226 d1bd2ba03 - Kristjan Skutta, Tue Sep 15 19:35:26 2020 +0200</div> <pre class="changelogBody">- Combined mouse move messages to reduce Chromium performance problems.\n- Changed video size limit to 2GB.\n</pre><div class="changelogHeadline">REV 2225 1ac69e82a - Kristjan Skutta, Tue Sep 15 01:13:22 2020 +0200</div> <pre class="changelogBody">- Fixed workshop ID not being set on project after initial publish.\n</pre><div class="changelogHeadline">REV 2224 b7443eb0b - Kristjan Skutta, Mon Sep 14 22:48:17 2020 +0200</div> <pre class="changelogBody">- Reduced JS property update frequency because it interfered with painting the preview window.\n</pre></div> '),e.put("views/includes/thirdpartynotices.html",'<div class="settingsThirdpartyBox"> <div> <div>Assets</div> <pre>Ricepod model by Eyaura - <a onclick="window.ui.shellexecute(\'http://www.moddb.com/mods/g-string\')">G String Mod</a>\r\nFoliage by bart (rescaled, <a onclick="window.ui.shellexecute(\'https://creativecommons.org/licenses/by/3.0/\')">CC-BY 3.0</a>)\r\nFree Brushes by <a onclick="window.ui.shellexecute(\'https://brusheezy.com\')">Brusheezy.com</a>\r\nDino sprites by Arks <a onclick="window.ui.shellexecute(\'https://twitter.com/ScissorMarks\')">@ScissorMarks</a>\r\nBackground art by <a onclick="window.ui.shellexecute(\'https://www.freepik.com/free-photos-vectors/party\')">www.freepik.com</a> <a href="https://www.vecteezy.com/free-vector/snow">www.vecteezy.com</a></pre> </div> <div> <div>Community Translators</div> <pre>Abeson\r\nafterl1ght\r\nAkiraTenchi\r\nAlixey\r\nAljaž Božičko\r\nAmin3435\r\nandi257\r\nAndr\r\nAndraz Span\r\nAnfia\r\nangrystar170\r\nANL\r\nAronpoiss\r\nASiMKA\r\nAteshM\r\nAteX01\r\nAudition-CSBlock\r\naustin-chang\r\nbadpixel13\r\nBigBoi ( ͡° ͜ʖ ͡°)\r\nBlack4Killer\r\nBlackMorento\r\nBLVCK\r\nCai Ning\r\nChairman Meow\r\nCharlesChou73\r\nChings\r\nChristiandiSama\r\nclmfkilu\r\nCosminPerRam\r\nCrbakc\r\nCronic185\r\nDaYWhiTe\r\ndimateos\r\nDimOkGamer\r\nDoc\r\nDr. HaZaRd\r\nDushesS01\r\nE4RU\r\neduardo989\r\nEnesmirac\r\nEoun\r\neyal100\r\nEyON\r\nFIndustries\r\nfractal\r\nGaboik\r\ngabrielrou1\r\nGalmadus\r\nGiasko\r\nGriffin\r\nGuan\r\nGustav\r\nHaoJun0823\r\nhdts-adam\r\nHish\r\nImranDoet\r\nis984\r\nitskiru\r\nivandwijaya\r\nIvanSix\r\nJpF4E\r\nkalebC\r\nKamiAso\r\nKanarias\r\nkillingbeta\r\nkorobot\r\nKozara\r\nKukiMukis\r\nlagseeing\r\nLagSeeN\r\nLeecanIt\r\nlennythecat\r\nLittleWind404\r\nLluisCS\r\nLoesna\r\nLosna\r\nlucapierobon\r\nLukelis357\r\nLusTerCsI\r\nlysinelai\r\nLyvelion\r\nM.ArdA\r\nMagicWizardGuy\r\nMagVI\r\nMaksilos\r\nManfre98\r\nmarci010101\r\nMArdA88\r\nMariolinXD\r\nMaximuel\r\nmaxlefou\r\nmeatturtle\r\nmeowside\r\nMiKaiLosA\r\nminimax4233\r\nMogician0123\r\nMonika-Ananieva\r\nMornwind\r\nMrGoldDoge\r\nMrKingMichael\r\nMöyhönen\r\nNaufal-FR\r\nneirock\r\nnguyenvancaokys\r\nNguyễn Văn Cao Kỳ\r\nnightparty\r\nNobleEnmsnu\r\nnocryset\r\nonikidokuz\r\nosmantuna\r\npapin97\r\nPatr1xUs\r\npaulo9mv\r\npiccho[JP]\r\nQR Code\r\nRasin\r\nrawpety\r\nREDO\r\nRegnander\r\nRinpen\r\nRiooKaaa\r\nrjs4902\r\nromeoxp777\r\nSakuRabi\r\nsebinus\r\nSenpaiWithDiabetes\r\nsergeitarsaus\r\nshaart\r\nShiro\r\nshwaeki\r\nSigmaTheFox\r\nSkriep\r\nSouk\r\nSpritBall\r\nstorym94374\r\nSumrid.Studio\r\nsunbeams001\r\nsuperuser590\r\nSwiftpaws\r\nTaavi\r\nTark\r\nThadah\r\nThe bear123\r\ntheMarcPower\r\ntpxxn\r\nVitA$42$Yakamoz\r\nwhhungbill\r\nWiNCHaN\r\nxfluffydestroy\r\nxlydsg\r\nYanstory\r\nycanCHKN\r\nYoti\r\nZamekaze\r\nZEBAS204\r\nzhs852\r\n.FeTaK: Kokain\r\n[TW]Frank\r\n| extRme_sPortS |\r\n| Minkster &lt;3\r\nαz\r\nジュラ紀\r\n伊织\r\n古丁丁\r\n다이나믹\r\n선진입후판단</pre> </div> <div> <div>Boost</div> <pre>Boost Software License - Version 1.0 - August 17th, 2003\r\n\r\nPermission is hereby granted, free of charge, to any person or organization\r\nobtaining a copy of the software and accompanying documentation covered by\r\nthis license (the "Software") to use, reproduce, display, distribute,\r\nexecute, and transmit the Software, and to prepare derivative works of the\r\nSoftware, and to permit third-parties to whom the Software is furnished to\r\ndo so, all subject to the following:\r\n\r\nThe copyright notices in the Software and this entire statement, including\r\nthe above license grant, this restriction and the following disclaimer,\r\nmust be included in all copies of the Software, in whole or in part, and\r\nall derivative works of the Software, unless such copies or derivative\r\nworks are solely in the form of machine-executable object code generated by\r\na source language processor.\r\n\r\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE, TITLE AND NON-INFRINGEMENT. IN NO EVENT\r\nSHALL THE COPYRIGHT HOLDERS OR ANYONE DISTRIBUTING THE SOFTWARE BE LIABLE\r\nFOR ANY DAMAGES OR OTHER LIABILITY, WHETHER IN CONTRACT, TORT OR OTHERWISE,\r\nARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\r\nDEALINGS IN THE SOFTWARE.</pre> </div> <div> <div>LodePNG</div> <pre>LodePNG version 20160118\r\nCopyright (c) 2005-2016 Lode Vandevenne\r\nThis software is provided \'as-is\', without any express or implied\r\nwarranty. In no event will the authors be held liable for any damages\r\narising from the use of this software.\r\nPermission is granted to anyone to use this software for any purpose,\r\nincluding commercial applications, and to alter it and redistribute it\r\nfreely, subject to the following restrictions:\r\n    1. The origin of this software must not be misrepresented; you must not\r\n    claim that you wrote the original software. If you use this software\r\n    in a product, an acknowledgment in the product documentation would be\r\n    appreciated but is not required.\r\n    2. Altered source versions must be plainly marked as such, and must not be\r\n    misrepresented as being the original software.\r\n    3. This notice may not be removed or altered from any source\r\n    distribution.</pre> </div> <div> <div>JsonCpp</div> <pre>The JsonCpp library\'s source code, including accompanying documentation,\r\ntests and demonstration applications, are licensed under the following\r\nconditions...\r\n\r\nThe author (Baptiste Lepilleur) explicitly disclaims copyright in all \r\njurisdictions which recognize such a disclaimer. In such jurisdictions, \r\nthis software is released into the Public Domain.\r\n\r\nIn jurisdictions which do not recognize Public Domain property (e.g. Germany as of\r\n2010), this software is Copyright (c) 2007-2010 by Baptiste Lepilleur, and is\r\nreleased under the terms of the MIT License (see below).\r\n\r\nIn jurisdictions which recognize Public Domain property, the user of this \r\nsoftware may choose to accept it either as 1) Public Domain, 2) under the \r\nconditions of the MIT License (see below), or 3) under the terms of dual \r\nPublic Domain/MIT License conditions described here, as they choose.\r\n\r\nThe MIT License is about as close to Public Domain as a license can get, and is\r\ndescribed in clear, concise terms at:\r\n\r\n   http://en.wikipedia.org/wiki/MIT_License\r\n   \r\nThe full text of the MIT License follows:\r\n\r\n========================================================================\r\nCopyright (c) 2007-2010 Baptiste Lepilleur\r\n\r\nPermission is hereby granted, free of charge, to any person\r\nobtaining a copy of this software and associated documentation\r\nfiles (the "Software"), to deal in the Software without\r\nrestriction, including without limitation the rights to use, copy,\r\nmodify, merge, publish, distribute, sublicense, and/or sell copies\r\nof the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be\r\nincluded in all copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,\r\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\r\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS\r\nBE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\r\nACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\r\nCONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n========================================================================\r\n(END LICENSE TEXT)\r\n\r\nThe MIT license is compatible with both the GPL and commercial\r\nsoftware, affording one all of the rights of Public Domain with the\r\nminor nuisance of being required to keep the above copyright notice\r\nand license text in the source code. Note also that by accepting the\r\nPublic Domain "license" you can re-license your copy using whatever\r\nlicense you like.</pre> </div> <div> <div>GLM</div> <pre>================================================================================\r\nOpenGL Mathematics (GLM)\r\n--------------------------------------------------------------------------------\r\nGLM is licensed under The Happy Bunny License and MIT License\r\n\r\n================================================================================\r\nThe Happy Bunny License (Modified MIT License)\r\n--------------------------------------------------------------------------------\r\nCopyright (c) 2005 - 2014 G-Truc Creation\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the "Software"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nRestrictions:\r\n By making use of the Software for military purposes, you choose to make a\r\n Bunny unhappy.\r\n\r\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n\r\n================================================================================\r\nThe MIT License\r\n--------------------------------------------------------------------------------\r\nCopyright (c) 2005 - 2014 G-Truc Creation\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the "Software"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.</pre> </div> <div> <div>CEF</div> <pre><strong>Please see bin/cefthirdpartynotices.html for all CEF licenses!</strong></pre> <pre>Copyright (c) 2008-2014 Marshall A. Greenblatt. Portions Copyright (c)\r\n2006-2009 Google Inc. All rights reserved.\r\n\r\nRedistribution and use in source and binary forms, with or without\r\nmodification, are permitted provided that the following conditions are\r\nmet:\r\n\r\n   * Redistributions of source code must retain the above copyright\r\nnotice, this list of conditions and the following disclaimer.\r\n   * Redistributions in binary form must reproduce the above\r\ncopyright notice, this list of conditions and the following disclaimer\r\nin the documentation and/or other materials provided with the\r\ndistribution.\r\n   * Neither the name of Google Inc. nor the name Chromium Embedded\r\nFramework nor the names of its contributors may be used to endorse\r\nor promote products derived from this software without specific prior\r\nwritten permission.\r\n\r\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\r\n"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\r\nLIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\r\nA PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\r\nOWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\r\nSPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\r\nLIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\r\nDATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\r\nTHEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</pre> </div> <div> <div>FFTS</div> <pre>Copyright (c) 2012, 2013 Anthony M. Blake amb@anthonix.com\r\n \r\n All rights reserved.\r\n\r\n Redistribution and use in source and binary forms, with or without\r\n modification, are permitted provided that the following conditions are met:\r\n    * Redistributions of source code must retain the above copyright\r\n        notice, this list of conditions and the following disclaimer.\r\n    * Redistributions in binary form must reproduce the above copyright\r\n        notice, this list of conditions and the following disclaimer in the\r\n        documentation and/or other materials provided with the distribution.\r\n    * Neither the name of the organization nor the\r\n      names of its contributors may be used to endorse or promote products\r\n        derived from this software without specific prior written permission.\r\n\r\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND\r\n ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n DISCLAIMED. IN NO EVENT SHALL ANTHONY M. BLAKE BE LIABLE FOR ANY\r\n DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</pre> </div> <div> <div>libsquish</div> <pre>Copyright (c) 2006 Simon Brown                          si@sjbrown.co.uk\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining\r\na copy of this software and associated documentation files (the \r\n"Software"), to deal in the Software without restriction, including\r\nwithout limitation the rights to use, copy, modify, merge, publish,\r\ndistribute, sublicense, and/or sell copies of the Software, and to \r\npermit persons to whom the Software is furnished to do so, subject to \r\nthe following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included\r\nin all copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS\r\nOR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF \r\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\r\nIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY \r\nCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, \r\nTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE \r\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</pre> </div> <div> <div>Assimp</div> <pre>Assimp is released as Open Source under the terms of a 3-clause BSD license.</pre> <pre>Copyright (c) 2006-2015 assimp team\r\nAll rights reserved.\r\n\r\nRedistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\r\n\r\nRedistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\r\nRedistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\r\nNeither the name of the assimp team nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.\r\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</pre> </div> <div> <div>FreeImage</div> <pre>This software uses the FreeImage open source image library. See http://freeimage.sourceforge.net for details.\r\nFreeImage is used under the FIPL, version 1.0.\r\nThe full license can be found at bin/freeimage-license.txt.</pre> </div> <div> <div>LZ4 - Fast LZ compression algorithm</div> <pre>Copyright (C) 2011-2017, Yann Collet.</pre> <pre>BSD 2-Clause License (http://www.opensource.org/licenses/bsd-license.php)\r\nRedistribution and use in source and binary forms, with or without\r\nmodification, are permitted provided that the following conditions are\r\nmet:\r\n   * Redistributions of source code must retain the above copyright\r\nnotice, this list of conditions and the following disclaimer.\r\n   * Redistributions in binary form must reproduce the above\r\ncopyright notice, this list of conditions and the following disclaimer\r\nin the documentation and/or other materials provided with the\r\ndistribution.\r\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\r\n"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\r\nLIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\r\nA PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\r\nOWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\r\nSPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\r\nLIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\r\nDATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\r\nTHEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\nYou can contact the author at :\r\n- LZ4 homepage : http://www.lz4.org\r\n- LZ4 source repository : https://github.com/lz4/lz4</pre> </div> <div> <div>Perlin Simplex Noise</div> </div> <div> <div>The MIT License (MIT)</div> <pre>Copyright (c) 2012-2014 Sebastien Rombauts (sebastien.rombauts@gmail.com)</pre> <pre>Permission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the "Software"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is furnished\r\nto do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\r\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR\r\nIN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</pre> </div> <div> <div>mpg123</div> </div> <div> <pre>Copyright (c) 1995-2013 by Michael Hipp and others,</pre> <pre>free software under the terms of the LGPL v2.1</pre> <pre>Source code and instruction to recompile dependencies can be found at: <a onclick="window.ui.shellexecute(\'https://github.com/Biohazard90/wallpaper-engine-media-extensions\')">https://github.com/Biohazard90/wallpaper-engine-media-extensions</a></pre> </div> <div> <div>SFML 2</div> </div> <div> <pre>SFML (Simple and Fast Multimedia Library) - Copyright (c) Laurent Gomila\r\n\r\nThis software is provided \'as-is\', without any express or implied warranty.\r\nIn no event will the authors be held liable for any damages arising from\r\nthe use of this software.\r\n\r\nPermission is granted to anyone to use this software for any purpose,\r\nincluding commercial applications, and to alter it and redistribute it\r\nfreely, subject to the following restrictions:\r\n\r\n1. The origin of this software must not be misrepresented; you must not claim\r\n   that you wrote the original software. If you use this software in a product,\r\n   an acknowledgment in the product documentation would be appreciated but is\r\n   not required.\r\n\r\n2. Altered source versions must be plainly marked as such, and must not be\r\n   misrepresented as being the original software.\r\n\r\n3. This notice may not be removed or altered from any source distribution.</pre> </div> <div> <div>Monaco Editor</div> </div> <div> <pre>The MIT License (MIT)\r\n\r\nCopyright (c) 2019 Microsoft Corporation\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</pre> </div> <div> <div>FreeType2</div> </div> <div> <pre>                    The FreeType Project LICENSE\r\n                    ----------------------------\r\n\r\n                            2006-Jan-27\r\n\r\n                    Copyright 1996-2002, 2006 by\r\n          David Turner, Robert Wilhelm, and Werner Lemberg\r\n\r\n\r\n\r\nIntroduction\r\n============\r\n\r\n  The FreeType  Project is distributed in  several archive packages;\r\n  some of them may contain, in addition to the FreeType font engine,\r\n  various tools and  contributions which rely on, or  relate to, the\r\n  FreeType Project.\r\n\r\n  This  license applies  to all  files found  in such  packages, and\r\n  which do not  fall under their own explicit  license.  The license\r\n  affects  thus  the  FreeType   font  engine,  the  test  programs,\r\n  documentation and makefiles, at the very least.\r\n\r\n  This  license   was  inspired  by  the  BSD,   Artistic,  and  IJG\r\n  (Independent JPEG  Group) licenses, which  all encourage inclusion\r\n  and  use of  free  software in  commercial  and freeware  products\r\n  alike.  As a consequence, its main points are that:\r\n\r\n    o We don\'t promise that this software works. However, we will be\r\n      interested in any kind of bug reports. (`as is\' distribution)\r\n\r\n    o You can  use this software for whatever you  want, in parts or\r\n      full form, without having to pay us. (`royalty-free\' usage)\r\n\r\n    o You may not pretend that  you wrote this software.  If you use\r\n      it, or  only parts of it,  in a program,  you must acknowledge\r\n      somewhere  in  your  documentation  that  you  have  used  the\r\n      FreeType code. (`credits\')\r\n\r\n  We  specifically  permit  and  encourage  the  inclusion  of  this\r\n  software, with  or without modifications,  in commercial products.\r\n  We  disclaim  all warranties  covering  The  FreeType Project  and\r\n  assume no liability related to The FreeType Project.\r\n\r\n\r\n  Finally,  many  people  asked  us  for  a  preferred  form  for  a\r\n  credit/disclaimer to use in compliance with this license.  We thus\r\n  encourage you to use the following text:\r\n\r\n   """\r\n    Portions of this software are copyright © <year> The FreeType\r\n    Project (www.freetype.org).  All rights reserved.\r\n   """\r\n\r\n  Please replace <year> with the value from the FreeType version you\r\n  actually use.\r\n\r\n\r\nLegal Terms\r\n===========\r\n\r\n0. Definitions\r\n--------------\r\n\r\n  Throughout this license,  the terms `package\', `FreeType Project\',\r\n  and  `FreeType  archive\' refer  to  the  set  of files  originally\r\n  distributed  by the  authors  (David Turner,  Robert Wilhelm,  and\r\n  Werner Lemberg) as the `FreeType Project\', be they named as alpha,\r\n  beta or final release.\r\n\r\n  `You\' refers to  the licensee, or person using  the project, where\r\n  `using\' is a generic term including compiling the project\'s source\r\n  code as  well as linking it  to form a  `program\' or `executable\'.\r\n  This  program is  referred to  as  `a program  using the  FreeType\r\n  engine\'.\r\n\r\n  This  license applies  to all  files distributed  in  the original\r\n  FreeType  Project,   including  all  source   code,  binaries  and\r\n  documentation,  unless  otherwise  stated   in  the  file  in  its\r\n  original, unmodified form as  distributed in the original archive.\r\n  If you are  unsure whether or not a particular  file is covered by\r\n  this license, you must contact us to verify this.\r\n\r\n  The FreeType  Project is copyright (C) 1996-2000  by David Turner,\r\n  Robert Wilhelm, and Werner Lemberg.  All rights reserved except as\r\n  specified below.\r\n\r\n1. No Warranty\r\n--------------\r\n\r\n  THE FREETYPE PROJECT  IS PROVIDED `AS IS\' WITHOUT  WARRANTY OF ANY\r\n  KIND, EITHER  EXPRESS OR IMPLIED,  INCLUDING, BUT NOT  LIMITED TO,\r\n  WARRANTIES  OF  MERCHANTABILITY   AND  FITNESS  FOR  A  PARTICULAR\r\n  PURPOSE.  IN NO EVENT WILL ANY OF THE AUTHORS OR COPYRIGHT HOLDERS\r\n  BE LIABLE  FOR ANY DAMAGES CAUSED  BY THE USE OR  THE INABILITY TO\r\n  USE, OF THE FREETYPE PROJECT.\r\n\r\n2. Redistribution\r\n-----------------\r\n\r\n  This  license  grants  a  worldwide, royalty-free,  perpetual  and\r\n  irrevocable right  and license to use,  execute, perform, compile,\r\n  display,  copy,   create  derivative  works   of,  distribute  and\r\n  sublicense the  FreeType Project (in  both source and  object code\r\n  forms)  and  derivative works  thereof  for  any  purpose; and  to\r\n  authorize others  to exercise  some or all  of the  rights granted\r\n  herein, subject to the following conditions:\r\n\r\n    o Redistribution of  source code  must retain this  license file\r\n      (`FTL.TXT\') unaltered; any  additions, deletions or changes to\r\n      the original  files must be clearly  indicated in accompanying\r\n      documentation.   The  copyright   notices  of  the  unaltered,\r\n      original  files must  be  preserved in  all  copies of  source\r\n      files.\r\n\r\n    o Redistribution in binary form must provide a  disclaimer  that\r\n      states  that  the software is based in part of the work of the\r\n      FreeType Team,  in  the  distribution  documentation.  We also\r\n      encourage you to put an URL to the FreeType web page  in  your\r\n      documentation, though this isn\'t mandatory.\r\n\r\n  These conditions  apply to any  software derived from or  based on\r\n  the FreeType Project,  not just the unmodified files.   If you use\r\n  our work, you  must acknowledge us.  However, no  fee need be paid\r\n  to us.\r\n\r\n3. Advertising\r\n--------------\r\n\r\n  Neither the  FreeType authors and  contributors nor you  shall use\r\n  the name of the  other for commercial, advertising, or promotional\r\n  purposes without specific prior written permission.\r\n\r\n  We suggest,  but do not require, that  you use one or  more of the\r\n  following phrases to refer  to this software in your documentation\r\n  or advertising  materials: `FreeType Project\',  `FreeType Engine\',\r\n  `FreeType library\', or `FreeType Distribution\'.\r\n\r\n  As  you have  not signed  this license,  you are  not  required to\r\n  accept  it.   However,  as  the FreeType  Project  is  copyrighted\r\n  material, only  this license, or  another one contracted  with the\r\n  authors, grants you  the right to use, distribute,  and modify it.\r\n  Therefore,  by  using,  distributing,  or modifying  the  FreeType\r\n  Project, you indicate that you understand and accept all the terms\r\n  of this license.\r\n\r\n4. Contacts\r\n-----------\r\n\r\n  There are two mailing lists related to FreeType:\r\n\r\n    o freetype@nongnu.org\r\n\r\n      Discusses general use and applications of FreeType, as well as\r\n      future and  wanted additions to the  library and distribution.\r\n      If  you are looking  for support,  start in  this list  if you\r\n      haven\'t found anything to help you in the documentation.\r\n\r\n    o freetype-devel@nongnu.org\r\n\r\n      Discusses bugs,  as well  as engine internals,  design issues,\r\n      specific licenses, porting, etc.\r\n\r\n  Our home page can be found at\r\n\r\n    https://www.freetype.org</year></year></pre> </div> <div> <div>HarfBuzz</div> </div> <div> <pre>HarfBuzz is licensed under the so-called "Old MIT" license.  Details follow.\r\nFor parts of HarfBuzz that are licensed under different licenses see individual\r\nfiles names COPYING in subdirectories where applicable.\r\n\r\nCopyright © 2010,2011,2012,2013,2014,2015,2016,2017,2018,2019  Google, Inc.\r\nCopyright © 2019  Facebook, Inc.\r\nCopyright © 2012  Mozilla Foundation\r\nCopyright © 2011  Codethink Limited\r\nCopyright © 2008,2010  Nokia Corporation and/or its subsidiary(-ies)\r\nCopyright © 2009  Keith Stribley\r\nCopyright © 2009  Martin Hosken and SIL International\r\nCopyright © 2007  Chris Wilson\r\nCopyright © 2006  Behdad Esfahbod\r\nCopyright © 2005  David Turner\r\nCopyright © 2004,2007,2008,2009,2010  Red Hat, Inc.\r\nCopyright © 1998-2004  David Turner and Werner Lemberg\r\n\r\nFor full copyright notices consult the individual files in the package.\r\n\r\n\r\nPermission is hereby granted, without written agreement and without\r\nlicense or royalty fees, to use, copy, modify, and distribute this\r\nsoftware and its documentation for any purpose, provided that the\r\nabove copyright notice and the following two paragraphs appear in\r\nall copies of this software.\r\n\r\nIN NO EVENT SHALL THE COPYRIGHT HOLDER BE LIABLE TO ANY PARTY FOR\r\nDIRECT, INDIRECT, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES\r\nARISING OUT OF THE USE OF THIS SOFTWARE AND ITS DOCUMENTATION, EVEN\r\nIF THE COPYRIGHT HOLDER HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH\r\nDAMAGE.\r\n\r\nTHE COPYRIGHT HOLDER SPECIFICALLY DISCLAIMS ANY WARRANTIES, INCLUDING,\r\nBUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\r\nFITNESS FOR A PARTICULAR PURPOSE.  THE SOFTWARE PROVIDED HEREUNDER IS\r\nON AN "AS IS" BASIS, AND THE COPYRIGHT HOLDER HAS NO OBLIGATION TO\r\nPROVIDE MAINTENANCE, SUPPORT, UPDATES, ENHANCEMENTS, OR MODIFICATIONS.</pre> </div> <div> <div>OpenCV</div> </div> <div> <pre>By downloading, copying, installing or using the software you agree to this license.\r\nIf you do not agree to this license, do not download, install,\r\ncopy or use the software.\r\n\r\n                          License Agreement\r\n               For Open Source Computer Vision Library\r\n                       (3-clause BSD License)\r\n\r\nCopyright (C) 2000-2020, Intel Corporation, all rights reserved.\r\nCopyright (C) 2009-2011, Willow Garage Inc., all rights reserved.\r\nCopyright (C) 2009-2016, NVIDIA Corporation, all rights reserved.\r\nCopyright (C) 2010-2013, Advanced Micro Devices, Inc., all rights reserved.\r\nCopyright (C) 2015-2016, OpenCV Foundation, all rights reserved.\r\nCopyright (C) 2015-2016, Itseez Inc., all rights reserved.\r\nCopyright (C) 2019-2020, Xperience AI, all rights reserved.\r\nThird party copyrights are property of their respective owners.\r\n\r\nRedistribution and use in source and binary forms, with or without modification,\r\nare permitted provided that the following conditions are met:\r\n\r\n  * Redistributions of source code must retain the above copyright notice,\r\n    this list of conditions and the following disclaimer.\r\n\r\n  * Redistributions in binary form must reproduce the above copyright notice,\r\n    this list of conditions and the following disclaimer in the documentation\r\n    and/or other materials provided with the distribution.\r\n\r\n  * Neither the names of the copyright holders nor the names of the contributors\r\n    may be used to endorse or promote products derived from this software\r\n    without specific prior written permission.\r\n\r\nThis software is provided by the copyright holders and contributors "as is" and\r\nany express or implied warranties, including, but not limited to, the implied\r\nwarranties of merchantability and fitness for a particular purpose are disclaimed.\r\nIn no event shall copyright holders or contributors be liable for any direct,\r\nindirect, incidental, special, exemplary, or consequential damages\r\n(including, but not limited to, procurement of substitute goods or services;\r\nloss of use, data, or profits; or business interruption) however caused\r\nand on any theory of liability, whether in contract, strict liability,\r\nor tort (including negligence or otherwise) arising in any way out of\r\nthe use of this software, even if advised of the possibility of such damage.</pre> </div> </div> '),e.put("views/modals/agegatemodal.html",'<div class="modalContainer"> <div class="modal-header"> <h4 class="modal-title" translate="ui_browse_age_gate_modal_header"></h4> </div> <div class="modal-body"> <div> <div translate="ui_browse_age_gate_modal_body"> </div> </div> <div class="ageGateModalBody"> <div> <span class="dateHeader" translate="ui_browse_age_gate_modal_day"></span> <span class="dateHeader" translate="ui_browse_age_gate_modal_month"></span> <span class="dateHeader" translate="ui_browse_age_gate_modal_year"></span> </div> <div> <droplist dp-options="days" dp-selected="date.day"></droplist> <droplist dp-options="months" dp-selected="date.month"></droplist> <droplist dp-options="years" dp-selected="date.year"></droplist> </div> </div> <div class="ageGateModalSubText" translate="ui_browse_age_gate_modal_sub"> </div> </div> <div class="modal-footer" style="display: flex"> <div> </div> \x3c!--         <div ng-if="data.customFooter" style="display:flex;flex-direction:column">\r\n            <div style="margin-bottom:5px; text-align: left">{{data.customFooterText | translate}}</div>\r\n            <div>\r\n                <button class="btn btn-primary" uib-btn-checkbox ng-model="data.customFooterModel" translate="ui_workshop_tags_anime"></button>\r\n            </div>\r\n        </div> --\x3e <div style="flex-grow: 1"> <a class="btn btn-primary" ng-disabled="okDisabled" ng-click="ok()" translate="ui_ok"></a> <a class="btn btn-default" ng-click="cancel()" translate="ui_cancel"></a> </div> </div> </div> '),e.put("views/modals/browseassignhotkey.html",'<div class="modalContainer"> <div class="modal-header"> \x3c!-- TODO: Make title dynamic when/if this is used for different use cases --\x3e <h4 class="modal-title" translate="ui_browse_modal_hotkey_assign_wallpaper" translate-values="{name:name}"></h4> </div> <div class="modal-body"> <form class="form-horizontal"> <div class="form-group" style="margin-bottom:0px"> <label class="col-sm-4 control-label" translate="ui_browse_modal_hotkey_enter_hotkey"></label> <div class="col-sm-8"> <hotkeyinput hk-keys="keys" hk-pool="hotkeys"></hotkeyinput> </div> </div> </form> </div> <div class="modal-footer"> <div> <button class="btn btn-primary" ng-click="ok()" ng-disabled="keys.length===0" translate="ui_ok"></button> <a class="btn btn-default" ng-click="cancel()" translate="ui_cancel"></a> </div> </div> </div> '),e.put("views/modals/browsecollectionsmodal.html",'<div class="modalContainer browseWallpaperCollectionModal"> <div class="modal-header"> <h4 class="modal-title" translate="{{type.labelHeader}}"></h4> </div> <div class="modal-body"> <div ng-if="data.isSaving"> <form class="form-horizontal"> <div class="form-group"> <label for="inputURL" class="col-sm-2 control-label" translate="{{type.labelSave}}"></label> <div class="col-sm-10"> <input type="text" class="form-control ignoreModalFocus" ng-model="data.collectionItem.name" id="inputURL" autofocus> <div translate="{{type.labelSaveDescription}}"></div> </div> </div> <div class="form-group" style="margin-bottom:0px" ng-if="type.hotkeyAction"> <label class="col-sm-2 control-label" translate="ui_browse_context_menu_hotkey"></label> <div class="col-sm-10"> <hotkeyinput hk-keys="context.hotkey" hk-pool="data.hotkeys"></hotkeyinput> </div> </div> </form> </div> <div ng-if="!data.isSaving"> <div class="btn-group-vertical verticalRadioButtonList"> <button class="btn btn-default ignoreModalFocus" type="button" ng-repeat="p in data.collections" ng-model="context.currentSelection" ng-dblclick="ok()" uib-btn-radio="p">{{p.name}}</button> <div ng-if="data.collections.length==0 && type.labelEmpty" class="emptyCollections" translate="{{type.labelEmpty}}"></div> </div> <form class="form-horizontal"> <div class="form-group" style="margin-top:10px" ng-if="type.hotkeyAction"> <label class="col-sm-2 control-label" translate="ui_browse_context_menu_hotkey"></label> <div class="col-sm-10"> <hotkeyinput hk-keys="context.hotkey" hk-pool="data.hotkeys"></hotkeyinput> </div> </div> </form> </div> </div> <div class="modal-footer"> <div> <button class="btn btn-danger" ng-if="!data.isSaving" ng-disabled="!context.currentSelection" ng-click="deleteCollectionItem(context.currentSelection)"> <span class="fas fa-trash"></span> {{\'ui_browse_playlist_modal_delete\' | translate}} </button> </div> <div> <button class="btn btn-primary" ng-disabled="data.isSaving ? data.collectionItem.name.length < 1 : !context.currentSelection" ng-click="ok()" translate="ui_ok"></button> <button class="btn btn-default" ng-click="cancel()" translate="ui_cancel"></button> </div> </div> </div> '),e.put("views/modals/browseexplorecreatequerymodal.html",'<div class="modalContainer browseWallpaperReportModal"> <div class="modal-header"> <h4 class="modal-title" translate="{{data.isEditing ? \'ui_browse_explore_create_query_modal_header_edit\' : \'ui_browse_explore_create_query_modal_header_new\'}}"></h4> </div> <div class="modal-body"> <div class="container-fluid"> <div class="row"> <label class="col-sm-4 control-label" translate="ui_browse_explore_create_query_modal_category"></label> <div class="col-sm-8"> <droplist class="ignoreModalFocus" dp-selected="data.query.category" dp-options="categoryOptions"></droplist> </div> </div> <div class="row" ng-if="data.query.category!=\'collection\'"> <label class="col-sm-4 control-label" translate="ui_browse_explore_create_query_modal_type"></label> <div class="col-sm-8"> <droplist class="ignoreModalFocus" dp-selected="data.query.querytype" dp-options="queryTypeOptions"></droplist> </div> </div> <div class="row" ng-if="data.query.category==\'keyword\'"> <label class="col-sm-4 control-label" translate="ui_browse_explore_create_query_modal_keyword"></label> <div class="col-sm-8"> <input id="queryInputKeyword" type="text" class="form-control ignoreModalFocus" ng-model="data.query.keyword" autofocus> </div> </div> <div class="row" ng-if="data.query.category==\'creator\'"> <label class="col-sm-4 control-label" translate="ui_browse_explore_create_query_modal_user_steam_id"></label> <div class="col-sm-8"> <input type="text" class="form-control ignoreModalFocus" ng-model="data.query.itemid"> </div> </div> <div class="row" ng-if="data.query.category==\'collection\'"> <label class="col-sm-4 control-label" translate="ui_browse_explore_create_query_modal_collection_id"></label> <div class="col-sm-8"> <input type="text" class="form-control ignoreModalFocus" ng-model="data.query.itemid"> </div> </div> </div> </div> <div class="modal-footer"> <div> <button class="btn btn-primary" ng-class="data.okClass" ng-disabled="!validateQuery()" ng-click="ok()" translate="ui_ok"></button> <button class="btn btn-default" ng-click="cancel()" translate="ui_cancel"></button> </div> </div> </div> '),e.put("views/modals/browseplaylistsettingsmodal.html",'<div class="modalContainer browseWallpaperPlaylistSettingsModal"> <div class="modal-header"> <h4 class="modal-title" translate="ui_browse_playlist_modal_settings_header"></h4> </div> <div class="modal-body"> <div class="container-fluid"> <div class="row"> <label for="inputTiming" class="col-sm-7 control-label" translate="ui_browse_playlist_modal_settings_timing_label"></label> <div class="col-sm-5"> <droplist id="inputTiming" dp-options="timingOptions" dp-selected="settings.mode"></droplist> </div> </div> <div ng-if="settings.mode == \'timer\'"> <div class="row"> <label class="col-sm-7 control-label"></label> <div class="col-sm-5"> <div class="row visible-sm visible-md visible-lg"> <div class="col-sm-6" translate="ui_browse_playlist_modal_settings_timing_hours"></div> <div class="col-sm-6" translate="ui_browse_playlist_modal_settings_timing_minutes"></div> </div> <div class="row"> <div class="col-sm-6"> <div class="visible-xs" translate="ui_browse_playlist_modal_settings_timing_hours"></div> <input type="number" class="form-control" ng-model="tempSettings.timerhours" placeholder="00" onclick="this.select()"> </div> <div class="col-sm-6"> <div class="visible-xs" translate="ui_browse_playlist_modal_settings_timing_minutes"></div> <input type="number" class="form-control" ng-model="tempSettings.timerminutes" placeholder="00" onclick="this.select()"> </div> </div> </div> </div> </div> <div ng-if="settings.mode == \'daytime\'"> <div class="row"> <label class="col-sm-7 control-label" translate="ui_browse_playlist_modal_settings_daytime_clock"></label> <div class="col-sm-5"> <droplist dp-options="clockOptions" dp-selected="settings.clock"></droplist> </div> </div> </div> <div class="row" ng-if="settings.mode != \'daytime\'"> <label for="inputOrder" class="col-sm-7 control-label" translate="ui_browse_playlist_modal_settings_order_label"></label> <div class="col-sm-5"> <droplist id="inputOrder" dp-disabled="settings.mode == \'daytime\'" dp-options="orderOptions" dp-selected="settings.order"></droplist> </div> </div> <div class="row" ng-if="settings.mode == \'timer\'"> <label ng-click="toggleVideoSequence()" for="inputVideoSequence" class="col-sm-7 control-label" translate="ui_browse_playlist_modal_settings_video_sequence"></label> <div class="col-sm-5"> <checkbox id="inputVideoSequence" cb-disabled="settings.mode != \'timer\'" cb-checked="settings.videosequence"></checkbox> </div> </div> <div class="row" ng-if="settings.mode == \'timer\'"> <label ng-click="toggleUpdateOnPause()" for="inputUpdateOnPause" class="col-sm-7 control-label" translate="ui_browse_playlist_modal_settings_update_on_pause"></label> <div class="col-sm-5"> <checkbox id="inputUpdateOnPause" cb-disabled="settings.mode != \'timer\'" cb-checked="settings.updateonpause"></checkbox> </div> </div> <div class="row"> <label ng-click="settings.transition=!settings.transition" for="inputTransition" class="col-sm-7 control-label" translate="ui_browse_playlist_modal_settings_transition_enabled"></label> <div class="col-sm-5"> <checkbox id="inputTransition" cb-checked="settings.transition"></checkbox> </div> </div> <div class="row" ng-if="settings.mode == \'timer\'"> <label ng-click="toggleBeginFirst()" for="inputBeginFirst" class="col-sm-7 control-label" translate="ui_browse_playlist_modal_settings_begin_first_wallpaper"></label> <div class="col-sm-5"> <checkbox id="inputBeginFirst" cb-disabled="settings.mode != \'timer\'" cb-checked="settings.beginfirst"></checkbox> </div> </div> \x3c!--             <div class="row">\r\n                <label ng-click="settings.updateonpause=!settings.updateonpause" class="col-sm-5 control-label" translate="ui_browse_playlist_modal_settings_transition_time"></label>\r\n                <div class="col-sm-5">\r\n                    <rzslider rz-slider-model="settings.transition" rz-slider-options="{ceil:1000, floor:0}"></rzslider>\r\n                </div>\r\n                <div style="text-align: right" class="col-sm-2">{{settings.transition}} ms</div>\r\n            </div> --\x3e </div> </div> <div class="modal-footer"> \x3c!--         <div>\r\n            <a class="btn btn-default" ng-click="resetSettings()" translate="ui_browse_playlist_modal_settings_reset"></a>\r\n        </div> --\x3e <div></div> <div> <button class="btn btn-primary" ng-click="ok()" translate="ui_ok"></button> </div> </div> </div> '),e.put("views/modals/browsereportmodal.html",'<div class="modalContainer browseWallpaperReportModal"> <div class="modal-header"> <h4 class="modal-title">{{\'ui_browse_report_modal_header\' | translate}} {{data.title}}</h4> </div> <div class="modal-body"> <div class="container-fluid"> <div class="row"> <label class="col-sm-6 control-label" translate="ui_browse_report_modal_category_label"></label> <div class="col-sm-6"> <droplist dp-options="categories" dp-selected="context.category"></droplist> </div> </div> <div class="row"> <div class="col-sm-12" translate="{{\'ui_browse_report_modal_category_\' + context.category + \'_description\'}}"></div> </div> <div class="row" ng-if="context.category === \'violation\' || context.category === \'rating\'"> <div class="col-sm-12"> <rating-table highlight="context.category === \'rating\' ? context.suggestedrating : \'Ban\'"></rating-table> </div> </div> <div class="row" ng-if="context.category === \'genre\'"> <label class="col-sm-6 control-label" translate="ui_browse_report_modal_genre_current"></label> <div class="col-sm-6"> {{translatedCurrentTags}} </div> </div> <div class="row" ng-if="context.category === \'genre\'"> <label class="col-sm-6 control-label" translate="ui_browse_report_modal_genre_label"></label> <div class="col-sm-6"> <droplist class="editorTagDropDown" dp-options="genres" dp-empty-text="..." dp-selected="context.suggestedgenre"></droplist> </div> </div> <div class="row" ng-if="context.category === \'rating\' || context.category === \'violation\'"> <label class="col-sm-6 control-label" translate="ui_browse_report_modal_rating_current"></label> <div class="col-sm-6"> {{translatedCurrentRatingTags || (\'ui_workshop_tags_rating_everyone\' | translate)}} </div> </div> <div class="row" ng-if="context.category === \'rating\'"> <label class="col-sm-6 control-label" translate="ui_browse_report_modal_rating_label"></label> <div class="col-sm-6"> <droplist class="editorTagDropDown" dp-options="ratings" dp-empty-text="..." dp-selected="context.suggestedrating"></droplist> </div> </div> <div class="row" ng-if="context.category !== \'copyright\'"> <label class="col-sm-12 control-label" translate="ui_browse_report_modal_notes"></label> </div> <div class="row" ng-if="context.category !== \'copyright\'"> <div class="col-sm-12"> <textarea ng-model="context.note" style="resize: none;height: 160px;width:100%"></textarea> </div> </div> <div class="row" ng-if="context.category === \'copyright\'"> <div class="col-xs-12"> <input type="text" style="width:100%;" value="{{\'http://steamcommunity.com/sharedfiles/filedetails/?id=\' + data.workshopid}}"> </div> </div> <div class="row" ng-if="context.category === \'copyright\'"> <div class="col-xs-12"> <a class="btn btn-primary fullWidth" ng-click="openDMCA()" translate="ui_browse_report_modal_copyright_dispute"></a> </div> </div> </div> </div> <div class="modal-footer"> <div></div> <div> <button class="btn btn-danger" ng-disabled="isReportDisabled() || reportInProgress" ng-click="ok()" translate="ui_browse_report_modal_submit"></button> <button class="btn btn-default" ng-click="cancel()" translate="ui_cancel"></button> </div> </div> </div> '),e.put("views/modals/browsesetdefaultsmodal.html",'<div class="modalContainer"> <div class="modal-header"> <h4 class="modal-title" translate="ui_browse_details_properties_apply_to_all_wallpapers_header"></h4> </div> <div class="modal-body"> <div> <div translate="ui_browse_details_properties_apply_to_all_instructions"> </div> <div style="padding: 10px"> <div ng-repeat="option in data.options" style="padding: 5px"> <checkbox cb-checked="option.enabled" cb-title="option.label"></checkbox> <span>({{option.value}})</span> </div> <div style="padding: 5px"> <a class="btn btn-default" translate="ui_browse_details_properties_apply_to_all_restore_defaults" ng-click="resetDefaultValues()"></a> </div> </div> </div> </div> <div class="modal-footer" style="display: flex"> <div style="display: flex;flex-direction: column;align-items: flex-start;"> <radiobutton ng-model="data.mode" rb-value="\'updateall\'" rb-title="\'ui_browse_details_properties_apply_to_all_update_all_and_default\'" style="margin-bottom:10px;"></radiobutton> <radiobutton ng-model="data.mode" rb-value="\'selection\'" rb-title="data.selectionTitle"></radiobutton> </div> <div style="flex: 1 0 auto;display: flex;align-items: flex-end;"> <div style="flex:1 0 auto"></div> <button class="btn btn-primary" ng-click="ok()" translate="ui_ok" ng-disabled="!anyPropertyEnabled()"></button> <button class="btn btn-default" ng-click="cancel()" translate="ui_cancel"></button> </div> </div> </div> '),e.put("views/modals/browsesplitmonitormodal.html",'<div class="modalContainer"> <div class="modal-header"> <h4 class="modal-title" translate="ui_browse_monitors_split_monitor" translate-values="settings"></h4> </div> <div class="modal-body"> <div class="container-fluid"> <div class="row" style="margin-bottom: 10px"> <label class="col-sm-7 control-label" translate="ui_browse_monitors_direction"></label> <div class="col-sm-5"> <droplist dp-options="directionOptions" dp-change="resetPosition()" dp-selected="settings.config.direction"></droplist> </div> </div> <div class="row"> <label class="col-sm-7 control-label" translate="ui_browse_monitors_posititon"></label> <div class="col-sm-5"> <input class="form-control ignoreModalFocus" type="number" min="0" ng-model="settings.config.position"> </div> </div> </div> </div> <div class="modal-footer"> <div> <button class="btn btn-primary" ng-click="ok()" translate="ui_ok"></button> <button class="btn btn-default" ng-click="cancel()" translate="ui_cancel"></button> </div> </div> </div> '),e.put("views/modals/browsewallpapersharepresetmodal.html",'<div class="modalContainer browseWallpaperSharePresetModal"> <div class="modal-header"> <h4 class="modal-title" translate="ui_browse_preset_modal_share_header"></h4> </div> <div class="modal-body"> <div> \x3c!--             <form ng-submit="ok()" class="form-horizontal">\r\n                <div class="form-group" style="margin-bottom:0px">\r\n                    <label for="inputURL" class="col-sm-2 control-label" translate="ui_browse_preset_modal_save_name"></label>\r\n                    <div class="col-sm-10">\r\n                        <input type="text" class="form-control" ng-model="data.name" id="inputURL" autofocus>\r\n                    </div>\r\n                </div>\r\n            </form> --\x3e <textarea id="jsonTextArea" style="resize:none;width:100%;" spellcheck="false" rows="20" ng-model="data.preset"></textarea> <textarea id="jsonTextAreaTmp" class="hiddenTextArea" spellcheck="false"></textarea> <div class="jsonError" ng-if="jsonError.length > 0">{{jsonLine}} {{jsonError}}</div> </div> </div> <div class="modal-footer"> <div> <div class="base64Label"> Base64 </div> <div class="base64Buttons"> <a class="btn btn-default" ng-click="copyPreset()"> <span class="fas fa-copy"></span> {{\'ui_browse_preset_modal_copy\' | translate}} </a> <a class="btn btn-default" ng-click="pastePreset()"> <span class="far fa-clipboard"></span> {{\'ui_browse_preset_modal_paste\' | translate}} </a> </div> </div> <div> <button class="btn btn-primary" ng-disabled="!isJsonValid" ng-click="ok()" translate="ui_ok"></button> <button class="btn btn-default" ng-click="cancel()" translate="ui_cancel"></button> </div> </div> </div> '),e.put("views/modals/browsewallpaperworkshopinfomodal.html",'<div class="modalContainer"> <div class="modal-header"> <h4 class="modal-title" translate="ui_browse_modal_advertise_workshop_header"></h4> </div> <div class="modal-body"> <div class="modalAdvertiseWorkshopBody"> <div translate="ui_browse_modal_advertise_workshop_body"></div> <hr class="fullWidth"> <div translate="ui_browse_modal_advertise_workshop_anime_question"></div> <div class="modalAdvertiseWorkshopFilterConfig"> <a class="btn btn-lg" ng-class="{\'btn-default\':filterConfig.Anime===false||filterConfig.Anime===undefined,\'btn-success\':filterConfig.Anime===true}" translate="ui_browse_modal_advertise_workshop_anime_button_show" ng-click="filterConfig.Anime=true"></a> <a class="btn btn-lg" ng-class="{\'btn-default\':filterConfig.Anime===true||filterConfig.Anime===undefined,\'btn-warning\':filterConfig.Anime===false}" translate="ui_browse_modal_advertise_workshop_anime_button_hide" ng-click="filterConfig.Anime=false"></a> </div> <div translate="ui_browse_modal_advertise_workshop_anime_hint"></div> </div> </div> <div class="modal-footer browseWorkshopAdvertiseFooter"> \x3c!-- \t\t<div class="browseWorkshopAdvertiseFooterTags">\r\n\t\t\t<div style="margin-bottom:5px; text-align: left" translate="ui_browse_modal_advertise_workshop_footer"></div>\r\n\t\t\t<div class="browseWorkshopAdvertiseFooterTagsContainer">\r\n\t\t\t\t<button ng-repeat="genre in genreList" class="btn browseWorkshopAdvertiseFooterTagBtn" ng-class="{\'btn-success\':genres[genre.value],\'btn-default\':!genres[genre.value]}" uib-btn-checkbox ng-model="genres[genre.value]" translate="{{genre.label}}"></button>\r\n\t\t\t</div>\r\n\t\t</div> --\x3e <div class="browseWorkshopAdvertiseFooterOkayButton"> <button class="btn btn-primary" ng-disabled="!isDefaultFilterSelect()" ng-click="ok()" translate="ui_ok"></button> <button class="btn btn-default" ng-if="data.canCancel" ng-click="cancel()" translate="ui_cancel"></button> </div> </div> </div> '),e.put("views/modals/editoranimationeventsmodal.html",'<div class="modalContainer editorAnimationOptionsModal"> <div class="modal-header"> <h4 class="modal-title" translate="ui_editor_animation_events_modal_header"></h4> </div> <div class="modal-body"> <div class="container-fluid"> <div class="row"> <h4 translate="ui_editor_animation_events_modal_events"></h4> </div> <div class="row"> <label class="col-sm-6 control-label" translate="ui_editor_animation_events_modal_name"></label> <label class="col-sm-5 control-label" translate="ui_editor_animation_events_modal_frame"></label> <div class="col-sm-1"></div> </div> <div class="row form-group" ng-repeat="event in events"> <div class="col-sm-6"> <input type="text" class="form-control" ng-model="event.name" placeholder="{{\'ui_editor_animation_events_modal_name\'|translate}}"> </div> <div class="col-sm-5"> <input type="number" class="form-control" ng-model="event.frame" placeholder="{{\'ui_editor_animation_events_modal_frame\'|translate}}"> </div> <div class="col-sm-1"> <button class="btn btn-danger" ng-click="removeEvent(event)"><span class="fas fa-fw fa-times"></span></button> </div> </div> <div class="row form-group"> <div class="col-sm-6"> <input type="text" class="form-control" ng-model="newEvent.name" placeholder="{{\'ui_editor_animation_events_modal_name\'|translate}}" autofocus> </div> <div class="col-sm-5"> <input type="number" class="form-control" ng-model="newEvent.frame" placeholder="{{\'ui_editor_animation_events_modal_frame\'|translate}}"> </div> <div class="col-sm-1"> <button ng-disabled="!newEvent.name" class="btn btn-success" ng-click="addEvent()"><span class="fas fa-fw fa-plus"></span></button> </div> </div> </div> </div> <div class="modal-footer"> <div> </div> <div> <a class="btn btn-primary" ng-click="ok()" translate="ui_ok"></a> \x3c!-- <a class="btn btn-default" ng-click="cancel()" translate="ui_cancel"></a> --\x3e </div> </div> </div> '),e.put("views/modals/editoranimationhelpmodal.html",'<div class="modalContainer editorAnimationOptionsModal"> <div class="modal-header"> <h4 class="modal-title" translate="ui_editor_animation_help_modal_header"></h4> </div> <div class="modal-body"> <div class="container-fluid"> <div class="row form-group"> <h3 translate="ui_editor_animation_help_modal_keyframes"></h3> </div> <div class="row form-group"> <label class="col-sm-4 control-label" translate="ui_editor_animation_help_modal_shift_drag"></label> <div class="col-sm-8" translate="ui_editor_animation_help_modal_lock_point_vertically"></div> </div> <div class="row form-group"> <label class="col-sm-4 control-label" translate="ui_editor_animation_help_modal_shift_ctrl_wheel"></label> <div class="col-sm-8" translate="ui_editor_animation_help_modal_zoom"></div> </div> <div class="row form-group"> <label class="col-sm-4 control-label" translate="ui_editor_animation_help_modal_shift_ctrl_click"></label> <div class="col-sm-8" translate="ui_editor_animation_help_modal_select_points"></div> </div> <div class="row form-group"> <label class="col-sm-4 control-label" translate="ui_editor_animation_help_modal_ctrl_c_v"></label> <div class="col-sm-8" translate="ui_editor_animation_help_modal_copy_paste"></div> </div> <div class="row form-group"> <label class="col-sm-4 control-label" translate="ui_editor_animation_help_modal_del"></label> <div class="col-sm-8" translate="ui_editor_animation_help_modal_delete"></div> </div> <div class="row form-group"> <label class="col-sm-4 control-label" translate="ui_editor_animation_help_modal_k"></label> <div class="col-sm-8" translate="ui_editor_animation_help_modal_keyframe"></div> </div> <div class="row form-group"> <h3 translate="ui_editor_animation_help_modal_playback"></h3> </div> <div class="row form-group"> <label class="col-sm-4 control-label" translate="ui_editor_animation_help_modal_left_right"></label> <div class="col-sm-8" translate="ui_editor_animation_help_modal_jump_frame"></div> </div> <div class="row form-group"> <label class="col-sm-4 control-label" translate="ui_editor_animation_help_modal_space"></label> <div class="col-sm-8" translate="ui_editor_animation_help_modal_play_pause"></div> </div> </div> </div> <div class="modal-footer"> <div> </div> <div> <button class="btn btn-primary" ng-click="ok()" translate="ui_close"></button> </div> </div> </div> '),e.put("views/modals/editoranimationoptionsmodal.html",'<div class="modalContainer editorAnimationOptionsModal"> <div class="modal-header"> <h4 class="modal-title" translate="ui_editor_animation_modal_header"></h4> </div> <div class="modal-body"> <div class="container-fluid"> <div class="row form-group" ng-if="propertyLinkOptions.length > 0"> <label class="col-sm-7 control-label" translate="ui_editor_animation_modal_combine_property_animation"></label> <div class="col-sm-5"> <droplist dp-options="propertyLinkOptions" dp-selected="tempSettings.parent"></droplist> </div> </div> <div ng-if="!tempSettings.parent"> <div class="row form-group"> <label class="col-sm-7 control-label" translate="ui_editor_animation_modal_mode"></label> <div class="col-sm-5"> <droplist dp-options="modeOptions" dp-selected="settings.mode"></droplist> </div> </div> <div class="row form-group"> <label class="col-sm-7 control-label" translate="ui_editor_animation_modal_seconds"></label> <div class="col-sm-5"> <input type="number" class="form-control" ng-model="tempSettings.seconds" placeholder="0" onclick="this.select()"> </div> </div> <div class="row form-group"> <label class="col-sm-7 control-label" translate="ui_editor_animation_modal_frames"></label> <div class="col-sm-5"> <input type="number" class="form-control" ng-model="tempSettings.length" placeholder="0" onclick="this.select()"> </div> </div> <div class="row form-group" ng-if="mode === \'property\'"> <label class="col-sm-7 control-label" translate="ui_editor_animation_modal_name"></label> <div class="col-sm-5"> <input type="text" class="form-control" ng-model="settings.name" onclick="this.select()"> </div> </div> <div class="row form-group" class="row form-group" ng-if="mode === \'property\'"> <label class="col-sm-7 control-label" translate="ui_editor_animation_modal_start_paused"></label> <div class="col-sm-5"> <checkbox cb-checked="settings.startpaused"></checkbox> </div> </div> </div> </div> </div> <div class="modal-footer"> <div> </div> <div> <button class="btn btn-primary" ng-click="ok()" translate="ui_ok"></button> </div> </div> </div> '),e.put("views/modals/editorboneconstraintsmodal.html",'<div class="modalContainer editorBoneConstraintsModal"> <div class="modal-header"> <h4 class="modal-title" translate="ui_editor_bone_constraints_modal_header"></h4> </div> <div class="modal-body"> <div class="container-fluid"> <div class="row form-group"> <label class="col-sm-6 control-label" translate="ui_editor_bone_constraints_spring_simulation"></label> <div class="col-sm-6"> <checkbox cb-checked="settings.se" cb-changed="settings.re=settings.re&&!settings.se"></checkbox> </div> </div> <div ng-if="settings.se"> <div class="row form-group"> <div class="col-sm-1"></div> <label class="col-sm-5 control-label" translate="ui_editor_bone_constraints_physics_rotation"></label> <div class="col-sm-6"> <checkbox cb-checked="settings.r"></checkbox> </div> </div> <div class="row form-group" ng-if="settings.r"> <div class="col-sm-1"></div> <label class="col-sm-5 control-label" translate="ui_editor_bone_constraints_rotational_stiffness"></label> <div class="col-sm-4"> <rzslider rz-slider-model="settings.rs" rz-slider-options="{id:property.key, ceil:500, floor:0, enforceStep:false, precision:1, step:0.1}"></rzslider> </div> <div class="col-sm-2"> <input type="number" class="form-control" ng-model="settings.rs" placeholder="0" onclick="this.select()"> </div> </div> <div class="row form-group" ng-if="settings.r"> <div class="col-sm-1"></div> <label class="col-sm-5 control-label" translate="ui_editor_bone_constraints_rotational_friction"></label> <div class="col-sm-4"> <rzslider rz-slider-model="settings.rf" rz-slider-options="{id:property.key, ceil:50, floor:5, enforceStep:false, precision:1, step:0.1}"></rzslider> </div> <div class="col-sm-2"> <input type="number" class="form-control" ng-model="settings.rf" placeholder="0" onclick="this.select()"> </div> </div> <div class="row form-group" ng-if="settings.r"> <div class="col-sm-1"></div> <label class="col-sm-5 control-label" translate="ui_editor_bone_constraints_rotational_inertia"></label> <div class="col-sm-4"> <rzslider rz-slider-model="settings.ri" rz-slider-options="{id:property.key, ceil:99, floor:5, enforceStep:false, precision:1, step:0.1}"></rzslider> </div> <div class="col-sm-2"> <input type="number" class="form-control" ng-model="settings.ri" placeholder="0" onclick="this.select()"> </div> </div> <div class="row form-group"> <div class="col-sm-1"></div> <label class="col-sm-5 control-label" translate="ui_editor_bone_constraints_physics_translation"></label> <div class="col-sm-6"> <checkbox cb-checked="settings.t"></checkbox> </div> </div> <div class="row form-group" ng-if="settings.t"> <div class="col-sm-1"></div> <label class="col-sm-5 control-label" translate="ui_editor_bone_constraints_translational_stiffness"></label> <div class="col-sm-4"> <rzslider rz-slider-model="settings.ts" rz-slider-options="{id:property.key, ceil:500, floor:0, enforceStep:false, precision:1, step:0.1}"></rzslider> </div> <div class="col-sm-2"> <input type="number" class="form-control" ng-model="settings.ts" placeholder="0" onclick="this.select()"> </div> </div> <div class="row form-group" ng-if="settings.t"> <div class="col-sm-1"></div> <label class="col-sm-5 control-label" translate="ui_editor_bone_constraints_translational_friction"></label> <div class="col-sm-4"> <rzslider rz-slider-model="settings.tf" rz-slider-options="{id:property.key, ceil:50, floor:5, enforceStep:false, precision:1, step:0.1}"></rzslider> </div> <div class="col-sm-2"> <input type="number" class="form-control" ng-model="settings.tf" placeholder="0" onclick="this.select()"> </div> </div> <div class="row form-group" ng-if="settings.t"> <div class="col-sm-1"></div> <label class="col-sm-5 control-label" translate="ui_editor_bone_constraints_translational_inertia"></label> <div class="col-sm-4"> <rzslider rz-slider-model="settings.ti" rz-slider-options="{id:property.key, ceil:99, floor:5, enforceStep:false, precision:1, step:0.1}"></rzslider> </div> <div class="col-sm-2"> <input type="number" class="form-control" ng-model="settings.ti" placeholder="0" onclick="this.select()"> </div> </div> <div class="row form-group" ng-if="settings.t"> <div class="col-sm-1"></div> <label class="col-sm-5 control-label" translate="ui_editor_bone_constraints_max_distance"></label> <div class="col-sm-4"> <rzslider rz-slider-model="settings.tm" rz-slider-options="{id:property.key, ceil:500, floor:0, enforceStep:false, precision:1, step:0.1}"></rzslider> </div> <div class="col-sm-2"> <input type="number" class="form-control" ng-model="settings.tm" placeholder="0" onclick="this.select()"> </div> </div> </div> <div class="row form-group"> <label class="col-sm-6 control-label" translate="ui_editor_bone_constraints_rigid_simulation"></label> <div class="col-sm-6"> <checkbox cb-checked="settings.re" cb-changed="settings.se=settings.se&&!settings.re"></checkbox> </div> </div> <div ng-if="settings.re"> <div class="row form-group"> <div class="col-sm-1"></div> <label class="col-sm-5 control-label" translate="ui_editor_bone_constraints_physics_rotation"></label> <div class="col-sm-6"> <checkbox cb-checked="settings.r"></checkbox> </div> </div> <div class="row form-group" ng-if="settings.r"> <div class="col-sm-1"></div> <label class="col-sm-5 control-label" translate="ui_editor_bone_constraints_rotational_friction"></label> <div class="col-sm-4"> <rzslider rz-slider-model="settings.rf" rz-slider-options="{id:property.key, ceil:50, floor:5, enforceStep:false, precision:1, step:0.1}"></rzslider> </div> <div class="col-sm-2"> <input type="number" class="form-control" ng-model="settings.rf" placeholder="0" onclick="this.select()"> </div> </div> <div class="row form-group" ng-if="settings.r"> <div class="col-sm-1"></div> <label class="col-sm-5 control-label" translate="ui_editor_bone_constraints_rotational_inertia"></label> <div class="col-sm-4"> <rzslider rz-slider-model="settings.ri" rz-slider-options="{id:property.key, ceil:99, floor:5, enforceStep:false, precision:1, step:0.1}"></rzslider> </div> <div class="col-sm-2"> <input type="number" class="form-control" ng-model="settings.ri" placeholder="0" onclick="this.select()"> </div> </div> <div class="row form-group"> <div class="col-sm-1"></div> <label class="col-sm-5 control-label" translate="ui_editor_bone_constraints_physics_translation"></label> <div class="col-sm-6"> <checkbox cb-checked="settings.t"></checkbox> </div> </div> <div class="row form-group" ng-if="settings.t"> <div class="col-sm-1"></div> <label class="col-sm-5 control-label" translate="ui_editor_bone_constraints_translational_friction"></label> <div class="col-sm-4"> <rzslider rz-slider-model="settings.tf" rz-slider-options="{id:property.key, ceil:50, floor:5, enforceStep:false, precision:1, step:0.1}"></rzslider> </div> <div class="col-sm-2"> <input type="number" class="form-control" ng-model="settings.tf" placeholder="0" onclick="this.select()"> </div> </div> <div class="row form-group" ng-if="settings.t"> <div class="col-sm-1"></div> <label class="col-sm-5 control-label" translate="ui_editor_bone_constraints_translational_inertia"></label> <div class="col-sm-4"> <rzslider rz-slider-model="settings.ti" rz-slider-options="{id:property.key, ceil:99, floor:5, enforceStep:false, precision:1, step:0.1}"></rzslider> </div> <div class="col-sm-2"> <input type="number" class="form-control" ng-model="settings.ti" placeholder="0" onclick="this.select()"> </div> </div> <div class="row form-group" ng-if="settings.t"> <div class="col-sm-1"></div> <label class="col-sm-5 control-label" translate="ui_editor_bone_constraints_max_distance"></label> <div class="col-sm-4"> <rzslider rz-slider-model="settings.tm" rz-slider-options="{id:property.key, ceil:500, floor:0, enforceStep:false, precision:1, step:0.1}"></rzslider> </div> <div class="col-sm-2"> <input type="number" class="form-control" ng-model="settings.tm" placeholder="0" onclick="this.select()"> </div> </div> </div> <div ng-if="settings.se||settings.re"> <div class="row form-group"> <label class="col-sm-6 control-label" translate="ui_editor_bone_constraints_gravity_enabled"></label> <div class="col-sm-6"> <checkbox cb-checked="settings.ge"></checkbox> </div> </div> <div ng-if="settings.ge"> <div class="row form-group"> <div class="col-sm-1"></div> <label class="col-sm-5 control-label" translate="ui_editor_bone_constraints_tip_mass"></label> <div class="col-sm-4"> <rzslider rz-slider-model="settings.m" rz-slider-options="{id:property.key, ceil:100, floor:1, enforceStep:false, precision:1, step:0.1}"></rzslider> </div> <div class="col-sm-2"> <input type="number" class="form-control" ng-model="settings.m" placeholder="0" onclick="this.select()"> </div> </div> <div class="row form-group"> <div class="col-sm-1"></div> <label class="col-sm-5 control-label" translate="ui_editor_bone_constraints_gravity_direction"></label> <div class="col-sm-4"> <knob ng-model="temp.gd" k-offset="0.5"></knob> </div> <div class="col-sm-2"> <input type="number" class="form-control" ng-model="temp.gd" placeholder="0" onclick="this.select()" degree-converter> </div> </div> </div> <div class="row form-group"> <label class="col-sm-6 control-label" translate="ui_editor_bone_constraints_tip_size"></label> <div class="col-sm-4"> <rzslider rz-slider-model="settings.s" rz-slider-options="{id:property.key, ceil:1000, floor:0, enforceStep:false}"></rzslider> </div> <div class="col-sm-2"> <input type="number" class="form-control" ng-model="settings.s" placeholder="0" onclick="this.select()"> </div> </div> <div class="row form-group"> <label class="col-sm-6 control-label" translate="ui_editor_bone_constraints_tip_forward_angle"></label> <div class="col-sm-4"> <knob ng-model="temp.a"></knob> </div> <div class="col-sm-2"> <input type="number" class="form-control" ng-model="temp.a" placeholder="0" onclick="this.select()" degree-converter> </div> </div> <div class="row form-group"> <label class="col-sm-6 control-label" translate="ui_editor_bone_constraints_limit_rotation"></label> <div class="col-sm-6"> <checkbox cb-checked="settings.la"></checkbox> </div> </div> <div class="row form-group" ng-if="settings.la"> <div class="col-sm-1"></div> <label class="col-sm-5 control-label" translate="ui_editor_bone_constraints_min_angle"></label> <div class="col-sm-4"> <rzslider rz-slider-model="temp.lamin" rz-slider-options="{id:property.key, ceil:180, floor:-180, enforceStep:false}"></rzslider> </div> <div class="col-sm-2"> <input type="number" class="form-control" ng-model="temp.lamin" placeholder="0" onclick="this.select()"> </div> </div> <div class="row form-group" ng-if="settings.la"> <div class="col-sm-1"></div> <label class="col-sm-5 control-label" translate="ui_editor_bone_constraints_max_angle"></label> <div class="col-sm-4"> <rzslider rz-slider-model="temp.lamax" rz-slider-options="{id:property.key, ceil:180, floor:-180, enforceStep:false}"></rzslider> </div> <div class="col-sm-2"> <input type="number" class="form-control" ng-model="temp.lamax" placeholder="0" onclick="this.select()"> </div> </div> <div class="row form-group"> <label class="col-sm-6 control-label" translate="ui_editor_bone_constraints_limit_torque"></label> <div class="col-sm-6"> <checkbox cb-checked="settings.lt"></checkbox> </div> </div> <div class="row form-group" ng-if="settings.lt"> <div class="col-sm-1"></div> <label class="col-sm-5 control-label" translate="ui_editor_bone_constraints_max_torque"></label> <div class="col-sm-4"> <rzslider rz-slider-model="settings.ltmax" rz-slider-options="{id:property.key, ceil:360, floor:0, enforceStep:false}"></rzslider> </div> <div class="col-sm-2"> <input type="number" class="form-control" ng-model="settings.ltmax" placeholder="0" onclick="this.select()"> </div> </div> </div> </div> </div> <div class="modal-footer"> <div> <button class="btn btn-danger" ng-click="resetSettings()" translate="ui_editor_bone_constraints_reset"></button> <button class="btn btn-default" ng-click="copySettings()"> <span class="fas fa-copy"></span> {{\'ui_browse_preset_modal_copy\' | translate}} </button> <button class="btn btn-default" ng-click="pasteSettings()" ng-disabled="!canPaste()"> <span class="far fa-clipboard"></span> {{\'ui_browse_preset_modal_paste\' | translate}} </button> </div> <div> <button class="btn btn-primary" ng-click="ok()" translate="ui_ok"></button> <button class="btn btn-default" ng-click="cancel()" translate="ui_cancel"></button> </div> </div> </div> '),e.put("views/modals/editoreffectlistmodal.html",'<div class="modalContainer" modalmove> <div> <div class="modal-header"> <h4 class="modal-title">{{title | translate}}</h4> </div> <div class="modal-body editorEffectModalBody"> <div style="height: 100%;"> <div class="editorEffectModalTreeRoot"> <div ng-repeat="group in groupList" ng-show="group.visible"> <a ng-click="group.open = !group.open" style="display: block;"> <span style="width:20px" class="fa" ng-class="{\'fa-chevron-right\': !group.open, \'fa-chevron-down\': group.open}"></span> {{group.name | translate}} </a> <a ng-if="group.open" class="editorEffectModalItem activeBackHighlight" ng-repeat="item in group.items" ng-click="selected.item = item" ng-class="{\'active\':selected.item == item}" ng-dblclick="selected.item = item;ok()" translate="{{item.name}}"></a> <div ng-repeat="nestedgroup in group.nestedGroupList" ng-if="group.open"> <a ng-click="nestedgroup.open = !nestedgroup.open" style="display:block;padding-left:35px;"> <span style="width:20px" class="fa" ng-class="{\'fa-chevron-right\': !nestedgroup.open, \'fa-chevron-down\': nestedgroup.open}"></span> {{nestedgroup.name}} </a> <a class="editorEffectModalItem editorEffectModalItemNested activeBackHighlight" ng-if="nestedgroup.open" ng-repeat="item in nestedgroup.items" ng-click="selected.item = item" ng-class="{\'active\':selected.item == item}" ng-dblclick="selected.item = item;ok()" translate="{{item.name}}"></a> </div> </div> </div> <div class="editorEffectModalSelectionContainer"> <h4 translate="{{selected.item.name}}"></h4> <div style="display:flex;flex-direction:column;height:100%;"> <div class="editorEffectModalTopRow"> <div> <div class="editorEffectModalPreviewContainer" ng-show="selected.item.preview || selected.item.variants[selected.item.options.droplistSelected].preview"> <preview p-options="{tag:\'effect\', memory:\'WallpaperEngineEffectPreviewMem\', ctrl:\'previewEffectCtrl\', defaultColor:\'0\'}"></preview> </div> <div class="editorEffectModalPreviewContainer" ng-show="selected.item.previewimg || selected.item.variants[selected.item.options.droplistSelected].previewimg"> <img ng-src="{{selected.item.previewimg || selected.item.variants[selected.item.options.droplistSelected].previewimg}}"> </div> </div> <div class="editorEffectModalTopRowRight" ng-if="selected.item.workshopid"> <div> \x3c!-- {{selected.item.workshopid}} --\x3e <span class="editorEffectModalTopRowLabel" translate="ui_browse_details_rating"></span> <workshop-rating wr-item="selected.item" set-user-vote="workshopController.setUserVote" set-favorited="workshopController.setFavorited"></workshop-rating> </div> <div ng-if="selected.item.authorsteamid"> <span class="editorEffectModalTopRowLabel" translate="ui_browse_details_author"></span> <workshop-author wa-item="selected.item" wa-infos="workshopController.steamUserInfos" wa-open-user-page="openSteamUserPage"></workshop-author> </div> <div ng-if="selected.item.assettypeslabel"> <span class="editorEffectModalTopRowLabel" translate="ui_browse_details_type"></span> <span>{{selected.item.assettypeslabel}}</span> </div> <div ng-if="selected.item.filesizelabel"> <span class="editorEffectModalTopRowLabel" translate="ui_browse_details_filesize"></span> <span>{{selected.item.filesizelabel}}</span> </div> <div class="detailButtons" ng-if="selected.item.workshopid"> <div class="editorEffectModalWorkshopControls"> <a ng-if="selected.item.status !== \'downloadable\'" ng-click="unsubscribeWorkshopItem(selected.item)" class="btn btn-danger"> <span class="fas fa-times" aria-hidden="true"></span> {{\'ui_browse_details_btn_unsubscribe\' | translate}} </a> <a ng-click="openSteamWorkshopPage(selected.item)" class="btn btn-default" tooltip="ui_browse_details_btn_workshop" t-align-right="true"> <span ng-class="providerIcon" aria-hidden="true"></span> {{\'ui_browse_details_btn_comment\' | translate}} </a> </div> </div> </div> </div> <div ng-if="selected.item.options.droplistOptions" class="selectionWithMargin"> <droplist class="fullWidth editorEffectModalDropDownLimit" dp-options="selected.item.options.droplistOptions" dp-selected="selected.item.options.droplistSelected"></droplist> </div> <pre translate="{{selected.item.description}}" class="selectionWithMargin resetPre"></pre> <div ng-if="selected.item.options.nameVisible" class="selectionWithMargin"> <h4 translate="ui_editor_project_settings_modal_name"></h4> <div class="fullWidth"> <input type="text" class="form-control" ng-model="selected.item.options.name" placeholder="Name"> </div> </div> <div ng-if="selected.item.options.resolution" class="selectionWithMargin"> <h4 translate="ui_editor_project_settings_modal_resolution"></h4> <div class="fullWidth text-left editorResolutionParent"> <input type="number" class="form-control" ng-model="selected.item.options.resolution.width" placeholder="Width"> <div>X</div> <input type="number" class="form-control" ng-model="selected.item.options.resolution.height" placeholder="Height"> </div> </div> <div ng-if="selected.item.options.color" class="selectionWithMargin"> <h4 translate="ui_editor_project_settings_modal_clear_color"></h4> <div class="fullWidth text-left editorResolutionParent"> <spectrum-colorpicker options="colorPickerOptions" ng-model="selected.item.options.color" vec-color-converter on-show-options="{update:false}"></spectrum-colorpicker> </div> </div> <div ng-if="fnDelete && selected.item.editable"> <div class="fullWidth"> <button class="btn btn-danger fullWidth" translate="Remove" ng-click="deleteItem(selected.item)"></button> </div> </div> </div> </div> </div> </div> <div class="modal-footer modal-footer-dual-buttons"> <div class="left"> <button class="btn btn-success" ng-click="browseWorkshop()" translate="ui_editor_effect_list_modal_browse_workshop"></button> <button ng-if="showAssetCreation && fnCreateNew" class="btn btn-default" ng-click="createNew()"> {{\'ui_editor_effect_list_modal_create_new\'|translate}} </button> <button ng-if="showAssetCreation && fnCreateNew" class="btn btn-default" ng-click="createNew(selected.item)" ng-disabled="!selected.item"> {{\'ui_editor_effect_list_modal_create_duplicate\'|translate}} </button> </div> <div class="right"> <button class="btn btn-primary" ng-click="ok()" translate="ui_ok" ng-disabled="!selected.item"></button> <button class="btn btn-default" ng-click="close()" translate="ui_cancel"></button> </div> </div> </div> </div> '),e.put("views/modals/editorimportmodelmodal.html",'<div class="modalContainer" modalmove> <div> <div class="modal-header"> <h4 class="modal-title">Import {{objInfo.config.title}} {{objInfo.name}}</h4> </div> <div class="modal-body editorImportModelModal"> <div ng-if="objInfo.instantImport"> <div translate="ui_editor_importer_please_wait"></div> </div> <div class="editorImportModelModalMaterialList" ng-if="!objInfo.instantImport"> <div> <div> <b translate="ui_editor_importer_material_name"></b> </div> <div> <b translate="ui_editor_importer_settings"></b> </div> </div> <div ng-repeat="material in objInfo.materials"> <div style="word-break: break-all;padding-right:10px;"> <div ng-if="!objInfo.config.importAsImageSequence">{{material.name}}</div> <div ng-if="objInfo.config.importAsImageSequence"> <div ng-repeat="name in objInfo.config.imageListLabels|limitTo:5">{{name}}</div> <div ng-if="objInfo.config.imageListLabels.length > 5">...</div> </div> <img style="width: 164px; height: 164px;object-fit:contain;margin-top:10px;" ng-src="{{material.previewUrl}}"> <crop-overlay co-config="objInfo.config" co-material="material.config"></crop-overlay> </div> <div class="editorImportModelModalMaterialListProperties"> \x3c!-- <div style="font-style: italic;">Shader: {{material.shaderpreset.value}}</div> --\x3e <div class="paddedElement formatSelection"> <a class="importInfoBtn" ng-click="openTextureFormatFAQ()"><span class="fas fa-question"></span></a> <droplist class="fullWidth" dp-options="material.formats" dp-selected="material.config.format"></droplist> </div> <div class="paddedElement"> <checkbox cb-checked="material.config.nointerpolation" cb-title="\'ui_editor_importer_pixel_art_optimization\'"></checkbox> </div> <div class="paddedElement"> <checkbox cb-checked="material.config.nomip" cb-title="\'ui_editor_properties_no_mip_maps\'"></checkbox> </div> \x3c!--                         <div class="paddedElement">\r\n                            <checkbox cb-checked="material.config.clampuvs" cb-title="\'ui_editor_properties_clamp_uvs\'"></checkbox>\r\n                        </div> --\x3e <div class="paddedElement" ng-if="objInfo.isImage && !objInfo.config.importAsImageSequence"> <checkbox cb-checked="material.config.spritesheet" cb-title="\'ui_editor_properties_sprite_sheet\'"></checkbox> <div ng-if="material.config.spritesheet" class="paddedElement"> <div ng-repeat="sequence in material.config.spritesheetsequences" class="editorImportModelModalSpritesheetSequence"> <div> <span translate="ui_editor_properties_width"></span> <span translate="ui_editor_properties_height"></span> <span translate="ui_editor_properties_frames"></span> <span translate="ui_editor_properties_duration"></span> </div> <div> <span><input onclick="this.select()" type="number" ng-model="sequence.width"></span> <span><input onclick="this.select()" type="number" ng-model="sequence.height"></span> <span><input onclick="this.select()" type="number" ng-model="sequence.frames"></span> <span><input onclick="this.select()" type="number" ng-model="sequence.duration"></span> </div> </div> </div> </div> <div class="paddedElement" ng-show="objInfo.config.importAsImageSequence && !material.config.spritesheet"> <span translate="ui_editor_properties_frame_duration"></span> <span><input type="number" ng-model="objInfo.config.imageListDuration"></span> </div> <div class="paddedElement" ng-if="objInfo.config.canCropTransparency && !material.config.spritesheet"> <checkbox cb-checked="objInfo.config.croptransparent" cb-title="\'ui_editor_properties_crop_transparent_area\'"></checkbox> <div ng-if="objInfo.config.croptransparent" class="paddedElement editorImportModelModalPadding"> <span translate="ui_editor_properties_padding"></span> <input onclick="this.select()" type="number" ng-model="objInfo.config.croppadding"> </div> <div ng-if="objInfo.config.croptransparent"> <div class="paddedElement" translate="ui_editor_importer_crop_transparency_help"></div> <div class="paddedElement dangerText" ng-if="objInfo.config.showCropTransparencyWarning || objInfo.config.croppaddingold && objInfo.config.croppaddingold != objInfo.config.croppadding" translate="ui_editor_importer_crop_transparency_warning"></div> </div> </div> </div> </div> </div> </div> <div class="modal-footer" style="display:flex;"> <div ng-if="objInfo.isImage && !objInfo.instantImport"> <checkbox cb-checked="objInfo.shouldAdjustProjection" cb-title="\'ui_editor_import_adjust_projection_center\'"></checkbox> </div> \x3c!--  --\x3e \x3c!-- renderableCount --\x3e <div style="flex-grow:1;text-align:right"> <button class="btn btn-primary" ng-disabled="waitingForResponse" ng-click="ok()">{{okButtonLabel}}</button> <button class="btn btn-default" ng-disabled="waitingForResponse" ng-click="close()">Close</button> </div> </div> </div> <div class="editorImportModelCompileOverlay ng-hide" ng-show="compileCtrl.active || compileCtrl.success"> <div class="modal-header"> <h4 class="modal-title">{{\'ui_editor_importer_compiling_assets_for\' | translate}} {{objInfo.name}}</h4> </div> <div class="modal-body"> <compiler-progress compile-ctrl="compileCtrl"></compiler-progress> </div> </div> </div> '),e.put("views/modals/editormaterialsmodal.html",'<div class="modalContainer editorMaterialBrowser"> <div class="modal-header"> <h4 class="modal-title" translate="ui_editor_select_texture"></h4> </div> <div class="modal-body"> <div> <input id="searchTextureFilter" type="text" class="form-control" ng-model="textureFilter" placeholder="{{\'ui_browse_search_placeholder\' | translate}}" ng-model-options="{debounce: 250}" autofocus> </div> <div class="editorMaterialBrowserList"> <div class="editorMaterialBrowserListItem" ng-repeat="texture in visibleMaterials" tooltip="{{texture.local}}" ng-click="selected.item=texture" ng-dblclick="selected.item=texture;ok()" ng-class="{active:selected.item===texture}"> <img class="editorMaterialBrowserImg" ng-src="{{texturePreviews[texture.local]}}"> <div>{{texture.file}}</div> </div> </div> </div> <div class="modal-footer"> <div> <button class="btn btn-primary" ng-click="ok()" translate="ui_ok" ng-disabled="!selected.item"></button> <button class="btn btn-default" ng-click="cancel()" translate="ui_cancel"></button> </div> </div> </div> '),e.put("views/modals/editoropenwallpapermodal.html",'<div class="modalContainer editorOpenWallpaperRoot"> <div class="modal-header"> <h4 class="modal-title" translate="ui_editor_open_modal_header"></h4> </div> <div class="modal-body"> <div> <div class="form-group has-feedback"> <div ng-class="{\'input-group\':filter.text}"> <input id="WallpaperSearchFilter" type="text" class="form-control" placeholder="{{\'ui_browse_search_placeholder\' | translate}}" ng-model="filter.text" ng-model-options="{debounce:100}" maxlength="40" autofocus> <span class="glyphicon glyphicon-search form-control-feedback" aria-hidden="true"></span> <div class="input-group-btn"> <button ng-if="filter.text" class="btn btn-danger" ng-click="filter.text=\'\'"> <i class="glyphicon glyphicon-remove"></i> </button> </div> </div> </div> </div> <div class="editorOpenWallpaperGallery"> <wallpaper-thumbnail class="wallpaperBrowseInner" wt-wallpapers="wallpapers" wt-selection="currentSelection" wt-mousecallback="callbackWallpaperAllMouse(btn, context, $event)"></wallpaper-thumbnail> </div> </div> <div class="modal-footer"> <div> <a class="btn btn-danger" ng-disabled="!currentSelection" ng-click="deleteProject(currentSelection)"> <span class="fas fa-trash"></span> {{\'ui_editor_open_modal_delete\' | translate}} </a> </div> <div> <a class="btn btn-primary" ng-disabled="!currentSelection" ng-click="ok()" translate="ui_ok"></a> <a class="btn btn-default" ng-click="cancel()" translate="ui_cancel"></a> </div> </div> </div> '),e.put("views/modals/editorparticleeditormodal.html",'<div class="modalContainer"> <div class="modal-header"> <h4 class="modal-title" translate="ui_editor_particle_editor"></h4> </div> <div class="modal-body editorParticleEditorBody"> <div class="editorParticleEditorBodyHeader"> <span translate="ui_editor_particle_selected"></span> <span class="particleList"> <droplist dp-options="data.existingParticles" dp-selected="data.particle"></droplist> </span> <button class="btn btn-default" ng-click="newParticle()"><span class="far fa-file"></span></button> <button class="btn btn-default" ng-disabled="!data.particle" ng-click="duplicateParticle(data.particle)"><span class="fas fa-copy"></span></button> <button class="btn btn-danger" ng-disabled="!data.particle" ng-click="deleteParticle(data.particle)"><span class="fas fa-trash"></span></button> </div> <div class="editorParticleEditorBodyControls"> <div class="editorParticleElements editorParticleColumnBorder"> <div ng-repeat="elementGroup in elementGroups"> <div class="editorParticleElementGroup"> <a ng-click="elementGroup.open = !elementGroup.open" class="groupHeader"> <span style="width:20px" class="fas" ng-class="{\'fa-chevron-right\': !elementGroup.open, \'fa-chevron-down\': elementGroup.open}"></span> {{elementGroup.name | translate}} </a> <a ng-if="elementGroup.canadd" class="btn btn-sm btn-success" ng-click="addElement(elementGroup, elementGroup.tag)"> <span class="fas fa-plus"></span> </a> </div> <div ng-if="elementGroup.open && !elementGroup.canadd"> <a class="editorEffectModalItem activeBackHighlight" ng-repeat="item in elementGroup.items" ng-click="selected.item = item" ng-class="{\'active\':selected.item == item}"> {{item.name | translate}} </a> </div> <div ng-if="elementGroup.open && elementGroup.canadd && elementGroup.items.length > 0"> <div class="editorParticleElementGroupTreeView"> <tree-view class="treeViewRoot" tv-drag-drop-tag="{{elementGroup.tag}}" tv-drag-drop-enabled="true" tv-data="elementGroup.items" tv-mode="\'scene\'" tv-selected-item="selected" tv-remove-clicked="onElementRemoved(elementGroup.items, item, elementGroup.tag)" tv-element-dragged="onElementDragged(from, to, elementGroup.tag)"></tree-view> </div> </div> </div> </div> <div class="editorParticleProperties editorParticleColumnBorder"> <property-list p-list="selected.item.properties" p-ctrl="selected.item.viewport ? viewportControl : propertyControl" p-owner="selected.item" p-modal-depth="1"></property-list> </div> <div class="editorParticlePreview"> <div class="editorSceneStatsOverlay" ng-if="particleeditorsettings.showstats"> <div><span translate="ui_editor_stats_particle_count"></span><span>{{particleStats.count + \' / \' + particleStats.maxcount}}</span></div> </div> <preview p-options="{tag:\'particle\', memory:\'WallpaperEngineParticlePreviewMem\', ctrl:\'previewParticleCtrl\', interactive:true}"></preview> </div> </div> </div> <div class="modal-footer"> <div> <a class="btn btn-primary" ng-click="ok()" translate="ui_select"></a> <a class="btn btn-default" ng-click="cancel()" translate="ui_close"></a> </div> </div> </div> '),e.put("views/modals/editorprojectsettingsmodal.html",'<div class="modalContainer" modalmove> <div class="modal-header"> <h4 class="modal-title" translate="ui_editor_project_settings_modal_header"></h4> </div> <div class="modal-body editorProjectSettingsProperties"> <div class="row"> <div class="col-xs-12"> <h4 translate="ui_editor_project_settings_modal_header_general"></h4> </div> </div> <div class="row"> <div class="col-xs-11 col-xs-offset-1"> <div class="row"> <div class="col-xs-6"> <label for="inputProjectName" class="control-label" translate="ui_editor_project_settings_modal_title"></label> </div> <div class="col-xs-6 text-left"> <input type="text" class="form-control" ng-model="project.data.title" id="inputProjectName" placeholder="Project name"> </div> </div> <div class="row"> <div class="col-xs-6"> <label class="control-label" translate="ui_editor_project_settings_modal_scheme_color"></label> </div> <div class="col-xs-6 text-left"> <spectrum-colorpicker options="colorPickerOptions" ng-model="project.data.general.properties.schemecolor.value" vec-color-converter on-show-options="{update:false}"></spectrum-colorpicker> </div> </div> </div> </div> <div class="editorProjectSettingsProperties" ng-if="project.data.type===\'scene\'"> <div class="row"> <div class="col-xs-12"> <h4 translate="ui_editor_project_settings_modal_scene"></h4> </div> </div> <div class="row"> <div class="col-xs-11 col-xs-offset-1"> <div class="row" ng-if="project.scenegeneraldata.orthogonalprojection"> <div class="col-xs-6"> <label class="control-label" translate="ui_editor_project_settings_modal_resolution"></label> </div> <div class="col-xs-6 text-left editorResolutionParent"> <input type="number" class="form-control" ng-model="project.scenegeneraldata.orthogonalprojection.width" placeholder="Width"> <div>X</div> <input type="number" class="form-control" ng-model="project.scenegeneraldata.orthogonalprojection.height" placeholder="Height"> </div> </div> \x3c!--                     <div class="row">\r\n                        <div class="col-xs-6">\r\n                            <label class="control-label" translate="ui_editor_project_settings_modal_ambient_color"></label>\r\n                        </div>\r\n                        <div class="col-xs-6 text-left">\r\n                            <spectrum-colorpicker options="colorPickerOptions" ng-model="project.scenegeneraldata.ambientcolor" vec-color-converter on-show-options="{update:false}"></spectrum-colorpicker>\r\n                        </div>\r\n                    </div>\r\n                    <div class="row">\r\n                        <div class="col-xs-6">\r\n                            <label class="control-label" translate="ui_editor_project_settings_modal_skylight_color"></label>\r\n                        </div>\r\n                        <div class="col-xs-6 text-left">\r\n                            <spectrum-colorpicker options="colorPickerOptions" ng-model="project.scenegeneraldata.skylightcolor" vec-color-converter on-show-options="{update:false}"></spectrum-colorpicker>\r\n                        </div>\r\n                    </div> --\x3e </div> </div> </div> <div class="editorProjectSettingsProperties" ng-if="project.data.type===\'scene\' || project.data.type===\'web\'"> <div class="row"> <div class="col-xs-12"> <h4 translate="ui_editor_project_settings_modal_user_properties"></h4> </div> </div> <div class="row"> <div class="col-xs-11 col-xs-offset-1"> <user-properties up-properties="project.data.general.properties" up-project-data="project.data"></user-properties> </div> </div> </div> </div> <div class="modal-footer"> <div> <a class="btn btn-primary" ng-click="close()" translate="ui_ok"></a> </div> </div> </div> '),e.put("views/modals/editorratingmodal.html",'<div class="modalContainer editorRatingModal"> <div class="modal-header"> <h4 class="modal-title" translate="ui_editor_workshop_modal_rating_header"></h4> </div> <div class="modal-body"> <div class="container-fluid"> <div class="row"> <div class="col-xs-12"> <div translate="ui_editor_workshop_modal_rating_body"></div> </div> </div> <div class="row"> <div class="col-xs-6" translate="ui_editor_workshop_modal_rating_current"> </div> <div class="col-xs-6" translate="{{data.contentrating ? \'ui_workshop_tags_rating_\' + data.contentrating.toLowerCase() : \'ui_workshop_workshop_tags_rating_not_set\'}}"> </div> </div> <div class="row"> <div class="col-xs-12"> <rating-table highlight="highlight.contentrating"></rating-table> </div> </div> </div> </div> <div class="modal-footer"> <div> \x3c!--             <button class="btn btn-danger" ng-if="!data.isSaving" ng-disabled="!context.currentSelection" ng-click="deletePlaylist(context.currentSelection)">\r\n                <span class="fas fa-trash"></span> {{\'ui_browse_playlist_modal_open_delete\' | translate}}\r\n            </button> --\x3e <button ng-click="ok(\'Everyone\')" ng-mouseenter="highlight.contentrating = \'Everyone\'" ng-mouseleave="highlight.contentrating = \'\'" class="btn btn-default ratingButtonEveryone" translate="ui_workshop_tags_rating_everyone"></button> <button ng-click="ok(\'Questionable\')" ng-mouseenter="highlight.contentrating = \'Questionable\'" ng-mouseleave="highlight.contentrating = \'\'" class="btn btn-default ratingButtonQuestionable" translate="ui_workshop_tags_rating_questionable"></button> <button ng-click="ok(\'Mature\')" ng-mouseenter="highlight.contentrating = \'Mature\'" ng-mouseleave="highlight.contentrating = \'\'" class="btn btn-default ratingButtonMature" translate="ui_workshop_tags_rating_mature"></button> </div> <div> \x3c!-- <button class="btn btn-primary" ng-click="ok()" translate="ui_ok"></button> --\x3e <button class="btn btn-default" ng-click="cancel()" translate="ui_cancel"></button> </div> </div> </div> '),e.put("views/modals/editorselectassetsmodal.html",'<div class="modalContainer" modalmove> <div class="modal-header"> <h4 class="modal-title" translate="ui_editor_publish_assets_modal_header"></h4> </div> <div class="modal-body editorProjectSettingsProperties"> <uib-alert ng-click="fnOpenWallpaperPublish()" style="cursor:pointer;" class="alert-warning editorPublishAssetsModalSuperObvious"><div translate="ui_editor_publish_assets_modal_header_alert"></div></uib-alert> <div class="editorPublishAssetsModalDescription" translate="ui_editor_publish_assets_modal_select_asset_type"></div> <div> <droplist class="fullWidth" dp-options="assetTypes" dp-selected="selected.type"></droplist> </div> <div ng-if="selected.type === \'layers\'"> <div ng-if="assetLayers.length === 0"> <div class="editorPublishAssetsModalDescriptionLower" translate="ui_editor_publish_assets_modal_select_layers_empty"></div> </div> <div ng-if="assetLayers.length > 0"> <div class="editorPublishAssetsModalDescriptionLower" translate="ui_editor_publish_assets_modal_select_layers"></div> <div class="editorPublishAssetsModalLayers"> <div ng-repeat="asset in assetLayers" class="asset"> <checkbox cb-checked="asset.selected" class="check"></checkbox> <span ng-click="asset.selected=!asset.selected"> <span ng-class="asset.icon"></span> <span>{{asset.label}}</span> </span> </div> </div> </div> <div ng-if="isAnythingSelected(2)" style="margin-top:20px;"> <checkbox cb-checked="selected.variantsEnabled" cb-title="\'ui_editor_publish_assets_modal_select_asset_share_variants\'"></checkbox> </div> </div> <div ng-if="selected.type === \'effects\'"> <div ng-if="assetEffects.length === 0"> <div class="editorPublishAssetsModalDescriptionLower" translate="ui_editor_publish_assets_modal_select_effect_empty"></div> </div> <div ng-if="assetEffects.length > 0"> <div class="editorPublishAssetsModalDescriptionLower" translate="ui_editor_publish_assets_modal_select_effect"></div> <div class=""> <droplist class="fullWidth dropup editorPublishAssetsListEffects" dp-options="assetEffects" dp-selected="selected.effect"></droplist> </div> </div> </div> </div> <div class="modal-footer"> <div> <button class="btn btn-primary" ng-disabled="!isAnythingSelected()" ng-click="ok()" translate="ui_ok"></button> <button class="btn btn-default" ng-click="cancel()" translate="ui_cancel"></button> </div> </div> </div> '),e.put("views/modals/editorsteampublishmodal.html",'<div class="modalContainer editorSteamPublishModalRoot" modalmove> <div ng-class="{\'past\': page && page != \'initial\'}"> <div class="modal-header"> <h4 class="modal-title" translate="ui_editor_publish_modal_header"></h4> </div> <div class="modal-body"> <workshop-details wd-project-data="projectData" wd-editor-settings="editorSettings"></workshop-details> </div> <div class="modal-footer"> <div> <button class="btn btn-primary" ng-class="{\'btn-wide\':projectData.workshopid}" ng-disabled="isPublishDisabled()" ng-click="startPublish()">{{getPublishButtonText() | translate}}</button> <a class="btn btn-default" ng-click="close()" translate="ui_close"></a> </div> </div> </div> <div ng-class="{\'future\': page != \'publish\'}" class="future"> <div class="modal-header"> <h4 class="modal-title" translate="ui_editor_publish_modal_header_upload"></h4> </div> <div class="modal-body"> <div ng-if="publishPage==\'progress\'"> <div class="editorSteamPublishStateLabel">{{publishProgressMessage | translate}}</div> <uib-progressbar class="progress-striped active" max="100" value="publishProgressValue"><i>{{publishProgressValue}}%</i></uib-progressbar> </div> <div ng-if="publishPage==\'error\'"> <div class="editorSteamPublishErrorLabel" translate="ui_editor_publish_modal_steam_error"></div> <div>{{publishProgressError}}</div> </div> <div ng-if="publishPage==\'success\'"> <div class="editorSteamPublishStateLabel" ng-attr-style="margin-top: {{needsToAcceptAgreement?80:120}}px" translate="ui_editor_publish_modal_publish_successful"></div> <div ng-if="needsToAcceptAgreement" class="alert alert-danger" translate="ui_editor_publish_modal_publish_prompt_agreement"></div> <a class="btn btn-primary fullWidth" ng-click="openItemInWorkshop()"><span ng-class="providerIcon"></span> {{successText | translate}}</a> <div class="fullWidth" style="text-align:center;padding-top:20px" ng-if="editorSettings.category === \'asset\'"> <a class="btn btn-lg btn-success" ng-click="editorSettings.subscribeItem(itemId);publishSubscriptionStatus=true"><span ng-if="publishSubscriptionStatus" class="fas fa-check"></span> {{\'ui_browse_details_btn_download\' | translate}}</a> </div> </div> </div> <div class="modal-footer"> <a class="btn btn-primary" ng-if="publishPage==\'error\'" ng-click="startPublish()" translate="ui_retry"></a> <button class="btn btn-default" ng-if="publishPage!=\'success\'" ng-disabled="publishPreventCancel" ng-click="cancelPublish()" translate="ui_cancel"></button> <a class="btn btn-default" ng-if="publishPage==\'success\'" ng-click="close()" translate="ui_close"></a> </div> </div> </div> '),e.put("views/modals/editortemplatewizardmodal.html",'<div class="modalContainer" modalmove> <div class="editorTemplateWizardModalRoot"> <div class="modal-header"> <h4 class="modal-title" translate="ui_editor_template_wizard_header"></h4> </div> <div class="modal-body"> <div class="row"> <div class="col-xs-4"> <h5 translate="ui_editor_template_wizard_select_option"></h5> <div class="btn-group-vertical verticalRadioButtonList"> <button ng-repeat="option in templateoptions" ng-model="selectedOption.value" uib-btn-radio="option" class="btn btn-default">{{option.name}} <span class="glyphicon pull-right" ng-class="{\'glyphicon-warning-sign warnIcon\':!option.configured}"></span></button> \x3c!-- \'glyphicon-ok\':option.configured --\x3e </div> </div> <div class="col-xs-8" ng-if="selectedOption.value"> <h5 translate="ui_editor_template_wizard_details"></h5> <div class="fullWidth" ng-bind-html="selectedOption.value.description"> </div> <div ng-if="selectedOption.value.options.length > 0" class="templateOptionProperties"> <div ng-repeat="option in selectedOption.value.options"> <checkbox ng-if="option.type === \'checkbox\'" cb-checked="option.value" cb-title="option.label"></checkbox> <div ng-if="option.type === \'slider\'"> <span>{{option.label}}</span> <rzslider rz-slider-model="option.value" rz-slider-options="{ceil:option.max, floor:option.min}"></rzslider> <span>{{option.value}}</span> </div> </div> </div> <div ng-switch on="selectedOption.value.type"> <div ng-switch-when="replacetexture"> <div class="fullWidth wordBreakAll" ng-if="selectedOption.value.last"> <br>{{\'ui_editor_template_wizard_last_import\' | translate}} {{selectedOption.value.last}} </div> <div class="editButton"> <a class="btn btn-default fullWidth" ng-click="replaceTexture(selectedOption.value)"><span class="far fa-image"></span> {{\'ui_editor_template_wizard_import_image\' | translate}}</a> </div> </div> <div ng-switch-when="userpropertycolor"> <br> <spectrum-colorpicker class="sp-flat-nobtn" options="colorPickerOptions" ng-model="generalProperties[selectedOption.value.key].value" vec-color-converter on-show-options="{update:false}" on-change="setOptionConfigured(selectedOption.value)"></spectrum-colorpicker> </div> </div> </div> </div> </div> <div class="modal-footer"> <div> <button class="btn btn-primary" ng-click="ok()" translate="ui_ok"></button> </div> </div> </div> <div class="editorImportModelCompileOverlay ng-hide" ng-show="compileCtrl.active || compileCtrl.success"> <div class="modal-header"> <h4 class="modal-title"> {{\'ui_editor_importer_compiling_assets_for\' | translate}} {{currentTemplateOptionName}}</h4> </div> <div class="modal-body"> <compiler-progress compile-ctrl="compileCtrl"></compiler-progress> </div> </div> </div> '),e.put("views/modals/editoruserpropertiesmodal.html",'<div class="modalContainer" modalmove> <div class="modal-header"> <h4 class="modal-title" translate="ui_editor_project_settings_modal_user_properties"></h4> </div> <div class="modal-body editorProjectSettingsProperties"> <div class="row" style="margin-bottom: 10px"> <div class="col-xs-12"> <div translate="ui_editor_user_properties_select_info" translate-values="{types:getTranslatedTypes(types)}"></div> </div> </div> <div class="row"> <div class="col-xs-12"> <user-properties up-properties="project.data.general.properties" up-project-data="project.data" up-selected-property="selectedProperty" up-visible-types="types"></user-properties> </div> </div> <div ng-if="project.data.general.properties[selectedProperty.selected].type === \'combo\'" style="margin: 20px 0 0 0; padding: 0 0 0 50px"> <div translate="ui_editor_user_properties_combo_value"></div> <div> <droplist class="fullWidth dropup" dp-options="project.data.general.properties[selectedProperty.selected].options" dp-selected="selectedProperty.condition"></droplist> </div> </div> </div> <div class="modal-footer"> <div> <a class="btn btn-primary" ng-click="ok()" translate="ui_close"></a> </div> </div> </div> '),e.put("views/modals/editoruserpropertydetailsmodal.html",'<div class="modalContainer" modalmove> <div class="modal-header"> <h4 class="modal-title">{{title | translate}}</h4> </div> <div class="modal-body"> <div class="container-fluid editorUserPropertyDetailsModalBody"> <div class="row"> <label class="col-sm-5 control-label" translate="ui_editor_user_properties_type"></label> <div class="col-sm-7"> <droplist class="editorUserPropertyTypeDropDown" dp-options="typeOptions" dp-selected="property.type"></droplist> </div> </div> <div class="row"> <label class="col-sm-5 control-label" translate="ui_editor_user_properties_title"></label> <div class="col-sm-7"> <input type="text" class="form-control" ng-model="property.text"> </div> </div> <div class="row"> <label class="col-sm-5 control-label" translate="ui_editor_user_properties_key"></label> <div class="col-sm-7"> <span ng-if="!viewState.isEditingKey" class="faintText">{{property.key}}</span> <input ng-if="viewState.isEditingKey" type="text" class="form-control" ng-model="property.key"> <a class="btn btn-default pull-right" ng-if="isCreatingNew && !viewState.isEditingKey" ng-click="viewState.isEditingKey=!viewState.isEditingKey"><span class="fas fa-edit"></span></a> </div> </div> <div class="row" ng-if="property.type === \'color\'"> <label class="col-sm-5 control-label" translate="ui_editor_user_properties_value"></label> <div class="col-sm-7"> <spectrum-colorpicker options="colorPickerOptions" ng-model="property.value" vec-color-converter on-show-options="{update:false}"></spectrum-colorpicker> </div> </div> <div ng-if="property.type === \'slider\'"> <div class="row"> <label class="col-sm-5 control-label" translate="ui_editor_user_properties_value"></label> <div class="col-sm-7"> <input type="number" class="form-control" ng-model="property.value"> </div> </div> <div class="row"> <label class="col-sm-5 control-label" translate="ui_editor_user_properties_min_value"></label> <div class="col-sm-7"> <input type="number" class="form-control" ng-model="property.min"> </div> </div> <div class="row"> <label class="col-sm-5 control-label" translate="ui_editor_user_properties_max_value"></label> <div class="col-sm-7"> <input type="number" class="form-control" ng-model="property.max"> </div> </div> <div class="row"> <label class="col-sm-5 control-label" translate="ui_editor_user_properties_fraction"></label> <div class="col-sm-7"> <checkbox cb-checked="property.fraction" cb-changed=""></checkbox> </div> </div> <div class="row" ng-if="property.fraction"> <label class="col-sm-5 control-label" translate="ui_editor_user_properties_precision"></label> <div class="col-sm-7"> <input type="number" class="form-control" ng-model="property.precision"> </div> </div> \x3c!--                 <div class="row">\r\n                    <label class="col-sm-5 control-label" translate="ui_editor_user_properties_editable"></label>\r\n                    <div class="col-sm-7">\r\n                        <input type="number" class="form-control" ng-model="property.editable">\r\n                    </div>\r\n                </div> --\x3e </div> <div class="row" ng-if="property.type === \'bool\'"> <label class="col-sm-5 control-label" translate="ui_editor_user_properties_value"></label> <div class="col-sm-7"> <checkbox cb-checked="property.value"></checkbox> </div> </div> <div ng-if="property.type === \'combo\'"> <div class="row"> <label class="col-sm-5 control-label" translate="ui_editor_user_properties_value"></label> <div class="col-sm-7"> <droplist class="editorUserPropertyTypeDropDown" dp-options="property.options" dp-selected="property.value"></droplist> </div> </div> <div class="row"> <label class="col-sm-5 control-label" translate="ui_editor_user_properties_options"></label> <div class="col-sm-7"> <div ng-repeat="option in property.options" class="editorUserPropertyDetailsModalOptionRow"> <input type="text" class="form-control" ng-model="option.label" placeholder="{{\'ui_editor_user_properties_options_label\'|translate}}"> <input type="text" class="form-control" ng-model="option.value" placeholder="{{\'ui_editor_user_properties_options_value\'|translate}}"> <a class="btn btn-danger" ng-click="removePropertyOption(option)"><span class="fas fa-fw fa-times"></span></a> </div> <div class="editorUserPropertyDetailsModalOptionRow"> <input type="text" class="form-control" ng-model="newOption.label" placeholder="{{\'ui_editor_user_properties_options_label\'|translate}}"> <input type="text" class="form-control" ng-model="newOption.value" placeholder="{{\'ui_editor_user_properties_options_value\'|translate}}"> <button class="btn btn-primary" ng-disabled="newOption.label.length < 1 || newOption.value.length < 1" ng-click="addPropertyOption()"><span class="fas fa-fw fa-plus"></span></button> </div> </div> </div> </div> <div class="row" ng-if="property.type === \'textinput\'"> <label class="col-sm-5 control-label" translate="ui_editor_user_properties_value"></label> <div class="col-sm-7"> <input type="text" class="form-control" ng-model="property.value"> </div> </div> <div class="row" ng-if="property.type === \'file\'||property.type === \'directory\'"> <label class="col-sm-5 control-label" translate="ui_editor_user_properties_file_type"></label> <div class="col-sm-7"> <droplist class="editorUserPropertyTypeDropDown" dp-options="fileTypeOptions" dp-selected="property.fileType"></droplist> </div> </div> <div class="row" ng-if="property.type === \'directory\'"> <label class="col-sm-5 control-label" translate="ui_editor_user_properties_fetch_mode"></label> <div class="col-sm-7"> <droplist class="editorUserPropertyTypeDropDown" dp-options="directoryFetchOptions" dp-selected="property.mode"></droplist> </div> </div> <div class="row"> <label class="col-sm-5 control-label" translate="ui_editor_user_properties_condition"></label> <div class="col-sm-7"> <input type="text" class="form-control" ng-model="property.condition" placeholder="{{\'ui_editor_user_properties_condition_placeholder\'|translate}}"> </div> </div> </div> </div> <div class="modal-footer"> <div> <button class="btn btn-primary" ng-click="ok()" ng-disabled="isOkDisabled()" translate="ui_ok"></button> <button class="btn btn-default" ng-click="cancel()" translate="ui_cancel"></button> </div> </div> </div> '),e.put("views/modals/editorwelcomemodal.html",'<div class="modalContainer editorWelcomeModalRoot" modalmove> <div class="editorWelcomeModalPage" ng-class="{past:page}"> <div class="modal-header"> <h4 class="modal-title">{{title | translate}}</h4> </div> <div class="modal-body"> <div class="editorWelcomeContent"> <div style="display: flex;flex-direction: column;"> <a class="btn btn-primary editorWelcomeWallpaperNewBtn" native-drop-target="fileDropped(droppedFiles[0])" ndt-extension-tag="\'editorNewWallpaper\'" ndt-desired-modal-depth="1" ndt-enabled="!page" ng-click="importFile()"> <span class="fas fa-fw fa-file editorWelcomeWallpaperNewBtnFile"></span> <div class="title" translate="ui_editor_welcome_modal_create_wallpaper"></div> <div> <div class="subtitle" translate="ui_editor_welcome_modal_drop_background_file"></div> <div class="subtitle"> {{\'ui_editor_welcome_modal_supported_file_types\' | translate}} {{supportedFileTypes}} </div> </div> </a> <div style="flex:1"></div> <a class="btn btn-default editorWelcomeWallpaperTemplateBtn" ng-click="openPage(\'templates\')"> <div class="title" translate="ui_editor_welcome_modal_use_a_template"></div> </a> </div> <div style="flex: 0.1"> </div> <div style="display: flex;flex-direction: column;"> <div translate="ui_editor_welcome_modal_edit_recent_wallpaper"></div> <div class="editorWelcomeWallpaperNoRecent" ng-if="!editorScope.editorSettings.recentfiles || editorScope.editorSettings.recentfiles.length == 0" translate="ui_editor_welcome_modal_edit_recent_no_wallpapers"></div> <div ng-if="recentFileDetails.length > 0" style="height: 220px;overflow: hidden;flex:1"> <a ng-repeat="file in recentFileDetails track by $index" ng-click="openRecent(file)" class="btn btn-primary editorRecentFileBtn"> {{file.title}} <span>{{file.file}}</span> </a> </div> <a class="btn btn-default editorWelcomeWallpaperTemplateBtn" ng-if="showOpenBtn" ng-click="openProjects()"> <div class="title" translate="ui_editor_welcome_modal_view_all_projects"></div> </a> </div> </div> </div> <div class="modal-footer"> <div class="editorWelcomeModalHints"> <div class="designerHint" translate="ui_editor_welcome_modal_hint_text"></div> <a class="btn btn-primary btn-lg designerBtn" ng-click="openWiki()"><span class="fas fa-books"></span> <span translate="ui_editor_welcome_modal_documentation"></span></a> </div> <div> <div style="float:left;text-align:left" translate="ui_editor_welcome_modal_hint_backup_text"></div> <div> <a class="btn btn-default" ng-click="cancel()" translate="ui_cancel"></a> </div> </div> </div> </div> <div class="editorWelcomeModalPage editorWelcomeModalPageDynamic future" ng-class="{future:!page || page==\'templates\'}"> <div class="modal-header"> <h4 class="modal-title"><span ng-class="pageIcon"></span> {{newTitle | translate}}</h4> </div> <div class="modal-body"> <form class="form-horizontal"> <div class="form-group"> <label for="inputProjectName" class="col-sm-3 control-label" translate="ui_editor_welcome_modal_file"></label> <div class="control-label col-sm-9 editorWelcomeModalFilePath"> {{project.file}} </div> </div> <div class="form-group"> <label for="inputProjectName" class="col-sm-3 control-label" translate="ui_editor_welcome_modal_project_name"></label> <div class="col-sm-9"> <input type="text" class="form-control" ng-model="project.title" id="inputProjectName" placeholder="New project"> </div> </div> <div class="form-group" ng-if="page==\'scene\'||page==\'video\'"> <label class="col-sm-3 control-label" translate="ui_editor_project_settings_modal_scheme_color"></label> <div class="col-xs-9 text-left"> <spectrum-colorpicker options="colorPickerOptions" ng-model="project.schemecolor" vec-color-converter on-show-options="{update:false}"></spectrum-colorpicker> </div> </div> <div ng-if="page==\'scene\' && resize.visible"> <div class="form-group"> <label class="col-sm-3 control-label" translate="ui_editor_welcome_modal_resize_toggle_label" ng-click="resize.enabled=!resize.enabled"></label> <div class="col-xs-9 text-left"> <checkbox style="padding:8px 0 8px 0" cb-checked="resize.enabled"></checkbox> <div class="alert alert-info" style="margin-bottom:0;padding:5px 20px;" ng-if="resize.showHint" translate="ui_editor_welcome_modal_resize_alert" translate-values="resizeHintValues"></div> </div> </div> <div class="form-group" ng-if="resize.enabled"> <label class="col-sm-3 control-label" translate="ui_editor_welcome_modal_resize_resolution_label"></label> <div class="col-xs-9 text-left"> <droplist class="fullWidth editorWelcomeResolutionDropDown" dp-options="resizeOptions" dp-selected="resize.selected"></droplist> </div> </div> </div> <div class="form-group" ng-if="page==\'web\'||page==\'application\'"> <label for="inputWallpaperFile" class="col-sm-3 control-label" translate="ui_editor_welcome_modal_imported_files"></label> <div class="col-sm-9"> <div class="importFileList"> <div ng-repeat="entry in project.filelist track by $index"> <span class="glyphicon" ng-class="{\'glyphicon-file\':!entry.isdirectory,\'glyphicon-folder-close\':entry.isdirectory}"></span> {{entry.label}} </div> </div> </div> </div> </form> </div> <div class="modal-footer"> <div style="float:left;"> <a class="btn btn-default" ng-click="page=\'\'"><span class="fas fa-arrow-left"></span> {{\'ui_back\' | translate}}</a> </div> <div> <button class="btn btn-primary" ng-disabled="!project.file || !project.title" ng-click="ok()" translate="ui_ok"></button> <a class="btn btn-default" ng-click="cancel()" translate="ui_cancel"></a> </div> </div> </div> <div class="editorWelcomeModalPage editorWelcomeModalPageDynamic future2" ng-class="{past: page && page !== \'templates\', future2:page!==\'templates\'}"> <div class="modal-header"> <h4 class="modal-title"><span ng-class="pageIcon"></span> {{newTitle | translate}}</h4> </div> <div class="modal-body"> <form class="form-horizontal"> <div class="form-group"> <label for="inputProjectName" class="col-sm-3 control-label" translate="ui_editor_welcome_modal_project_name"></label> <div class="col-sm-9"> <input type="text" class="form-control ignoreModalFocus" ng-model="project.title" id="inputProjectName" placeholder="New project"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" translate="ui_editor_welcome_modal_template"></label> <div class="col-sm-9"> <div class="btn-group-vertical verticalRadioButtonList" style="width:50%;height:200px;"> <button class="btn btn-default" type="button" ng-repeat="template in templates" ng-model="project.template" uib-btn-radio="template">{{template.name}}</button> </div> <img class="editorWelcomeModalTemplateImg" ng-src="{{currentPreview || \'images/blueprint.png\'}}"> </div> </div> <div class="form-group" ng-if="project.template.value==\'empty2d\'"> <label class="col-sm-3 control-label" translate="ui_editor_project_settings_modal_resolution"></label> <div class="col-xs-9 text-left editorResolutionParent"> <input type="number" class="form-control ignoreModalFocus" ng-model="project.resolution.width" placeholder="Width"> <div>X</div> <input type="number" class="form-control ignoreModalFocus" ng-model="project.resolution.height" placeholder="Height"> </div> </div> </form> </div> <div class="modal-footer"> <div style="float:left;"> <a class="btn btn-default" ng-click="page=\'\'"><span class="fas fa-arrow-left"></span> {{\'ui_back\' | translate}}</a> </div> <div> <button class="btn btn-primary" ng-disabled="!project.title || !project.template" ng-click="ok()" translate="ui_ok"></button> <a class="btn btn-default" ng-click="cancel()" translate="ui_cancel"></a> </div> </div> </div> </div> '),e.put("views/modals/editorworkshoprules.html",'<div class="modalContainer"> <div class="modal-header"> <h4 class="modal-title" translate="ui_editor_workshop_rules_modal_title"></h4> </div> <div class="modal-body editorWorkshopRulesBody"> <div> <span translate="ui_editor_workshop_rules_modal_body"></span> <a ng-click="openWorkshopWebRules()" translate="var_url_providerrules"></a> </div> <br> <div translate="ui_editor_workshop_rules_modal_list_header"></div> <ul> <li translate="ui_editor_workshop_rules_modal_rule_nudity"></li> <li translate="ui_editor_workshop_rules_modal_rule_offensive"></li> <li translate="ui_editor_workshop_rules_modal_rule_copyright"></li> <li translate="ui_editor_workshop_rules_modal_rule_ads"></li> <li translate="ui_editor_workshop_rules_modal_rule_misleading"></li> </ul> </div> <div class="modal-footer"> <div> <a class="btn btn-primary" translate="ui_ok" ng-click="ok()"></a> </div> </div> </div> '),e.put("views/modals/genericconfirmmodal.html",'<div class="modalContainer"> <div class="modal-header" ng-if="data.title"> <h4 class="modal-title" translate="{{data.title}}"></h4> </div> <div class="modal-body modalGenericConfirmBody"> <div ng-if="data.leftIcon || data.message"> <div ng-if="data.leftIcon" class="confirmIcon"> <img ng-src="{{data.leftIcon}}"> </div> <div style="display:flex;flex-direction:column;"> <div translate="{{data.message}}"></div> <div ng-if="data.checkboxCenterVisible" style="margin-top: 15px;white-space:initial;"> <checkbox cb-checked="data.checkboxChecked" cb-title="data.checkboxTitle"></checkbox> </div> </div> </div> <div ng-if="data.checkboxVisible" style="margin-top: 15px;"> <checkbox cb-checked="data.checkboxChecked" cb-title="data.checkboxTitle"></checkbox> </div> <div ng-if="data.droplistVisible" style="margin-top: 15px;"> <droplist class="fullWidth" dp-options="data.droplistOptions" dp-selected="data.droplistSelected"></droplist> </div> <div ng-if="data.textinputVisible" class="fullWidth" style="margin-top: 15px;"> <form class="fullWidth"> <input id="genericConfirmTextInput" type="text" class="form-control ignoreModalFocus" ng-model="data.textinput" autofocus> </form> </div> <div ng-if="data.numberInputVisible" class="fullWidth" style="margin-top: 15px;"> <form class="fullWidth"> <input id="genericConfirmNumberInput" type="number" class="form-control ignoreModalFocus" ng-model="data.numberinput" autofocus> </form> </div> <div ng-if="data.selectionVisible" class="modalGenericConfirmSelectionRoot"> <div> <a class="editorEffectModalItem activeBackHighlight" ng-repeat="item in data.selectionItems" ng-click="data.selectedItem = item" ng-dblclick="data.selectedItem = item;ok()" ng-class="{\'active\':data.selectedItem == item}" translate="{{item.label}}"></a> </div> </div> </div> <div class="modal-footer" style="display:flex"> <div style="text-align:left"> <a class="btn" ng-if="data.leftVisible" ng-class="data.leftClass" ng-click="leftClicked()"><img ng-if="data.leftImg" ng-src="{{data.leftImg}}"> {{data.leftText|translate}}</a> <a class="btn" ng-if="data.left2Visible" ng-class="data.left2Class" ng-click="left2Clicked()"><img ng-if="data.left2Img" ng-src="{{data.left2Img}}"> {{data.left2Text|translate}}</a> <checkbox ng-if="data.checkboxLowVisible" cb-checked="data.checkboxChecked" cb-title="data.checkboxTitle"></checkbox> </div> \x3c!--         <div ng-if="data.customFooter" style="display:flex;flex-direction:column">\r\n            <div style="margin-bottom:5px; text-align: left">{{data.customFooterText | translate}}</div>\r\n            <div>\r\n                <button class="btn btn-primary" uib-btn-checkbox ng-model="data.customFooterModel" translate="ui_workshop_tags_anime"></button>\r\n            </div>\r\n        </div> --\x3e <div style="flex-grow: 1"> <a class="btn btn-primary" ng-if="data.okVisible" ng-class="data.okClass" ng-disabled="data.okDisabled || (data.textinputVisible && data.textinputRequired && !data.textinput)" ng-click="ok()">{{data.okText || \'ui_ok\' | translate}}</a> <a class="btn btn-default" ng-if="data.cancelVisible" ng-click="cancel()">{{data.cancelText || \'ui_cancel\' | translate}}</a> </div> </div> </div> '),e.put("views/modals/openfromurlmodal.html",'<div class="modalContainer"> <div class="modal-header"> <h4 class="modal-title" translate="ui_browse_open_url_header"></h4> </div> <div class="modal-body"> <form class="form-horizontal"> <div class="form-group" style="margin-bottom:0px"> <label for="inputURL" class="col-sm-4 control-label">URL</label> <div class="col-sm-8"> <input type="text" class="form-control ignoreModalFocus" ng-model="url" id="inputURL" placeholder="http://" autofocus> </div> </div> <div style="padding: 40px 10px 10px 10px;" translate="ui_browse_open_url_hotkey_info"></div> <div class="form-group" style="margin-bottom:0px"> <label class="col-sm-4 control-label" translate="ui_settings_hotkeys_action_hide_icons"></label> <div class="col-sm-8"> <hotkeyinput hk-item="hideIconsKey" hk-keys="findHotkeyList(hideIconsKey).keys" hk-pool="hotkeys"></hotkeyinput> </div> </div> </form> </div> <div class="modal-footer"> <div> <a class="btn btn-primary" ng-click="ok()" translate="ui_ok"></a> <a class="btn btn-default" ng-click="cancel()" translate="ui_cancel"></a> </div> </div> </div> '),e.put("views/modals/queryworkshopmodal.html",'<div class="modalContainer editorQueryAssetModal"> <div class="modal-header"> <h4 class="modal-title" translate="ui_query_workshop_modal_header_assets" translate-values="settings"></h4> </div> <div class="modal-body editorQueryAssetModalLayout"> <div class="left"> <div class="browseWallpaperSearchContainer"> <div class="form-group has-feedback browseWallpaperSearchContainerSearchField"> <div ng-class="{\'input-group\':filter.text}"> <input id="browseSearchFilterText" type="text" class="form-control" placeholder="{{\'ui_browse_search_placeholder\' | translate}}" ng-model="filter.text" ng-model-options="{debounce:100}"> <span class="glyphicon glyphicon-search form-control-feedback" aria-hidden="true"></span> <div class="input-group-btn"> <button ng-if="filter.text" class="btn btn-danger" ng-click="resetSearchFilter()"> <i class="glyphicon glyphicon-remove"></i> </button> </div> </div> </div> <div> <a ng-click="showFilter.visible=!showFilter.visible" class="btn btn-primary filterBtn"> <span class="filterLabel" translate="ui_browse_filter_results"></span> <span ng-if="showFilter.counts && sourceIsWorkshop && (steamWorkshopStatus.complete || steamWorkshopStatus.error)" class="browseFilterActiveClass" translate="ui_browse_filter_results_filtered"></span> <span class="glyphicon glyphicon-filter filterIcon"></span> </a> </div> <div class="browseWallpaperSearchContainerFill"> </div> <div class="browseWallpaperSearchContainerSort"> <droplist ng-class="sortOptionsClass" dp-options="sortOptions" dp-selected="filter.sort"></droplist> </div> </div> <div class="browseWallpaperGridParent"> <div class="browseWallpaperGridContainerParent"> <div class="browseWallpaperFilter ng-hide" ng-show="showFilter.visible && !sourceIsExplore"> <div> <div class="browseFilterTopBar"> <span> <a ng-click="callbackResetFilter()" class="btn btn-primary iconInfo"> <span class="fas fa-sync-alt"></span> <span translate="ui_browse_filter_reset"></span> </a> </span> </div> \x3c!-- TYPES --\x3e <div ng-if="!filterPreset.workshopid"> <div class="filterHeader browseFilterToggle" ng-click="filterHideTypes=!filterHideTypes"> <span ng-if="filterHideTypes" class="fas fa-fw fa-caret-down"></span> <span ng-if="!filterHideTypes" class="fas fa-fw fa-caret-right"></span> <span translate="ui_browse_filter_type"></span> \x3c!-- <span ng-if="filterStatus.type" class="browseFilterActiveClass" translate="ui_browse_filter_results_filtered"></span> --\x3e </div> <div class="browseFilterHide" ng-show="filterHideTypes"> <div class="filterItem" ng-repeat="tag in filterTypeTags"> <checkbox cb-checked="filter.typetags[tag.value]" cb-title="tag.label"></checkbox> </div> <div class="browseFilterBottomPadding"></div> </div> </div> \x3c!-- RATING --\x3e <div ng-if="canUseAgeRatingTags()"> <div class="filterHeader browseFilterToggle" ng-click="filterHideRating=!filterHideRating"> <span ng-if="filterHideRating" class="fas fa-fw fa-caret-down"></span> <span ng-if="!filterHideRating" class="fas fa-fw fa-caret-right"></span> <span translate="ui_workshop_workshop_tags_rating"></span> \x3c!-- <span ng-if="filterStatus.rating" class="browseFilterActiveClass" translate="ui_browse_filter_results_filtered"></span> --\x3e </div> <div class="browseFilterHide" ng-show="filterHideRating"> <div class="filterItem" ng-repeat="tag in filterRatingTags"> <checkbox cb-checked="filter.ratingtags[tag.value]" cb-title="tag.label"></checkbox> </div> <div class="browseFilterBottomPadding"></div> </div> </div> \x3c!-- GENRES --\x3e <div class="filterHeader browseFilterToggle" ng-click="filterHideGenres=!filterHideGenres"> <span ng-if="!filterHideGenres" class="fas fa-fw fa-caret-down"></span> <span ng-if="filterHideGenres" class="fas fa-fw fa-caret-right"></span> <span class="filterHeader" translate="ui_browse_filter_tags"></span> \x3c!-- <span ng-if="filterStatus.tags" class="browseFilterActiveClass" translate="ui_browse_filter_results_filtered"></span> --\x3e </div> <div class="browseFilterHide" ng-hide="filterHideGenres"> <div class="filterItem" ng-repeat="tag in filterUtilityTags"> <checkbox cb-type="tag" cb-checked="filter.utilitytags[tag.value]" cb-title="tag.label"></checkbox> <span ng-if="tag.value==\'Approved\'" class="fas fa-trophy browseWallpaperApproved"></span> </div> <div class="filterDivider"></div> <div class="filterItem filterMultiButtons"> <a class="filterMultiBtn" ng-click="callbackToggleGenreFilter($event, true)"><span translate="ui_browse_filter_all"></span></a> <a class="filterMultiBtn" ng-click="callbackToggleGenreFilter($event, false)"><span translate="ui_browse_filter_none"></span></a> </div> <div class="filterItem" ng-repeat="tag in filterAssetGenreTags"> <checkbox cb-checked="filter.assetgenretags[tag.value]" cb-title="tag.label"></checkbox> </div> </div> </div> </div> <div class="browseWallpaperGridAndNavigationView"> <div class="browseWallpaperGridView"> <div ng-if="queryWallpapers.length == 0" class="emptyGrid"> <span ng-class="{\'emptyGridDanger\':showErrorInBackground}" ng-bind-html="queryActive ? \'ui_browse_grid_no_results_refreshing\' : showErrorInBackground ? \'ui_browse_no_service_body\' : \'ui_browse_grid_no_results_generic\' | translate"></span> <div ng-if="!queryActive && showErrorInBackground" style="margin-top:20px;"> <a class="btn btn-default btn-lg" ng-click="callbackChangePage(currentPage, true)"><span class="fas fa-sync-alt"></span> <span translate="ui_browse_reload"></span></a> </div> <div class="wpAnim" ng-if="queryActive"> <img class="offset" src="images/wp_logo_blue_outer_rect.png"> <img class="spin" src="images/wp_logo_blue_inner_rect.png"> </div> </div> <wallpaper-thumbnail class="wallpaperBrowseInner" wt-wallpapers="queryWallpapers" wt-selection="currentSelection" wt-mousecallback="callbackWallpaperAllMouse(btn, context, $event)" ng-class="\'browseViewSizemedium\'" id="BrowseAssetGrid" wt-tag="\'assetworkshop\'"></wallpaper-thumbnail> </div> </div> </div> <div class="browseWallpaperPagination" ng-show="pagination.visible"> <div> <span><a class="fas fa-angle-double-left paginationIcon" ng-click="callbackChangePage(\'prev\')"></a></span> <span ng-repeat="page in pagination.pages"><a class="paginationIcon pageItem" ng-click="callbackChangePage(page.label)" ng-class="{\'{{page.class}}\':true, \'linkOverrideActive\':page.label==pagination.current}">{{page.label}}</a></span> <span><a class="fas fa-angle-double-right paginationIcon" ng-click="callbackChangePage(\'next\')"></a></span> </div> </div> </div> </div> <div class="browseWallpaperDetailView right"> <div ng-if="!currentSelection" class="placeholder" translate="ui_browse_select_prompt_asset"> </div> <div ng-if="currentSelection" class="details"> <div class="previewContainer"> <div> <img ng-src="{{currentSelection.preview}}" class="previewImage"> </div> </div> <div class="info"> <div class="content-title"> {{currentSelection.title}} </div> <div class="infoRow center" ng-if="!currentSelection.local"> <workshop-author wa-item="currentSelection" wa-infos="workshopController.steamUserInfos" wa-open-user-page="openSteamUserPage"></workshop-author> </div> <div class="infoRow center" ng-if="currentSelection.assettypeslabel"> <div>{{currentSelection.assettypeslabel}}</div> </div> <div class="infoRow center" ng-if="currentSelection.filesizelabel"> <div>{{\'ui_browse_details_filesize\'|translate}} {{currentSelection.filesizelabel}}</div> </div> <div ng-if="currentSelection.hasrating" class="infoRow browseWallpaperDetailsWorkshopRateRow"> <workshop-rating wr-item="currentSelection" set-user-vote="workshopController.setUserVote" set-favorited="workshopController.setFavorited"></workshop-rating> </div> </div> <div class="detailButtons" ng-if="currentSelection.workshopid"> <div class="browseWallpaperDetailsWorkshopControls"> <a ng-if="currentSelection.status !== \'downloadable\'" ng-click="unsubscribeWorkshopItem(currentSelection)" class="btn btn-danger"> <span class="fas fa-times" aria-hidden="true"></span> {{\'ui_browse_details_btn_unsubscribe\' | translate}} </a> <a ng-if="currentSelection.status === \'downloadable\'" ng-click="workshopController.subscribeWorkshopItem(currentSelection.workshopid)" class="btn btn-success"> <span class="fas fa-download" aria-hidden="true"></span> {{\'ui_browse_details_btn_download\' | translate}} </a> <a ng-click="workshopController.openSteamWorkshopPage(currentSelection)" class="btn btn-default" tooltip="ui_browse_details_btn_workshop" t-align-right="true"> <span ng-class="providerIcon" aria-hidden="true"></span> {{\'ui_browse_details_btn_comment\' | translate}} </a> </div> </div> <div class="info" ng-if="currentSelection.description"> <pre class="resetPre" style="margin-top:10px">{{currentSelection.description}}</pre> </div> </div> </div> </div> <div class="modal-footer"> <div> \x3c!-- <button class="btn btn-primary" ng-click="ok()" translate="ui_ok"></button> --\x3e <button class="btn btn-default" ng-click="close()" translate="ui_close"></button> </div> </div> </div> '),e.put("views/modals/settingschangelogmodal.html",'<div class="modalContainer"> <div class="modal-header"> <h4 class="modal-title" translate="ui_settings_about_changelog"></h4> </div> <div class="modal-body changelogBody"> <ng-include src="\'views/ci/changelog.html\'"></ng-include> </div> <div class="modal-footer"> <div> <a class="btn btn-primary" ng-click="close()" translate="ui_ok"></a> </div> </div> </div> '),e.put("views/modals/settingshotkeysmodal.html",'<div class="modalContainer"> <div class="modal-header"> <h4 class="modal-title" translate="ui_settings_hotkeys_header"></h4> </div> <div class="modal-body perApplicationModalBody"> <div class="hotkeyTable fullList"> <div translate="ui_settings_hotkeys_example" class="faintText" style="padding-bottom:10px"> </div> <div ng-repeat="group in list"> <div class="hotkeyHeader"> <div translate="{{group.title}}"></div> </div> <div ng-repeat="item in group.items"> <div class="hotkeyRow"> <div class="title" translate="{{item.label || \'ui_settings_hotkeys_action_user_\' + item.action}}"> </div> <hotkeyinput hk-keys="findHotkeyList(item).keys" hk-item="item" hk-pool="hotkeys"></hotkeyinput> </div> <div class="hotkeyValue"> {{item.title || item.value}} </div> </div> <div class="hotkeyRow" ng-if="group.items.length === 0"> <div class="stub" translate="{{group.stub}}"></div> </div> </div> </div> </div> <div class="modal-footer"> <div> <a class="btn btn-primary" ng-click="close()" translate="ui_ok"></a> </div> </div> </div> '),e.put("views/modals/settingsperapplicationmodal.html",'<div class="modalContainer"> <div class="modal-header"> <h4 class="modal-title" translate="ui_settings_playback_application_rules_header"></h4> </div> <div style="white-space: nowrap;"> <div class="perApplicationModal" ng-class="{\'showPage1\':page.name,\'showPage2\':page.name==\'wallpaper\'}"> <div class="modal-body perApplicationModalBody"> <div> <a ng-click="showCreatePage()" class="btn btn-default fullWidth" translate="ui_settings_playback_new_rule"></a> </div> <div class="ruleList"> <div ng-repeat="rule in rules" class="perApplicationRule"> <div class="ruleInfo"> <div class="ruleTitle">{{rule.executable}}</div> <div class="extra"> <div class="names"> <div translate="ui_settings_playback_new_rule_condition"></div> <div translate="ui_settings_playback_new_rule_action"></div> </div> <div> <div>{{conditionLabels[rule.condition] | translate}}</div> <div>{{actionLabels[rule.action] | translate}}</div> </div> </div> </div> <div> <button class="btn btn-default" ng-click="showEditPage(rule)" tooltip="ui_settings_playback_rule_edit" t-align-right="true"><span class="fas fa-edit"></span></button> <button class="btn btn-danger" ng-click="rules.findAndRemove(rule)" tooltip="ui_settings_playback_rule_remove" t-align-right="true"><span class="fas fa-trash"></span></button> </div> </div> </div> </div> <div class="modal-footer"> <div> <a class="btn btn-primary" ng-click="close()" translate="ui_ok"></a> </div> </div> </div> <div class="perApplicationModal" ng-class="{\'showPage1\':page.name,\'showPage2\':page.name==\'wallpaper\'}"> <div class="modal-body perApplicationModalBody"> <div> <form class="form-horizontal"> <div class="perApplicationList"> <a ng-repeat="app in applications | filter:newRule.executable" class="settingsApplicationRow" ng-click="newRule.executable = app.executablename"> <img ng-if="app.icon" ng-src="{{app.icon}}" class="settingsApplicationIcon"> <span ng-if="!app.icon" class="far fa-fw fa-window-maximize"></span> <span>{{app.executablename}}</span> </a> </div> <div class="form-group"> <label class="col-xs-4 control-label" translate="ui_settings_playback_new_rule_application_name"></label> <div class="col-xs-8"> <div class="input-group"> <input type="text" class="form-control ignoreModalFocus" ng-model="newRule.executable" spellcheck="false"> <div class="input-group-btn"> <button class="btn btn-danger" ng-click="newRule.executable=\'\'"> <i class="glyphicon glyphicon-remove"></i> </button> </div> </div> </div> </div> <div class="form-group"> <label class="col-xs-4 control-label" translate="ui_settings_playback_new_rule_condition"></label> <div class="col-xs-8"> <droplist class="dropup" dp-options="conditionOptions" dp-selected="newRule.condition"></droplist> </div> </div> <div class="form-group"> <label class="col-xs-4 control-label" translate="ui_settings_playback_new_rule_action"></label> <div class="col-xs-8"> <droplist class="dropup" dp-options="actionOptions" dp-selected="newRule.action"></droplist> </div> </div> </form> </div> </div> <div class="modal-footer"> <div> <button ng-if="requiresWallpaperSelection()" class="btn btn-primary" ng-disabled="!newRule.executable" ng-click="chooseWallpaper()" translate="ui_next"></button> <button ng-if="!requiresWallpaperSelection()" class="btn btn-primary" ng-disabled="!newRule.executable" ng-click="createRule()">{{page.name == \'create\' ? \'ui_create\' : \'ui_ok\' | translate}}</button> <button class="btn btn-default" ng-click="page.name=\'\'">{{\'ui_cancel\' | translate}}</button> </div> </div> </div> <div class="perApplicationModal" ng-class="{\'showPage1\':page.name,\'showPage2\':page.name==\'wallpaper\'}"> <div class="modal-body perApplicationModalBody"> <div> <form class="form-horizontal"> <div class="perApplicationList"> <span ng-if="loadItems.length === 0" class="faintText" translate="ui_settings_playback_new_rule_search_empty"></span> <a ng-repeat="item in loadItems | filter:filter.search" class="settingsApplicationRow" ng-click="selectWallpaper(item)"> \x3c!-- <img ng-if="app.icon" ng-src="{{app.icon}}" class="settingsApplicationIcon"> --\x3e \x3c!-- <span ng-if="!app.icon" class="far fa-fw fa-window-maximize"></span> --\x3e <span>{{item.label}}</span> </a> </div> <div class="form-group"> <label class="col-xs-4 control-label" translate="ui_settings_playback_new_rule_search"></label> <div class="col-xs-8"> <div class="input-group"> <input type="text" class="form-control ignoreModalFocus" ng-model="filter.search" spellcheck="false"> <div class="input-group-btn"> <button class="btn btn-danger" ng-click="clearWallpaperSearch()"> <i class="glyphicon glyphicon-remove"></i> </button> </div> </div> </div> </div> <div class="form-group" ng-if="newRule.action==\'loadwallpaper\'"> <label class="col-xs-4 control-label" translate="ui_settings_playback_new_rule_preview"></label> <div class="col-xs-8"> <img ng-if="selected.wallpaper" class="perApplicationModalWallpaperPreview" ng-src="{{selected.wallpaper.preview}}"> <a class="perApplicationModalWallpaperUrl" ng-if="selected.wallpaper.workshopurl" ng-click="openSteamWorkshopPage(selected.wallpaper)" translate="ui_settings_playback_new_rule_open_in_workshop"></a> </div> </div> \x3c!--                         <div class="form-group">\r\n                            <label class="col-xs-4 control-label" translate="ui_settings_playback_new_rule_condition"></label>\r\n                            <div class="col-xs-8">\r\n                                <droplist class="dropup" dp-options="conditionOptions" dp-selected="newRule.condition"></droplist>\r\n                            </div>\r\n                        </div>\r\n                        <div class="form-group">\r\n                            <label class="col-xs-4 control-label" translate="ui_settings_playback_new_rule_action"></label>\r\n                            <div class="col-xs-8">\r\n                                <droplist class="dropup" dp-options="actionOptions" dp-selected="newRule.action"></droplist>\r\n                            </div>\r\n                        </div> --\x3e </form> </div> </div> <div class="modal-footer"> <div> <button class="btn btn-primary" ng-disabled="!newRule.file" ng-click="createRule()" translate="ui_create"></button> <button class="btn btn-default" ng-click="cancelLoadRule()">{{\'ui_cancel\' | translate}}</button> </div> </div> </div> </div> </div> '),e.put("views/modals/settingspluginmodal.html",'<div class="modalContainer"> <div class="modal-header"> <h4 class="modal-title" translate="ui_settings_plugins_options_modal_header" translate-values="{name:plugin.name}"></h4> </div> <div class="modal-body"> <div> <form class="form-horizontal"> <div class="form-group" ng-repeat="option in plugin.options"> <div ng-if="!option.name" class="col-xs-12"> <div class="settingsPluginSettingsDivider"> </div> </div> <div ng-if="option.name && option.type === \'checkbox\'"> <span class="col-xs-6" ng-click="pluginSettings[plugin.key][option.name]=!pluginSettings[plugin.key][option.name]">{{option.label|translate}}</span> <div class="col-xs-6"> <checkbox cb-checked="pluginSettings[plugin.key][option.name]"></checkbox> </div> </div> <div ng-if="option.name && option.type === \'slider\'"> <span class="col-xs-6" ng-click="pluginSettings[plugin.key][option.name]=!pluginSettings[plugin.key][option.name]">{{option.label|translate}}</span> <div class="col-xs-6" style="display:flex;align-items:center"> <rzslider rz-slider-model="pluginSettings[plugin.key][option.name]" rz-slider-options="{ceil:option.max, floor:option.min, enforceStep:false, step:option.step||1, precision:option.precision||1}"></rzslider> <span style="text-align:right;width:40px">{{pluginSettings[plugin.key][option.name]}}</span> </div> </div> <div class="settingsPluginSettingsRow" ng-if="option.name && option.type === \'combo\'"> <span class="col-xs-6">{{option.label|translate}}</span> <div class="col-xs-6"> <droplist class="settingsPluginSettingsDropdown" dp-options="option.options" dp-selected="pluginSettings[plugin.key][option.name]"></droplist> </div> </div> </div> \x3c!--                 <div class="form-group">\r\n                    <div class="col-xs-12">\r\n                        <div class="settingsPluginSettingsDivider">\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="form-group">\r\n                    <div class="settingsPluginSettingsRow">\r\n                        <div class="col-xs-6">\r\n                            <span translate="ui_settings_plugins_options_delay_load"></span>\r\n                        </div>\r\n                        <div class="col-xs-3">\r\n                            <input type="number" class="form-control" ng-model="pluginSettings[plugin.key].delay">\r\n                        </div>\r\n                        <div class="col-xs-3">\r\n                            <span translate="ui_settings_plugins_options_delay_load_seconds"></span>\r\n                        </div>\r\n                    </div>\r\n                </div> --\x3e </form> </div> </div> <div class="modal-footer"> <div> <a class="btn btn-primary" ng-click="ok()" translate="ui_ok"></a> \x3c!-- <a class="btn btn-default" ng-click="cancel()" translate="ui_cancel"></a> --\x3e </div> </div> </div> '),e.put("views/templates/checkbox.html",'<div class="checkBoxBase"> <div ng-click="toggle()" class="checkBoxOuter" ng-class="{\'dis\':cbDisabled}"> <span class="fas fa-square checkBoxBackground"></span> <span ng-if="!cbType"> <span ng-if="cbChecked" class="fas fa-check-square checkBox"></span> <span ng-if="!cbChecked" class="far fa-square checkBox"></span> </span> <span ng-if="cbType==\'tag\'"> <span ng-if="cbChecked===1" class="fas fa-plus-square checkBox successText"></span> <span ng-if="!cbChecked" class="far fa-square checkBox"></span> </span> <span ng-if="cbType==\'bit\'"> <span ng-if="bitChecked()" class="fas fa-check-square checkBox"></span> <span ng-if="!bitChecked()" class="far fa-square checkBox"></span> </span> </div> <div ng-click="toggle()" ng-if="cbTitle" class="checkBoxTitle" ng-class="{\'successText\':cbChecked===1}">{{cbTitle | translate}}</div> </div> '),e.put("views/templates/codeeditor.html",'<div class="editorCodeEditor disableEditorHotkeys"> \x3c!-- tabindex="-1" --\x3e <div class="editorCodeControls"> \x3c!-- required buttons: --\x3e \x3c!-- run edit snippets cancel save --\x3e <div class="editorCodeControlsButtonGroup"> <button ng-if="isJSType()" class="btn btn-primary editorCodeControlsButtonGroupSpacing" ng-click="apply()"><span class="fas fa-cog"></span> <span translate="ui_editor_script_compile"></span></button> <button ng-if="isShaderType()" class="btn btn-primary editorCodeControlsButtonGroupSpacing" ng-click="apply()"><span class="fas fa-check"></span> <span translate="ui_editor_script_apply"></span></button> <button ng-if="isEditable()" class="btn btn-default editorCodeControlsButtonGroupSpacing" ng-click="openEditMenu($event)">{{\'ui_editor_filemenu_edit\'|translate}}</button> <button ng-if="isEditable()" class="btn btn-default" ng-click="openSnippetMenu($event)">{{\'ui_editor_script_snippets\'|translate}}</button> <button ng-if="isJSType()" class="btn btn-default" ng-click="openWorkshopMenu($event)">{{\'ui_editor_script_workshop\'|translate}}</button> <button ng-if="ceControls.errorInfo" class="btn btn-danger" ng-click="ceControls.openHLSLError(ceControls.errorInfo)" translate="ui_editor_shader_view_errors"></button> \x3c!-- <button class="btn btn-primary">{{\'ui_editor_filemenu_undo\'|translate}}</button> --\x3e \x3c!-- <button class="btn btn-primary">{{\'ui_editor_filemenu_redo\'|translate}}</button> --\x3e <span class="alert alert-danger editorCodeControlsError" ng-if="ceContentType==\'hlslerror\'">{{ceInitialError.message}}</span> </div> <div class="editorCodeControlsButtonGroup right"> <button ng-if="isEditable()" class="btn btn-primary editorCodeControlsButtonGroupSpacing" translate="ui_ok" ng-click="apply();close()"></button> <button ng-if="isEditable()" class="btn btn-default" translate="ui_cancel" ng-click="cancel();close()"></button> <button ng-if="!isEditable()" class="btn btn-default" translate="ui_close" ng-click="close()"></button> </div> </div> <div class="editorCodeView" id="codeView"> </div> <div> \x3c!-- show errors if any occur during compile or run --\x3e </div> </div> '),e.put("views/templates/compilerprogress.html",'<div> <h5>{{\'ui_editor_importer_compiling_file\' | translate}} {{compileInfo.current + 1}} of {{compileInfo.total}}: {{compileInfo.file}} ({{compileInfo.mode}})</h5> <uib-progressbar class="progress-striped active" ng-class="{\'snapProgressBar\':compileInfo.progress < 2}" max="100" value="compileInfo.total > 1 ? compileInfo.progress : 100"> <i ng-if="compileInfo.total > 1">{{compileInfo.progress}}%</i> </uib-progressbar> </div> '),e.put("views/templates/curveeditor.html",'<div class="curveEditor" tabindex="0"> <div class="propertyControls"> <tree-view class="treeViewRoot" tv-data="properties" tv-multi-select-mode="always" tv-selected-item="selected.items" tv-mode="\'scene\'" tv-remove-clicked="" tv-send-asset-property-change="listPropertyChanged()" tv-context-menu="propertContextMenu($event, property, item)"></tree-view> </div> <div class="keyControls" layout-class="{rules:[{minHeight:275,minHeightClass:\'horizontal\'},{minHeight:120,minHeightClass:\'minimal\'}]}"> <div class="smallText"> <a class="btn faBtnMultiSimple btn-default" ng-click="hasKeyframe(selected.frame)?removeKeyframes():insertKeyframes()" tooltip="ui_editor_animation_toggle_keyframe"> <span class="faBtnMulti"> <span class="fas fa-fw"></span> <span class="fas fa-key big"></span> <span ng-if="!hasKeyframe(selected.frame)" class="fas fa-xs fa-plus small"></span> <span ng-if="hasKeyframe(selected.frame)" class="fas fa-xs fa-minus small"></span> </span> </a> <a class="btn faBtnMultiSimple" ng-class="{\'btn-default\':!animationOptions.autokeyframe,\'btn-primary\':animationOptions.autokeyframe}" ng-click="animationOptions.autokeyframe=!animationOptions.autokeyframe" tooltip="ui_editor_animation_auto_keyframe"> <span class="faBtnMulti"> <span class="fas fa-fw"></span> <span class="fas fa-key big"></span> <span class="fas fa-xs fa-asterisk small"></span> </span> </a> </div> <div class="wideRow"> <a class="btn btn-default wideButton" style="text-align: left;" ng-click="hasKeyframe(selected.frame)?removeKeyframes():insertKeyframes()" tooltip="ui_editor_animation_toggle_keyframe"> <span class="faBtnMulti"> <span class="fas fa-fw"></span> <span class="fas fa-key big"></span> <span ng-if="!hasKeyframe(selected.frame)" class="fas fa-xs fa-plus small"></span> <span ng-if="hasKeyframe(selected.frame)" class="fas fa-xs fa-minus small"></span> </span> <span translate="ui_editor_animation_toggle_keyframe"></span> </a> </div> <div class="wideRow"> <a class="btn wideButton" style="text-align: left;" ng-class="{\'btn-default\':!animationOptions.autokeyframe,\'btn-primary\':animationOptions.autokeyframe}" ng-click="animationOptions.autokeyframe=!animationOptions.autokeyframe" tooltip="ui_editor_animation_auto_keyframe"> <span class="faBtnMulti"> <span class="fas fa-fw"></span> <span class="fas fa-key big"></span> <span class="fas fa-xs fa-asterisk small"></span> </span> <span translate="ui_editor_animation_auto_keyframe"></span> </a> </div> <div> <a class="btn btn-default faBtnToggle4" ng-class="\'toggle\' + animationOptions.beziermode" ng-click="cycleBezierMode(animationOptions.beziermode)" tooltip="ui_editor_animation_toggle_bezier"> <span class="fas fa-fw fa-bezier-curve"></span> <span class="btn btn-primary inner"><span class="fas fa-fw fa-bezier-curve"></span></span> </a> <a class="btn faBtnMultiSimple btn-default" ng-click="resetSelectedVertices()" tooltip="ui_editor_animation_reset_bezier"> <span class="faBtnMulti"> <span class="fas fa-fw"></span> <span class="fas fa-bezier-curve big"></span> <span class="fas fa-xs fa-horizontal-rule small"></span> </span> </a> <a class="btn faBtnMultiSimple" ng-class="{\'btn-default\':!animationOptions.locklength,\'btn-primary\':animationOptions.locklength}" ng-click="toggleLockLength()" tooltip="ui_editor_animation_lock_control_point_lengths"> <span class="faBtnMulti"> <span class="fas fa-fw"></span> <span class="fas fa-bezier-curve big"></span> <span class="fas fa-xs fa-arrows-h small"></span> </span> </a> <a class="btn faBtnMultiSimple" ng-class="{\'btn-default\':!animationOptions.lockangle,\'btn-primary\':animationOptions.lockangle}" ng-click="toggleLockAngle()" tooltip="ui_editor_animation_lock_control_point_angles"> <span class="faBtnMulti"> <span class="fas fa-fw"></span> <span class="fas fa-bezier-curve big"></span> <span class="fas fa-xs fa-lock small"></span> </span> </a> </div> <div> <a class="btn btn-default wideButton" ng-click="openAnimationOptions()" tooltip="ui_editor_animation_animation_settings"> <span class="fas fa-fw fa-cog"></span> <span class="wideText" translate="ui_editor_properties_settings"></span> </a> </div> </div> <div class="background"> <canvas class="curves" tooltip="{{curveTooltip}}"></canvas> </div> <div class="playbackControls"> <div ng-if="!animationOptions.isPlaying"> <a class="btn btn-primary fullWidth" ng-click="startPlayback()" tooltip="ui_editor_animation_play"><span class="fas fa-fw fa-play"></span></a> </div> <div ng-if="animationOptions.isPlaying"> <a class="btn btn-default fullWidth" ng-click="pausePlayback(true)" tooltip="ui_editor_animation_pause"><span class="fas fa-fw fa-pause"></span></a> </div> <div> <a class="btn btn-default" ng-click="moveToFrame()" tooltip="ui_editor_animation_jump_to_start"><span class="fas fa-fw fa-arrow-to-left"></span></a> <a class="btn btn-default" ng-click="moveToFrame(true)" tooltip="ui_editor_animation_jump_to_end"><span class="fas fa-fw fa-arrow-to-right"></span></a> </div> <div> <a class="btn btn-default" ng-click="resetView()" tooltip="ui_editor_animation_reset_zoom"> <span class="fas fa-fw fa-search"></span> </a> <a class="btn btn-default" ng-click="showHelp()" tooltip="ui_editor_animation_show_help"> <span class="fas fa-fw fa-question"></span> </a> </div> <div> <a class="btn btn-default fullWidth" ng-click="editAnimationEvents(selected.frame)" tooltip="ui_editor_animation_edit_animation_events"><span class="fas fa-fw fa-alarm-clock"></span></a> </div> </div> </div> '),e.put("views/templates/droplist.html",'<div class="btn-group dropDownComboBox" ng-keydown="keyDown($event)"> <button ng-disabled="dpDisabled || !dpOptions || dpOptions.length == 0" type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <div class="ellipsis"><span class="dropIcon" ng-if="selected.icon" ng-class="selected.icon"></span> <div class="dropdown-san-item" translate="{{selected ? selected.label : dpEmptyText | san}}"></div> </div> <span ng-if="dpOptions.length > 0" class="caret"></span> </button> <ul class="dropdown-menu"> <li ng-repeat="option in dpOptions track by $index" ng-click="selectItem(option)" ng-class="{divider:option.type==\'divider\'}"> <a class="ellipsis"> <span ng-if="option.icon" ng-class="option.icon"></span> <div class="dropdown-san-item" translate="{{option.label | san}}"></div> </a> </li> </ul> </div> '),e.put("views/templates/explorequeryactions.html",'<span> <span class="exploreIcons" ng-if="!eqtQuery.custom && !eqtQuery.noicons"> <a class="btn btn-default" ng-click="eqtCallbacks.like(undefined, !eqtSettings.favorites.includes(eqtQuery.name), eqtQuery)" tooltip="ui_browse_explore_tooltip_add_starred"><span class="fas fa-star fa-fw favorite exploreIcon" ng-class="{\'active\':eqtSettings.favorites.includes(eqtQuery.name)}"></span></a> <a class="btn btn-default" ng-click="eqtCallbacks.like(true, undefined, eqtQuery)" tooltip="ui_browse_explore_tooltip_like"><span class="fas fa-thumbs-up fa-fw exploreIcon" ng-class="{\'active\':eqtSettings.liked.includes(eqtQuery.name)}"></span></a> <a class="btn btn-default" ng-click="eqtCallbacks.like(false, undefined, eqtQuery)" tooltip="ui_browse_explore_tooltip_dislike"><span class="fas fa-thumbs-down fa-fw exploreIcon dislike" ng-class="{\'active\':eqtSettings.disliked.includes(eqtQuery.name)}"></span></a> </span> <span class="exploreIcons" ng-if="eqtQuery.custom && !eqtQuery.noicons"> <a class="btn btn-default" ng-click="eqtCallbacks.remove(eqtQuery)" tooltip="ui_browse_explore_tooltip_remove"><span class="fas fa-trash fa-fw exploreIcon"></span></a> </span> <span class="exploreIcons" ng-if="eqtCallbacks.pushExplorePage"> <a ng-click="eqtCallbacks.pushExplorePage(eqtQuery)"><span class="btn btn-default exploreSeeMore" translate="ui_browse_explore_see_more"></span></a> \x3c!-- <a ng-if="query.wallpapers.length > 0" ng-click="eqtSettings.pushExplorePage(eqtQuery)" class="btn btn-default exploreSeeMore"><span translate="ui_browse_explore_see_more"></span></a> --\x3e </span> </span> '),e.put("views/templates/explorequerytitle.html",'<span> <img ng-if="eqtQuery.category==\'creator\'&&eqtUserInfo[eqtQuery.itemid]" ng-src="{{eqtUserInfo[eqtQuery.itemid].avatar}}" class="avatar"> <span ng-bind-html="translatedTitle"></span> </span> '),e.put("views/templates/filemenu.html",'<div class="filemenu"> <div class="btn-group" ng-repeat="item in fmItems track by $index" preview-toggle> <button type="button" class="btn btn-default dropdown-toggle" ng-mouseover="onMouseOver($event)" onclick="this.blur()" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" ng-disabled="item.disabled || fmDisabled" ng-show="!item.hidden"> {{item.label | translate}} </button> \x3c!--         <ul class="dropdown-menu">\r\n            <li ng-repeat="child in item.children track by $index" ng-click="selectItem(option)" ng-class="{separator:!child.label}"><button class="btn" ng-if="child.label">{{child.label}}</button></li> --\x3e \x3c!-- Nested menu TBD --\x3e \x3c!--             <li>\r\n                <a>ASD</a>\r\n                <ul class="dropdown-menu nested">\r\n                    <a>asdf</a>\r\n                </ul>\r\n            </li> --\x3e \x3c!-- </ul> --\x3e </div> </div> '),e.put("views/templates/hotkeyinput.html",'<div class="input-group"> <input type="text" class="form-control ignoreModalFocus hotkeyInput" ng-focus="startHotkeyRecording()" ng-model="hotkeyLabel" ng-class="{\'faintText\':displayFaintText, \'settingsHotkeyLabelError\':showCombinationError}" spellcheck="false"> <div class="input-group-btn"> <button class="btn btn-default" ng-click="clearHotkey()"> <i class="glyphicon glyphicon-remove"></i> </button> </div> </div> '),e.put("views/templates/knob.html",'<span class="knob"> <span class="knobBg"> </span> <span class="knobPointer"> </span> <span class="knobInput" tabindex="0"> </span> </span>'),e.put("views/templates/nestedproperties.html",'<div class="nestedScriptGroup" ng-if="activeProperty.linkScriptProperties.length > 0"> <div ng-repeat="scriptProperty in activeProperty.linkScriptProperties | orderBy:\'order\'" class="editorPropertyRow" style="font-size:100%;width:100%"> <div class="propertyRow"> <div class="typeNameColumn" ng-click="onScriptLabelClick(scriptProperty, activeProperty)" ng-right-click="onNestedLabelRightClick($event, scriptProperty, activeProperty)"> \x3c!--  ng-click="onLabelClick(activeProperty)" > --\x3e <div class="keyValueLabel"> <span class="keyValueLabelText">{{scriptProperty.label | translate}}</span> <div ng-if="!scriptProperty.linkUser" ng-switch on="scriptProperty.type" class="checkboxInlay"> <div ng-switch-when="checkbox"> <checkbox cb-checked="scriptProperty.value" cb-changed="sendNestedAssetPropertyChange(scriptProperty, pOwner, activeProperty)"></checkbox> </div> </div> <button ng-if="hasNestedBindings(scriptProperty)" class="btn btn-sm keyValueLabelCog" ng-class="{\'btn-primary\':bindingsNestedActive(scriptProperty), \'btn-default\':!bindingsNestedActive(scriptProperty)}" ng-click="onNestedLabelRightClick($event, scriptProperty, activeProperty)"><span class="fas fa-cog"></span></button> </div> </div> <div ng-if="!scriptProperty.user" ng-switch on="scriptProperty.type" class="typeValueColumn"> <div ng-switch-when="slider" class="editorPropertySliderPropertyRow"> <div> <rzslider rz-slider-model="scriptProperty.value" rz-slider-options="{id:activeProperty.key, ceil:scriptProperty.max, floor:scriptProperty.min, enforceStep:false, precision:2, step:0.01, onStart:sendAssetPropertyChangeSliderStart, onChange:sendAssetPropertyChangeSliderChange, onEnd:sendAssetPropertyChangeSliderEnd}"></rzslider> </div> <div> <input class="fullWidth" type="number" onclick="this.select()" ng-model="scriptProperty.value" ng-change="sendNestedAssetPropertyChange(scriptProperty, pOwner, activeProperty, {save:false})" ng-blur="sendNestedAssetPropertyChange(scriptProperty, pOwner, activeProperty)"> </div> </div> <div ng-switch-when="sliderint" class="editorPropertySliderPropertyRow"> <div> <rzslider rz-slider-model="scriptProperty.value" rz-slider-options="{id:activeProperty.key, ceil:scriptProperty.max, floor:scriptProperty.min, onStart:sendAssetPropertyChangeSliderStart, onChange:sendAssetPropertyChangeSliderChange, onEnd:sendAssetPropertyChangeSliderEnd}"></rzslider> </div> <div> <input class="fullWidth" type="number" onclick="this.select()" ng-model="scriptProperty.value" ng-change="sendNestedAssetPropertyChange(scriptProperty, pOwner, activeProperty, {save:false})" ng-blur="sendNestedAssetPropertyChange(scriptProperty, pOwner, activeProperty)"> </div> </div> <div ng-switch-when="paragraph"> <textarea ng-model="scriptProperty.value" ng-change="sendNestedAssetPropertyChange(scriptProperty, pOwner, activeProperty, {save:false})" ng-blur="sendNestedAssetPropertyChange(scriptProperty, pOwner, activeProperty)"></textarea> </div> <div ng-switch-when="combo" class="comboPropertyRow"> <droplist dp-options="scriptProperty.options" dp-selected="scriptProperty.value" dp-change="sendNestedAssetPropertyChange(scriptProperty, pOwner, activeProperty)"></droplist> </div> <div ng-switch-when="color" class="typeColor"> <div ng-if="scriptProperty.normalized"> <spectrum-colorpicker options="colorPickerSettings" ng-model="scriptProperty.value" on-change="sendNestedAssetPropertyChange(scriptProperty, pOwner, activeProperty, {save:false})" on-hide="sendNestedAssetPropertyChangeColorEnd(scriptProperty, pOwner, activeProperty)" on-show-options="{update:false}" vec-color-converter="true"></spectrum-colorpicker> </div> <div ng-if="!scriptProperty.normalized"> <spectrum-colorpicker options="colorPickerSettings" ng-model="scriptProperty.value" on-change="sendNestedAssetPropertyChange(scriptProperty, pOwner, activeProperty, {save:false})" on-hide="sendNestedAssetPropertyChangeColorEnd(scriptProperty, pOwner, activeProperty)" on-show-options="{update:false}" vec-color-converter="false"></spectrum-colorpicker> </div> </div> </div> </div> </div> </div> '),e.put("views/templates/preview.html",'<div ng-attr-style="padding: {{previewPadding}}"> <embed ng-mouse-wheel="mouseWheel($event, delta)" ng-keydown="keyDown($event)" ng-keyup="keyUp($event)" id="previewPlugin" type="application/x-ppapi-window-stream"> <span id="pluginCrossHairOverlay" ng-mouse-wheel="mouseWheel($event, delta)" ng-keydown="keyDown($event)" ng-keyup="keyUp($event)" style="position: absolute; width:100%;height: 100%; left: 0px; top: 0px; cursor: crosshair !important;display:none;"></span> </div> '),e.put("views/templates/propertylist.html",'<div ng-repeat="property in pList track by $index" class="editorPropertyRow" ng-class="property.class" ng-if="!property.condition || evalCondition(property.condition)"> <div class="propertyRow"> <div class="typeNameColumn" ng-click="onLabelClick(property)" ng-right-click="onLabelRightClick($event, property)"> <div class="keyValueLabel"> <span class="keyValueLabelText">{{property.name | translate}}</span> <div ng-if="!property.linkUser" ng-switch on="property.type" class="checkboxInlay"> <div ng-switch-when="checkbox"> <checkbox cb-checked="property.value" cb-changed="pCtrl.sendAssetPropertyChange(pOwner, property)"></checkbox> </div> <div ng-switch-when="checkboxbit"> <checkbox cb-checked="property.value" cb-type="bit" cb-bit="property.bit" cb-changed="pCtrl.sendAssetPropertyChange(pOwner, property)" cb-recalculate-bits="recalculateBitFlags(property.key)"></checkbox> </div> </div> <button ng-if="hasBindings(property)" class="btn btn-sm keyValueLabelCog" ng-class="{\'btn-primary\':bindingsActive(property), \'btn-default\':!bindingsActive(property)}" ng-click="onLabelRightClick($event, property)" ng-disabled="property.disabled || property.disabledcondition && $eval(property.disabledcondition)"><span class="fas fa-cog"></span></button> </div> </div> <div ng-if="!property.linkUser" ng-switch on="property.type" class="typeValueColumn"> <div ng-switch-when="readonly" class="typeReadonly"> {{property.value | translate}} </div> <div ng-switch-when="readonlycolor" class="typeReadonlyColor" ng-attr-style="background-color:{{property.value}}"> </div> <div ng-switch-when="titleVisibleLock" class="visLockTitle"> <property-title-controls p-root="property" p-properties="{visible:findProperty(\'visible\'), locktransforms:findProperty(\'locktransforms\')}" p-ctrl="titleControls"></property-title-controls> </div> \x3c!--             <div ng-switch-when="titleIcon">\r\n                <span ng-class="property.icon"></span>\r\n            </div> --\x3e <div ng-switch-when="nestedlink" class="typeNestedLink"> <a ng-click="pCtrl.navigateProperty(property.key, property.value)"><span class="fas fa-angle-double-right"></span> {{property.name}}</a> </div> <div ng-switch-when="string"> <input type="text" ng-model="property.value" ng-change="pCtrl.sendAssetPropertyChange(pOwner, property)" ng-model-options="{updateOn: \'default blur\', debounce: {\'default\': property.debounce, \'blur\': 0}}"> </div> <div ng-switch-when="paragraph"> <textarea ng-model="property.value" ng-change="pCtrl.sendAssetPropertyChange(pOwner, property)"></textarea> </div> <div ng-switch-when="number"> <input type="number" onclick="this.select()" ng-model="property.value" ng-change="sendAssetPropertyChange(pOwner, property)" ng-model-options="{updateOn: \'default blur\', debounce: {\'default\': property.debounce, \'blur\': 0}}"> </div> <div ng-switch-when="checkbox" class="propertyCheckboxOutside"> <checkbox cb-checked="property.value" cb-changed="pCtrl.sendAssetPropertyChange(pOwner, property)"></checkbox> </div> <div ng-switch-when="checkboxbit" class="propertyCheckboxOutside"> <checkbox cb-checked="property.value" cb-type="bit" cb-bit="property.bit" cb-changed="pCtrl.sendAssetPropertyChange(pOwner, property)" cb-recalculate-bits="recalculateBitFlags(property.key)"></checkbox> </div> <div ng-switch-when="vec2"> <vec-component-input vci-mode="property.mode" vci-options="property" vci-owner="pOwner" vci-count="2" ng-model="property.value" ng-change="sendAssetPropertyChange(pOwner, property)" vci-slider-options="{id:property.key, controlSave:linkedControlSave, onStart:linkedSliderStart, onEnd:linkedSliderEnd}"></vec-component-input> </div> <div ng-switch-when="vec3"> <vec-component-input vci-mode="property.mode" vci-options="property" ng-model="property.value" ng-change="sendAssetPropertyChange(pOwner, property)" vci-disabled="property.disabledcondition && $eval(property.disabledcondition)" vci-slider-options="{id:property.key, controlSave:linkedControlSave, onEnd:linkedSliderEnd}"></vec-component-input> </div> <div ng-switch-when="vec4"> <vec-component-input vci-mode="property.mode" vci-options="property" vci-count="4" ng-model="property.value" ng-change="sendAssetPropertyChange(pOwner, property)" vci-slider-options="{id:property.key, controlSave:linkedControlSave, onEnd:linkedSliderEnd}"></vec-component-input> </div> <div ng-switch-when="color" class="typeColor"> <div ng-if="property.normalized"> <spectrum-colorpicker options="colorPickerSettings" ng-model="property.value" on-change="pCtrl.sendAssetPropertyChange(pOwner, property, {save:false})" on-hide="sendAssetPropertyChangeColorEnd(pOwner, property)" on-show-options="{update:false}" vec-color-converter="true"></spectrum-colorpicker> </div> <div ng-if="!property.normalized"> <spectrum-colorpicker options="colorPickerSettings" ng-model="property.value" on-change="pCtrl.sendAssetPropertyChange(pOwner, property, {save:false})" on-hide="sendAssetPropertyChangeColorEnd(pOwner, property)" on-show-options="{update:false}" vec-color-converter="false"></spectrum-colorpicker> </div> </div> <div ng-switch-when="slider" class="editorPropertySliderPropertyRow"> <div> <rzslider rz-slider-model="property.value" rz-slider-options="{id:property.key, ceil:property.max, floor:property.min, enforceStep:false, disabled:property.disabled, precision:2, step:0.01, onStart:sendAssetPropertyChangeSliderStart, onChange:sendAssetPropertyChangeSliderChange, onEnd:sendAssetPropertyChangeSliderEnd}"></rzslider> </div> <div> <input class="fullWidth" truncate-float type="number" onclick="this.select()" ng-disabled="property.disabled" ng-model="property.value" ng-change="sendAssetPropertyChange(pOwner, property)"> </div> </div> <div ng-switch-when="sliderint" class="editorPropertySliderPropertyRow"> <div> <rzslider rz-slider-model="property.value" rz-slider-options="{id:property.key, ceil:property.max, floor:property.min, onStart:sendAssetPropertyChangeSliderStart, onChange:sendAssetPropertyChangeSliderChange, onEnd:sendAssetPropertyChangeSliderEnd}"></rzslider> </div> <div> <input class="fullWidth" type="number" onclick="this.select()" ng-model="property.value" ng-change="sendAssetPropertyChange(pOwner, property)"> </div> </div> <div ng-switch-when="combo" class="comboPropertyRow"> <droplist dp-options="property.options" dp-selected="property.value" dp-change="pCtrl.sendAssetPropertyChange(pOwner, property)"></droplist> </div> <div ng-switch-when="font" class="comboPropertyRow" native-drop-target="importFontFileToProperty(property, droppedFiles)" ndt-extension-tag="\'font\'" ndt-desired-modal-depth="pModalDepth"> <droplist dp-options="pCtrl.getFonts()" dp-selected="property.value" dp-change="pCtrl.sendAssetPropertyChange(pOwner, property)"></droplist> <div style="margin-top:10px"> <a class="btn btn-primary fullWidth" ng-click="importFontFileToProperty(property)"><span class="glyphicon glyphicon-import"></span> <span translate="ui_editor_properties_import"></span></a> </div> </div> <div ng-switch-when="knob" class="editorPropertySliderPropertyRow"> <div> <knob ng-model="property.value" ng-change="sendAssetPropertyChangeSliderChange(property.key)" k-on-start="sendAssetPropertyChangeSliderStart(property.key)" k-on-end="sendAssetPropertyChangeSliderEnd(property.key)"></knob> </div> <div> <input class="fullWidth" degree-converter truncate-float="4" type="number" onclick="this.select()" ng-model="property.value" ng-change="sendAssetPropertyChange(pOwner, property)"> </div> </div> <div ng-switch-when="texturePreview" class="editorTexturePreviewPropertyRow"> <div class="texturePreview"> <img ng-src="{{getTexturePreview(property, property.value) ? texturePreviews[property.id] : emptyPixel}}"> </div> </div> <div ng-switch-when="texture" class="editorTexturePropertyRow" native-drop-target="pCtrl.importTextureFile(property.material, property.textureindex, property.format, droppedFiles)" ndt-extension-tag="\'texture\'" ndt-internal-condition="pCtrl.textureDropCondition" ndt-internal-function="pCtrl.textureDropped(property.material, property.textureindex, data)" ndt-desired-modal-depth="pModalDepth"> <div class="texturePreview"> <img ng-src="{{getTexturePreview(property, property.value) ? texturePreviews[property.id] : emptyPixel}}"> </div> <div class="textureBtn"> <span>{{property.name | translate}}</span> <div> <button class="btn btn-sm btn-primary fullWidth" ng-if="!property.mode" ng-click="pCtrl.openMaterialBrowser(property)"><span class="fas fa-folder-open"></span> {{\'ui_editor_properties_browse\' | translate}}</button> <button class="btn btn-sm btn-primary fullWidth" ng-if="property.mode" ng-disabled="property.iserror" ng-click="pCtrl.beginPaint(property)"><span class="fas fa-paint-brush"></span> {{\'ui_editor_properties_paint\' | translate}}</button> <button class="btn btn-sm btn-primary" ng-if="property.mode" ng-click="pCtrl.openMaterialBrowser(property)" tooltip="ui_editor_properties_browse"><span class="fas fa-folder-open"></span></button> <button class="btn btn-sm btn-danger" tooltip="ui_editor_properties_reset" ng-click="pCtrl.resetTextureFile(property.material, property.textureindex)"><span class="fas fa-fw fa-times"></span></button> </div> <div> \x3c!-- <button class="btn btn-sm btn-default fullWidth" tooltip="ui_editor_properties_texture_tooltip_browse" ng-click="pCtrl.openMaterialBrowser(property.path)"><span class="fas fa-folder-open"></span></button> --\x3e <button class="btn btn-sm btn-default fullWidth" tooltip="ui_editor_properties_import" ng-click="pCtrl.importTextureFile(property.material, property.textureindex, property.format)"><span class="glyphicon glyphicon-import"></span></button> <button class="btn btn-sm btn-default fullWidth" tooltip="ui_editor_properties_export" ng-click="pCtrl.exportTextureFile(property.value)" ng-disabled="property.iserror"><span class="glyphicon glyphicon-export"></span></button> <button class="btn btn-sm btn-default fullWidth" ng-if="property.mode && property.canBeDuplicated" ng-click="pCtrl.duplicateTextureFile(property.material, property.textureindex)" tooltip="ui_editor_properties_duplicate_texture"><span class="fas fa-copy"></span></button> \x3c!-- Show settings when paint disabled --\x3e <button class="btn btn-sm btn-default fullWidth" ng-if="!property.mode" tooltip="ui_editor_properties_settings" ng-disabled="property.iserror" ng-click="pCtrl.navigateProperty(property.key, property.id)"><span class="fas fa-cog"></span></button> </div> </div> </div> <div ng-switch-when="effects"> <div class="treeViewPropertyRowButtons"> <button class="btn btn-primary" ng-click="pCtrl.addPropertyEffect(pOwner, property)"><span class="fas fa-plus"></span> {{\'ui_editor_properties_effects_add\' | translate}}</button> <button class="btn btn-primary" ng-click="pCtrl.editPropertyEffect(selectedEffect.item)" ng-disabled="property.value.indexOf(selectedEffect.item) === -1"><span class="fas fa-edit"></span> {{\'ui_editor_properties_effects_edit\' | translate}}</button> </div> <div class="treeViewPropertyRow treeViewPropertyRowSmall"> <tree-view class="treeViewRoot" tv-drag-drop-tag="effect" tv-drag-drop-enabled="true" tv-data="property.value" tv-mode="\'scene\'" tv-selected-item="selectedEffect" tv-remove-clicked="pCtrl.onPropertyEffectRemoved(property, item)" tv-element-dragged="pCtrl.onPropertyEffectDragged(from, to)" tv-element-double-clicked="pCtrl.editPropertyEffect(selectedEffect.item)" tv-send-asset-property-change="pCtrl.sendAssetPropertyChange({id: resource.material}, property)" tv-context-menu="pCtrl.contextMenuPropertyEffect($event, property, item)"></tree-view> </div> </div> <div ng-switch-when="particle"> <a class="btn btn-primary fullWidth" ng-click="pCtrl.editParticle(pOwner, property)"> {{\'ui_editor_properties_effects_edit\' | translate}} </a> </div> <div ng-switch-when="particleinstancereset"> <a class="btn btn-default fullWidth propertyButton" ng-click="sendMultipleProperties(pOwner, property)"> {{\'ui_editor_properties_effects_reset\' | translate}} </a> </div> <div ng-switch-when="sounds"> <div class="treeViewPropertyRow treeViewPropertyRowSmall treeViewSoundPropertyRow"> <tree-view class="treeViewRoot" tv-drag-drop-tag="renderable" tv-drag-drop-enabled="true" tv-data="property.value" tv-mode="\'scene\'" tv-selected-item="selectedEffect" tv-remove-clicked="pCtrl.onPropertySoundRemoved(property, item)" tv-element-dragged="pCtrl.onPropertySoundDragged(from, to)" tv-new-element-added="pCtrl.onPropertySoundAssetDropped(property, item, index)"></tree-view> </div> <div class="treeViewPropertyRowButtons"> <button class="btn btn-primary" ng-click="pCtrl.addPropertySound(pOwner, property)"><span class="fas fa-plus"></span> {{\'ui_editor_properties_effects_add\' | translate}}</button> </div> </div> <div ng-switch-when="horizontalalign"> <div> <a class="btn" ng-class="{\'btn-default\':property.value!=\'left\',\'btn-primary\':property.value==\'left\'}" ng-click="property.value=\'left\';sendAssetPropertyChange(pOwner, property)"><span class="far fa-align-left"></span></a> <a class="btn" ng-class="{\'btn-default\':property.value!=\'center\',\'btn-primary\':property.value==\'center\'}" ng-click="property.value=\'center\';sendAssetPropertyChange(pOwner, property)"><span class="far fa-align-center"></span></a> <a class="btn" ng-class="{\'btn-default\':property.value!=\'right\',\'btn-primary\':property.value==\'right\'}" ng-click="property.value=\'right\';sendAssetPropertyChange(pOwner, property)"><span class="far fa-align-right"></span></a> </div> </div> <div ng-switch-when="verticalalign"> <div> <a class="btn" ng-class="{\'btn-default\':property.value!=\'center\',\'btn-primary\':property.value==\'center\'}" ng-click="property.value=\'center\';sendAssetPropertyChange(pOwner, property)"><span class="far fa-text-height"></span></a> <a class="btn" ng-class="{\'btn-default\':property.value!=\'top\',\'btn-primary\':property.value==\'top\'}" ng-click="property.value=\'top\';sendAssetPropertyChange(pOwner, property)"><span class="far fa-arrow-to-top"></span></a> <a class="btn" ng-class="{\'btn-default\':property.value!=\'bottom\',\'btn-primary\':property.value==\'bottom\'}" ng-click="property.value=\'bottom\';sendAssetPropertyChange(pOwner, property)"><span class="far fa-arrow-to-bottom"></span></a> </div> </div> <div ng-switch-when="anchor"> <div> <a class="btn" ng-class="{\'btn-default\':property.value!=\'topleft\',\'btn-primary\':property.value==\'topleft\'}" ng-click="toggleStringProperty(property, \'topleft\')"><span class="fas fa-location-arrow fa-fw fa-rotate-270"></span></a> <a class="btn" ng-class="{\'btn-default\':property.value!=\'top\',\'btn-primary\':property.value==\'top\'}" ng-click="toggleStringProperty(property, \'top\')"><span class="far fa-arrow-up fa-fw"></span></a> <a class="btn" ng-class="{\'btn-default\':property.value!=\'topright\',\'btn-primary\':property.value==\'topright\'}" ng-click="toggleStringProperty(property, \'topright\')"><span class="fas fa-location-arrow fa-fw"></span></a> </div> <div style="margin-top:5px"> <a class="btn" ng-class="{\'btn-default\':property.value!=\'left\',\'btn-primary\':property.value==\'left\'}" ng-click="toggleStringProperty(property, \'left\')"><span class="far fa-arrow-left fa-fw"></span></a> <a class="btn" ng-class="{\'btn-default\':property.value!=\'center\',\'btn-primary\':property.value==\'center\'}" ng-click="toggleStringProperty(property, \'center\')"><span class="fas fa-circle fa-fw"></span></a> <a class="btn" ng-class="{\'btn-default\':property.value!=\'right\',\'btn-primary\':property.value==\'right\'}" ng-click="toggleStringProperty(property, \'right\')"><span class="far fa-arrow-right fa-fw"></span></a> </div> <div style="margin-top:5px"> <a class="btn" ng-class="{\'btn-default\':property.value!=\'bottomleft\',\'btn-primary\':property.value==\'bottomleft\'}" ng-click="toggleStringProperty(property, \'bottomleft\')"><span class="fas fa-location-arrow fa-fw fa-rotate-180"></span></a> <a class="btn" ng-class="{\'btn-default\':property.value!=\'bottom\',\'btn-primary\':property.value==\'bottom\'}" ng-click="toggleStringProperty(property, \'bottom\')"><span class="far fa-arrow-down fa-fw"></span></a> <a class="btn" ng-class="{\'btn-default\':property.value!=\'bottomright\',\'btn-primary\':property.value==\'bottomright\'}" ng-click="toggleStringProperty(property, \'bottomright\')"><span class="fas fa-location-arrow fa-fw fa-rotate-90"></span></a> </div> </div> <div ng-switch-when="alignment" ng-class="{\'disabledAllChildren\':property.disabledcondition && $eval(property.disabledcondition)}"> <div> <a class="btn" ng-class="{\'btn-default\':property.value!=\'topleft\',\'btn-primary\':property.value==\'topleft\'}" ng-click="setStringProperty(property, \'topleft\')"><span class="fas fa-location-arrow fa-fw fa-rotate-270"></span></a> <a class="btn" ng-class="{\'btn-default\':property.value!=\'top\',\'btn-primary\':property.value==\'top\'}" ng-click="setStringProperty(property, \'top\')"><span class="far fa-arrow-up fa-fw"></span></a> <a class="btn" ng-class="{\'btn-default\':property.value!=\'topright\',\'btn-primary\':property.value==\'topright\'}" ng-click="setStringProperty(property, \'topright\')"><span class="fas fa-location-arrow fa-fw"></span></a> </div> <div style="margin-top:5px"> <a class="btn" ng-class="{\'btn-default\':property.value!=\'left\',\'btn-primary\':property.value==\'left\'}" ng-click="setStringProperty(property, \'left\')"><span class="far fa-arrow-left fa-fw"></span></a> <a class="btn" ng-class="{\'btn-default\':property.value!=\'center\',\'btn-primary\':property.value==\'center\'}" ng-click="setStringProperty(property, \'center\')"><span class="fas fa-circle fa-fw"></span></a> <a class="btn" ng-class="{\'btn-default\':property.value!=\'right\',\'btn-primary\':property.value==\'right\'}" ng-click="setStringProperty(property, \'right\')"><span class="far fa-arrow-right fa-fw"></span></a> </div> <div style="margin-top:5px"> <a class="btn" ng-class="{\'btn-default\':property.value!=\'bottomleft\',\'btn-primary\':property.value==\'bottomleft\'}" ng-click="setStringProperty(property, \'bottomleft\')"><span class="fas fa-location-arrow fa-fw fa-rotate-180"></span></a> <a class="btn" ng-class="{\'btn-default\':property.value!=\'bottom\',\'btn-primary\':property.value==\'bottom\'}" ng-click="setStringProperty(property, \'bottom\')"><span class="far fa-arrow-down fa-fw"></span></a> <a class="btn" ng-class="{\'btn-default\':property.value!=\'bottomright\',\'btn-primary\':property.value==\'bottomright\'}" ng-click="setStringProperty(property, \'bottomright\')"><span class="fas fa-location-arrow fa-fw fa-rotate-90"></span></a> </div> </div> <div ng-switch-when="editablefile"> <a class="btn btn-primary" ng-click="pCtrl.editTextFile(property)" translate="ui_editor_properties_effects_edit"></a> </div> <div ng-switch-when="filler"> </div> <div ng-switch-when="divider"> <hr> </div> <div ng-switch-when="navigate"> <button class="btn fullWidth" ng-disabled="property.disabled" ng-class="property.btnclass||\'btn-primary\'" ng-click="pCtrl.navigateProperty(property.key, property.value)"><span ng-if="property.icon" class="fa fa-fw" ng-class="property.icon"></span> {{property.label|translate}}</button> </div> <div ng-switch-when="button"> <button class="btn fullWidth" ng-disabled="property.disabled" ng-class="property.btnclass||\'btn-primary\'" ng-click="pCtrl[property.function](property, this)"><span ng-if="property.icon" class="fa fa-fw" ng-class="property.icon"></span> {{property.label|translate}}</button> </div> <div ng-switch-when="boneweights" class="editorPropertyBoneWeights"> <div class="editorPropertyBoneLabels"> <div class="bones"> <div class="txt"> </div> </div> <div class="rows" ng-repeat="vertex in property.value.vertices" ng-class="vertex.class"> <div class="txt"> {{vertex.label}} </div> </div> </div> <div class="editorPropertyBoneVertexContainer"> <div class="editorPropertyBoneVertices"> <div class="bones"> <div class="bone" ng-repeat="bone in property.value.bones" ng-attr-style="background-color:{{bone.color}}"> {{bone.label}} </div> </div> <div class="rows" ng-repeat="vertex in property.value.vertices" ng-class="vertex.class"> <div class="weight" ng-repeat="weight in vertex.weights"> <input type="number" onclick="this.select()" ng-model="weight.weight" ng-change="sendAssetPropertyChangeWeights(pOwner, property, {vertex:vertex.id, bone:weight.bone, weight:weight.weight, all:weight.all})"> </div> </div> </div> </div> </div> <div ng-switch-when="itemlist"> <div class="treeViewPropertyRowButtons"> <button class="btn btn-primary" ng-click="pCtrl[property.objectcontroller].add(pOwner, property)"><span class="fas fa-plus"></span> {{\'ui_editor_properties_add\' | translate}}</button> <button class="btn btn-primary" ng-click="pCtrl[property.objectcontroller].edit(selectedItem.item)" ng-disabled="property.value.indexOf(selectedItem.item) === -1"><span class="fas fa-edit"></span> {{\'ui_editor_properties_edit\' | translate}}</button> </div> <div class="treeViewPropertyRow"> <tree-view class="treeViewRoot" tv-drag-drop-tag="unknown" tv-drag-drop-enabled="true" tv-data="property.value" tv-mode="\'scene\'" tv-selected-item="selectedItem" tv-remove-clicked="pCtrl[property.objectcontroller].remove(property, item)" tv-element-dragged="pCtrl[property.objectcontroller].drag(from, to)" tv-element-double-clicked="pCtrl[property.objectcontroller].edit(selectedItem.item)" tv-context-menu="pCtrl[property.objectcontroller].contextMenu($event, property, item)" tv-send-asset-property-change="pCtrl.sendAssetPropertyChange(resource, property)"></tree-view> </div> </div> <div ng-switch-when="flatlist"> <div class="treeViewPropertyRowButtons"> <button class="btn btn-primary" ng-click="pCtrl[property.objectcontroller].save(pOwner, property, selectedFlatItem.item)"><span class="fas fa-save"></span> {{\'ui_editor_properties_save\' | translate}}</button> <button class="btn btn-primary" ng-click="pCtrl[property.objectcontroller].load(pOwner, selectedFlatItem.item)" ng-disabled="property.value.indexOf(selectedFlatItem.item) === -1"><span class="fas fa-folder-open"></span> {{\'ui_editor_properties_load\' | translate}}</button> </div> <div class="treeViewPropertyRow" style="height: 100px;"> <tree-view class="treeViewRoot" tv-drag-drop-tag="unknown" tv-drag-drop-enabled="true" tv-data="property.value" tv-mode="\'scene\'" tv-selected-item="selectedFlatItem" tv-remove-clicked="pCtrl[property.objectcontroller].remove(pOwner, property, item)" tv-element-dragged="pCtrl[property.objectcontroller].drag(pOwner, from, to)" tv-element-double-clicked="pCtrl[property.objectcontroller].load(pOwner, selectedFlatItem.item)" tv-context-menu="pCtrl[property.objectcontroller].contextMenu($event, property, item)" tv-multi-select-mode="deselect"></tree-view> </div> </div> </div> </div> <nested-properties></nested-properties> </div> '),e.put("views/templates/propertylisttitlecontrols.html",'<div class="editorPropertyTitle"> <span class="title" ng-right-click="pRoot.enablebindings && titleControls.onPropertyRightClick($event, pProperties.visible)">{{pRoot.name | translate}}</span> <div ng-if="!pProperties.visible.linkUser"> <a class="fas fa-fw fa-eye titleControl" ng-if="pProperties.visible.value" ng-click="toggleVisible(false)" ng-right-click="pRoot.enablebindings && titleControls.onPropertyRightClick($event, pProperties.visible)"></a> <a class="fas fa-fw fa-eye-slash titleControl" ng-if="!pProperties.visible.value" ng-click="toggleVisible(true)" ng-right-click="pRoot.enablebindings && titleControls.onPropertyRightClick($event, pProperties.visible)"></a> </div> <div ng-if="pProperties.locktransforms"> <a class="fas fa-fw fa-lock-open titleControl" ng-if="!pProperties.locktransforms.value" ng-click="toggleLock(true)"></a> <a class="fas fa-fw fa-lock titleControl warningText" ng-if="pProperties.locktransforms.value" ng-click="toggleLock(false)"></a> </div> <a ng-if="pRoot.enablebindings" class="btn keyValueLabelCog" ng-class="{\'btn-primary\':titleControls.bindingsActive(pProperties.visible), \'btn-default\':!titleControls.bindingsActive(pProperties.visible)}" ng-click="titleControls.onPropertyRightClick($event, pProperties.visible)"><span class="fas fa-cog"></span></a> </div> '),e.put("views/templates/radiobutton.html",'<div class="checkBoxBase"> <div ng-click="toggle()" class="checkBoxOuter" ng-class="{\'dis\':rbDisabled}"> <span class="fas fa-circle checkBoxBackground"></span> <span ng-if="rbValue == model" class="fas fa-dot-circle checkBox"></span> <span ng-if="rbValue != model" class="far fa-circle checkBox"></span> </div> <div ng-click="toggle()" ng-if="rbTitle" class="checkBoxTitle">{{rbTitle | translate}}</div> </div> '),e.put("views/templates/ratingtable.html",'<div> \x3c!-- \t<div class="ratingTableLegend ratingTableColors">\r\n\t\t<div class="everyone"><span>E</span> = <span translate="ui_workshop_tags_rating_everyone"></span></div>\r\n\t\t<div class="questionable"><span>Q</span> = <span translate="ui_workshop_tags_rating_questionable"></span></div>\r\n\t\t<div class="mature"><span>M</span> = <span translate="ui_workshop_tags_rating_mature"></span></div>\r\n\t\t<div class="ban"><span>B</span> = <span translate="ui_workshop_tags_rating_ban"></span></div>\r\n\t</div> --\x3e <div class="ratingTableBody ratingTableColors" ng-class="{everyoneH:highlight===\'Everyone\', questionableH:highlight===\'Questionable\', matureH:highlight===\'Mature\', banH:highlight===\'Ban\'}"> <div class="ratingFooterRow" translate="ui_rating_table_preview_info"></div> <div class="ratingTableInner"> <div class="ratingTableRow"> <div></div> <div class="header" translate="ui_rating_table_header_photographic"></div> <div class="header" translate="ui_rating_table_header_cgi"></div> </div> <div class="ratingTableRow"> <div class="info infoBan" translate="ui_rating_table_hardcore_sexual_acts"></div> <div class="ban" translate="ui_workshop_tags_rating_ban"></div> <div class="ban" translate="ui_workshop_tags_rating_ban"></div> </div> <div class="ratingTableRow"> <div class="info infoBan" translate="ui_rating_table_excessive_gore"></div> <div class="ban" translate="ui_workshop_tags_rating_ban"></div> <div class="ban" translate="ui_workshop_tags_rating_ban"></div> </div> <div class="ratingTableRow"> <div class="info infoMature" translate="ui_rating_table_nudity_explicit"></div> <div class="ban" translate="ui_workshop_tags_rating_ban"></div> <div class="mature" translate="ui_workshop_tags_rating_mature"></div> </div> <div class="ratingTableRow"> <div class="info infoMature" translate="ui_rating_table_violence_mild_blood"></div> <div class="ban" translate="ui_workshop_tags_rating_ban"></div> <div class="mature" translate="ui_workshop_tags_rating_mature"></div> </div> <div class="ratingTableRow"> <div class="info infoQuestionable" translate="ui_rating_table_partial_nudity_suggestive"></div> <div class="questionable" translate="ui_workshop_tags_rating_questionable"></div> <div class="questionable" translate="ui_workshop_tags_rating_questionable"></div> </div> <div class="ratingTableRow"> <div class="info infoEveryone" translate="ui_rating_table_suitable_for_everyone"></div> <div class="everyone" translate="ui_workshop_tags_rating_everyone"></div> <div class="everyone" translate="ui_workshop_tags_rating_everyone"></div> </div> </div> </div> </div> '),e.put("views/templates/scriptconsole.html",'<div class="scriptLog"> <div class="scriptLogBox"> </div> <div class="scriptLogButtons"> <a ng-click="clearLog()" tooltip="ui_editor_script_clear_log" class="btn btn-default"><span class="fas fa-trash"></span></a> <a ng-click="scEditorSettings.scriptconsoleautoclear=!scEditorSettings.scriptconsoleautoclear" tooltip="ui_editor_script_clear_log_on_run" class="btn btn-default" ng-class="{\'btn-primary\':scEditorSettings.scriptconsoleautoclear, \'btn-default\':!scEditorSettings.scriptconsoleautoclear}"><span class="fas fa-recycle"></span></a> <a ng-click="scEditorSettings.scriptconsoleautoscroll=!scEditorSettings.scriptconsoleautoscroll" tooltip="ui_editor_script_auto_scroll" class="btn" ng-class="{\'btn-primary\':scEditorSettings.scriptconsoleautoscroll, \'btn-default\':!scEditorSettings.scriptconsoleautoscroll}"><span class="fas fa-sort-size-down-alt"></span></a> </div> </div>'),e.put("views/templates/titlebar.html",'<div class="titlebar" ng-hide="hideTitle"> <button class="titlebarBtn closeButton" ng-click="closeWindow()"> <div class="dwm icon-close"> </div> </button> <button ng-if="!isDialog" class="titlebarBtn windowButton" ng-disabled="!maximizeEnabled" onclick="window.ui.maximize()"> <div class="dwm" ng-class="{\'icon-maximize\':!isMaximized,\'icon-window\':isMaximized}"> </div> </button> <button ng-if="!isDialog" class="titlebarBtn windowButton" onclick="window.ui.minimize()"> <div class="dwm icon-minimize"> </div> </button> <div class="title"> <span ng-bind="captionPrefix"></span><span translate="{{caption}}" translate-values="captionValues"></span> </div> </div> '),e.put("views/templates/userproperties.html",'<div> <div class="editorUserPropertyList"> <div class="editorUserPropertyRow" ng-if="properties.length>0"> <span ng-if="upSelectedProperty" style="width: 56px" translate="ui_editor_user_properties_link"></span> <span class="editorUserPropertyRowReadOnly" translate="ui_editor_user_properties_title"></span> <span class="editorUserPropertyRowReadOnly" style="width:210px" translate="ui_editor_user_properties_value"></span> <span class="editorUserPropertyRowReadOnly" translate="ui_editor_user_properties_order"></span> </div> <div ng-repeat="prop in properties" class="editorUserPropertyRow" ng-show="isTypeVisible(prop.type)"> <radiobutton ng-if="upSelectedProperty" ng-model="upSelectedProperty.selected" rb-value="prop.key" style="padding: 0 6px 0 0; min-width: 50px;"></radiobutton> <span ng-if="activeProperties && !activeProperties.includes(prop.key)" tooltip="ui_editor_user_properties_select_unused_warning" class="fas fa-exclamation-triangle warningText editorUserPropertyRowWarning"></span> <div ng-if="isPropertyReadOnly(prop)" class="editorUserPropertyRowColumn editorUserPropertyRowReadOnly">{{prop.text | translate}}</div> <input ng-if="!isPropertyReadOnly(prop)" type="text" class="form-control editorUserPropertyRowColumn" ng-model="prop.text"> <div ng-if="prop.type === \'color\'" class="editorUserPropertyRowColumn"> <spectrum-colorpicker options="colorPickerOptions" ng-model="prop.value" vec-color-converter on-show-options="{update:false}"></spectrum-colorpicker> </div> <div ng-if="prop.type === \'slider\'" class="editorUserPropertyRowColumn editorUserPropertyRowSlider"> <input type="number" class="form-control" ng-model="prop.value"> </div> <div ng-if="prop.type === \'combo\'" class="editorUserPropertyRowColumn editorUserPropertyRowDropList"> <droplist class="editorUserPropertyTypeDropDown" dp-options="prop.options" dp-selected="prop.value"></droplist> </div> <div ng-if="prop.type === \'bool\'" class="editorUserPropertyRowColumn"> <checkbox cb-checked="prop.value"></checkbox> </div> <div ng-if="prop.type === \'textinput\'" class="editorUserPropertyRowColumn editorUserPropertyRowText"> <input type="text" class="form-control" ng-model="prop.value"> </div> <div class="editorUserPropertyRowFill"></div> <div class="editorUserPropertyRowControls editorUserPropertyRowColumn" ng-if="!isPropertyReadOnly(prop)"> <a ng-if="!upSelectedProperty" class="btn btn-default" ng-click="moveProperty(prop, -1)"><span class="fas fa-fw fa-chevron-up"></span></a> <a ng-if="!upSelectedProperty" class="btn btn-default" ng-click="moveProperty(prop, 1)"><span class="fas fa-fw fa-chevron-down"></span></a> <span ng-if="!upSelectedProperty"><input type="number" style="display:inline-block;width:50px" class="form-control editorUserPropertyRowColumn orderInput" ng-model="prop.index" ng-keypress="orderKeyPress($event, prop)" ng-blur="movePropertyToIndex(prop)" onclick="this.select()"></span> <a class="btn btn-default" ng-click="editProperty(prop)"><span class="fas fa-fw fa-edit"></span></a> <a class="btn btn-danger" ng-click="removeProperty(prop)"><span class="fas fa-fw fa-times"></span></a> </div> </div> </div> <div> <div ng-if="upSelectedProperty" style="display:inline-block;width:50px;"></div> <a class="btn btn-default" ng-click="createProperty()"><span class="fas fa-plus"></span> <span translate="ui_editor_user_properties"></span></a> </div> </div> '),e.put("views/templates/veccomponentinput.html",'<div ng-switch="vciMode"> <div ng-switch-when="position" class="vecComponents"> <div class="vecPositionPicker"> <a class="fas fa-crosshairs crosshairs" ng-click="pickPosition()"></a> </div> <div class="vecComponentPart"> <span class="vecComponentLabel">X</span> <input type="number" onclick="this.select()" ng-model="value.x" ng-focus="suppressSave(true)" ng-blur="suppressSave(false)"> </div> <div class="vecComponentPart"> <span class="vecComponentLabel">Y</span> <input type="number" onclick="this.select()" ng-model="value.y" ng-focus="suppressSave(true)" ng-blur="suppressSave(false)"> </div> </div> <div ng-switch-when="linkedslider"> <div class="editorPropertySliderPropertyRow"> <span>X</span> <div> <rzslider rz-slider-model="value.x" rz-slider-options="{id:\'x\', ceil:vciOptions.max, floor:vciOptions.min, enforceStep:false, precision:2, step:0.01, onStart:sendAssetPropertyChangeSliderStart, onChange:sendAssetPropertyChangeSliderChange, onEnd:sendAssetPropertyChangeSliderEnd}"></rzslider> </div> <div> <input class="fullWidth" truncate-float onclick="this.select()" ng-focus="suppressSave(true)" ng-blur="suppressSave(false)" type="number" ng-model="value.x" ng-change="sendAssetPropertyChangeSliderChange(\'x\', value.x)"> </div> </div> <div class="vecLinkIcon"> <a><span class="fas fa-link" ng-class="{\'fa-unlink\':!settings.linked}" ng-click="toggleLinked()"></span></a> </div> <div class="editorPropertySliderPropertyRow"> <span>Y</span> <div> <rzslider rz-slider-model="value.y" rz-slider-options="{id:\'y\', ceil:vciOptions.max, floor:vciOptions.min, enforceStep:false, precision:2, step:0.01, onStart:sendAssetPropertyChangeSliderStart, onChange:sendAssetPropertyChangeSliderChange, onEnd:sendAssetPropertyChangeSliderEnd}"></rzslider> </div> <div> <input class="fullWidth" truncate-float onclick="this.select()" ng-focus="suppressSave(true)" ng-blur="suppressSave(false)" type="number" ng-model="value.y" ng-change="sendAssetPropertyChangeSliderChange(\'y\', value.y)"> </div> </div> </div> <div ng-switch-default class="vecComponents"> <div class="vecComponentPart"> <span class="vecComponentLabel vecComponentLabelX">X</span> <input type="number" onclick="this.select()" ng-model="value.x" ng-disabled="vciDisabled" ng-focus="suppressSave(true)" ng-blur="suppressSave(false)"> </div> <div class="vecComponentPart"> <span class="vecComponentLabel vecComponentLabelY">Y</span> <input type="number" onclick="this.select()" ng-model="value.y" ng-disabled="vciDisabled" ng-focus="suppressSave(true)" ng-blur="suppressSave(false)"> </div> <div ng-if="vciCount >= 3" class="vecComponentPart"> <span class="vecComponentLabel vecComponentLabelZ">Z</span> <input type="number" onclick="this.select()" ng-model="value.z" ng-disabled="vciDisabled" ng-focus="suppressSave(true)" ng-blur="suppressSave(false)"> </div> <div ng-if="vciCount >= 4" class="vecComponentPart"> <span class="vecComponentLabel vecComponentLabelW">W</span> <input type="number" onclick="this.select()" ng-model="value.w" ng-disabled="vciDisabled" ng-focus="suppressSave(true)" ng-blur="suppressSave(false)"> </div> </div> </div> '),e.put("views/templates/workshopauthordynamic.html",'<span class="infoAuthor"> <img ng-if="waInfos[waItem.authorsteamid]" ng-src="{{waInfos[waItem.authorsteamid].avatar}}" class="avatar infoAuthorItem"> <img ng-if="!waInfos[waItem.authorsteamid]" src="images/noavatar.jpg" class="avatar infoAuthorItem"> <a ng-if="waInfos[waItem.authorsteamid]" class="infoAuthorItem infoAuthorTitle" ng-click="waOpenUserPage(waItem.authorsteamid)">{{waInfos[waItem.authorsteamid].name}}</a> <span ng-if="!waInfos[waItem.authorsteamid]" class="infoAuthorItem infoAuthorTitle">{{waItem.author || (\'ui_browse_details_author_pending\' | translate)}}</span> <a ng-if="waInfos[waItem.authorsteamid] && waBrowseAuthor" ng-click="waBrowseAuthor(waItem.authorsteamid)" class="btn btn-default infoAuthorItem"><span class="fas fa-search"></span></a> </span> '),e.put("views/templates/workshopauthorstatic.html",'<span> <img ng-if="waInfos[waItem.authorsteamid]" ng-src="{{waInfos[waItem.authorsteamid].avatar}}" class="avatar infoAuthorItem"> <img ng-if="!waInfos[waItem.authorsteamid]" src="images/noavatar.jpg" class="avatar infoAuthorItem"> <span ng-if="waInfos[waItem.authorsteamid]" class="infoAuthorItem infoAuthorTitle">{{waInfos[waItem.authorsteamid].name}}</span> <span ng-if="!waInfos[waItem.authorsteamid]" class="infoAuthorItem infoAuthorTitle">{{waItem.author || (\'ui_browse_details_author_pending\' | translate)}}</span> </span> '),e.put("views/templates/workshopdetails.html",'<div class="container-fluid"> <div class="row"> <div class="col-xs-12"> <div class="form-group" ng-if="wdEditorSettings.category!=\'wallpaper\'"> <label translate="ui_editor_workshop_options_upload_as"></label> <droplist class="editorUpdateItemDropDown" dp-options="uploadProjectOptions" dp-selected="selectedUploadOption.value"></droplist> </div> </div> <div class="col-xs-6"> <div class="form-group"> <label for="workshopTitle" translate="ui_editor_workshop_options_title"></label><span class="displayInvisible requiredIndicator" translate="ui_editor_workshop_options_required"></span> <input type="text" class="form-control" id="workshopTitle" ng-model="wdProjectData.title"> </div> <div class="form-group" ng-if="!wdProjectData.lockgenre"> <label for="workshopTags" translate="ui_editor_workshop_options_genre"></label> <droplist class="editorTagDropDown" id="workshopTags" dp-options="availableTags" dp-selected="selectedTag.tag"></droplist> </div> <div class="form-group"> <label for="workshopDescription" translate="ui_editor_workshop_options_description"></label> <textarea style="resize:none;height:115px" class="form-control" id="workshopDescription" ng-model="wdProjectData.description"></textarea> </div> <div class="form-group" ng-if="wdEditorSettings.category==\'wallpaper\'"> <label translate="ui_editor_workshop_options_scheme_color"></label> <spectrum-colorpicker class="form-control colorpicker-control" options="colorPickerOptions" ng-model="wdProjectData.general.properties.schemecolor.value" vec-color-converter on-show-options="{update:false}"></spectrum-colorpicker> </div> </div> <div class="col-xs-6"> \x3c!--             <div class="form-group">\r\n                <label for="workshopRating" translate="ui_editor_workshop_options_rating"></label>\r\n                <a ng-click=""><span class="fas fa-question-circle"></span></a>\r\n                <span class="displayInvisible requiredIndicator" translate="ui_editor_workshop_options_required"></span>\r\n                <droplist id="workshopRating" dp-options="ratingOptions" dp-selected="wdProjectData.contentrating" dp-empty-text="ui_workshop_workshop_tags_rating_not_set"></droplist>\r\n            </div> --\x3e <div class="form-group" ng-if="!wdProjectData.lockrating && canUseAgeRatingTags()"> <label for="workshopRating" translate="ui_editor_workshop_options_rating"></label> <div class="row"> <div class="col-md-6 col-xs-5"> <span translate="{{wdProjectData.contentrating ? \'ui_workshop_tags_rating_\' + wdProjectData.contentrating.toLowerCase() : \'ui_workshop_workshop_tags_rating_not_set\'}}"></span> </div> <div class="col-md-6 col-xs-7"> <a class="btn btn-primary fullWidth pull-right" ng-click="openRatingModal(wdProjectData)" translate="ui_editor_workshop_options_rating_change"></a> </div> </div> </div> <div class="form-group"> <label for="workshopVisibility" translate="ui_editor_workshop_options_visibility"></label> <droplist id="workshopVisibility" dp-options="visibilityOptions" dp-selected="wdProjectData.visibility"></droplist> </div> <div class="form-group"> <label for="workshopPreviewImage" translate="ui_editor_workshop_options_preview_image"></label><span class="displayInvisible requiredIndicator" translate="ui_editor_workshop_options_required"></span> <div class="row"> <div class="col-xs-5"> <div class="text-center editorWorkshopDetailsPreviewImage"> <div ng-if="!previewRefreshUrl" translate="ui_editor_workshop_options_missing"></div> <img ng-if="previewRefreshUrl" ng-src="{{previewRefreshUrl}}"> </div> </div> <div class="col-md-1"></div> <div class="col-md-6 col-xs-7 editorWorkshopDetailsPreviewImageControls"> <button class="btn btn-primary fullWidth" ng-disabled="wdProjectData.type.toLowerCase()==\'application\'" ng-click="takeSnapshot()" translate="ui_editor_workshop_options_preview_take_snapshot"></button> <button class="btn btn-primary fullWidth" ng-click="importSnapshot()" translate="ui_editor_workshop_options_preview_import_file"></button> </div> </div> </div> </div> </div> </div> '),e.put("views/templates/workshopratingscore.html",'<div class="browseWallpaperDetailsWorkshopRateRowRating"> <div class="browseWallpaperDetailsWorkshopRateRowRatingButtons"> <span class="browseWallpaperDetailsWorkshopRateRowRatingButtonsLeft"> <a class="btn btn-default rateUp" ng-class="{\'toggled\':wrItem.uservote===\'up\'}" ng-click="setUserVote(wrItem.workshopid, wrItem.uservote===\'up\'?\'cancel\':\'up\')"><span class="fas fa-thumbs-up"></span> <span class="rateUpLabel" translate="ui_browse_details_rate"></span></a> <a class="btn btn-default" ng-class="{\'toggled\':wrItem.uservote===\'down\'}" ng-click="setUserVote(wrItem.workshopid, wrItem.uservote===\'down\'?\'cancel\':\'down\')"><span class="fas fa-thumbs-down"></span></a> </span> <span class="browseWallpaperDetailsWorkshopRateRowRatingButtonsRight"> <a class="btn btn-default favorite" ng-class="{\'toggled\':wrItem.favorite}" ng-click="setFavorited(wrItem.workshopid, !wrItem.favorite);wrItem.favorite=!wrItem.favorite;"><span class="fas fa-heart"></span></a> </span> </div> <div class="browseWallpaperDetailsWorkshopRateRowRatingScore"> <span class="fas fa-thumbs-up"></span> <span class="score">{{wrItem.rating | number : 1}}&percnt;</span> </div> </div> '),e.put("views/templates/workshopratingstars.html",'<div class="browseWallpaperDetailsWorkshopRateRowRating"> <div class="browseWallpaperDetailsWorkshopRateRowRatingButtons"> <span class="browseWallpaperDetailsWorkshopRateRowRatingButtonsLeft"> <a class="btn btn-default" ng-class="{\'toggled\':wrItem.uservote===\'down\'}" ng-click="setUserVote(wrItem.workshopid, \'down\')"><span class="fas fa-thumbs-down"></span></a> <a class="btn btn-default rateUp" ng-class="{\'toggled\':wrItem.uservote===\'up\'}" ng-click="setUserVote(wrItem.workshopid, \'up\')"><span class="fas fa-thumbs-up"></span> <span class="rateUpLabel" translate="ui_browse_details_rate"></span></a> </span> <span class="browseWallpaperDetailsWorkshopRateRowRatingButtonsRight"> <a class="btn btn-default favorite" ng-class="{\'toggled\':wrItem.favorite}" ng-click="setFavorited(wrItem.workshopid, !wrItem.favorite);wrItem.favorite=!wrItem.favorite;"><span class="fas fa-heart"></span></a> </span> </div> <div> <span class="browseWallpaperDetailsWorkshopRateRowRatingStars" ng-class="{\'disabled\':wrItem.ratingrounded < 1}"> <span class="glyphicon" ng-class="{\'glyphicon-star-empty\':wrItem.ratingrounded < 1,\'glyphicon-star\':wrItem.ratingrounded >= 1}"></span> <span class="glyphicon" ng-class="{\'glyphicon-star-empty\':wrItem.ratingrounded < 2,\'glyphicon-star\':wrItem.ratingrounded >= 2}"></span> <span class="glyphicon" ng-class="{\'glyphicon-star-empty\':wrItem.ratingrounded < 3,\'glyphicon-star\':wrItem.ratingrounded >= 3}"></span> <span class="glyphicon" ng-class="{\'glyphicon-star-empty\':wrItem.ratingrounded < 4,\'glyphicon-star\':wrItem.ratingrounded >= 4}"></span> <span class="glyphicon" ng-class="{\'glyphicon-star-empty\':wrItem.ratingrounded < 5,\'glyphicon-star\':wrItem.ratingrounded >= 5}"></span> </span> </div> </div> '),e.put("views/views/browsewallpapers.html",'<div class="clientArea"> \x3c!--     <div class="browseAlert browsePiracyAlert ng-hide" ng-show="showPirateWarning">\r\n        <uib-alert class="alert-danger">\r\n            <div translate="ui_alert_connect_steam"></div>\r\n        </uib-alert>\r\n    </div> --\x3e <div class="browseWallpaperBrowseContainer"> <div class="browseWallpaperBrowseContainerLeft"> <div class="browseWallpaperBrowseContainerLeftTop"> <div class="browseWallpaperMonitorHeader" ng-if="showMonitorRow"> <div class="browseWallpaperMonitorChangeButton"> <a ng-click="toggleMonitorSelection()"><h1> {{getMonitorHeader()}} {{\'ui_browse_monitor\' | translate}} {{selectedMonitor.index + 1}} {{selectedMonitor.isSplit ? (\'ui_browse_split\' | translate) + \' \' + selectedMonitor.splitIndex: \'\'}} </h1><span translate="ui_browse_choose_monitor"></span></a> </div> </div> <div class="browseWallpaperSourceContainer"> <div class="sourceBox" style="position: relative"> <script type="text/ng-template" id="exploreAdvertiseTemplate.html"> <div ng-click="setListSource(\'explore\')" translate="ui_browse_advertise_explore"></div> <\/script> <script type="text/ng-template" id="workshopAdvertiseTemplate.html"> <div ng-click="setListSource(\'workshop\')" translate="ui_browse_advertise_workshop"></div> <\/script> <a ng-click="setListSource(\'installed\')" class="btn-primary browserSourceButton" ng-class="{\'sourceOverrideActive\':source==\'installed\'}"><span class="fas fa-save"></span> <span translate="ui_browse_list_source_installed"></span></a> <a ng-click="setListSource(\'explore\')" class="btn-primary browserSourceButton" ng-class="{\'sourceOverrideActive\':source==\'explore\', \'advertiseWorkshop\':browserSettings.advertiseexplore&&!steamWorkshopStatus.error}" ng-if="showDiscover"><span class="fas fa-compass"></span> <span translate="ui_browse_list_source_explore" uib-popover-template="\'exploreAdvertiseTemplate.html\'" popover-placement="bottom" popover-is-open="browserSettings.advertiseexplore && canAdvertiseAny && canAdvertiseWorkshop" popover-trigger="none" popover-class="popoverAdvertiseWorkshop" popover-append-to-body="true"></span></a> <a ng-click="setListSource(\'workshop\')" class="btn-primary browserSourceButton" ng-class="{\'sourceOverrideActive\':source==\'workshop\', \'advertiseWorkshop\':browserSettings.advertiseworkshop&&!steamWorkshopStatus.error}" uib-popover-template="\'workshopAdvertiseTemplate.html\'" popover-placement="right" popover-is-open="browserSettings.advertiseworkshop && canAdvertiseAny && canAdvertiseWorkshop" popover-trigger="none" popover-class="popoverAdvertiseWorkshop" popover-append-to-body="true"><span ng-class="providerIcon"></span> <span translate="ui_browse_list_source_workshop"></span></a> </div> <div class="controls"> \x3c!--                         <span class="other"><a ng-click="callbackShowEditor()" tooltip="ui_browse_header_option_editor"><span class="fas fa-pencil-ruler"></span></a>\r\n                        </span> --\x3e <span class="other"><a class="btn btn-default controlBtn" ng-click="toggleMonitorSelection()" tooltip="ui_browse_header_option_monitors"><span class="fas fa-desktop"></span> <span class="controlText" translate="ui_browse_header_option_monitors"></span></a> </span> <span class="last"><a class="btn btn-default controlBtn" ng-click="callbackShowSettings()" tooltip="ui_browse_header_option_settings"><span class="fas fa-cog"></span> <span class="controlText" translate="ui_browse_header_option_settings"></span></a> </span> </div> </div> <div class="browseAlert ng-hide" ng-show="showTrialAdvertiseAlert"> <uib-alert class="alert-warning"> <div style="display:flex;align-items:center;"> <div translate="ui_browse_alert_trial_reminder"></div> <a class="btn btn-primary" translate="ui_browse_alert_trial_reminder_button" ng-click="callOpenStorePage()"></a> </div> </uib-alert> </div> <div class="browseAlert ng-hide" ng-show="browserOptions.activeloadrule"> <uib-alert class="alert-info"> <div translate="ui_browse_alert_active_application_rule" translate-values="{executable:browserOptions.activeloadrule}"></div> </uib-alert> </div> <div class="browseAlert ng-hide" ng-show="browserOptions.activevramtrigger"> <uib-alert class="alert-info"> <div translate="ui_browse_alert_vram_exhausted"></div> </uib-alert> </div> <div class="browseAlert ng-hide" ng-show="sourceIsWorkshop && filterPreset.workshopid"> <uib-alert class="alert-warning" close="callbackClearPresetFilter()"> <div translate="ui_browse_preset_filter_notice" translate-values="{title:filterPreset.title}"></div> </uib-alert> </div> <div class="browseAlert ng-hide" ng-show="sourceIsWorkshop && filterAuthor.authorSteamId"> <uib-alert class="alert-warning" close="callbackClearAuthorFilter()"> <div translate="ui_browse_author_filter_notice" translate-values="{author:steamUserInfos[filterAuthor.authorSteamId].name}"></div> </uib-alert> </div> <div class="browseAlert ng-hide" ng-show="!sourceIsInstalled && isUsingBackup"> <uib-alert class="alert-info"> <div translate="ui_browse_steam_offline_notice" translate-values="{date:(backupDate|date)}"></div> </uib-alert> </div> <div class="browseWallpaperSearchContainer" ng-if="!sourceIsExplore"> <div class="form-group has-feedback browseWallpaperSearchContainerSearchField" ng-class="{\'showOptions\':searchHasSpaces()}"> <div ng-class="{\'input-group\':filter.text}"> <div class="textOptionsParent"> <input id="browseSearchFilterText" type="text" class="form-control" placeholder="{{\'ui_browse_search_placeholder\' | translate}}" ng-model="filter.text" ng-model-options="{debounce:100}" maxlength="40"> <span class="glyphicon glyphicon-search form-control-feedback" aria-hidden="true"></span> <div class="browseWallpaperSearchTextOptions" tabindex="0" ng-if="sourceIsWorkshop&&showExactMath"> <div class="content"> <checkbox cb-title="\'ui_browse_search_exact_match\'" cb-checked="filter.exactMatch"></checkbox> </div> </div> </div> <div class="input-group-btn"> <button ng-if="filter.text" class="btn btn-danger" ng-click="resetSearchFilter()"> <i class="glyphicon glyphicon-remove"></i> </button> </div> </div> </div> <div> <a ng-click="showFilter.visible=!showFilter.visible" class="btn btn-primary filterBtn"> <span class="filterLabel" translate="ui_browse_filter_results"></span> <span ng-if="showFilter.counts && !sourceIsWorkshop && (steamWorkshopStatus.complete || steamWorkshopStatus.error)" class="browseFilterActiveClass" translate="ui_browse_filter_results_count" translate-values="{filtered:filteredCount, unfiltered:unfilteredCount}"></span> <span ng-if="showFilter.counts && sourceIsWorkshop && (steamWorkshopStatus.complete || steamWorkshopStatus.error)" class="browseFilterActiveClass" translate="ui_browse_filter_results_filtered"></span> <span class="glyphicon glyphicon-filter filterIcon"></span> </a> </div> <div class="browseWallpaperSearchContainerFill"> </div> <div class="browseWallpaperSearchContainerSort"> <span style="cursor: pointer" class="glyphicon sortDirection" ng-class="{\'glyphicon-triangle-bottom\': filter.descending, \'glyphicon-triangle-top\': !filter.descending}" ng-click="filter.descending=!filter.descending" ng-if="!sourceIsWorkshop"></span> <droplist ng-class="sortOptionsClass" ng-if="!sourceIsWorkshop || !filterAuthor.authorSteamId" dp-options="sortOptions" dp-selected="filter.sort"></droplist> <droplist ng-if="sourceIsWorkshop && filterAuthor.authorSteamId" dp-options="filterAuthor.sortOptions" dp-selected="filterAuthor.sort"></droplist> </div> </div> <div class="browseWallpaperSearchContainer" ng-if="sourceIsExplore"> <div class="browseExploreRow"> <a ng-visible="exploreNavigation.length>1" ng-click="popExplorePage()"><span class="fas fa-arrow-circle-left browseExploreIcon browseExploreBackIcon"></span></a> <span ng-show="!exploreNavigation[0].key" class="exploreQueryTitle"> <explorequerytitle eqt-query="exploreNavigation[0]" eqt-user-info="steamUserInfos"></explorequerytitle> <explorequeryactions eqt-query="exploreNavigation[0]" eqt-settings="browserSettings.explore" eqt-callbacks="{like:exploreLikedCallback,remove:exploreCustomRemoveCallback}"></explorequeryactions> </span> <span ng-show="exploreNavigation[0].key && exploreNavigation[0].title" class="browseExploreTitle">{{exploreNavigation[0].title | translate}}</span> <span class="browseExploreHomeRow" ng-show="exploreNavigation.length==1"> <a class="btn btn-default browseExploreTextIcon" ng-click="setListSource(\'workshop\')" tooltip="ui_browse_explore_search"> <span class="fas fa-search"></span> <span class="text" translate="ui_browse_explore_search"></span> </a> <a class="btn btn-default browseExploreTextIcon" ng-click="pushExplorePage({title:\'ui_browse_explore_favorites\', key: \'wallpaperfavorites\'})" tooltip="ui_browse_explore_favorites"> <span class="fas fa-heart"></span> <span class="text" translate="ui_browse_explore_favorites"></span> </a> <a class="btn btn-default browseExploreTextIcon" ng-click="pushExplorePage({title:\'ui_browse_explore_starred\', key: \'favorites\'})" tooltip="ui_browse_explore_starred"> <span class="fas fa-star"></span> <span class="text" translate="ui_browse_explore_starred"></span> </a> </span> <span ng-show="exploreNavigation[0].key==\'favorites\'"> <a class="btn btn-default browseExploreIcon" ng-click="addExploreCustomFavoriteQuery()"><span class="fas fa-plus fa-fw"></span></a> </span> </div> </div> <div class="browseWallpaperGridParent"> <div class="browseWallpaperGridContainerParent"> <div class="browseWallpaperFilter ng-hide" ng-show="showFilter.visible && !sourceIsExplore"> <div> <div class="browseFilterTopBar"> <span> <a ng-click="callbackResetFilter()" class="btn btn-primary iconInfo"> <span class="fas fa-sync-alt"></span> <span translate="ui_browse_filter_reset"></span> </a> </span> <span ng-if="sourceIsWorkshop && canUseFilterSettings()"> <a ng-click="showWorkshopAdvertiseModal(true)" class="btn btn-info iconInfo"> <span class="fas fa-cog"></span> <span translate="ui_browse_filter_settings"></span> </a> </span> </div> \x3c!-- SPECIAL TAGS --\x3e <div style="margin-left:-15px"> <div class="filterItem boldTag" ng-if="showApprovedTag"> <checkbox cb-type="tag" cb-checked="filter.utilitytags[filterUtilityTags[2].value]" cb-title="filterUtilityTags[2].label"></checkbox> <span class="fas fa-trophy browseWallpaperApproved"></span> </div> <div class="filterItem boldTag" ng-if="sourceIsInstalled"> <checkbox cb-type="tag" cb-checked="filterTemp.filterFavoritesOnly" cb-changed="sortWallpapers()" cb-title="\'ui_browse_query_sort_my_favorites\'"></checkbox> <span class="fas fa-heart browseWallpaperFavorite"></span> </div> \x3c!--                                     <div class="filterItem" ng-repeat="tag in filterUtilityTags" ng-class="{\'approved\':tag.value==\'Approved\'}">\r\n                                        <checkbox cb-type="tag" cb-checked="filter.utilitytags[tag.value]" cb-title="tag.label"></checkbox> <span class="fas fa-trophy browseWallpaperApproved"></span>\r\n                                    </div> --\x3e <div class="browseFilterBottomPadding"></div> </div> \x3c!-- TYPES --\x3e <div ng-if="!sourceIsWorkshop || !filterPreset.workshopid"> <div class="filterHeader browseFilterToggle" ng-click="filterHideTypes=!filterHideTypes"> <span ng-if="filterHideTypes" class="fas fa-fw fa-caret-down"></span> <span ng-if="!filterHideTypes" class="fas fa-fw fa-caret-right"></span> <span translate="ui_browse_filter_type"></span> <span ng-if="filterStatus.type" class="browseFilterActiveClass" translate="ui_browse_filter_results_filtered"></span> </div> <div class="browseFilterHide" ng-show="filterHideTypes"> <div class="filterItem" ng-repeat="tag in filterCategoryTags"> <checkbox cb-checked="filter.categorytags[tag.value]" cb-title="tag.label"></checkbox> </div> <div class="filterDivider"></div> <div class="filterItem" ng-repeat="tag in filterTypeTags"> <checkbox cb-checked="filter.typetags[tag.value]" cb-title="tag.label"></checkbox> </div> <div class="browseFilterBottomPadding"></div> </div> </div> \x3c!-- RATING --\x3e <div ng-if="canUseAgeRatingTags()"> <div class="filterHeader browseFilterToggle" ng-click="filterHideRating=!filterHideRating"> <span ng-if="filterHideRating" class="fas fa-fw fa-caret-down"></span> <span ng-if="!filterHideRating" class="fas fa-fw fa-caret-right"></span> <span translate="ui_workshop_workshop_tags_rating"></span> <span ng-if="filterStatus.rating" class="browseFilterActiveClass" translate="ui_browse_filter_results_filtered"></span> </div> <div class="browseFilterHide" ng-show="filterHideRating"> <div class="filterItem" ng-repeat="tag in filterRatingTags"> <checkbox cb-checked="filterProxy.ratingtags[tag.value]" cb-title="tag.label"></checkbox> </div> <div class="browseFilterBottomPadding"></div> </div> </div> \x3c!-- RESOLUTION --\x3e <div ng-if="!sourceIsWorkshop || !filterPreset.workshopid"> <div class="filterHeader browseFilterToggle" ng-click="filterHideResolution=!filterHideResolution"> <span ng-if="filterHideResolution" class="fas fa-fw fa-caret-down"></span> <span ng-if="!filterHideResolution" class="fas fa-fw fa-caret-right"></span> <span translate="ui_browse_filter_resolution"></span> <span ng-if="filterStatus.resolution" class="browseFilterActiveClass" translate="ui_browse_filter_results_filtered"></span> </div> <div class="browseFilterHide" ng-show="filterHideResolution"> \x3c!--                                         <div class="filterItem" ng-repeat="tag in filterResolutionTags">\r\n                                            <checkbox cb-checked="filter.resolutiontags[tag.value]" cb-title="tag.label"></checkbox>\r\n                                        </div> --\x3e \x3c!-- var asd = \'\'; for(var x = 0; x < 24; ++x)asd += \'<div class="filterItem"><checkbox cb-checked="filter.resolutiontags[filterResolutionTags[%V].value]" cb-title="filterResolutionTags[%V].label"></checkbox></div>\\n\'.replaceAll(\'%V\', x);console.log(asd) --\x3e <div class="filterItem filterResolutionTitle" translate="ui_resolution_widescreen"></div> <div class="filterItem filterMultiButtons"> <a class="filterMultiBtn" ng-click="callbackToggleResolutionFilter($event, 0, true)"><span translate="ui_browse_filter_all"></span></a> <a class="filterMultiBtn" ng-click="callbackToggleResolutionFilter($event, 0, false)"><span translate="ui_browse_filter_none"></span></a> </div> <div class="filterItem"><checkbox cb-checked="filter.resolutiontags[filterResolutionTags[0].value]" cb-title="filterResolutionTags[0].label"></checkbox></div> <div class="filterItem"><checkbox cb-checked="filter.resolutiontags[filterResolutionTags[1].value]" cb-title="filterResolutionTags[1].label"></checkbox></div> <div class="filterItem"><checkbox cb-checked="filter.resolutiontags[filterResolutionTags[2].value]" cb-title="filterResolutionTags[2].label"></checkbox></div> <div class="filterItem"><checkbox cb-checked="filter.resolutiontags[filterResolutionTags[3].value]" cb-title="filterResolutionTags[3].label"></checkbox></div> <div class="filterItem"><checkbox cb-checked="filter.resolutiontags[filterResolutionTags[4].value]" cb-title="filterResolutionTags[4].label"></checkbox></div> <div class="filterItem"><checkbox cb-checked="filter.resolutiontags[filterResolutionTags[5].value]" cb-title="filterResolutionTags[5].label"></checkbox></div> <div class="filterDivider"></div> <div class="filterItem filterResolutionTitle" translate="ui_resolution_ultrawide"></div> <div class="filterItem filterMultiButtons"> <a class="filterMultiBtn" ng-click="callbackToggleResolutionFilter($event, 1, true)"><span translate="ui_browse_filter_all"></span></a> <a class="filterMultiBtn" ng-click="callbackToggleResolutionFilter($event, 1, false)"><span translate="ui_browse_filter_none"></span></a> </div> <div class="filterItem"><checkbox cb-checked="filter.resolutiontags[filterResolutionTags[6].value]" cb-title="filterResolutionTags[6].label"></checkbox></div> <div class="filterItem"><checkbox cb-checked="filter.resolutiontags[filterResolutionTags[7].value]" cb-title="filterResolutionTags[7].label"></checkbox></div> <div class="filterItem"><checkbox cb-checked="filter.resolutiontags[filterResolutionTags[8].value]" cb-title="filterResolutionTags[8].label"></checkbox></div> <div class="filterDivider"></div> <div class="filterItem filterResolutionTitle" translate="ui_resolution_dual"></div> <div class="filterItem filterMultiButtons"> <a class="filterMultiBtn" ng-click="callbackToggleResolutionFilter($event, 2, true)"><span translate="ui_browse_filter_all"></span></a> <a class="filterMultiBtn" ng-click="callbackToggleResolutionFilter($event, 2, false)"><span translate="ui_browse_filter_none"></span></a> </div> <div class="filterItem"><checkbox cb-checked="filter.resolutiontags[filterResolutionTags[9].value]" cb-title="filterResolutionTags[9].label"></checkbox></div> <div class="filterItem"><checkbox cb-checked="filter.resolutiontags[filterResolutionTags[10].value]" cb-title="filterResolutionTags[10].label"></checkbox></div> <div class="filterItem"><checkbox cb-checked="filter.resolutiontags[filterResolutionTags[11].value]" cb-title="filterResolutionTags[11].label"></checkbox></div> <div class="filterItem"><checkbox cb-checked="filter.resolutiontags[filterResolutionTags[12].value]" cb-title="filterResolutionTags[12].label"></checkbox></div> <div class="filterDivider"></div> <div class="filterItem filterResolutionTitle" translate="ui_resolution_triple"></div> <div class="filterItem filterMultiButtons"> <a class="filterMultiBtn" ng-click="callbackToggleResolutionFilter($event, 3, true)"><span translate="ui_browse_filter_all"></span></a> <a class="filterMultiBtn" ng-click="callbackToggleResolutionFilter($event, 3, false)"><span translate="ui_browse_filter_none"></span></a> </div> <div class="filterItem"><checkbox cb-checked="filter.resolutiontags[filterResolutionTags[13].value]" cb-title="filterResolutionTags[13].label"></checkbox></div> <div class="filterItem"><checkbox cb-checked="filter.resolutiontags[filterResolutionTags[14].value]" cb-title="filterResolutionTags[14].label"></checkbox></div> <div class="filterItem"><checkbox cb-checked="filter.resolutiontags[filterResolutionTags[15].value]" cb-title="filterResolutionTags[15].label"></checkbox></div> <div class="filterItem"><checkbox cb-checked="filter.resolutiontags[filterResolutionTags[16].value]" cb-title="filterResolutionTags[16].label"></checkbox></div> <div class="filterItem"><checkbox cb-checked="filter.resolutiontags[filterResolutionTags[17].value]" cb-title="filterResolutionTags[17].label"></checkbox></div> <div class="filterDivider"></div> <div class="filterItem filterResolutionTitle" translate="ui_resolution_portrait"></div> <div class="filterItem filterMultiButtons"> <a class="filterMultiBtn" ng-click="callbackToggleResolutionFilter($event, 4, true)"><span translate="ui_browse_filter_all"></span></a> <a class="filterMultiBtn" ng-click="callbackToggleResolutionFilter($event, 4, false)"><span translate="ui_browse_filter_none"></span></a> </div> <div class="filterItem"><checkbox cb-checked="filter.resolutiontags[filterResolutionTags[18].value]" cb-title="filterResolutionTags[18].label"></checkbox></div> <div class="filterItem"><checkbox cb-checked="filter.resolutiontags[filterResolutionTags[19].value]" cb-title="filterResolutionTags[19].label"></checkbox></div> <div class="filterItem"><checkbox cb-checked="filter.resolutiontags[filterResolutionTags[20].value]" cb-title="filterResolutionTags[20].label"></checkbox></div> <div class="filterItem"><checkbox cb-checked="filter.resolutiontags[filterResolutionTags[21].value]" cb-title="filterResolutionTags[21].label"></checkbox></div> <div class="filterItem"><checkbox cb-checked="filter.resolutiontags[filterResolutionTags[22].value]" cb-title="filterResolutionTags[22].label"></checkbox></div> <div class="filterDivider"></div> <div class="filterItem"><checkbox cb-checked="filter.resolutiontags[filterResolutionTags[23].value]" cb-title="filterResolutionTags[23].label"></checkbox></div> <div class="browseFilterBottomPadding"></div> </div> </div> \x3c!-- SOURCE --\x3e <div ng-if="!sourceIsWorkshop"> <div class="filterHeader browseFilterToggle" ng-click="filterHideSource=!filterHideSource"> <span ng-if="!filterHideSource" class="fas fa-fw fa-caret-down"></span> <span ng-if="filterHideSource" class="fas fa-fw fa-caret-right"></span> <span translate="ui_browse_filter_source"></span> <span ng-if="filterStatus.source" class="browseFilterActiveClass" translate="ui_browse_filter_results_filtered"></span> </div> <div class="browseFilterHide" ng-hide="filterHideSource"> <div class="filterItem" ng-repeat="tag in filterSourceTags"> <checkbox cb-checked="filter.sourcetags[tag.value]" cb-title="tag.label"></checkbox> </div> <div class="browseFilterBottomPadding"></div> </div> </div> \x3c!-- GENRES --\x3e <div class="filterHeader browseFilterToggle" ng-click="filterHideGenres=!filterHideGenres"> <span ng-if="!filterHideGenres" class="fas fa-fw fa-caret-down"></span> <span ng-if="filterHideGenres" class="fas fa-fw fa-caret-right"></span> <span class="filterHeader" translate="ui_browse_filter_tags"></span> <span ng-if="filterStatus.tags" class="browseFilterActiveClass" translate="ui_browse_filter_results_filtered"></span> </div> <div class="browseFilterHide" ng-hide="filterHideGenres"> <div class="filterItem filterMultiButtons"> \x3c!-- <a class="" ng-if="sourceIsWorkshop" ng-click="showWorkshopAdvertiseModal(true, $event)"><span translate="ui_browse_filter_suggestions"></span></a> --\x3e <a class="filterMultiBtn" ng-click="callbackToggleGenreFilter($event, true)"><span translate="ui_browse_filter_all"></span></a> <a class="filterMultiBtn" ng-click="callbackToggleGenreFilter($event, false)"><span translate="ui_browse_filter_none"></span></a> </div> <div class="filterItem"> <checkbox cb-type="tag" cb-checked="filter.utilitytags[filterUtilityTags[0].value]" cb-title="filterUtilityTags[0].label"></checkbox> </div> <div class="filterItem"> <checkbox cb-type="tag" cb-checked="filter.utilitytags[filterUtilityTags[1].value]" cb-title="filterUtilityTags[1].label"></checkbox> </div> <div class="filterDivider"></div> <div class="filterItem" ng-repeat="tag in filterAllTags"> <checkbox cb-checked="filter.tags[tag.value]" cb-title="tag.label"></checkbox> </div> </div> </div> </div> <div class="browseWallpaperGridAndNavigationView" ng-show="!sourceIsExplore || !exploreNavigation[0].key"> <div class="browseFolderNavigation" ng-class="{visible:sourceIsInstalled && currentFolder}"> <a class="item itemUpArrow fas fa-arrow-circle-up" ng-click="navigateFolderUp()"></a> <a class="item" ng-click="navigateFolder()" translate="ui_browse_navigation_top"></a> <span ng-repeat="folder in folderNavigation"><span class="item">&gt;</span><a class="item" ng-click="navigateFolder(folder)">{{folder.title}}</a></span> </div> <div class="browseWallpaperGridView"> <div ng-if="sortedWallpapers.length == 0 && sortedFolders.length == 0" class="emptyGrid"> <span ng-class="{\'emptyGridDanger\':showErrorInBackground}" ng-bind-html="queryActive ? \'ui_browse_grid_no_results_refreshing\' : showErrorInBackground ? \'ui_browse_no_service_body\' : \'ui_browse_grid_no_results\' | translate"></span> <div ng-if="!queryActive && showErrorInBackground" style="margin-top:20px;"> <a class="btn btn-default btn-lg" ng-click="callbackChangePage(currentPage, true)"><span class="fas fa-sync-alt"></span> <span translate="ui_browse_reload"></span></a> </div> <div class="wpAnim" ng-show="queryActive"> <img class="offset" src="images/wp_logo_blue_outer_rect.png"> <img class="spin" src="images/wp_logo_blue_inner_rect.png"> </div> </div> <wallpaper-thumbnail class="wallpaperBrowseInner" wt-wallpapers="sortedWallpapers" wt-folders="sortedFolders" wt-wallpaper-flags="selectedMonitor.playlistFlags" wt-selection="currentSelection" wt-multiselection="multiSelection" wt-flagcallback="callbackToggleAllWallpapersInCurrentMonitorPlaylist(wallpaper)" wt-mousecallback="callbackWallpaperAllMouse(btn, context, $event)" wt-selectioncallback="callbackWallpaperSelectionRectangle(items, $event)" wt-enabledragdrop="!sourceIsWorkshop" ng-class="\'browseViewSize\' + browserSettings.viewiconsize" id="BrowseWallpaperGrid" wt-tag="source" wt-blacklist="sourceIsWorkshop && browserSettings.authorblacklist"></wallpaper-thumbnail> </div> </div> <div class="browseWallpaperGridAndNavigationView" ng-show="sourceIsExplore && exploreNavigation[0].key" intersectionhandler ish-sentinel="#ExploreViewSentinel" ish-callback="exploreScrollSentinelChanged(visible)"> <div class="browseWallpaperGridView"> <div class="wallpaperBrowseInner exploreList" ng-show="exploreNavigation[0].key"> <div ng-repeat="query in sortedExploreQueries" class="browseExploreQueryRow"> <div class="browseExploreQueryControls"> <explorequerytitle eqt-query="query" eqt-user-info="steamUserInfos"></explorequerytitle> </div> <div ng-if="query.loading"> <div class="wpAnim"> <img class="spin" src="images/wp_logo_blue_inner_rect.png"> </div> <div class="exploreQueryLoadingLabel" translate="ui_browse_grid_no_results_refreshing"></div> </div> <div ng-if="query.showError"> <span class="emptyGridDanger" ng-bind-html="\'ui_browse_no_service_body\' | translate"></span> <a class="btn btn-default btn-lg" ng-click="performExploreQuery(query)"><span class="fas fa-sync-alt"></span> <span translate="ui_browse_reload"></span></a> </div> <div class="browseExploreQueryWallpaperBox" ng-class="{disliked:browserSettings.explore.disliked.includes(query.name)}"> <div class="browseExploreQueryWallpapers" ng-if="query.wallpapers.length > 0" explorescroll> <div class="exploreArrow exploreArrowLeft"> <span class="fas fa-chevron-left chevronIcon"></span> </div> <div class="exploreArrow exploreArrowRight"> <span class="fas fa-chevron-right chevronIcon"></span> </div> <div class="browseExploreQueryScroll"> <wallpaper-thumbnail class="wallpaperQueryList" wt-wallpapers="query.wallpapers" wt-wallpaper-flags="selectedMonitor.playlistFlags" wt-selection="currentSelection" wt-multiselection="multiSelection" wt-flagcallback="callbackToggleAllWallpapersInCurrentMonitorPlaylist(wallpaper)" wt-mousecallback="callbackWallpaperAllMouse(btn, context, $event)" wt-selectioncallback="callbackWallpaperSelectionRectangle(items, $event)" wt-enabledragdrop="false" ng-class="\'browseViewSize\' + browserSettings.viewiconsize" wt-tag="\'discover\'"></wallpaper-thumbnail> </div> </div> </div> <div class="browseExploreQueryFooter" ng-if="!query.loading"> <explorequeryactions eqt-query="query" eqt-settings="browserSettings.explore" eqt-callbacks="{pushExplorePage:pushExplorePage,like:exploreLikedCallback,remove:exploreCustomRemoveCallback}"></explorequeryactions> <div ng-if="!browserSettings.explore.hasLikedAny && !query.custom" class="exploreVotePrompt warningText"> <span class="fas fa-fw fa-arrow-up exploreIcon warningText"></span> <span translate="ui_browse_explore_prompt_to_vote"></span> </div> </div> </div> <div id="ExploreViewSentinel" class="exploreViewSentinel"></div> </div> </div> </div> </div> <div class="browseWallpaperPagination" ng-show="pagination.visible"> <div> <span><a class="fas fa-angle-double-left paginationIcon" ng-click="callbackChangePage(\'prev\')"></a></span> <span ng-repeat="page in pagination.pages"><a class="paginationIcon pageItem" ng-click="callbackChangePage(page.label)" ng-class="{\'{{page.class}}\':true, \'linkOverrideActive\':page.label==pagination.current}">{{page.label}}</a></span> <span><a class="fas fa-angle-double-right paginationIcon" ng-click="callbackChangePage(\'next\')"></a></span> </div> </div> <div class="browseWallpaperGridPlaylistParent" ng-class="{playlistShow:selectedMonitor.playlist.items.length>0 || isDragDropActive,playlistDaytime:selectedMonitor.playlist.settings.mode === \'daytime\'}"> <div class="browseWallpaperGridPlaylistParentChild"> <div class="browseWallpaperGridPlaylistHeader"> <h3>{{\'ui_browse_playlist_header\'|translate}} ({{selectedMonitor.playlist.items.length}})</h3> <a ng-click="callbackShowPlaylists()" class="btn btn-default"> <span class="fas fa-folder-open"></span> <span class="playlistLabel" translate="ui_browse_playlist_button_load"></span> </a> <a ng-click="callbackShowPlaylists(true)" ng-class="{\'disabled\': !selectedMonitor.playlist.items.length}" class="btn btn-default"> <span class="fas fa-save"></span> <span class="playlistLabel" translate="ui_browse_playlist_button_save"></span> </a> <a ng-click="callbackShowPlaylistSettings()" ng-class="{\'disabled\': !selectedMonitor.playlist.items.length}" class="btn btn-default"> <span class="fas fa-cogs"></span> <span class="playlistLabel" translate="ui_browse_playlist_button_configure"></span> </a> <a ng-if="!selectedMonitor.playlistFlags[currentSelection.file]" ng-click="callbackToggleAllWallpapersInCurrentMonitorPlaylist(currentSelection)" ng-class="{\'disabled\': !currentSelection.file}" class="btn btn-primary"> <span class="fas fa-plus"></span> <span class="playlistLabel" translate="ui_browse_playlist_button_add"></span> </a> <a ng-if="selectedMonitor.playlistFlags[currentSelection.file]" ng-click="callbackToggleAllWallpapersInCurrentMonitorPlaylist(currentSelection)" class="btn btn-primary"> <span class="fas fa-minus"></span> <span class="playlistLabel" translate="ui_browse_playlist_button_remove"></span> </a> <a ng-if="selectedMonitor.playlist.items.length" style="margin-left: auto;" ng-click="callbackClearPlaylist()" class="btn btn-danger"> <span class="fas fa-trash"></span> <span class="playlistLabel" translate="ui_browse_playlist_button_clear"></span> </a> </div> <div class="browseWallpaperPlaylist" id="PlaylistContainer" scroll-horizontal> <div class="browseWallpaperPlaylistRow" ng-attr-style="min-width:{{52 * selectedMonitor.playlist.items.length * (selectedMonitor.playlist.items.length<1001)}}px"> <div ng-if="selectedMonitor.playlist.settings.mode === \'daytime\'" class="playlistTimeline" id="PlaylistContainerTimeline"> <div class="playlistTimelineFixed"> <div class="timelineParent"><span class="timelineChild">{{1 | date : getTimelineFormat() : \'+0000\'}}</span></div> <div class="timelineParent"><span class="timelineChild">{{(1000*60*60*6) | date : getTimelineFormat() : \'+0000\'}}</span></div> <div class="timelineParent"><span class="timelineChild">{{(1000*60*60*12) | date : getTimelineFormat() : \'+0000\'}}</span></div> <div class="timelineParent"><span class="timelineChild">{{(1000*60*60*18) | date : getTimelineFormat() : \'+0000\'}}</span></div> <div class="timelineParent"><span class="timelineChild">{{(1000*60*60*24-1000*60) | date : getTimelineFormat() : \'+0000\'}}</span></div> </div> </div> <div class="playlistWallpaperContainer" id="PlaylistContainerRow"> <div ng-if="selectedMonitor.playlist.items.length > 1000"> <span class="playlistWallpaperContainerLimitHint" translate="ui_browse_playlist_too_many_items"></span> </div> <div ng-if="selectedMonitor.playlist.items.length < 1001" class="playlistWallpaperRow"> <div ng-repeat="entry in selectedMonitor.playlist.items track by $index" class="browseWallpaperPlaylistImage" ng-attr-style="flex-grow:{{entry.flex || 1}}" ng-class="{selected:entry.wallpaper===currentSelection}" ng-click="callbackWallpaperSelected(entry.wallpaper)" attach-scope> <div class="browseWallpaperPlaylistImageChild" ng-attr-style="background: {{getPreviewUrl(entry.wallpaper)}}, rgba(127,127,127,0.1)"> <a class="trashIcon" ng-click="callbackToggleEntryInCurrentMonitorPlaylist(entry, true);callbackCancelEvent($event);"><span class="fas fa-times"></span></a> <div class="presetName" ng-if="entry.preset">{{entry.preset}}</div> <div class="selectBorder"></div> <div class="daytimeDragBorder"></div> <div class="playlistTimelineMarker" ng-if="entry.daytimeend > 0"></div> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> <div class="browseWallpaperDetailView"> <div ng-if="!currentSelection" class="placeholder" translate="ui_browse_select_prompt"> </div> <div ng-if="currentSelection" class="details"> <div class="previewContainer"> <div ng-if="currentSelection.youtube && preview.play" class="browseWallpaperYoutubeEmbed"> <iframe ng-src="{{currentSelection.youtube}}" onload="youtubeLoaded(this)"> </iframe> </div> <div ng-if="!currentSelection.youtube || !preview.play"> <img ng-src="{{currentSelection.preview}}" class="previewImage"> <div class="youtubePlayOverlay" ng-show="currentSelection.youtube"> <a ng-click="preview.play = true"> <div> <span class="fas fa-play-circle playButton"></span> </div> </a> </div> </div> </div> <div class="info"> <div class="content-title"> {{currentSelection.title}} </div> <div class="infoRow center" ng-if="!currentSelection.local"> <workshop-author wa-item="currentSelection" wa-infos="steamUserInfos" wa-browse-author="callbackBrowseAuthor" wa-open-user-page="openSteamUserPage"></workshop-author> </div> <div ng-if="currentSelection.hasrating" class="infoRow browseWallpaperDetailsWorkshopRateRow"> <workshop-rating wr-item="currentSelection" set-user-vote="setUserVote" set-favorited="setFavorited"></workshop-rating> </div> <div class="infoRow center"> <span>{{(currentSelection.typelabel|translate) || getDisplayType(currentSelection.type)}}</span> <span style="margin-left:6px" ng-if="currentSelection.filesizelabel">{{currentSelection.filesizelabel}}</span> </div> <div class="infoRow center wrap" ng-if="currentSelection.tags"> \x3c!-- <span class="fas fa-tags infoRowIcon"></span> --\x3e \x3c!-- {{getDisplayTags(currentSelection.tags)}} --\x3e <span ng-repeat="tag in getDisplayTags(currentSelection.tags)" class="infoTagPill">{{tag}}</span> </div> </div> <div class="detailButtons" ng-if="currentSelection.workshopid"> <div class="browseWallpaperDetailsWorkshopControls"> <a ng-if="currentSelection.status !== \'downloadable\'" ng-click="callbackUnsubscribeOrRemove(currentSelection)" class="btn btn-danger"> <span class="fas fa-times" aria-hidden="true"></span> {{\'ui_browse_details_btn_unsubscribe\' | translate}} </a> <a ng-if="currentSelection.status === \'downloadable\'" ng-click="subscribeWorkshopItem(currentSelection)" class="btn btn-success"> <span class="fas fa-download" aria-hidden="true"></span> {{\'ui_browse_details_btn_download\' | translate}} </a> <div class="smallRow"> <a ng-if="canOpenWallpaperDetailsOnPlatform" ng-click="openSteamWorkshopPage(currentSelection)" class="btn btn-default" tooltip="ui_browse_details_btn_workshop" t-align-right="true"> <span ng-class="providerIcon" aria-hidden="true"></span> {{\'ui_browse_details_btn_comment\' | translate}} </a> <a ng-if="canSendReports" ng-click="openReportDialog(currentSelection)" class="btn btn-default" tooltip="ui_browse_details_btn_report" t-align-right="true"> <span class="fas fa-exclamation-triangle" aria-hidden="true"></span> </a> </div> </div> </div> <div class="detailButtons" ng-if="currentSelection.localAndExternal || currentSelection.official"> <a ng-click="callbackUnsubscribeOrRemove(currentSelection)" class="btn btn-danger"> <span class="fas fa-times" aria-hidden="true"></span> {{\'ui_browse_details_btn_remove_from_history\' | translate}} </a> </div> <div class="detailButtons" ng-if="!(currentSelection.localAndExternal || currentSelection.official || currentSelection.workshopid)"> <a ng-click="callbackOpenInEditor(currentSelection)" class="btn btn-primary"> <span class="fas fa-folder-open" aria-hidden="true"></span> {{\'ui_browse_details_btn_open_in_editor\' | translate}} </a> <div style="margin-top:10px;text-align:center;" translate="ui_browse_details_local_editor_hint"></div> </div> <div ng-if="currentSelection.status == \'installed\'" class="browseWallpaperDetailsProperties"> <div class="browseWallpaperDetailsHeader"> <h5 class="browseWallpaperDetailsHeaderItem" translate="ui_browse_details_properties"></h5> <hr class="browseWallpaperDetailsHeaderDivider"> </div> <div> <div class="settingsWallpaperProperty" ng-repeat="property in currentSelection.properties[selectedMonitor.location] | orderObjectBy:\'order\' track by $index" ng-if="!property.condition || evalCondition(property.condition)"> <div ng-if="isPropertyLabelVisible(property)" ng-click="callbackPropertyLabelClicked(property)"> <span ng-if="property.icon" class="fas fa-fw propertyIcon" ng-class="property.icon"></span> <span class="browsePropertyLabel" translate="{{property.text | san}}"></span> </div> <div ng-if="property.type===\'color\'"> <spectrum-colorpicker vec-color-converter options="colorPickerOptions" ng-model="property.value" on-change="callbackWallpaperPropertyChanged(property.key, property)" on-show-options="{update:false}"></spectrum-colorpicker> </div> <div ng-if="property.type==\'bool\'"> <checkbox cb-checked="property.value" cb-changed="callbackWallpaperPropertyChanged(property.key, property)"></checkbox> </div> <div ng-if="property.type==\'textinput\'"> <input type="text" ng-model="property.value" ng-change="callbackWallpaperPropertyChanged(property.key, property)"> </div> <div ng-if="property.type==\'slider\'"> <rzslider rz-slider-model="property.value" rz-slider-options="{ceil:property.max, floor:property.min, enforceStep:false, onChange:callbackWallpaperPropertyChangedSlider(property.key, property),step:property.step||1,precision:property.precision||1}"></rzslider> <span class="sliderValue"> <span ng-if="!property.editable"> <span class="labelElement" ng-click="makeLabelEditable($event, property)">{{property.value}}</span> <input class="inputElement" type="number"> </span> <input ng-if="property.editable" class="fullWidth" type="number" ng-model="property.value"> </span> </div> <div ng-if="property.type==\'volume\' && isVolumeEnabled(selectedMonitor.location)"> <rzslider rz-slider-model="property.value" rz-slider-options="{ceil:property.max, floor:property.min, enforceStep:false, onChange:callbackWallpaperPropertyChangedSlider(property.key, property),step:property.step||1,precision:property.precision||1}"></rzslider> <span class="sliderValue"> <span ng-if="!property.editable">{{property.value}}</span> <input ng-if="property.editable" class="fullWidth" type="number" ng-model="property.value"> </span> </div> <div ng-if="property.type==\'volume\' && !isVolumeEnabled(selectedMonitor.location)" ng-click="openMuteHelper(selectedMonitor.location)" class="propertyVolumeDisabled" tabindex="0"> <span class="fas fa-volume-mute propertyIcon dangerText"></span> <span>{{getVolumeDisabledText(selectedMonitor.location)|translate}}</span> </div> <div ng-if="property.type==\'combo\'" class="smallDropList"> <droplist dp-options="property.options" dp-selected="property.value" dp-change="callbackWallpaperPropertyChanged(property.key, property)"></droplist> </div> <div ng-if="property.type==\'directory\'" class="userImport"> <div class="importPath">{{(property.value || \'ui_browse_details_properties_nothing_imported\') | filename | translate}}</div> <div> <a class="btn btn-default" ng-click="callbackSelectFileForProperty(property, \'directory\')"> <span class="glyphicon glyphicon-import" aria-hidden="true"></span> <span ng-if="!property.value" class="userImportBtn" translate="ui_browse_details_properties_select_directory"></span> </a> <span ng-if="property.value"> <a class="btn btn-default" ng-click="callbackOpenDirectory(property.value)"> <span class="glyphicon glyphicon-folder-open" aria-hidden="true"></span> </a> <a class="btn btn-danger" ng-click="callbackRemoveFileForProperty(property)"> <span class="fas fa-fw fa-times" aria-hidden="true"></span> </a> </span> </div> </div> <div ng-if="property.type==\'file\'" class="userImport"> <div class="importPath">{{(property.value || \'ui_browse_details_properties_nothing_imported\') | filename | translate}}</div> <div> <a class="btn btn-default" ng-click="callbackSelectFileForProperty(property, \'file\')"> <span class="glyphicon glyphicon-import" aria-hidden="true"></span> <span ng-if="!property.value" class="userImportBtn" translate="ui_browse_details_properties_select_file"></span> </a> <span ng-if="property.value"> <a class="btn btn-default" ng-click="callbackOpenDirectory(property.value)"> <span class="glyphicon glyphicon-folder-open" aria-hidden="true"></span> </a> <a class="btn btn-danger" ng-click="callbackRemoveFileForProperty(property)"> <span class="fas fa-fw fa-times" aria-hidden="true"></span> </a> </span> </div> </div> <div ng-if="property.type==\'divider\'"> <hr class="fullWidth"> </div> </div> </div> <div ng-if="showPresetPublishOptions(currentSelection)"> <div class="browseWallpaperDetailsHeader"> <h5 class="browseWallpaperDetailsHeaderItem" translate="ui_browse_details_header_workshop"></h5> <hr class="browseWallpaperDetailsHeaderDivider"> </div> <div class="browseWallpaperDetailsActions"> <div class="browseWallpaperDetailsActionsRow"> <button class="btn btn-default browseWallpaperDetailsActionsRowItem" ng-click="callbackBrowsePresets(currentSelection)" tooltip="ui_browse_details_properties_preset_browse_workshop" t-values="{count:getNumberOfWorkshopPresets(currentSelection)}" t-align-right="true"><span ng-class="providerIcon + \'fa-fw\'"></span> <span class="browseWallpaperDetailsActionsRowItemLabel" translate="ui_browse_details_properties_preset_browse_workshop" translate-values="{count:getNumberOfWorkshopPresets(currentSelection)}"></span></button> <button class="btn btn-default browseWallpaperDetailsActionsRowItem browseWallpaperDetailsActionsRowItemSmall" ng-click="callbackShowPresetHint()"><span class="fas fa-fw fa-question"></span></button> </div> <div class="browseWallpaperDetailsActionsRow"> <button class="btn btn-primary browseWallpaperDetailsActionsRowItem" ng-click="callbackPublishPreset()"><span class="fas fa-fw fa-share"></span> {{\'ui_browse_details_properties_preset_publish_to_workshop\'|translate}}</button> </div> </div> </div> <div class="browseWallpaperDetailsHeader"> <h5 class="browseWallpaperDetailsHeaderItem" translate="ui_browse_details_header_presets"></h5> <hr class="browseWallpaperDetailsHeaderDivider"> </div> <div class="browseWallpaperDetailsActions"> <div class="browseWallpaperDetailsActionsRow"> \x3c!-- load / save --\x3e <a class="btn btn-default browseWallpaperDetailsActionsRowItem" ng-click="callbackLoadWallpaperProperties()" tooltip="ui_browse_details_properties_load" t-align-right="true"><span class="fas fa-fw fa-folder-open"></span> <span class="browseWallpaperDetailsActionsRowItemLabel">{{\'ui_browse_details_properties_load\'|translate}}</span></a> <a class="btn btn-default browseWallpaperDetailsActionsRowItem" ng-click="callbackSaveWallpaperProperties()" tooltip="ui_browse_details_properties_save" t-align-right="true"><span class="fas fa-fw fa-save"></span> <span class="browseWallpaperDetailsActionsRowItemLabel">{{\'ui_browse_details_properties_save\'|translate}}</span></a> </div> <div class="browseWallpaperDetailsActionsRow" ng-if="currentSelection.type===\'Scene\'||currentSelection.type===\'Video\'||currentSelection.type===\'Image\'"> \x3c!-- set as default --\x3e <a class="btn btn-default browseWallpaperDetailsActionsRowItem" ng-click="callbackSavePropertiesAsDefaults(currentSelection.properties[selectedMonitor.location])"><span class="fas fa-fw fa-list-alt"></span> <span translate="ui_browse_details_properties_apply_to_all_wallpapers" class="browseWallpaperDetailsActionsRowItemLabel"></span><span translate="ui_browse_details_properties_apply_to_all" class="browseWallpaperDetailsActionsRowItemLabelShow"></span></a> </div> <div class="browseWallpaperDetailsActionsRow"> \x3c!-- share json --\x3e <a class="btn btn-default browseWallpaperDetailsActionsRowItem" ng-click="callbackShareWallpaperProperties()"><span class="fas fa-fw fa-retweet"></span> {{\'ui_browse_details_properties_share_json\'|translate}}</a> </div> <div class="browseWallpaperDetailsActionsRow"> \x3c!-- reset --\x3e <a class="btn btn-danger browseWallpaperDetailsActionsRowItem" ng-click="callbackResetCurrentWallpaperProperties()"><span class="fas fa-fw fa-sync-alt"></span> {{\'ui_browse_details_properties_reset\'|translate}}</a> </div> </div> </div> </div> </div> </div> <div class="browseWallpaperFooter"> <div> <div class="navigationControls controlFlex"> <div> \x3c!--                         <a class="btn btn-primary" ng-click="openFromFile()" style="width:148px;">\r\n                            <span class="glyphicon glyphicon-open" aria-hidden="true"></span> {{\'ui_browse_footer_btn_open_from_file\' | translate}}\r\n                        </a>\r\n --\x3e <div class="btn-group dropup" uib-dropdown is-open="status.isopen"> <a id="open-file-button-button" type="button" class="btn btn-default" uib-dropdown-toggle> <span class="glyphicon glyphicon-open" aria-hidden="true"></span> {{\'ui_browse_footer_btn_open_wallpaper\' | translate}} </a> <ul class="dropdown-menu" uib-dropdown-menu role="menu"> <li role="menuitem"><a ng-click="callbackShowEditor()"><span class="fas fa-pencil-ruler"></span> {{\'ui_browse_footer_btn_create_new_wallpaper\'|translate}}</a></li> <li role="menuitem"><a ng-click="openFromFile()"><span class="fas fa-film"></span> {{\'ui_browse_footer_btn_open_animated_wallpaper\'|translate}}</a></li> <li role="menuitem"><a ng-click="openFromFile(\'static\')"><span class="fas fa-image"></span> {{\'ui_browse_footer_btn_open_static_wallpaper\'|translate}}</a></li> <li role="menuitem"><a ng-click="openFromUrl()"><span class="fas fa-globe"></span> {{\'ui_browse_footer_btn_open_from_url\'|translate}}</a></li> </ul> </div> \x3c!--                         <a class="btn btn-primary" ng-click="openFromUrl()" style="width:148px;">\r\n                            <span class="fas fa-globe" aria-hidden="true"></span> {{\'ui_browse_footer_btn_open_from_url\' | translate}}\r\n                        </a> --\x3e \x3c!-- <a class="btn btn-primary" onclick="window.ui.shellexecute(\'http://store.steampowered.com/itemstore/431960\')" style="width: 148px;"> --\x3e \x3c!-- <span class="fas fa-shopping-cart" aria-hidden="true"></span> {{\'ui_browse_footer_btn_store\' | translate}} --\x3e \x3c!-- </a> --\x3e </div> <div> <a class="btn btn-primary browseSteamWorkshopButtonDropdown" ng-click="callbackShowEditor()" style="width:100%"> <span class="fas fa-pencil-ruler" aria-hidden="true"></span> {{\'ui_browse_footer_btn_wallpaper_editor\' | translate}} </a> </div> </div> <div class="center"> <span class="fas fa-adjust centerIcon"></span> <rzslider class="centerSlider" rz-slider-model="viewOpacity.value" rz-slider-options="{ceil:100, floor:30}"></rzslider> </div> <div> <div class="controls footerButtons"> <a class="btn btn-primary" ng-click="callbackOk()" translate="ui_ok"></a> <a class="btn btn-default" ng-click="callbackClose()" translate="ui_cancel"></a> </div> </div> </div> </div> <div class="browseWallpaperDropOverlay"> <div native-drop-target="dropFileEditor(droppedFiles)" style="margin-bottom:20px" ndt-config="dropConfigEditor"></div> <div native-drop-target="dropFile(droppedFiles)" ndt-config="dropConfigBrowser"></div> </div> </div> <div class="browseMonitorSelectionContainer" ng-hide="!changeMonitorActive"> <div class="backdrop" ng-click="toggleMonitorSelectionBackground($event)"></div> <div class="monitorModalOuter"> <div class="inner"> <div class="row"> <a class="closeSelection" ng-click="toggleMonitorSelection()"><h3><span class="glyphicon glyphicon-chevron-up"></span></h3></a> </div> <div class="row"> <div class="col-xs-12"> <h1 class="monitorHeader" translate="ui_browse_monitors_choose_monitor"></h1> </div> </div> <div class="row" style="margin-top: 20px"> <div class="col-xs-12 monitorLayoutRow"> <droplist class="monitorLayoutRowItem" dp-options="layouts" dp-selected="wallpaperConfig.layout"></droplist> </div> </div> <div class="row" style="margin-top: 5px;" ng-show="wallpaperConfig.layout === 2"> <div class="col-xs-12 centerText" translate="ui_browse_monitors_clone_hdr_hint"> </div> </div> <div class="row" style="margin-top: 5px;" ng-show="wallpaperConfig.layout === 0"> <div class="col-xs-12 monitorLayoutRow"> <a class="btn btn-default monitorLayoutRowItem" tooltip="ui_browse_monitors_split" ng-if="!selectedMonitor.isGroup && !selectedMonitor.isInGroup" ng-click="callbackSplitSelectedMonitor(selectedMonitor)"><span class="fas fa-fw fa-cut"></span> {{\'ui_browse_monitors_split\'|translate}}</a> \x3c!-- Remove group button --\x3e <a class="btn btn-danger monitorLayoutRowItem" ng-if="selectedMonitor.isGroup || selectedMonitor.isInGroup" ng-click="callbackRemoveGroup(selectedMonitor)" tooltip="ui_browse_monitors_ungroup"><span class="fas fa-fw fa-object-ungroup"></span> {{\'ui_browse_monitors_ungroup\'|translate}}</a> \x3c!-- Group extend button, no drop down --\x3e <button class="btn btn-default dropdown-toggle monitorLayoutRowItem" ng-if="!selectedMonitor.isSplit && selectedMonitor.isGroup" ng-class="{\'active\':monitorSelectionState.createGroup}" ng-disabled="monitors.length < 2" tooltip="ui_browse_monitors_group" data-toggle="dropdown" ng-click="monitorSelectionState.createGroup=selectedMonitor.layout"><span class="fas fa-fw fa-object-group"></span> {{\'ui_browse_monitors_group\'|translate}}</button> \x3c!-- Group create button with drop down --\x3e <div class="monitorLayoutRowItem" ng-if="!selectedMonitor.isSplit && !selectedMonitor.isGroup" style="position:relative"> <button class="btn btn-default dropdown-toggle" ng-class="{\'active\':monitorSelectionState.createGroup}" ng-disabled="monitors.length < 2" tooltip="ui_browse_monitors_group" data-toggle="dropdown" ng-click="callbackCancelMonitorGrouping($event)" style="width: 100%;"><span class="fas fa-fw fa-object-group"></span> {{\'ui_browse_monitors_group\'|translate}}</button> <ul class="dropdown-menu"> <li ng-click="monitorSelectionState.createGroup=1"> <a><span class="fas fa-fw fa-object-group"></span> <div class="dropdown-san-item" translate="ui_browse_monitors_stretch"></div></a> </li> <li ng-click="monitorSelectionState.createGroup=2"> <a><span class="fas fa-fw fa-clone"></span> <div class="dropdown-san-item" translate="ui_browse_monitors_clone"></div></a> </li> </ul> </div> <a class="btn btn-danger monitorLayoutRowItem" ng-if="selectedMonitor.isSplit" ng-click="callbackRemoveSplit(selectedMonitor)" tooltip="ui_browse_monitors_remove_split"><span class="fas fa-fw fa-times"></span> {{\'ui_browse_monitors_remove_split\'|translate}}</a> </div> </div> <hr> <div class="row" style="margin-top: 10px;margin-bottom: 20px"> <div class="col-xs-12 monitorLayoutRow"> <a class="btn btn-default monitorLayoutRowItem" tooltip="ui_browse_monitors_load_profile" ng-click="callbackShowProfiles()"><span class="fas fa-fw fa-folder-open"></span> {{\'ui_browse_monitors_load_profile\'|translate}}</a> <a class="btn btn-default monitorLayoutRowItem" tooltip="ui_browse_monitors_save_profile" ng-click="callbackShowProfiles(true)"><span class="fas fa-fw fa-save"></span> {{\'ui_browse_monitors_save_profile\'|translate}}</a> </div> </div> <div> <div class="monitorSelectionInnerLayout"> <div class="monitorSelectionBox"> <div class="monitorSelectionFlex" id="#MonitorSelectionBox"> <div ng-attr-style="{{monitorSelectionBoxStyle}}" ng-class="{\'monitorSelectionGroupActive\':monitorSelectionState.createGroup}"> <monitor-selection ms-monitors="monitors" ms-scale="monitorScale" ms-splits="monitorSplits" ms-selected-monitor="selectedMonitor" ms-make-selection="callbackSelectMonitor(monitor, toggleMonitorSelection === true)" ms-on-split-moved="callbackSplitMoved(location, position)" ms-split-dbl-click="callbackSplitDblClick(location)" ms-selection-state="monitorSelectionState" ms-create-group="callbackCreateGroup(monitors)" ms-groups="monitorGroups" ms-layout="wallpaperConfig.layout" ms-monitor-context-menu="callbackMonitorRightClick($event, monitor)" ms-split-context-menu="callbackSplitRightClick($event, location)" ms-user-monitor-settings="userMonitorSettings"></monitor-selection> </div> </div> </div> </div> </div> <div class="buttonRow"> <a class="btn btn-primary" ng-click="toggleMonitorSelection()" translate="ui_browse_monitors_change_wallpaper"></a> <a class="btn btn-default" ng-click="callbackRemoveWallpaperAndPlaylistFromMonitor(selectedMonitor.location)" translate="ui_browse_monitors_remove_wallpaper"></a> </div> <div class="checkboxRow" ng-if="showMonitorRow"> <checkbox cb-checked="browserSettings.showmonitorselectiononstart" cb-title="\'ui_browse_monitors_show_on_start\'"></checkbox> </div> </div> </div> </div> <div ng-if="steamWorkshopStatus" ng-click="callbackClickSteamStatus()" class="browseWallpapersWorkshopStatus" ng-class="{\'workshopError\' : steamWorkshopStatus.error, \'invis\':steamWorkshopStatus.hidden}"> <div> <span ng-class="providerIcon"></span></div> <div translate="{{steamWorkshopStatus.text}}" translate-values="{{steamWorkshopStatus}}"></div> </div> </div>'),e.put("views/views/editor.html",'<div ng-class="editorLayoutClass"> <filemenu fm-items="filemenu" fm-data="editorSettings"></filemenu> <div class="clientArea hasFilemenu"> <div class="editorToolbar"> <div> <a ng-if="project.scene.is2d" class="fa-stack fa-2x editorToolbarButton" ng-click="setGizmoMode(\'multi\')" ng-class="{\'active\':gizmoMode===\'multi\'}" tooltip="ui_editor_gizmo_multi"> <span class="far fa-fw fa-circle fa-stack-1x" style="font-size: 1.3em"></span> <span class="fas fa-fw fa-arrows-alt fa-stack-1x" style="font-size: 0.8em"></span> </a> <a class="editorToolbarButton" ng-click="setGizmoMode(\'translate\')" ng-class="{\'active\':gizmoMode===\'translate\'}" tooltip="ui_editor_gizmo_translate"> <span class="fas fa-fw fa-arrows-alt"></span> </a> <a class="editorToolbarButton" ng-click="setGizmoMode(\'rotate\')" ng-class="{\'active\':gizmoMode===\'rotate\'}" tooltip="ui_editor_gizmo_rotate"> <span class="fas fa-fw fa-sync-alt"></span> </a> <a class="editorToolbarButton" ng-click="setGizmoMode(\'scale\')" ng-class="{\'active\':gizmoMode===\'scale\'}" tooltip="ui_editor_gizmo_scale"> <span class="fas fa-fw fa-expand-arrows-alt"></span> </a> <div class="editorToolbarSeparator"> <div></div> </div> <a class="editorToolbarButton" ng-click="toggleShowGrid()" ng-class="{\'active\':editorSettings.showgrid}" tooltip="ui_editor_filemenu_show_grid"> <span class="fas fa-fw fa-th"></span> </a> <a class="editorToolbarButton" ng-click="toggleShowSelectionBox()" ng-class="{\'active\':editorSettings.showselectionbox}" tooltip="ui_editor_filemenu_show_selection_box"> <span class="far fa-fw fa-square"></span> </a> <a class="editorToolbarButton" ng-click="toggleShowStats()" ng-class="{\'active\':editorSettings.showstats}" tooltip="ui_editor_filemenu_show_stats"> <span class="fas fa-fw fa-chart-line"></span> </a> \x3c!--             <a class="editorToolbarButton fa" ng-click="setCameraMode(\'fly\')" ng-class="{\'active\':cameraMode===\'fly\'}" tooltip="Camera mode \'fly\'">\r\n                <span class="fas fa-plane"></span>\r\n                <span class="editorToolbarButtonCameraAddon fas fa-camera"></span>\r\n            </a>\r\n            <a class="editorToolbarButton fa" ng-click="setCameraMode(\'pivot\')" ng-class="{\'active\':cameraMode===\'pivot\'}" tooltip="Camera mode \'pivot\'">\r\n                <span class="fas fa-street-view"></span>\r\n                <span class="editorToolbarButtonCameraAddon fas fa-camera"></span>\r\n            </a> --\x3e </div> <div ng-if="showRunScript || isRunningScriptPreview"> <button class="btn btn-default" ng-if="!isRunningScriptPreview" ng-click="callbackRunScriptPreview(true)" ng-disabled="waitForScriptToggle || keyDisableScriptPreview"><span class="fas fa-play successText"></span> <span translate="ui_editor_script_run_scripts"></span></button> <button class="btn btn-default" ng-if="isRunningScriptPreview" ng-click="callbackRunScriptPreview(false)" ng-disabled="waitForScriptToggle"><span class="fas fa-stop dangerText"></span> <span translate="ui_editor_script_stop_scripts"></span></button> </div> <div class="rightToolbarElement"></div> </div> <div class="editorLayoutRoot" layout l-layout-type="layoutType" l-ctrl="layoutCtrl" l-saved-layouts="editorSettings.savedlayouts"> <div class="editorLayoutPanel editorSceneGraphRootContainer" layout-panel="{tag: \'files\', title: \'ui_editor_treeview_header_files\', icon: \'fas fa-fw fa-copy\'}"> <div class="editorSceneGraphTree"> <tree-view class="treeViewRoot" tv-drag-drop-tag="renderable" tv-drag-drop-enabled="project.data.type===\'scene\'" tv-data="project.tree" tv-selected-item="selectedResource" tv-remove-clicked="onResourceRemove(item)" tv-element-dragged="onResourceDragged(from, to)" tv-new-element-added="onResourceAddedToScene(item, index)" tv-send-asset-property-change="sendAssetPropertyChange(resource, property)" tv-context-menu="callbackAssetContextMenu($event, item)"></tree-view> </div> </div> <div class="editorLayoutPanel editorSceneGraphRootContainer" layout-panel="{tag: \'layers\', title: \'ui_editor_tooltip_layers\', icon: \'fas fa-fw fa-layer-group\'}"> <div> <a class="btn btn-primary fullWidth" ng-click="showAddRenderableModal()"><span class="fas fa-plus"></span> {{\'ui_editor_camera_add_renderable\' | translate}}</a> </div> <div class="editorSceneGraphTree"> <tree-view class="treeViewRoot" tv-drag-drop-tag="renderable" tv-drag-drop-enabled="project.data.type===\'scene\'" tv-data="project.tree" tv-mode="\'scene\'" tv-selected-item="selectedResource" tv-remove-clicked="onResourceRemove(item)" tv-element-dragged="onResourceDragged(from, to)" tv-new-element-added="onResourceAddedToScene(item, index)" tv-send-asset-property-change="sendAssetPropertyChange(resource, property)" tv-context-menu="callbackAssetContextMenu($event, item)"></tree-view> </div> <div class="editorScriptBlockOverlay" ng-if="isRunningScriptPreview || waitForScriptToggle"></div> </div> <div class="editorLayoutPanel editorSceneGraphRootContainer" layout-panel="{tag: \'camerapaths\', title: \'ui_editor_pane_header_camera\', icon: \'fas fa-fw fa-camera\', canClose: true, hidden: true, siblingTag: \'sceneoptions\'}"> <div> <a class="btn btn-primary fullWidth" ng-click="addCameraPath()"><span class="fas fa-plus"></span> {{\'ui_editor_camera_add_path\' | translate}}</a> </div> <div class="editorSceneGraphTree"> <tree-view class="treeViewRoot" tv-drag-drop-tag="camera" tv-drag-drop-enabled="true" tv-data="project.camerapaths" tv-mode="\'scene\'" tv-selected-item="selectedResource" tv-remove-clicked="onCameraPathRemove(item)" tv-element-dragged="onCameraPathDragged(from, to)"></tree-view> </div> <div class="editorScriptBlockOverlay" ng-if="isRunningScriptPreview || waitForScriptToggle"></div> </div> <div class="editorLayoutPanel editorPropertyPaneRoot" layout-panel="{tag: \'sceneoptions\', title: \'ui_editor_tooltip_scene_options\', icon: \'fas fa-fw fa-cog\'}"> <div class="editorPropertyPaneProperties"> <property-list p-list="project.scenegeneralproperties.properties" p-ctrl="propertyControl" p-owner="project.scenegeneralproperties" p-condition-scope="this" p-modal-depth="0"></property-list> </div> <div class="editorScriptBlockOverlay" ng-if="isRunningScriptPreview || waitForScriptToggle"></div> </div> <div class="editorLayoutPanel editorLayoutPreview" native-drop-target="dropFile(droppedFiles)" ndt-extension-tag="nativeDropOptions.previewExtension" ndt-desired-modal-depth="0" layout-panel="{tag: \'preview\', title: \'ui_editor_pane_header_preview\', noHide: true, icon: \'fas fa-fw fa-image\'}"> <div class="previewContainer"> <span ng-if="isEditingCameraPath()" disable-animate class="editorOverlayIcon fas fa-video fa-3x"></span> <span ng-if="paintOptions.enabled" disable-animate class="editorOverlayIcon fas fa-paint-brush fa-3x"></span> <div class="editorSceneStatsOverlay" ng-if="editorSettings.showstats"> <div><span translate="ui_editor_stats_title"></span></div> <div><span translate="ui_editor_stats_draw_calls"></span><span>{{renderStats.drawcalls}}</span></div> <div><span translate="ui_editor_stats_primitives"></span><span>{{renderStats.renderedprimitives}}</span></div> <div><span translate="ui_editor_stats_framebuffer_copies"></span><span>{{renderStats.framebuffercopies}}</span></div> <div><span translate="ui_editor_stats_particle_count"></span><span>{{renderStats.particlecount}}</span></div> <div><span translate="ui_editor_stats_particle_memory"></span><span>{{renderStats.particlememory | number : 2}}</span></div> <div ng-class="{\'danger\':renderStats.texturememory>400}"><span translate="ui_editor_stats_texture_memory"></span><span>{{renderStats.texturememory}}</span></div> <div ng-class="{\'danger\':renderStats.particlesimulationtime>10}"><span translate="ui_editor_stats_particle_simulation_time"></span><span>{{renderStats.particlesimulationtime.toFixed(3)}}</span></div> <div ng-class="{\'danger\':renderStats.scriptexecutiontime>10}"><span translate="ui_editor_stats_script_execution_time"></span><span>{{renderStats.scriptexecutiontime.toFixed(3)}}</span></div> <div><span translate="ui_editor_stats_render_target_changes"></span><span>{{renderStats.rendertargetstatechanges}}</span></div> </div> <preview p-options="{tag:\'main\', ctrl:\'previewCtrl\', interactive:true}" p-aspect-ratio="editorSettings.previewratio" p-mouse-handler="paintMouseHandler"></preview> <camera-timeline ng-if="isEditingCameraPath()" ct-data="selectedResource.item"></camera-timeline> </div> </div> <div class="editorLayoutPanel editorPropertyPaneRoot" layout-panel="{tag: \'properties\', title: \'ui_editor_pane_header_properties\', icon: \'fas fa-fw fa-list\'}"> <div class="editorNavigationHeader" ng-if="selectedResource.stack.length > 1"> <span><a class="lnk" ng-repeat="nav in selectedResource.stack track by $index" ng-click="navigateProperty(nav.key, nav.id)"> <span class="fas fa-caret-right ico"></span> <span class="lbl">{{nav.label ? (nav.label | translate) : nav.key}}</span> </a></span> </div> <div class="editorPropertyPaneProperties"> <property-list p-list="selectedResource.item.properties" p-ctrl="propertyControl" p-owner="selectedResource.item" p-condition-scope="this" p-modal-depth="0"></property-list> </div> <div class="editorScriptBlockOverlay" ng-if="isRunningScriptPreview || waitForScriptToggle"></div> </div> <div class="editorLayoutPanel editorAssetListingTreeViewContainer" layout-panel="{tag: \'assets\', title: \'ui_editor_pane_header_assets\', icon: \'fas fa-fw fa-copy\', canClose: true}"> <tree-view class="treeViewRoot" tv-drag-drop-tag="renderable" tv-drag-drop-enabled="true" tv-data="project.availableassets" tv-mode="\'directory\'"></tree-view> <div class="editorScriptBlockOverlay" ng-if="isRunningScriptPreview || waitForScriptToggle"></div> </div> <div class="editorLayoutPanel editorScriptLog" layout-panel="{tag: \'log\', title: \'ui_editor_pane_header_log\', icon: \'fas fa-fw fa-terminal\', canClose: true}"> <script-console sc-editor-settings="editorSettings" sc-msg-click="callbackClickScriptMessage(message)"></script-console> </div> \x3c!--             <div class="editorLayoutPanel editorAnimation" layout-panel="{tag: \'animation\', title: \'ui_editor_pane_header_animation\', icon: \'fas fa-fw fa-play-circle\', canClose: true, onClose: onAnimationClosed, hidden: 0, noPadding: true, titleClass: \'editorAnimationTitle\', siblingTag: \'log\'}">\r\n                <curve-editor ce-properties="animationData.properties" ce-options="animationData.options" ce-ctrl="animationCtrl"></curve-editor>\r\n            </div> --\x3e <div class="editorLayoutPanel editorBrushSettings" layout-panel="{tag: \'brush\', title: \'ui_editor_pane_header_brush\', icon: \'fas fa-fw fa-paint-brush\', canClose: true, onClose: onPaintBrushClosed, hidden: true, noPadding: true, titleClass: \'editorBrushSettingsTitle\', siblingTag: \'sceneoptions\'}" layout-class="{rules:[{minWidth:300,minWidthClass:\'editorBrushSettingsSmall\'}]}"> <div class="editorBrushSettingsBox"> <div class="editorPaintOverlayControls"> <div> <a class="btn btn-primary fullWidth" ng-click="endPaint(true)"><span class="fas fa-save"></span> {{\'ui_ok\' | translate}}</a> <a class="btn btn-danger fullWidth" ng-click="endPaint(false)"><span class="fas fa-times"></span> {{\'ui_cancel\' | translate}}</a> </div> <div ng-if="paintOptions.mode != \'weightmask\'"> <div style="display:flex;flex-direction:row;"> <a class="btn btn-default fullWidth" ng-disabled="!paintHistoryState.canundo" tooltip="Undo" ng-click="applyPaintHistory(true)"><span class="fas fa-undo"></span></a> <a class="btn btn-default fullWidth" ng-disabled="!paintHistoryState.canrepeat" tooltip="Repeat" ng-click="applyPaintHistory(false)"><span class="fas fa-redo"></span></a> </div> <a class="btn btn-default fullWidth" ng-click="clearPaint()"><span ng-class="{\'fas fa-fill-drip\':paintOptions.mode == \'opacitymask\' || paintOptions.mode == \'rgbmask\',\'far fa-file\':!(paintOptions.mode == \'opacitymask\' || paintOptions.mode == \'rgbmask\')}"></span> {{\'ui_editor_properties_clear\' | translate}}</a> </div> \x3c!--\r\n                        <div>\r\n                            <a class="btn btn-default fullWidth" ng-click="clearPaint()"><span class="far fa-file"></span> {{\'ui_editor_properties_clear\' | translate}}</a>\r\n                            <a class="btn btn-danger fullWidth" ng-click="endPaint(false)"><span class="fas fa-times"></span> {{\'ui_cancel\' | translate}}</a>\r\n                        </div>\r\n                         <div>\r\n                            <div style="display:flex;flex-direction:row;">\r\n                                <a class="btn btn-default fullWidth" ng-disabled="!paintHistoryState.canundo" tooltip="Undo" ng-click="applyPaintHistory(true)"><span class="fas fa-undo"></span></a>\r\n                                <a class="btn btn-default fullWidth" ng-disabled="!paintHistoryState.canrepeat" tooltip="Repeat" ng-click="applyPaintHistory(false)"><span class="fas fa-redo"></span></a>\r\n                            </div>\r\n                            <a class="btn btn-primary fullWidth" ng-click="endPaint(true)"><span class="fas fa-save"></span> {{\'ui_ok\' | translate}}</a>\r\n                        </div>\r\n                    --\x3e </div> </div> <div class="editorBrushSettingsBox"> <div class="paintControlLabels" ng-if="paintOptions.mode == \'weightmask\'"> <span class="paintControlLabelsText paintControlLabelsTextBreak" translate="ui_editor_properties_type"></span> <a class="btn" ng-class="{\'btn-primary\': paintOptions.brushtype == \'\', \'btn-default\':paintOptions.brushtype != \'\'}" ng-click="paintOptions.brushtype = \'\'" tooltip="ui_editor_properties_add"><span class="fas fa-fw fa-plus"></span> <span class="typeLabel" translate="ui_editor_properties_add"></span></a> <a class="btn" ng-class="{\'btn-primary\': paintOptions.brushtype == \'subtract\', \'btn-default\':paintOptions.brushtype != \'subtract\'}" ng-click="paintOptions.brushtype = \'subtract\'" tooltip="ui_editor_properties_subtract"><span class="fas fa-fw fa-minus"></span> <span class="typeLabel" translate="ui_editor_properties_subtract"></span></a> <a class="btn" ng-class="{\'btn-primary\': paintOptions.brushtype == \'smooth\', \'btn-default\':paintOptions.brushtype != \'smooth\'}" ng-click="paintOptions.brushtype = \'smooth\'" tooltip="ui_editor_properties_smooth"><span class="fas fa-fw fa-tint"></span> <span class="typeLabel" translate="ui_editor_properties_smooth"></span></a> </div> \x3c!-- <a class="btn"><span class="fas fa-fw fa-paint-brush"></span></a> --\x3e \x3c!-- <a class="btn"><span class="fas fa-fw fa-eraser"></span></a> --\x3e <div class="paintControlLabels" ng-if="paintOptions.mode == \'flowmask\'"> <span class="paintControlLabelsText" translate="ui_editor_properties_type"></span> <a class="btn" ng-class="{\'btn-primary\': paintOptions.brushtype == \'\', \'btn-default\':paintOptions.brushtype != \'\'}" ng-click="paintOptions.brushtype = \'\'" tooltip="ui_editor_properties_direction"><span class="fas fa-fw fa-arrow-from-left"></span> <span class="typeLabel" translate="ui_editor_properties_direction"></span></a> <a class="btn" ng-class="{\'btn-primary\': paintOptions.brushtype == \'spin\', \'btn-default\':paintOptions.brushtype != \'spin\'}" ng-click="paintOptions.brushtype = \'spin\'" tooltip="ui_editor_properties_spin"><span class="fas fa-fw fa-sync-alt"></span> <span class="typeLabel" translate="ui_editor_properties_spin"></span></a> <a class="btn" ng-class="{\'btn-primary\': paintOptions.brushtype == \'spread\', \'btn-default\':paintOptions.brushtype != \'spread\'}" ng-click="paintOptions.brushtype = \'spread\'" tooltip="ui_editor_properties_spread"><span class="fas fa-fw fa-expand-arrows-alt"></span> <span class="typeLabel" translate="ui_editor_properties_spread"></span></a> <a class="btn" ng-class="{\'btn-primary\': paintOptions.brushtype == \'pinch\', \'btn-default\':paintOptions.brushtype != \'pinch\'}" ng-click="paintOptions.brushtype = \'pinch\'" tooltip="ui_editor_properties_pinch"><span class="fas fa-fw fa-compress-arrows-alt"></span> <span class="typeLabel" translate="ui_editor_properties_pinch"></span></a> <a class="btn" ng-class="{\'btn-primary\': paintOptions.brushtype == \'fixeddirection\', \'btn-default\':paintOptions.brushtype != \'fixeddirection\'}" ng-click="paintOptions.brushtype = \'fixeddirection\'" tooltip="ui_editor_properties_fixed_direction"><span class="fas fa-fw fa-arrow-right"></span> <span class="typeLabel" translate="ui_editor_properties_fixed_direction"></span></a> </div> </div> <div class="editorBrushSettingsBox" ng-if="paintOptions.brushtype == \'fixeddirection\'"> <div class="paintControlLabels"> <span class="paintControlLabelsText" translate="ui_editor_properties_angle"></span> <span> <knob ng-model="paintOptions.angle"></knob> </span> <span class="paintControlLabelsValue">{{paintOptions.angleDegrees}}</span> </div> </div> <div class="editorBrushSettingsBox"> <div class="paintControlLabels" ng-if="paintOptions.mode == \'opacitymask\' || paintOptions.mode == \'flowmask\'"> <span class="paintControlLabelsText">{{paintOptions.mode == \'flowmask\' ? \'ui_editor_properties_strength\' : \'ui_editor_properties_amount\' | translate}}</span> <span> <rzslider rz-slider-model="paintOptions.value" rz-slider-options="{ceil:255, floor:0}"></rzslider> </span> <span class="paintControlLabelsValue">{{paintOptions.value}}</span> <span class="editorPaintOverlayValuePreview" ng-attr-style="background-color: rgb({{paintOptions.value}}, {{paintOptions.value}}, {{paintOptions.value}})"></span> </div> <div class="paintControlLabels" ng-if="paintOptions.mode == \'rgbmask\'"> <span class="paintControlLabelsText" translate="ui_editor_properties_color"></span> <span> <spectrum-colorpicker options="colorPickerSettings" ng-model="paintOptions.color" on-show-options="{update:false}" vec-color-converter></spectrum-colorpicker> </span> </div> <div class="paintControlLabels"> <span class="paintControlLabelsText" translate="ui_editor_properties_size"></span> <span> <rzslider rz-slider-model="paintOptions.size" rz-slider-options="paintOptionsSliderSize"></rzslider> </span> <span class="paintControlLabelsValue">{{paintOptions.size}}</span> <span class="editorPaintOverlaySizePreview"> <span ng-attr-style="width: {{getPaintBrushSizePreview()}}px; height: {{getPaintBrushSizePreview()}}px"></span> </span> </div> </div> <div class="editorBrushSettingsBox"> <div class="paintControlLabels"> <span class="paintControlLabelsText" translate="ui_editor_properties_opacity"></span> <span> <rzslider rz-slider-model="paintOptions.opacity" rz-slider-options="{ceil:100, floor:1}"></rzslider> </span> <span class="paintControlLabelsValue">{{paintOptions.opacity}}</span> <span class="editorPaintOverlaySizePreview"> <span ng-attr-style="opacity: {{paintOptions.opacity / 100}}"></span> </span> </div> <div class="paintControlLabels"> <span class="paintControlLabelsText" translate="ui_editor_properties_hardness"></span> <span> <rzslider rz-slider-model="paintOptions.hardness" rz-slider-options="{ceil:100, floor:0}"></rzslider> </span> <span class="paintControlLabelsValue">{{paintOptions.hardness}}</span> <span class="editorPaintOverlaySizePreview"> <span ng-attr-style="width:12px;height:12px;filter: blur({{(1.0 - (paintOptions.hardness / 100)) * 6}}px)"></span> </span> </div> </div> <div class="editorBrushSettingsBox"> <div class="editorPaintOverlayControls" ng-if="paintOptions.mode != \'weightmask\'"> <div> <a class="btn fullWidth" ng-class="{\'btn-default\':!paintOptions.showmask,\'btn-primary\':paintOptions.showmask}" translate="ui_editor_properties_show_mask" ng-click="paintOptions.showmask=!paintOptions.showmask"></a> </div> \x3c!--                         <a class="btn fullWidth" ng-class="{\'btn-default\':!paintOptionsLocal.isolateEffect,\'btn-primary\':paintOptionsLocal.isolateEffect}" translate="ui_editor_properties_isolate_effect" ng-click="togglePaintIsolateEffect()"></a> --\x3e </div> </div> <div class="editorScriptBlockOverlay" ng-if="isRunningScriptPreview || waitForScriptToggle"></div> </div> \x3c!--             <div class="editorLayoutPanel" layout-panel="{tag: \'scripteditor\', title: \'ui_editor_pane_header_script_editor\', icon: \'fas fa-fw fa-code\'}">\r\n            </div>\r\n            <div class="editorLayoutPanel" layout-panel="{tag: \'shadereditor\', title: \'ui_editor_pane_header_shader_editor\', icon: \'fas fa-fw fa-code-branch\'}">\r\n            </div> --\x3e </div> </div> <div ng-if="steamWorkshopStatus" class="browseWallpapersWorkshopStatus" ng-class="{\'workshopError\':steamWorkshopStatus.error, \'invis\':steamWorkshopStatus.hidden}"> <div> <span ng-class="providerIcon"></span></div> <div translate="{{steamWorkshopStatus.text}}" translate-values="{{steamWorkshopStatus}}"></div> </div> <div ng-if="blockEditorInput" class="editorInputBlock"></div> </div> '),e.put("views/views/empty.html",'<div class="text-center" style="padding-top: 15px;font-size: 170%"> <div>Nothing to see here.</div> <div style="color:#999;font-size:40%;">(Either you started the UI directly or there has been an error)</div> <div style="padding-top: 15px;"> <a class="btn btn-primary" style="font-size:150%;margin-top:20px;" onclick="window.ui.close()">{{btnText}}</a> \x3c!-- ng-click="showimg = true;" --\x3e </div> \x3c!-- <div ng-if="showimg" onclick="window.ui.close()" style="position: absolute; left: 0px; top: 0px; width:100%; height:100%; background: url(\'https://media.giphy.com/media/2ZgsAUCqN0q1a/giphy.gif\'); background-size: cover;background-position: center center;"></div>--\x3e </div> '),e.put("views/views/settings.html",'<div class="clientArea"> <div> <uib-tabset class="tab-animation settingsTabs" active="tabInfo.activeIndex"> \x3c!--         \r\n        Performance tab\r\n --\x3e <uib-tab heading="{{\'ui_settings_performance\' | translate}}" select="refreshSlider()"> <div class="settingsContainer"> <div class="groupBox"> <div class="heading" translate="ui_settings_playback"></div> <div class="infoTable settingsPlaybackTable"> <div> <div class="infoTableLabel" translate="ui_settings_playback_focused"> </div> <div> <droplist dp-options="playbackOptionsFocus" dp-selected="generalSettings.playbackfocus"></droplist> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_playback_maximized"> </div> <div> <droplist dp-options="playbackOptionsMaximized" dp-selected="generalSettings.playbackmaximized"></droplist> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_playback_fullscreen"> </div> <div> <droplist dp-options="playbackOptionsFullscreen" dp-selected="generalSettings.playbackfullscreen"></droplist> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_playback_playing_audio"> </div> <div> <droplist dp-options="playbackOptionsAudio" dp-selected="generalSettings.playbackaudio"></droplist> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_playback_sleep"> </div> <div> <droplist dp-options="playbackOptionsSleep" dp-selected="generalSettings.playbacksleep"></droplist> </div> </div> <div ng-if="runtime.islaptop"> <div class="infoTableLabel" translate="ui_settings_playback_battery"> </div> <div> <droplist dp-options="playbackOptionsBattery" dp-selected="generalSettings.playbackonbattery"></droplist> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_playback_application_rules"></div> <div> <button class="btn btn-primary fullWidth" translate="ui_settings_playback_application_rules_edit" ng-click="editPerApplicationSettings()"></button> </div> </div> </div> </div> <div class="groupBox"> <div class="heading" translate="ui_settings_gfx_quality"></div> <div class="infoTable settingsPlaybackTable"> <div> <div class="infoTableLabel" translate="ui_settings_gfx_preset"> </div> <div class="fullWidth alignRight"> <div class="btn-group"> <a class="btn btn-primary settingsQualityButton" ng-click="applyPreset(0)" translate="ui_settings_gfx_preset_low"></a> <a class="btn btn-primary settingsQualityButton" ng-click="applyPreset(1)" translate="ui_settings_gfx_preset_medium"></a> <a class="btn btn-primary settingsQualityButton" ng-click="applyPreset(2)" translate="ui_settings_gfx_preset_high"></a> </div> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_gfx_antialiasing"> </div> <div ng-if="generalSettings.msaa==\'x8\'" class="infoTableExclamation" tooltip="ui_settings_gfx_tooltip_warn_msaa" t-options="{delay:150}"> <span class="fas fa-exclamation-triangle"></span> </div> <div> <droplist dp-options="antiAliasingOptions" dp-selected="generalSettings.msaa"></droplist> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_gfx_post_processing"> </div> <div ng-if="generalSettings.postprocessing==\'ultra\'" class="infoTableExclamationWarning" tooltip="ui_settings_gfx_tooltip_warn_post_processing_ultra" t-options="{delay:150}"> <span class="fas fa-exclamation-triangle"></span> </div> <div> <droplist dp-options="postProcessingOptions" dp-selected="generalSettings.postprocessing"></droplist> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_gfx_resolution"> </div> <div> <droplist dp-options="resolutionOptions" dp-selected="generalSettings.resolution"></droplist> </div> </div> <div style="position: relative"> <div class="infoTableLabel" translate="ui_settings_gfx_fps"> </div> <div ng-if="generalSettings.fps > 30 && generalSettings.fps <= 60" class="infoTableExclamationWarning" tooltip="ui_settings_gfx_fps_warning" t-options="{delay:150}"> <span class="fas fa-exclamation-triangle"></span> </div> <div ng-if="generalSettings.fps > 60" class="infoTableExclamation" tooltip="ui_settings_gfx_fps_warning_high" t-options="{delay:150}"> <span class="fas fa-exclamation-triangle"></span> </div> <div class="rzsliderContainer" style="width: 215px"> <rzslider rz-slider-model="generalSettings.fps" rz-slider-options="fpsSlider"></rzslider> </div> <div style="width: 30px; text-align: right;"> {{generalSettings.fps}} </div> </div> <div class="settingsQualityCheckboxRow"> <div class="infoTableLabel" translate="ui_settings_gfx_reflections"> </div> <div> <checkbox cb-checked="generalSettings.reflection"></checkbox> </div> </div> </div> </div> </div> </uib-tab> \x3c!--         \r\n        General tab\r\n --\x3e <uib-tab heading="{{\'ui_settings_general\' | translate}}" select="refreshSlider()"> <div class="settingsContainer"> <div class="groupBox"> <div class="heading">{{\'ui_settings_miscellaneous\' | translate}}</div> <div class="infoTable settingsPlaybackTable"> <div class="settingsAutostartCheckboxRow"> <div class="infoTableLabel" translate="ui_settings_start_with_windows"> </div> <div> <checkbox cb-checked="generalSettings.autostart" cb-changed="toggleAutoStartRegistry(generalSettings.autostart)" class="autostart" cb-title="\'\'" ng-show="!generalSettings.autostartscheduler"></checkbox> <a class="btn btn-primary btn-sm autoStartButton" ng-class="{\'btn-success btn-autostart-set\':generalSettings.autostartscheduler}" ng-click="generalSettings.autostart&&toggleAutoStartScheduler(!generalSettings.autostartscheduler)" ng-disabled="!generalSettings.autostart"><img src="images/uac_small.png"> {{generalSettings.autostartscheduler ? \'ui_settings_remove_service\' : \'ui_settings_register_service\' | translate}}</a> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_adjust_windows_color"> </div> <div> <checkbox ng-if="!isWindows10OrGreater" cb-checked="dwmColorSettings.adjustdwmcolor"></checkbox> <droplist ng-if="isWindows10OrGreater" dp-options="adjustDWMColorModes" dp-selected="dwmColorSettings.adjustdwmcolormode"></droplist> </div> </div> <div style="position: relative;"> <div class="infoTableLabel" translate="ui_settings_ui_language"> </div> <div> <droplist class="settingsLanguageDropList" dp-options="availableLanguages" dp-selected="generalSettings.language"></droplist> </div> \x3c!-- <a ng-click="openTranslationHelp()" style="position: absolute;color:#A03; font-size:90%; bottom: -5px">Help translate Wallpaper Engine!</a> --\x3e </div> <div> <div class="infoTableLabel" translate="ui_settings_hotkeys"></div> <div> <button class="btn btn-primary fullWidth" translate="ui_settings_playback_application_rules_edit" ng-click="editHotkeys()"></button> </div> </div> <div class="settingsGeneralSlider"> <div class="rzsliderLabel"> <div class="infoTableLabel" translate="ui_settings_icon_opacity"></div> </div> <div class="rzsliderContainer"> <rzslider rz-slider-model="generalSettings.iconopacity" rz-slider-options="iconOpacitySlider"></rzslider> <div class="rzsliderSuffix"> {{generalSettings.iconopacity}}% </div> </div> </div> </div> </div> <div class="groupBox"> <div class="heading">{{\'ui_settings_appearance\' | translate}}</div> <div class="infoTable settingsPlaybackTable"> <div> \x3c!-- ng-if="generalSettings.konami" --\x3e <div class="infoTableLabel" translate="ui_settings_theme"> </div> <div> <droplist class="settingsSkinDropList" dp-options="generalSettings.konami ? uiSkinsFull : uiSkins" dp-selected="generalSettings.uiskin"></droplist> </div> </div> <div ng-if="canUseSeasonalTheming()" style="margin-bottom:12px;position:relative;"> <div class="infoTableLabel" translate="ui_settings_seasonal_theme" ng-click="generalSettings.uiskinseasonal=!generalSettings.uiskinseasonal"> </div> <div> <checkbox cb-checked="generalSettings.uiskinseasonal"></checkbox> \x3c!-- <droplist dp-options="generalSettings.konami ? uiSkinsFull : uiSkins" dp-selected="generalSettings.uiskinseasonal"></droplist> --\x3e </div> <span style="position: absolute;color:#A03; font-size:90%; bottom: -8px" translate="ui_settings_seasonal_theme_hint"></span> </div> </div> </div> <div class="groupBox"> <div class="heading" translate="ui_settings_media"></div> <div class="infoTable settingsPlaybackTable"> <div class="settingsGeneralSlider"> <div class="rzsliderLabel"> <span class="fas fa-volume-up rzsliderLabelIcon"></span> <div class="infoTableLabel" ng-click="generalSettings.videoaudiooutput=!generalSettings.videoaudiooutput" translate="ui_settings_video_audio_label"></div> </div> <div class="rzsliderContainer"> <checkbox cb-checked="generalSettings.videoaudiooutput"></checkbox> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_audio_input_device"> </div> <div> <droplist dp-empty-text="ui_settings_no_devices" dp-options="runtime.audiodevices" dp-selected="generalSettings.audioinputdevice"></droplist> </div> </div> <div class="settingsGeneralSlider"> <div class="rzsliderLabel"> <span class="fas fa-microphone rzsliderLabelIcon"></span> <div class="infoTableLabel audioInputText" translate="ui_settings_recording_volume"></div> </div> <div class="rzsliderContainer"> <rzslider rz-slider-model="generalSettings.audioinputvolume" rz-slider-options="audioSlider"></rzslider> <div class="rzsliderSuffix"> <input class="rzsliderSuffixInput" type="number" ng-model="generalSettings.audioinputvolume"> </div> </div> </div> <div class="settingsGeneralSlider"> <div class="rzsliderLabel"> <span class="far fa-tachometer-slowest rzsliderLabelIcon"></span> <div class="infoTableLabel audioInputText" translate="ui_settings_recording_threshold"></div> </div> <div class="rzsliderContainer"> <rzslider rz-slider-model="generalSettings.audioinputthreshold" rz-slider-options="audioThresholdSlider"></rzslider> <div class="rzsliderSuffix"> <input class="rzsliderSuffixInput" type="number" ng-model="generalSettings.audioinputthreshold"> </div> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_video_hardware_acceleration_label" ng-click="generalSettings.videohardwareacceleration=!generalSettings.videohardwareacceleration"> </div> <div> <checkbox cb-checked="generalSettings.videohardwareacceleration"></checkbox> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_advanced_video_framework"> </div> <div> <droplist class="" dp-options="videoFrameworkOptions" dp-selected="generalSettings.videoframework"></droplist> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_advanced_video_read"> </div> <div> <droplist class="" dp-options="videoReadOptions" dp-selected="generalSettings.videoreadmode"></droplist> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_advanced_video_loop"> </div> <div> <droplist class="" dp-options="videoLoopOptions" dp-selected="generalSettings.videoloopmode"></droplist> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_advanced_webm_framework"> </div> <div> <droplist class="" dp-options="webmFrameworkOptions" dp-selected="generalSettings.webmframework"></droplist> </div> </div> </div> </div> <div class="groupBox"> <div class="heading" translate="ui_settings_advanced"></div> <div class="infoTable settingsPlaybackTable"> <div> <div class="infoTableLabel" translate="ui_settings_process_priority"> </div> <div> <droplist class="" dp-options="priorityOptions" dp-selected="generalSettings.processpriority"></droplist> </div> </div> <div ng-if="!isWindows8OrGreater"> <div class="infoTableLabel" translate="ui_settings_windows_7_wallpaper_mode"> </div> <div> <droplist class="" dp-options="windows7WallpaperModeOptions" dp-selected="generalSettings.windows7mode"></droplist> </div> </div> <div> <div class="infoTableLabel"> {{\'ui_settings_advanced_monitor_identification\'|translate}} <a class="pull-right" style="padding-right:10px" ng-click="showMonitorIdentificationHelp()"><span class="fas fa-question"></span></a> </div> <div> <droplist class="" dp-options="monitorDetectionOptions" dp-selected="generalSettings.monitordetection"></droplist> </div> </div> <div ng-if="generalSettings.graphicsapi != \'dxgi\'"> <div class="infoTableLabel" translate="ui_settings_advanced_graphics_api"> </div> <div> <droplist class="" dp-options="graphicsApiOptions" dp-selected="generalSettings.graphicsapi"></droplist> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_advanced_log_level"> </div> <div> <droplist dp-options="logLevelOptions" dp-selected="generalSettings.loglevel"></droplist> </div> </div> <div class="settingsQualityCheckboxRow"> <div class="infoTableLabel" ng-click="generalSettings.safemode=!generalSettings.safemode" translate="ui_settings_use_safe_mode"> </div> <div> <checkbox cb-checked="generalSettings.safemode"></checkbox> </div> </div> <div class="settingsGeneralSlider"> <div class="rzsliderLabel"> <div class="infoTableLabel" ng-click="generalSettings.extremesleephack=!generalSettings.extremesleephack"> {{\'ui_settings_advanced_sleep_hack\'|translate}} <a class="pull-right" style="padding-right:10px" ng-click="showSleepHackHelp($event)"><span class="fas fa-question"></span></a> </div> </div> <div class="rzsliderContainer"> <checkbox cb-checked="generalSettings.extremesleephack"></checkbox> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_ui_hardware_acceleration" ng-click="generalSettings.uihardwareacceleration=!generalSettings.uihardwareacceleration"> </div> <div> <checkbox cb-checked="generalSettings.uihardwareacceleration"></checkbox> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_ui_effects" ng-click="generalSettings.uieffects=!generalSettings.uieffects"> </div> <div> <checkbox cb-disabled="!generalSettings.uihardwareacceleration" cb-checked="generalSettings.uieffects"></checkbox> </div> </div> <div class="settingsGeneralSlider"> <div class="rzsliderLabel"> <div class="infoTableLabel" ng-click="generalSettings.slideshowkiller=!generalSettings.slideshowkiller" translate="ui_settings_disable_slideshow"></div> </div> <div class="rzsliderContainer"> <checkbox cb-checked="generalSettings.slideshowkiller"></checkbox> </div> </div> <div class="settingsGeneralSlider"> <div class="rzsliderLabel"> <div class="infoTableLabel" ng-click="generalSettings.unpauseaero=!generalSettings.unpauseaero" translate="ui_settings_advanced_unpause_during_aero_peek"></div> </div> <div class="rzsliderContainer"> <checkbox cb-checked="generalSettings.unpauseaero"></checkbox> </div> </div> <div class="settingsGeneralSlider"> <div class="rzsliderLabel"> <div class="infoTableLabel" ng-click="generalSettings.pausevram=!generalSettings.pausevram" translate="ui_settings_advanced_stop_on_low_vram"></div> </div> <div class="rzsliderContainer"> <checkbox cb-checked="generalSettings.pausevram"></checkbox> </div> </div> \x3c!--                             <div class="settingsQualityCheckboxRow">\r\n                                <div class="infoTableLabel" ng-click="generalSettings.uihardwareacceleration=!generalSettings.uihardwareacceleration"  translate="ui_settings_ui_hardware_acceleration">\r\n                                </div>\r\n                                <div>\r\n                                    <checkbox cb-checked="generalSettings.uihardwareacceleration"></checkbox>\r\n                                </div>\r\n                            </div> --\x3e \x3c!--                             <div class="settingsQualityCheckboxRow">\r\n                                <div class="infoTableLabel" ng-click="generalSettings.trayicon=!generalSettings.trayicon" translate="ui_settings_show_tray_icon">\r\n                                </div>\r\n                                <div>\r\n                                    <checkbox cb-checked="generalSettings.trayicon"></checkbox>\r\n                                </div>\r\n                            </div> --\x3e <div> <div class="infoTableLabel" translate="ui_settings_advanced_cef_command_line"> </div> <div> <input type="text" style="outline:none" class="fullWidth" ng-model="generalSettings.cefcommandline" ng-model-options="{debounce: 1200}" spellcheck="false"> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_advanced_cef_devtools_port"> </div> <div> <input type="number" style="outline:none" class="fullWidth" ng-model="generalSettings.cefdevtoolsport" ng-model-options="{debounce: 1200}"> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_advanced_reset_config"> </div> <div> <a class="btn btn-danger fullWidth" ng-click="resetConfig()" translate="ui_settings_advanced_reset_config_button"></a> </div> </div> </div> \x3c!--                     <div class="infoTable settingsPlaybackTable">\r\n                        <div>\r\n                            <div style="width: 100%">\r\n                                <a style="width: 100%" class="btn btn-primary">Show console (disabled)</a>\r\n                            </div>\r\n                        </div>\r\n                    </div> --\x3e </div> </div> </uib-tab> \x3c!-- \r\n            Plugins tab\r\n--\x3e <uib-tab heading="{{\'ui_settings_plugins\' | translate}}" ng-if="plugins.length > 0"> <div class="settingsContainer"> <div class="groupBox settingsPluginBox"> \x3c!-- <div class="heading" translate="ui_settings_advanced"></div> --\x3e <div ng-repeat="plugin in plugins" class="settingsPluginRow"> <div class="pluginCheckbox"> <checkbox cb-checked="plugin.state.enabled"></checkbox> </div> <div class="pluginSettings"> <a ng-if="plugin.options.length > 0" ng-click="editPluginSettings(plugin)"><span class="fas fa-cog"></span></a> </div> <div class="pluginInfo"> <div> <span>{{plugin.name}}</span> <span class="pull-right" ng-class="{\'successText\':plugin.status, \'warningText\':!plugin.status}"> {{plugin.status ? \'ui_settings_plugins_status_loaded\' : \'ui_settings_plugins_status_not_loaded\' | translate}} </span> </div> <div ng-if="plugin.description" class="pluginDescriptionText"> {{plugin.description | translate}} </div> <div class="pull-right pluginFileName pluginInfoText"> {{plugin.file}} </div> </div> </div> </div> <div class="groupBox settingsPluginOptionsBox"> <div class="heading" translate="ui_settings_plugins_options"></div> <div class="settingsGeneralSlider"> <div class="infoTableLabel" style="flex:1"> <span translate="ui_settings_plugins_options_delay_load"></span> <a class="pull-right" style="padding-right:10px" ng-click="showPluginDelayHelp($event)"><span class="fas fa-question"></span></a> </div> <input type="number" onclick="this.select()" style="outline:none;width:100px" ng-model="generalSettings.plugindelay" ng-model-options="{debounce: 300}" spellcheck="false"> <div class="infoTableLabel" style="padding: 0 0 0 10px;flex:0" translate="ui_settings_plugins_options_delay_load_seconds"></div> </div> </div> </div> </uib-tab> \x3c!--         \r\n        About tab\r\n --\x3e <uib-tab heading="{{\'ui_settings_about\' | translate}}"> <div class="settingsAbout"> <div class="settingsAboutCopyright"> <div>Wallpaper Engine &copy; 2016-2020 Kristjan Skutta. {{\'ui_settings_copyright\' | translate}}</div> <div>The Wallpaper Engine Team is Kristjan Skutta &amp; Tim Eulitz</div> <div>Build {{buildVersion}} <a ng-click="showChangelog()"> <span translate="ui_settings_about_changelog"></span></a> </div> <div> <a ng-click="openFaq()"> <span class="fas fa-question"></span> <span translate="ui_settings_about_faq"></span> </a> </div> <div> <a ng-click="sendSupportMail()"> <span class="fas fa-envelope"></span> <span translate="support_email"></span> </a> </div> </div> <div class="groupBox" style="margin-top: 20px; flex: 1 1 auto; display: flex;"> <div class="heading" translate="ui_settings_thirdparty"></div> <div style="overflow-y:auto" ng-include="\'views/includes/thirdpartynotices.html\'"></div> </div> </div> </uib-tab> </uib-tabset> </div> <div class="footer footerButtons"> <div class="left"> </div> <div class="right"> <a class="btn btn-primary" ng-click="callbackOk()"> <span ng-if="generalState.isRestartRequired" class="fas fa-exclamation-triangle warningText"></span> <span translate="ui_ok"></span> </a> <a class="btn btn-default" ng-click="callbackCancel()" translate="ui_cancel"></a> </div> </div> </div> '),e.put("views/views/welcome.html",'<div class="welcomeDialogRoot"> <div class="welcomeTitle"> <h3 translate="ui_welcome_header"></h3> \x3c!-- <img src="images/wp_logo.png"> --\x3e </div> <div class="welcomeBody container-fluid"> <div class="page container-fluid" ng-class="{\'past\': page > 0}" ng-show="page===0||lastPage===0"> <div class="row"> <div class="col-xs-12" translate="ui_welcome_intro"></div> </div> <div class="row" style="margin-top: 10px;"> <div class="col-xs-5" translate="ui_welcome_preferred_language"></div> <div class="col-xs-7"> <droplist class="welcomeLanguageDropList" dp-options="availableLanguages" dp-selected="generalSettings.language"></droplist> </div> </div> <div class="row"> <div class="col-xs-12 text-center" style="pointer-events: none;"> <div class="wpAnim"> <img class="offset" src="images/wp_logo_blue_outer_rect.png"> <img class="spin" src="images/wp_logo_blue_inner_rect.png"> </div> </div> </div> </div> <div class="page welcomeDialogOptions" ng-class="{\'past\': page > 1, \'future\': page < 1}" ng-show="page===1||lastPage===1"> <div class="col-xs-12"> <span class="wdLabel" translate="ui_welcome_quality_body"></span> <br> <br> <div class="row wdRow"> <div class="col-xs-5" translate="ui_welcome_quality_column_header"></div> <div class="col-xs-7"> <div class="btn-group"> <a class="btn btn-primary wdQualityButton" uib-btn-radio="\'low\'" ng-model="qualityPreset"><span translate="ui_settings_gfx_preset_low"></span></a> <a class="btn btn-primary wdQualityButton" uib-btn-radio="\'medium\'" ng-model="qualityPreset"><span translate="ui_settings_gfx_preset_medium"></span></a> <a class="btn btn-primary wdQualityButton" uib-btn-radio="\'high\'" ng-model="qualityPreset"><span translate="ui_settings_gfx_preset_high"></span></a> </div> </div> </div> <br> <div class="row"> <div class="col-xs-5" translate="ui_welcome_quality_description_header"> </div> <div class="col-xs-7 wdLabel"> <div class="row"> <div class="col-xs-6" translate="ui_welcome_quality_fps_limit"></div> <div class="col-xs-6">{{generalSettings.fps}}</div> </div> <div class="row"> <div class="col-xs-6" translate="ui_welcome_quality_anti_aliasing"></div> <div class="col-xs-6">MSAA {{generalSettings.msaa}}</div> </div> <div class="row"> <div class="col-xs-6" translate="ui_welcome_quality_bloom"></div> <div class="col-xs-6">{{generalSettings.bloom ? \'ui_settings_gfx_enabled\' : \'ui_settings_gfx_disabled\' | translate}}</div> </div> <div class="row"> <div class="col-xs-6" translate="ui_welcome_quality_reflections"></div> <div class="col-xs-6">{{generalSettings.reflection ? \'ui_settings_gfx_enabled\' : \'ui_settings_gfx_disabled\' | translate}}</div> </div> </div> </div> <br> <span class="wdLabel" translate="ui_welcome_use_led_effects_description" ng-if="led.visible"></span> <br> <div class="row wdRow" ng-if="led.visible"> <div class="col-xs-5" translate="ui_welcome_use_led_effects" ng-click="led.enabled=!led.enabled"></div> <div class="col-xs-7"> <checkbox cb-checked="led.enabled"></checkbox> </div> </div> </div> </div> <div class="page welcomeDialogOptions" ng-class="{\'past\': page > 2, \'future\': page < 2}" ng-show="page===2||lastPage===2"> <div class="col-xs-12"> <div class="wdAutoBorder"> <span class="wdLabel" translate="ui_welcome_autostart_description"></span> <br> <div class="row wdRow"> <div class="col-xs-5" translate="ui_welcome_autostart_label"></div> <div class="col-xs-7"> <div class="wdAutoStart"> <checkbox cb-checked="generalSettings.autostart" cb-changed="toggleAutoStartRegistry(generalSettings.autostart)" cb-title="\'\'" cb-disabled="generalSettings.autostartscheduler" ng-show="!generalSettings.autostartscheduler"></checkbox> <a class="btn btn-primary" ng-class="{\'btn-success\':generalSettings.autostartscheduler}" ng-click="generalSettings.autostart&&toggleAutoStartScheduler(!generalSettings.autostartscheduler)" ng-disabled="!generalSettings.autostart"><img src="images/uac_small.png"> {{generalSettings.autostartscheduler ? \'ui_settings_remove_service\' : \'ui_settings_register_service\' | translate}}</a> </div> </div> </div> </div> <br> <br> <span class="wdLabel" translate="ui_welcome_windows_color_description"></span> <br> <div class="row wdRow"> <div class="col-xs-5" translate="ui_welcome_windows_color_header"></div> <div class="col-xs-7"> <checkbox ng-if="!isWindows10OrGreater" cb-title="\'\'" cb-checked="dwmColorSettings.adjustdwmcolor"></checkbox> <droplist ng-if="isWindows10OrGreater" dp-options="adjustDWMColorModes" dp-selected="dwmColorSettings.adjustdwmcolormode"></droplist> </div> </div> <br> <br> <span class="wdLabel" translate="ui_welcome_use_dark_theme_description"></span> <br> <div class="row wdRow"> <div class="col-xs-5" translate="ui_welcome_use_dark_theme" ng-click="useDarkSkin=!useDarkSkin"></div> <div class="col-xs-7"> <checkbox cb-checked="useDarkSkin"></checkbox> </div> </div> </div> </div> <div class="page welcomeDialogOptions" ng-class="{\'past\': page > 3, \'future\': page < 3}" ng-show="page===3||lastPage===3"> <div class="col-xs-12"> <span translate="ui_welcome_finish_body"></span> <div class="text-center"> <img src="images/tray_example.png"> </div> </div> </div> </div> <div class="welcomeFooter container-fluid"> <div class="row"> <div class="col-xs-12 text-center"> <a class="navigationDot" ng-class="{\'active\':page===0}" ng-click="page=0"></a> <a class="navigationDot" ng-class="{\'active\':page===1}" ng-click="page=1"></a> <a class="navigationDot" ng-class="{\'active\':page===2}" ng-click="page=2"></a> <a class="navigationDot" ng-class="{\'active\':page===3}" ng-click="page=3"></a> </div> </div> <div style="display: flex;"> <div style="flex-grow: 1"> <div style="padding-top: 4px" ng-show="page===3"> <checkbox cb-checked="showBrowseWallpapers" cb-title="\'ui_welcome_browse_wallpapers_now\'"></checkbox> </div> </div> <div> <a class="btn btn-primary buttonParent btn-lg pull-right" ng-click="advancePage()"> <div class="buttonFade" ng-show="page===0"><span translate="ui_welcome_button_first_page"></span> <span class="glyphicon pull-right glyphicon-chevron-right"></span></div> <div class="buttonFade" ng-show="page!==0&&page!==3"><span translate="ui_welcome_button_next_page"></span> <span class="glyphicon pull-right glyphicon-chevron-right"></span></div> <div class="buttonFade" ng-show="page===3"> <span translate="ui_welcome_button_last_page"></span> <span class="fas pull-right fa-check" style="position:relative;top:2px;"></span></div> </a> </div> </div> </div> </div> ')}]);